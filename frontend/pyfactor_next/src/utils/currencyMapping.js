// Country to Currency Mapping
// ISO 3166-1 alpha-2 country codes to ISO 4217 currency codes
// Industry standard mapping used by financial institutions

export const COUNTRY_TO_CURRENCY = {
  // A
  'AD': { code: 'EUR', symbol: '€', name: 'Euro' },
  'AE': { code: 'AED', symbol: 'د.إ', name: 'UAE Dirham' },
  'AF': { code: 'AFN', symbol: '؋', name: 'Afghani' },
  'AG': { code: 'XCD', symbol: '$', name: 'East Caribbean Dollar' },
  'AI': { code: 'XCD', symbol: '$', name: 'East Caribbean Dollar' },
  'AL': { code: 'ALL', symbol: 'L', name: 'Lek' },
  'AM': { code: 'AMD', symbol: '֏', name: 'Armenian Dram' },
  'AO': { code: 'AOA', symbol: 'Kz', name: 'Kwanza' },
  'AR': { code: 'ARS', symbol: '$', name: 'Argentine Peso' },
  'AS': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'AT': { code: 'EUR', symbol: '€', name: 'Euro' },
  'AU': { code: 'AUD', symbol: '$', name: 'Australian Dollar' },
  'AW': { code: 'AWG', symbol: 'ƒ', name: 'Aruban Florin' },
  'AX': { code: 'EUR', symbol: '€', name: 'Euro' },
  'AZ': { code: 'AZN', symbol: '₼', name: 'Azerbaijan Manat' },
  
  // B
  'BA': { code: 'BAM', symbol: 'KM', name: 'Convertible Mark' },
  'BB': { code: 'BBD', symbol: '$', name: 'Barbados Dollar' },
  'BD': { code: 'BDT', symbol: '৳', name: 'Taka' },
  'BE': { code: 'EUR', symbol: '€', name: 'Euro' },
  'BF': { code: 'XOF', symbol: 'CFA', name: 'CFA Franc BCEAO' },
  'BG': { code: 'BGN', symbol: 'лв', name: 'Bulgarian Lev' },
  'BH': { code: 'BHD', symbol: '.د.ب', name: 'Bahraini Dinar' },
  'BI': { code: 'BIF', symbol: 'FBu', name: 'Burundi Franc' },
  'BJ': { code: 'XOF', symbol: 'CFA', name: 'CFA Franc BCEAO' },
  'BL': { code: 'EUR', symbol: '€', name: 'Euro' },
  'BM': { code: 'BMD', symbol: '$', name: 'Bermudian Dollar' },
  'BN': { code: 'BND', symbol: '$', name: 'Brunei Dollar' },
  'BO': { code: 'BOB', symbol: 'Bs.', name: 'Boliviano' },
  'BQ': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'BR': { code: 'BRL', symbol: 'R$', name: 'Brazilian Real' },
  'BS': { code: 'BSD', symbol: '$', name: 'Bahamian Dollar' },
  'BT': { code: 'BTN', symbol: 'Nu.', name: 'Ngultrum' },
  'BW': { code: 'BWP', symbol: 'P', name: 'Pula' },
  'BY': { code: 'BYN', symbol: 'Br', name: 'Belarusian Ruble' },
  'BZ': { code: 'BZD', symbol: '$', name: 'Belize Dollar' },
  
  // C
  'CA': { code: 'CAD', symbol: '$', name: 'Canadian Dollar' },
  'CC': { code: 'AUD', symbol: '$', name: 'Australian Dollar' },
  'CD': { code: 'CDF', symbol: 'FC', name: 'Congolese Franc' },
  'CF': { code: 'XAF', symbol: 'FCFA', name: 'CFA Franc BEAC' },
  'CG': { code: 'XAF', symbol: 'FCFA', name: 'CFA Franc BEAC' },
  'CH': { code: 'CHF', symbol: 'CHF', name: 'Swiss Franc' },
  'CI': { code: 'XOF', symbol: 'CFA', name: 'CFA Franc BCEAO' },
  'CK': { code: 'NZD', symbol: '$', name: 'New Zealand Dollar' },
  'CL': { code: 'CLP', symbol: '$', name: 'Chilean Peso' },
  'CM': { code: 'XAF', symbol: 'FCFA', name: 'CFA Franc BEAC' },
  'CN': { code: 'CNY', symbol: '¥', name: 'Yuan Renminbi' },
  'CO': { code: 'COP', symbol: '$', name: 'Colombian Peso' },
  'CR': { code: 'CRC', symbol: '₡', name: 'Costa Rican Colon' },
  'CU': { code: 'CUP', symbol: '₱', name: 'Cuban Peso' },
  'CV': { code: 'CVE', symbol: '$', name: 'Cape Verde Escudo' },
  'CW': { code: 'ANG', symbol: 'ƒ', name: 'Netherlands Antillean Guilder' },
  'CX': { code: 'AUD', symbol: '$', name: 'Australian Dollar' },
  'CY': { code: 'EUR', symbol: '€', name: 'Euro' },
  'CZ': { code: 'CZK', symbol: 'Kč', name: 'Czech Koruna' },
  
  // D
  'DE': { code: 'EUR', symbol: '€', name: 'Euro' },
  'DJ': { code: 'DJF', symbol: 'Fdj', name: 'Djibouti Franc' },
  'DK': { code: 'DKK', symbol: 'kr', name: 'Danish Krone' },
  'DM': { code: 'XCD', symbol: '$', name: 'East Caribbean Dollar' },
  'DO': { code: 'DOP', symbol: 'RD$', name: 'Dominican Peso' },
  'DZ': { code: 'DZD', symbol: 'د.ج', name: 'Algerian Dinar' },
  
  // E
  'EC': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'EE': { code: 'EUR', symbol: '€', name: 'Euro' },
  'EG': { code: 'EGP', symbol: '£', name: 'Egyptian Pound' },
  'EH': { code: 'MAD', symbol: 'د.م.', name: 'Moroccan Dirham' },
  'ER': { code: 'ERN', symbol: 'Nfk', name: 'Nakfa' },
  'ES': { code: 'EUR', symbol: '€', name: 'Euro' },
  'ET': { code: 'ETB', symbol: 'Br', name: 'Ethiopian Birr' },
  
  // F
  'FI': { code: 'EUR', symbol: '€', name: 'Euro' },
  'FJ': { code: 'FJD', symbol: '$', name: 'Fiji Dollar' },
  'FK': { code: 'FKP', symbol: '£', name: 'Falkland Islands Pound' },
  'FM': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'FO': { code: 'DKK', symbol: 'kr', name: 'Danish Krone' },
  'FR': { code: 'EUR', symbol: '€', name: 'Euro' },
  
  // G
  'GA': { code: 'XAF', symbol: 'FCFA', name: 'CFA Franc BEAC' },
  'GB': { code: 'GBP', symbol: '£', name: 'Pound Sterling' },
  'GD': { code: 'XCD', symbol: '$', name: 'East Caribbean Dollar' },
  'GE': { code: 'GEL', symbol: '₾', name: 'Lari' },
  'GF': { code: 'EUR', symbol: '€', name: 'Euro' },
  'GG': { code: 'GBP', symbol: '£', name: 'Pound Sterling' },
  'GH': { code: 'GHS', symbol: '₵', name: 'Ghana Cedi' },
  'GI': { code: 'GIP', symbol: '£', name: 'Gibraltar Pound' },
  'GL': { code: 'DKK', symbol: 'kr', name: 'Danish Krone' },
  'GM': { code: 'GMD', symbol: 'D', name: 'Dalasi' },
  'GN': { code: 'GNF', symbol: 'FG', name: 'Guinean Franc' },
  'GP': { code: 'EUR', symbol: '€', name: 'Euro' },
  'GQ': { code: 'XAF', symbol: 'FCFA', name: 'CFA Franc BEAC' },
  'GR': { code: 'EUR', symbol: '€', name: 'Euro' },
  'GT': { code: 'GTQ', symbol: 'Q', name: 'Quetzal' },
  'GU': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'GW': { code: 'XOF', symbol: 'CFA', name: 'CFA Franc BCEAO' },
  'GY': { code: 'GYD', symbol: '$', name: 'Guyana Dollar' },
  
  // H
  'HK': { code: 'HKD', symbol: '$', name: 'Hong Kong Dollar' },
  'HN': { code: 'HNL', symbol: 'L', name: 'Lempira' },
  'HR': { code: 'HRK', symbol: 'kn', name: 'Croatian Kuna' },
  'HT': { code: 'HTG', symbol: 'G', name: 'Gourde' },
  'HU': { code: 'HUF', symbol: 'Ft', name: 'Forint' },
  
  // I
  'ID': { code: 'IDR', symbol: 'Rp', name: 'Rupiah' },
  'IE': { code: 'EUR', symbol: '€', name: 'Euro' },
  'IL': { code: 'ILS', symbol: '₪', name: 'New Israeli Sheqel' },
  'IM': { code: 'GBP', symbol: '£', name: 'Pound Sterling' },
  'IN': { code: 'INR', symbol: '₹', name: 'Indian Rupee' },
  'IO': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'IQ': { code: 'IQD', symbol: 'ع.د', name: 'Iraqi Dinar' },
  'IR': { code: 'IRR', symbol: '﷼', name: 'Iranian Rial' },
  'IS': { code: 'ISK', symbol: 'kr', name: 'Iceland Krona' },
  'IT': { code: 'EUR', symbol: '€', name: 'Euro' },
  
  // J
  'JE': { code: 'GBP', symbol: '£', name: 'Pound Sterling' },
  'JM': { code: 'JMD', symbol: '$', name: 'Jamaican Dollar' },
  'JO': { code: 'JOD', symbol: 'د.ا', name: 'Jordanian Dinar' },
  'JP': { code: 'JPY', symbol: '¥', name: 'Yen' },
  
  // K
  'KE': { code: 'KES', symbol: 'KSh', name: 'Kenyan Shilling' },
  'KG': { code: 'KGS', symbol: 'лв', name: 'Som' },
  'KH': { code: 'KHR', symbol: '៛', name: 'Riel' },
  'KI': { code: 'AUD', symbol: '$', name: 'Australian Dollar' },
  'KM': { code: 'KMF', symbol: 'CF', name: 'Comorian Franc' },
  'KN': { code: 'XCD', symbol: '$', name: 'East Caribbean Dollar' },
  'KP': { code: 'KPW', symbol: '₩', name: 'North Korean Won' },
  'KR': { code: 'KRW', symbol: '₩', name: 'Won' },
  'KW': { code: 'KWD', symbol: 'د.ك', name: 'Kuwaiti Dinar' },
  'KY': { code: 'KYD', symbol: '$', name: 'Cayman Islands Dollar' },
  'KZ': { code: 'KZT', symbol: '₸', name: 'Tenge' },
  
  // L
  'LA': { code: 'LAK', symbol: '₭', name: 'Lao Kip' },
  'LB': { code: 'LBP', symbol: 'ل.ل', name: 'Lebanese Pound' },
  'LC': { code: 'XCD', symbol: '$', name: 'East Caribbean Dollar' },
  'LI': { code: 'CHF', symbol: 'CHF', name: 'Swiss Franc' },
  'LK': { code: 'LKR', symbol: 'Rs', name: 'Sri Lanka Rupee' },
  'LR': { code: 'LRD', symbol: '$', name: 'Liberian Dollar' },
  'LS': { code: 'LSL', symbol: 'L', name: 'Loti' },
  'LT': { code: 'EUR', symbol: '€', name: 'Euro' },
  'LU': { code: 'EUR', symbol: '€', name: 'Euro' },
  'LV': { code: 'EUR', symbol: '€', name: 'Euro' },
  'LY': { code: 'LYD', symbol: 'ل.د', name: 'Libyan Dinar' },
  
  // M
  'MA': { code: 'MAD', symbol: 'د.م.', name: 'Moroccan Dirham' },
  'MC': { code: 'EUR', symbol: '€', name: 'Euro' },
  'MD': { code: 'MDL', symbol: 'L', name: 'Moldovan Leu' },
  'ME': { code: 'EUR', symbol: '€', name: 'Euro' },
  'MF': { code: 'EUR', symbol: '€', name: 'Euro' },
  'MG': { code: 'MGA', symbol: 'Ar', name: 'Malagasy Ariary' },
  'MH': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'MK': { code: 'MKD', symbol: 'ден', name: 'Denar' },
  'ML': { code: 'XOF', symbol: 'CFA', name: 'CFA Franc BCEAO' },
  'MM': { code: 'MMK', symbol: 'Ks', name: 'Kyat' },
  'MN': { code: 'MNT', symbol: '₮', name: 'Tugrik' },
  'MO': { code: 'MOP', symbol: 'P', name: 'Pataca' },
  'MP': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'MQ': { code: 'EUR', symbol: '€', name: 'Euro' },
  'MR': { code: 'MRU', symbol: 'UM', name: 'Ouguiya' },
  'MS': { code: 'XCD', symbol: '$', name: 'East Caribbean Dollar' },
  'MT': { code: 'EUR', symbol: '€', name: 'Euro' },
  'MU': { code: 'MUR', symbol: '₨', name: 'Mauritius Rupee' },
  'MV': { code: 'MVR', symbol: '.ރ', name: 'Rufiyaa' },
  'MW': { code: 'MWK', symbol: 'MK', name: 'Malawi Kwacha' },
  'MX': { code: 'MXN', symbol: '$', name: 'Mexican Peso' },
  'MY': { code: 'MYR', symbol: 'RM', name: 'Malaysian Ringgit' },
  'MZ': { code: 'MZN', symbol: 'MT', name: 'Mozambique Metical' },
  
  // N
  'NA': { code: 'NAD', symbol: '$', name: 'Namibia Dollar' },
  'NC': { code: 'XPF', symbol: 'F', name: 'CFP Franc' },
  'NE': { code: 'XOF', symbol: 'CFA', name: 'CFA Franc BCEAO' },
  'NF': { code: 'AUD', symbol: '$', name: 'Australian Dollar' },
  'NG': { code: 'NGN', symbol: '₦', name: 'Naira' },
  'NI': { code: 'NIO', symbol: 'C$', name: 'Cordoba Oro' },
  'NL': { code: 'EUR', symbol: '€', name: 'Euro' },
  'NO': { code: 'NOK', symbol: 'kr', name: 'Norwegian Krone' },
  'NP': { code: 'NPR', symbol: '₨', name: 'Nepalese Rupee' },
  'NR': { code: 'AUD', symbol: '$', name: 'Australian Dollar' },
  'NU': { code: 'NZD', symbol: '$', name: 'New Zealand Dollar' },
  'NZ': { code: 'NZD', symbol: '$', name: 'New Zealand Dollar' },
  
  // O
  'OM': { code: 'OMR', symbol: '﷼', name: 'Rial Omani' },
  
  // P
  'PA': { code: 'PAB', symbol: 'B/.', name: 'Balboa' },
  'PE': { code: 'PEN', symbol: 'S/', name: 'Sol' },
  'PF': { code: 'XPF', symbol: 'F', name: 'CFP Franc' },
  'PG': { code: 'PGK', symbol: 'K', name: 'Kina' },
  'PH': { code: 'PHP', symbol: '₱', name: 'Philippine Peso' },
  'PK': { code: 'PKR', symbol: '₨', name: 'Pakistan Rupee' },
  'PL': { code: 'PLN', symbol: 'zł', name: 'Zloty' },
  'PM': { code: 'EUR', symbol: '€', name: 'Euro' },
  'PN': { code: 'NZD', symbol: '$', name: 'New Zealand Dollar' },
  'PR': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'PS': { code: 'ILS', symbol: '₪', name: 'New Israeli Sheqel' },
  'PT': { code: 'EUR', symbol: '€', name: 'Euro' },
  'PW': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'PY': { code: 'PYG', symbol: 'Gs', name: 'Guarani' },
  
  // Q
  'QA': { code: 'QAR', symbol: '﷼', name: 'Qatari Rial' },
  
  // R
  'RE': { code: 'EUR', symbol: '€', name: 'Euro' },
  'RO': { code: 'RON', symbol: 'lei', name: 'Romanian Leu' },
  'RS': { code: 'RSD', symbol: 'Дин.', name: 'Serbian Dinar' },
  'RU': { code: 'RUB', symbol: '₽', name: 'Russian Ruble' },
  'RW': { code: 'RWF', symbol: 'FRw', name: 'Rwanda Franc' },
  
  // S
  'SA': { code: 'SAR', symbol: '﷼', name: 'Saudi Riyal' },
  'SB': { code: 'SBD', symbol: '$', name: 'Solomon Islands Dollar' },
  'SC': { code: 'SCR', symbol: '₨', name: 'Seychelles Rupee' },
  'SD': { code: 'SDG', symbol: 'ج.س.', name: 'Sudanese Pound' },
  'SE': { code: 'SEK', symbol: 'kr', name: 'Swedish Krona' },
  'SG': { code: 'SGD', symbol: '$', name: 'Singapore Dollar' },
  'SH': { code: 'SHP', symbol: '£', name: 'Saint Helena Pound' },
  'SI': { code: 'EUR', symbol: '€', name: 'Euro' },
  'SK': { code: 'EUR', symbol: '€', name: 'Euro' },
  'SL': { code: 'SLL', symbol: 'Le', name: 'Leone' },
  'SM': { code: 'EUR', symbol: '€', name: 'Euro' },
  'SN': { code: 'XOF', symbol: 'CFA', name: 'CFA Franc BCEAO' },
  'SO': { code: 'SOS', symbol: 'S', name: 'Somali Shilling' },
  'SR': { code: 'SRD', symbol: '$', name: 'Surinam Dollar' },
  'SS': { code: 'SSP', symbol: 'SSP', name: 'South Sudanese Pound' },
  'ST': { code: 'STN', symbol: 'Db', name: 'Dobra' },
  'SV': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'SX': { code: 'ANG', symbol: 'ƒ', name: 'Netherlands Antillean Guilder' },
  'SY': { code: 'SYP', symbol: '£', name: 'Syrian Pound' },
  'SZ': { code: 'SZL', symbol: 'L', name: 'Lilangeni' },
  
  // T
  'TC': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'TD': { code: 'XAF', symbol: 'FCFA', name: 'CFA Franc BEAC' },
  'TG': { code: 'XOF', symbol: 'CFA', name: 'CFA Franc BCEAO' },
  'TH': { code: 'THB', symbol: '฿', name: 'Baht' },
  'TJ': { code: 'TJS', symbol: 'ЅМ', name: 'Somoni' },
  'TK': { code: 'NZD', symbol: '$', name: 'New Zealand Dollar' },
  'TL': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'TM': { code: 'TMT', symbol: 'T', name: 'Turkmenistan New Manat' },
  'TN': { code: 'TND', symbol: 'د.ت', name: 'Tunisian Dinar' },
  'TO': { code: 'TOP', symbol: 'T$', name: "Pa'anga" },
  'TR': { code: 'TRY', symbol: '₺', name: 'Turkish Lira' },
  'TT': { code: 'TTD', symbol: 'TT$', name: 'Trinidad and Tobago Dollar' },
  'TV': { code: 'AUD', symbol: '$', name: 'Australian Dollar' },
  'TW': { code: 'TWD', symbol: 'NT$', name: 'New Taiwan Dollar' },
  'TZ': { code: 'TZS', symbol: 'TSh', name: 'Tanzanian Shilling' },
  
  // U
  'UA': { code: 'UAH', symbol: '₴', name: 'Hryvnia' },
  'UG': { code: 'UGX', symbol: 'USh', name: 'Uganda Shilling' },
  'UK': { code: 'GBP', symbol: '£', name: 'Pound Sterling' },
  'US': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'UY': { code: 'UYU', symbol: '$U', name: 'Peso Uruguayo' },
  'UZ': { code: 'UZS', symbol: 'лв', name: 'Uzbekistan Sum' },
  
  // V
  'VA': { code: 'EUR', symbol: '€', name: 'Euro' },
  'VC': { code: 'XCD', symbol: '$', name: 'East Caribbean Dollar' },
  'VE': { code: 'VES', symbol: 'Bs', name: 'Bolívar' },
  'VG': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'VI': { code: 'USD', symbol: '$', name: 'US Dollar' },
  'VN': { code: 'VND', symbol: '₫', name: 'Dong' },
  'VU': { code: 'VUV', symbol: 'VT', name: 'Vatu' },
  
  // W
  'WF': { code: 'XPF', symbol: 'F', name: 'CFP Franc' },
  'WS': { code: 'WST', symbol: 'WS$', name: 'Tala' },
  
  // Y
  'YE': { code: 'YER', symbol: '﷼', name: 'Yemeni Rial' },
  'YT': { code: 'EUR', symbol: '€', name: 'Euro' },
  
  // Z
  'ZA': { code: 'ZAR', symbol: 'R', name: 'Rand' },
  'ZM': { code: 'ZMW', symbol: 'ZK', name: 'Zambian Kwacha' },
  'ZW': { code: 'ZWL', symbol: '$', name: 'Zimbabwe Dollar' }
};

// Get currency for a country code
export const getCurrencyForCountry = (countryCode) => {
  if (!countryCode) return COUNTRY_TO_CURRENCY['US']; // Default to USD
  
  const upperCode = countryCode.toUpperCase();
  const currency = COUNTRY_TO_CURRENCY[upperCode];
  
  if (!currency) {
    console.warn(`🔸 [Currency] No currency mapping for country: ${countryCode}, defaulting to USD`);
    return COUNTRY_TO_CURRENCY['US'];
  }
  
  console.log(`💰 [Currency] Country ${upperCode} → ${currency.code} (${currency.symbol})`);
  return currency;
};

// Format amount with currency
export const formatCurrency = (amount, currencyCode = 'USD', locale = 'en-US') => {
  try {
    // Find currency details
    const currencyInfo = Object.values(COUNTRY_TO_CURRENCY).find(c => c.code === currencyCode);
    
    if (!currencyInfo) {
      console.warn(`🔸 [Currency] Unknown currency code: ${currencyCode}, using symbol display`);
      return `${currencyCode} ${amount.toFixed(2)}`;
    }
    
    // For most currencies, use Intl.NumberFormat
    try {
      return new Intl.NumberFormat(locale, {
        style: 'currency',
        currency: currencyCode,
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }).format(amount);
    } catch (e) {
      // Fallback for unsupported currencies
      return `${currencyInfo.symbol}${amount.toFixed(2)}`;
    }
  } catch (error) {
    console.error('🔴 [Currency] Formatting error:', error);
    return `${amount.toFixed(2)}`;
  }
};

// Get all unique currencies
export const getAllCurrencies = () => {
  const uniqueCurrencies = {};
  
  Object.values(COUNTRY_TO_CURRENCY).forEach(currency => {
    if (!uniqueCurrencies[currency.code]) {
      uniqueCurrencies[currency.code] = currency;
    }
  });
  
  return Object.values(uniqueCurrencies).sort((a, b) => a.code.localeCompare(b.code));
};

// Get currency symbol
export const getCurrencySymbol = (currencyCode) => {
  const currency = Object.values(COUNTRY_TO_CURRENCY).find(c => c.code === currencyCode);
  return currency ? currency.symbol : currencyCode;
};

// Default export
export default {
  COUNTRY_TO_CURRENCY,
  getCurrencyForCountry,
  formatCurrency,
  getAllCurrencies,
  getCurrencySymbol
};