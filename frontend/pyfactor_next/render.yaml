services:
  - type: web
    name: dott-front
    runtime: docker
    region: oregon
    dockerfilePath: Dockerfile
    dockerContext: frontend/pyfactor_next
    envVars:
      - key: NODE_ENV
        value: production
      - key: NODE_OPTIONS
        value: --max-old-space-size=3584
      - key: PORT
        value: 3000
    buildCommand: npm run build:render
    startCommand: npm run start
    healthCheckPath: /api/health
    headers:
      - path: /*
        name: X-Frame-Options
        value: SAMEORIGIN
      - path: /_next/static/*
        name: Cache-Control
        value: public, max-age=31536000, immutable
