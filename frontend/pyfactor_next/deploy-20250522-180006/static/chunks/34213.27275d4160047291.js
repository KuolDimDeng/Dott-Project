"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32060,34213],{32060:(e,t,a)=>{a.r(t),a.d(t,{ArcElement:()=>p,BarController:()=>s,BarElement:()=>y,BubbleController:()=>o,CategoryScale:()=>g,Chart:()=>n,DoughnutController:()=>c,Filler:()=>C,Legend:()=>_,LineController:()=>r,LineElement:()=>h,LinearScale:()=>b,PieController:()=>d,PointElement:()=>f,PolarAreaController:()=>i,RadarController:()=>l,RadialLinearScale:()=>j,Scale:()=>x,ScatterController:()=>u,TimeScale:()=>v,Title:()=>w,Tooltip:()=>N,default:()=>S,register:()=>m,registerables:()=>k});class n{destroy(){}update(){}render(){}stop(){}resize(){}clear(){}toBase64Image(){return""}getElementsAtEventForMode(){return[]}getDatasetMeta(){return{}}constructor(){this.type="line",this.data={},this.options={}}}let r={id:"line",defaults:{}},s={id:"bar",defaults:{}},l={id:"radar",defaults:{}},c={id:"doughnut",defaults:{}},i={id:"polarArea",defaults:{}},o={id:"bubble",defaults:{}},d={id:"pie",defaults:{}},u={id:"scatter",defaults:{}};function m(){}let x={extend:()=>{}},p={id:"arc",defaults:{}},h={id:"line",defaults:{}},y={id:"bar",defaults:{}},f={id:"point",defaults:{}},g={id:"category",defaults:{}},b={id:"linear",defaults:{}},j={id:"radialLinear",defaults:{}},v={id:"time",defaults:{}},N={id:"tooltip",defaults:{},positioners:{}},_={id:"legend",defaults:{}},w={id:"title",defaults:{}},C={id:"filler",defaults:{}},k=[p,h,y,f,g,b,j,v,N,_,w],S=n},34213:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var n=a(55166),r=a(68387),s=a(36465),l=a(95155),c=a(12115),i=a(80561),o=a(29729);function d(e){let{children:t,value:a,index:c}=e,i=(0,s._)(e,["children","value","index"]);return(0,l.jsx)("div",(0,r._)((0,n._)({role:"tabpanel",hidden:a!==c,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c)},i),{children:a===c&&(0,l.jsx)("div",{className:"p-6",children:(0,l.jsx)("div",{children:t})})}))}a(87449);let u=()=>{let[e,t]=(0,c.useState)(0),[a,s]=(0,c.useState)([]),[u,m]=(0,c.useState)([]),[x,p]=(0,c.useState)(null),[h,y]=(0,c.useState)({transaction_type:"",entity_from:"",entity_to:"",amount:"",currency:"",converted_amount:"",exchange_rate:"",date:"",document_reference:"",reconciliation_status:"",transfer_pricing:"",notes:""});(0,c.useEffect)(()=>{f(),g()},[]);let f=async()=>{try{let e=await o.SP.get("/api/finance/intercompany-transactions/");s(e.data)}catch(e){console.error("Error fetching intercompany transactions:",e)}},g=async()=>{try{let e=await o.SP.get("/api/finance/intercompany-accounts/");m(e.data)}catch(e){console.error("Error fetching intercompany accounts:",e)}},b=e=>{t(e)},j=e=>{y((0,r._)((0,n._)({},h),{[e.target.name]:e.target.value}))},v=async e=>{e.preventDefault();try{x?await o.SP.put("/api/finance/intercompany-transactions/".concat(x.transaction_id,"/"),h):await o.SP.post("/api/finance/intercompany-transactions/",h),f(),y({transaction_type:"",entity_from:"",entity_to:"",amount:"",currency:"",converted_amount:"",exchange_rate:"",date:"",document_reference:"",reconciliation_status:"",transfer_pricing:"",notes:""}),p(null),t(1)}catch(e){console.error("Error saving intercompany transaction:",e)}},N=e=>{p(e),y(e),t(0)},_=async e=>{if(window.confirm("Are you sure you want to delete this transaction?"))try{await o.SP.delete("/api/finance/intercompany-transactions/".concat(e,"/")),f()}catch(e){console.error("Error deleting intercompany transaction:",e)}};return(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{className:"border-b border-gray-200",children:(0,l.jsxs)("nav",{className:"flex -mb-px",children:[(0,l.jsx)("button",{className:"py-2 px-4 font-medium text-sm mr-2 ".concat(0===e?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>b(0),children:"Create/Edit Transaction"}),(0,l.jsx)("button",{className:"py-2 px-4 font-medium text-sm mr-2 ".concat(1===e?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>b(1),children:"Transaction List"}),(0,l.jsx)("button",{className:"py-2 px-4 font-medium text-sm mr-2 ".concat(2===e?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>b(2),children:"Transaction Analysis"}),(0,l.jsx)("button",{className:"py-2 px-4 font-medium text-sm ".concat(3===e?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>b(3),children:"Account Balances"})]})}),(0,l.jsx)(d,{value:e,index:0,children:(0,l.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"transaction_type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Transaction Type"}),(0,l.jsxs)("select",{id:"transaction_type",name:"transaction_type",value:h.transaction_type,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"Select Transaction Type"}),(0,l.jsx)("option",{value:"sale",children:"Sale"}),(0,l.jsx)("option",{value:"purchase",children:"Purchase"}),(0,l.jsx)("option",{value:"loan",children:"Loan"}),(0,l.jsx)("option",{value:"asset_transfer",children:"Asset Transfer"}),(0,l.jsx)("option",{value:"service",children:"Service"}),(0,l.jsx)("option",{value:"cost_allocation",children:"Cost Allocation"})]})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"entity_from",className:"block text-sm font-medium text-gray-700 mb-1",children:"From Entity"}),(0,l.jsx)("input",{type:"text",id:"entity_from",name:"entity_from",value:h.entity_from,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"entity_to",className:"block text-sm font-medium text-gray-700 mb-1",children:"To Entity"}),(0,l.jsx)("input",{type:"text",id:"entity_to",name:"entity_to",value:h.entity_to,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,l.jsx)("input",{type:"number",id:"amount",name:"amount",value:h.amount,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"currency",className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,l.jsx)("input",{type:"text",id:"currency",name:"currency",value:h.currency,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"converted_amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Converted Amount"}),(0,l.jsx)("input",{type:"number",id:"converted_amount",name:"converted_amount",value:h.converted_amount,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"exchange_rate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Exchange Rate"}),(0,l.jsx)("input",{type:"number",id:"exchange_rate",name:"exchange_rate",value:h.exchange_rate,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,l.jsx)("input",{type:"date",id:"date",name:"date",value:h.date,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"document_reference",className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Reference"}),(0,l.jsx)("input",{type:"text",id:"document_reference",name:"document_reference",value:h.document_reference,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"reconciliation_status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reconciliation Status"}),(0,l.jsxs)("select",{id:"reconciliation_status",name:"reconciliation_status",value:h.reconciliation_status,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"Select Status"}),(0,l.jsx)("option",{value:"unmatched",children:"Unmatched"}),(0,l.jsx)("option",{value:"matched",children:"Matched"}),(0,l.jsx)("option",{value:"pending",children:"Pending"})]})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"transfer_pricing",className:"block text-sm font-medium text-gray-700 mb-1",children:"Transfer Pricing"}),(0,l.jsx)("textarea",{id:"transfer_pricing",name:"transfer_pricing",value:h.transfer_pricing,onChange:j,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,l.jsx)("textarea",{id:"notes",name:"notes",value:h.notes,onChange:j,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:x?"Update Transaction":"Create Transaction"})]})}),(0,l.jsx)(d,{value:e,index:1,children:(0,l.jsx)("div",{className:"overflow-x-auto shadow-md rounded-lg",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"From"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"To"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.transaction_id}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap capitalize",children:e.transaction_type}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.entity_from}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.entity_to}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:"".concat(e.amount," ").concat(e.currency)}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.date}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap capitalize",children:e.reconciliation_status}),(0,l.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,l.jsx)("button",{onClick:()=>N(e),className:"text-blue-600 hover:text-blue-900 mr-2",children:"Edit"}),(0,l.jsx)("button",{onClick:()=>_(e.transaction_id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.transaction_id))})]})})}),(0,l.jsxs)(d,{value:e,index:2,children:[(0,l.jsx)("h6",{className:"text-lg font-medium mb-4",children:"Transaction Volume by Type"}),(0,l.jsx)("div",{className:"h-96",children:(()=>{let e={labels:["Sales","Purchases","Loans","Asset Transfers","Services","Cost Allocations"],datasets:[{label:"Transaction Volume",data:[a.filter(e=>"sale"===e.transaction_type).length,a.filter(e=>"purchase"===e.transaction_type).length,a.filter(e=>"loan"===e.transaction_type).length,a.filter(e=>"asset_transfer"===e.transaction_type).length,a.filter(e=>"service"===e.transaction_type).length,a.filter(e=>"cost_allocation"===e.transaction_type).length],backgroundColor:"rgba(75,192,192,0.6)"}]};return(0,l.jsx)(i.yP,{data:e,options:{scales:{y:{beginAtZero:!0,title:{display:!0,text:"Number of Transactions"}}}}})})()})]}),(0,l.jsxs)(d,{value:e,index:3,children:[(0,l.jsx)("h6",{className:"text-lg font-medium mb-4",children:"Intercompany Account Balances"}),(0,l.jsx)("div",{className:"overflow-x-auto shadow-md rounded-lg",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Name"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Type"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entity"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.name}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.account_type}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.entity}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.balance})]},e.id))})]})})]})]})}},80561:(e,t,a)=>{a.d(t,{Fq:()=>u,N1:()=>i,nu:()=>d,yP:()=>o});var n=a(55166),r=a(36465),s=a(95155);a(12115);var l=a(32060);let c=e=>{var{type:t,height:a="300px",width:n="100%"}=e;return(0,r._)(e,["type","height","width"]),(0,s.jsx)("div",{style:{height:a,width:n,backgroundColor:"#f5f5f5",border:"1px solid #ddd",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsxs)("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:[t.charAt(0).toUpperCase()+t.slice(1)," Chart"]}),(0,s.jsx)("div",{style:{fontSize:"0.8rem",color:"#666"},children:"(Chart rendering disabled)"})]})})},i=e=>(0,s.jsx)(c,(0,n._)({type:"line"},e)),o=e=>(0,s.jsx)(c,(0,n._)({type:"bar"},e)),d=e=>(0,s.jsx)(c,(0,n._)({type:"doughnut"},e)),u=e=>(0,s.jsx)(c,(0,n._)({type:"pie"},e));e=>(0,s.jsx)(c,(0,n._)({type:"radar"},e)),l.default}}]);