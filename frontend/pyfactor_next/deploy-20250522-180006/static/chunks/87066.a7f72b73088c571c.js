"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87066],{87066:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(55166),r=s(68387),d=s(95155),o=s(12115),i=s(29729);let l=()=>{let[e,t]=(0,o.useState)([]),[s,l]=(0,o.useState)([]),[n,c]=(0,o.useState)({payPeriod:"",department:"",employeeType:""}),[m,x]=(0,o.useState)(""),[p,g]=(0,o.useState)("");(0,o.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await i.SP.get("/api/departments/");Array.isArray(e.data)?l(e.data):(console.warn("Departments API did not return an array:",e.data),l([]))}catch(e){console.error("Error fetching departments:",e),l([])}},y=async()=>{try{let e=await i.SP.get("/api/payroll/report/",{params:(0,r._)((0,a._)({},n),{startDate:m,endDate:p})});t(e.data)}catch(e){console.error("Error fetching payroll data:",e)}},u=e=>{let{name:t,value:s}=e.target;c(e=>(0,r._)((0,a._)({},e),{[t]:s}))},f=e=>{console.log("Exporting report as ".concat(e))};return(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Payroll Report"}),(0,d.jsxs)("div",{className:"bg-white p-4 mb-6 rounded-lg shadow-md",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-center",children:[(0,d.jsxs)("div",{className:"md:col-span-1",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,d.jsx)("input",{type:"date",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:m,onChange:e=>x(e.target.value)})]}),(0,d.jsxs)("div",{className:"md:col-span-1",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,d.jsx)("input",{type:"date",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:p,onChange:e=>g(e.target.value)})]}),(0,d.jsxs)("div",{className:"md:col-span-1",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,d.jsxs)("select",{name:"department",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:n.department,onChange:u,children:[(0,d.jsx)("option",{value:"",children:"All Departments"}),Array.isArray(s)&&s.map(e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,d.jsxs)("div",{className:"md:col-span-1",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee Type"}),(0,d.jsxs)("select",{name:"employeeType",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:n.employeeType,onChange:u,children:[(0,d.jsx)("option",{value:"",children:"All Employee Types"}),(0,d.jsx)("option",{value:"fullTime",children:"Full-Time"}),(0,d.jsx)("option",{value:"partTime",children:"Part-Time"}),(0,d.jsx)("option",{value:"contract",children:"Contract"})]})]}),(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1 opacity-0",children:"Generate"}),(0,d.jsx)("button",{className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:()=>{y()},children:"Generate Report"})]})]}),(0,d.jsxs)("div",{className:"mt-4 flex space-x-4",children:[(0,d.jsxs)("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:()=>f("PDF"),children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2 -ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export PDF"]}),(0,d.jsxs)("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:()=>f("CSV"),children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2 -ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})]})]}),(0,d.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee Name"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gross Pay"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deductions"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Pay"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"YTD Gross"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"YTD Deductions"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"YTD Net"})]})}),(0,d.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length>0?e.map(e=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.name}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.employeeId}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["$",(e.grossPay||0).toFixed(2)]}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["$",(e.deductions||0).toFixed(2)]}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["$",(e.netPay||0).toFixed(2)]}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["$",(e.ytdGross||0).toFixed(2)]}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["$",(e.ytdDeductions||0).toFixed(2)]}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["$",(e.ytdNet||0).toFixed(2)]})]},e.id)):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"8",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No payroll data available. Please select a date range and generate the report."})})})]})})}),(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mt-6",children:[(0,d.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Summary Totals"}),(0,d.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(!e||0===e.length?{grossPay:0,deductions:0,netPay:0,ytdGross:0,ytdDeductions:0,ytdNet:0}:e.reduce((e,t)=>({grossPay:e.grossPay+(t.grossPay||0),deductions:e.deductions+(t.deductions||0),netPay:e.netPay+(t.netPay||0),ytdGross:e.ytdGross+(t.ytdGross||0),ytdDeductions:e.ytdDeductions+(t.ytdDeductions||0),ytdNet:e.ytdNet+(t.ytdNet||0)}),{grossPay:0,deductions:0,netPay:0,ytdGross:0,ytdDeductions:0,ytdNet:0})).map(e=>{let[t,s]=e;return(0,d.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,d.jsx)("p",{className:"text-sm text-gray-500",children:t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}),(0,d.jsxs)("p",{className:"text-lg font-semibold",children:["$",s.toFixed(2)]})]},t)})})]})]})}}}]);