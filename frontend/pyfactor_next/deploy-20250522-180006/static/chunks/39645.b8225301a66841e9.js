"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39645],{10557:(e,a,s)=>{s.d(a,{A:()=>d});var t=s(70911),r=s(13980),l=s(47632);function d(e,a){(0,l.A)(2,arguments);var s=(0,r.A)(e),d=(0,t.A)(a);return isNaN(d)?new Date(NaN):(d&&s.setDate(s.getDate()+d),s)}},14729:(e,a,s)=>{s.d(a,{VV:()=>t});let t=()=>new Promise((e,a)=>{if(window.Stripe)return void e();let s=document.createElement("script");s.src="https://js.stripe.com/v3/",s.async=!0,s.onload=()=>e(),s.onerror=()=>a(Error("Failed to load Stripe.js")),document.body.appendChild(s)})},39645:(e,a,s)=>{s.r(a),s.d(a,{default:()=>x});var t=s(55166),r=s(68387),l=s(95155),d=s(12115),c=s(29729),n=s(87449),i=s(90306),o=s(10557),m=s(14729);s(66352);var u=s(49509);let x=e=>{let{initialTab:a="run-payroll"}=e,[s,x]=(0,d.useState)(a),[h,y]=(0,d.useState)(null),[b,p]=(0,d.useState)(null),[g,f]=(0,d.useState)(""),[j,N]=(0,d.useState)([]),[v,w]=(0,d.useState)(""),[S,k]=(0,d.useState)(!1),[_,A]=(0,d.useState)(null),[P,C]=(0,d.useState)(!1),[D,I]=(0,d.useState)([]),[E,T]=(0,d.useState)([]),[M,R]=(0,d.useState)(!1),F=(0,n.d)(),[B,W]=(0,d.useState)(null),[z,X]=(0,d.useState)(null),[U,$]=(0,d.useState)("monthly"),[L,G]=(0,d.useState)(null),[V,q]=(0,d.useState)([]),[O,Y]=(0,d.useState)(""),[J,K]=(0,d.useState)(""),[H,Z]=(0,d.useState)(!1),[Q,ee]=(0,d.useState)(null),[ea,es]=(0,d.useState)([]),[et,er]=(0,d.useState)({ein:"",stateId:"",countrySpecificIds:{}}),[el,ed]=(0,d.useState)(""),[ec,en]=(0,d.useState)("");(0,d.useEffect)(()=>{c.SP.defaults.headers.common["X-Data-Source"]="AWS_RDS",ei(),eu(),ex(),eh(),em()},[]),(0,d.useEffect)(()=>{el&&(ey(el),eo())},[el]);let ei=async()=>{try{let e=await c.SP.get("/api/auth/business-attributes/");e.data&&e.data.country?ed(e.data.country):ed("US")}catch(e){console.error("Error fetching business country:",e),ed("US")}},eo=async()=>{try{let e=await c.SP.get("/api/payroll/settings/");if(e.data){let a=e.data;a.taxInfo&&er(a.taxInfo),a.authorizedUsers&&Array.isArray(a.authorizedUsers)&&es(a.authorizedUsers),a.payrollAdmin&&en(a.payrollAdmin),a.payPeriodType&&$(a.payPeriodType)}}catch(e){console.error("Error fetching payroll settings:",e)}},em=async()=>{try{let e=await c.SP.get("/api/payroll/scheduled-runs/",{headers:{"X-Data-Source":"AWS_RDS"}});e.data&&Array.isArray(e.data)?q(e.data):(console.warn("Scheduled payrolls API did not return an array:",e.data),q([]))}catch(e){F.error("Error fetching scheduled payrolls from AWS RDS"),console.error("Error fetching scheduled payrolls:",e),q([])}},eu=async()=>{try{let e=await c.SP.get("/api/payroll/pay-periods/",{headers:{"X-Data-Source":"AWS_RDS"}});W(e.data.last_pay_period),X(e.data.next_pay_period)}catch(e){F.error("Error fetching pay periods from AWS RDS"),console.error("Error fetching pay periods:",e)}},ex=async()=>{try{let e=await c.SP.get("/api/banking/accounts/",{headers:{"X-Data-Source":"AWS_RDS"}});e.data.accounts&&Array.isArray(e.data.accounts)?N(e.data.accounts):(F.info("No connected bank accounts found in AWS RDS"),N([]))}catch(e){F.error("Error fetching connected accounts from AWS RDS"),console.error("Error fetching connected accounts:",e)}},eh=async()=>{try{let e=await c.SP.get("/api/hr/employees/",{headers:{"X-Data-Source":"AWS_RDS"}});if(e.data&&Array.isArray(e.data)){let a=e.data.map(e=>(0,r._)((0,t._)({},e),{lastPayPeriod:e.lastPayPeriod||"N/A"}));I(a),T([])}else console.warn("Employees API did not return an array:",e.data),I([]),T([])}catch(e){F.error("Error fetching employees from AWS RDS"),console.error("Error fetching employees:",e),I([]),T([])}},ey=async e=>{if(e)try{let a=await c.SP.get("/api/taxes/currency-info/".concat(e,"/"),{headers:{"X-Data-Source":"AWS_RDS"}});ee(a.data)}catch(e){console.error("Error fetching currency info from AWS RDS:",e)}},eb=async()=>{C(!0);try{let e=await c.SP.post("/api/payroll/calculate/",{start_date:h?(0,i.A)(h,"yyyy-MM-dd"):null,end_date:b?(0,i.A)(b,"yyyy-MM-dd"):null,accounting_period:g,account_id:v,employee_ids:E,pay_period_type:U,bi_weekly_start_date:L?(0,i.A)(L,"yyyy-MM-dd"):null},{headers:{"X-Data-Source":"AWS_RDS"}});A(e.data),k(!0)}catch(s){var e,a;F.error("Error calculating payroll from AWS RDS: ".concat((null==(a=s.response)||null==(e=a.data)?void 0:e.detail)||s.message))}finally{C(!1)}},ep=async()=>{C(!0);try{let e=(await c.SP.post("/api/payroll/run/",{start_date:h?(0,i.A)(h,"yyyy-MM-dd"):null,end_date:b?(0,i.A)(b,"yyyy-MM-dd"):null,accounting_period:g,account_id:v,employee_ids:E,pay_period_type:U,bi_weekly_start_date:L?(0,i.A)(L,"yyyy-MM-dd"):null})).data.id;await eg(e),k(!1),F.success("Payroll run successfully initiated"),em()}catch(t){var e,a;let s=(null==(a=t.response)||null==(e=a.data)?void 0:e.detail)||t.message||"Error running payroll";F.error(s),console.error("Error running payroll:",t)}finally{C(!1)}},eg=async e=>{try{await (0,m.VV)();let a=await c.SP.post("/api/payments/create-payroll-intent",{payroll_run_id:e,account_id:v});if(!a.data||!a.data.clientSecret)throw Error("Failed to create payment intent");let{clientSecret:s,stripeAccountId:t}=a.data,r=window.Stripe(u.env.NEXT_PUBLIC_STRIPE_KEY,{stripeAccount:t}),{error:l,paymentIntent:d}=await r.confirmPayment({clientSecret:s,confirmParams:{return_url:"".concat(window.location.origin,"/dashboard/payroll/confirmation")},redirect:"if_required"});if(l)throw Error(l.message);if("succeeded"===d.status||"processing"===d.status)return await c.SP.patch("/api/payroll/run/".concat(e,"/"),{payment_status:d.status,stripe_payment_id:d.id}),!0;throw Error("Payment status: ".concat(d.status))}catch(a){if(console.error("Stripe payment error:",a),e)try{await c.SP.patch("/api/payroll/run/".concat(e,"/"),{payment_status:"failed",payment_error:a.message})}catch(e){console.error("Error updating payment status:",e)}throw a}},ef=e=>{T(a=>{let s=a.includes(e)?a.filter(a=>a!==e):[...a,e];return R(s.length===D.length),s})},ej=(e,a)=>{let s=e.target.value?new Date(e.target.value):null;"start"===a?y(s):p(s),f("")},eN=e=>{$(e),f(""),y(null),p(null),G(null)};return(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)("div",{className:"mr-2 text-blue-600",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Payroll Management"})]}),(0,l.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,l.jsxs)("ul",{className:"flex flex-wrap -mb-px text-sm font-medium text-center",children:[(0,l.jsx)("li",{className:"mr-2",children:(0,l.jsx)("button",{onClick:()=>x("run-payroll"),className:"inline-block p-4 rounded-t-lg ".concat("run-payroll"===s?"text-blue-600 border-b-2 border-blue-600 active":"border-b-2 border-transparent hover:text-gray-600 hover:border-gray-300"),children:"Run Payroll"})}),(0,l.jsx)("li",{className:"mr-2",children:(0,l.jsx)("button",{onClick:()=>x("payroll-settings"),className:"inline-block p-4 rounded-t-lg ".concat("payroll-settings"===s?"text-blue-600 border-b-2 border-blue-600 active":"border-b-2 border-transparent hover:text-gray-600 hover:border-gray-300"),children:"Payroll Settings"})})]})}),"run-payroll"===s?(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"Run payroll and manage payments for your employees."}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Scheduled Payrolls"}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.isArray(V)&&V.length>0?V.map((e,a)=>(0,l.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[(0,l.jsx)("h3",{className:"font-semibold",children:e.name}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(e.date).toLocaleDateString()]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Employees: ",e.employeeCount]})]},a)):(0,l.jsx)("p",{className:"text-gray-500",children:"No scheduled payrolls found"})})]}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Connected Bank Accounts"}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:j.length>0?j.map(e=>{var a,s;return(0,l.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[(0,l.jsx)("h3",{className:"font-semibold",children:e.name}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Balance: $",(null==(s=e.balances)||null==(a=s.current)?void 0:a.toFixed(2))||"N/A"]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Account: ",e.mask?"****".concat(e.mask):"N/A"]}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)("button",{onClick:()=>w(e.account_id),className:"px-3 py-1 text-xs rounded ".concat(v===e.account_id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:v===e.account_id?"Selected":"Select"})})]},e.account_id)}):(0,l.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,l.jsx)("p",{className:"text-gray-500",children:"No connected bank accounts found. Please connect an account first."}),(0,l.jsx)("button",{className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Connect a Bank Account"})]})})]}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Select Pay Period"}),(0,l.jsxs)("div",{className:"grid gap-6 mb-6 md:grid-cols-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:"Pay Period Type"}),(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"radio",id:"monthly",name:"payPeriodType",value:"monthly",checked:"monthly"===U,onChange:()=>eN("monthly"),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300"}),(0,l.jsx)("label",{htmlFor:"monthly",className:"ml-2 text-sm font-medium text-gray-900",children:"Monthly"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"radio",id:"biweekly",name:"payPeriodType",value:"biweekly",checked:"biweekly"===U,onChange:()=>eN("biweekly"),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300"}),(0,l.jsx)("label",{htmlFor:"biweekly",className:"ml-2 text-sm font-medium text-gray-900",children:"Bi-Weekly"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"radio",id:"custom",name:"payPeriodType",value:"custom",checked:"custom"===U,onChange:()=>eN("custom"),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300"}),(0,l.jsx)("label",{htmlFor:"custom",className:"ml-2 text-sm font-medium text-gray-900",children:"Custom Period"})]})]})]}),"monthly"===U&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:"Accounting Period"}),(0,l.jsxs)("select",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",value:g,onChange:e=>{f(e.target.value),y(null),p(null)},children:[(0,l.jsx)("option",{value:"",children:"Select a period"}),(()=>{let e=new Date().getFullYear(),a=[];for(let s=0;s<12;s++)a.unshift("".concat(e,"-").concat(String(s+1).padStart(2,"0")));return a})().map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),"biweekly"===U&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:"Bi-Weekly Start Date"}),(0,l.jsx)("input",{type:"date",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",value:L?(0,i.A)(L,"yyyy-MM-dd"):"",onChange:e=>G(e.target.value?new Date(e.target.value):null)}),L&&(0,l.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["End Date: ",(0,i.A)((0,o.A)(L,13),"yyyy-MM-dd")]})]}),"custom"===U&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:"Start Date"}),(0,l.jsx)("input",{type:"date",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",value:h?(0,i.A)(h,"yyyy-MM-dd"):"",onChange:e=>ej(e,"start")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:"End Date"}),(0,l.jsx)("input",{type:"date",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",value:b?(0,i.A)(b,"yyyy-MM-dd"):"",onChange:e=>ej(e,"end")})]})]})]})]}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Select Employees"}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)("label",{className:"inline-flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-600",checked:M,onChange:e=>{R(e.target.checked),e.target.checked?T(D.map(e=>e.id)):T([])}}),(0,l.jsx)("span",{className:"ml-2 text-gray-700",children:"Select All"})]})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full bg-white",children:[(0,l.jsx)("thead",{className:"bg-gray-100",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Select"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Name"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"ID"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Department"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Position"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Last Pay Period"})]})}),(0,l.jsx)("tbody",{children:D.map(e=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"py-2 px-4 border-b",children:(0,l.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-600",checked:E.includes(e.id),onChange:()=>ef(e.id)})}),(0,l.jsx)("td",{className:"py-2 px-4 border-b",children:e.name}),(0,l.jsx)("td",{className:"py-2 px-4 border-b",children:e.employeeId||"N/A"}),(0,l.jsx)("td",{className:"py-2 px-4 border-b",children:e.department||"N/A"}),(0,l.jsx)("td",{className:"py-2 px-4 border-b",children:e.position||"N/A"}),(0,l.jsx)("td",{className:"py-2 px-4 border-b",children:e.lastPayPeriod})]},e.id))})]})})]}),(0,l.jsx)("div",{className:"flex justify-center mt-6",children:(0,l.jsx)("button",{onClick:eb,disabled:P||!v||0===E.length||!h&&!b&&!g&&!L,className:"px-6 py-3 rounded-md text-white font-medium ".concat(!P&&v&&0!==E.length&&(h||b||g||L)?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"),children:P?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Calculate Payroll"})}),S&&_&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-screen overflow-y-auto",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Payroll Summary"}),(0,l.jsx)("p",{className:"mb-4",children:"Please review the payroll details before confirming:"}),(0,l.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Pay Period:"}),(0,l.jsxs)("p",{className:"font-medium",children:[_.pay_period_start," to ",_.pay_period_end]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Total Employees:"}),(0,l.jsx)("p",{className:"font-medium",children:_.employee_count})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Total Gross Pay:"}),(0,l.jsxs)("p",{className:"font-medium",children:["$",_.total_gross.toFixed(2)]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Total Deductions:"}),(0,l.jsxs)("p",{className:"font-medium",children:["$",_.total_deductions.toFixed(2)]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Total Taxes:"}),(0,l.jsxs)("p",{className:"font-medium",children:["$",_.total_taxes.toFixed(2)]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Total Net Pay:"}),(0,l.jsxs)("p",{className:"font-medium",children:["$",_.total_net.toFixed(2)]})]})]})}),(0,l.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,l.jsxs)("table",{className:"min-w-full bg-white",children:[(0,l.jsx)("thead",{className:"bg-gray-100",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"py-2 px-3 border-b text-left text-xs",children:"Employee"}),(0,l.jsx)("th",{className:"py-2 px-3 border-b text-left text-xs",children:"Gross Pay"}),(0,l.jsx)("th",{className:"py-2 px-3 border-b text-left text-xs",children:"Taxes"}),(0,l.jsx)("th",{className:"py-2 px-3 border-b text-left text-xs",children:"Deductions"}),(0,l.jsx)("th",{className:"py-2 px-3 border-b text-left text-xs",children:"Net Pay"})]})}),(0,l.jsx)("tbody",{children:_.employees.map(e=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"py-2 px-3 border-b text-sm",children:e.name}),(0,l.jsxs)("td",{className:"py-2 px-3 border-b text-sm",children:["$",e.gross.toFixed(2)]}),(0,l.jsxs)("td",{className:"py-2 px-3 border-b text-sm",children:["$",e.taxes.toFixed(2)]}),(0,l.jsxs)("td",{className:"py-2 px-3 border-b text-sm",children:["$",e.deductions.toFixed(2)]}),(0,l.jsxs)("td",{className:"py-2 px-3 border-b text-sm",children:["$",e.net.toFixed(2)]})]},e.id))})]})}),(0,l.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,l.jsx)("button",{onClick:()=>k(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100",children:"Cancel"}),(0,l.jsx)("button",{onClick:ep,disabled:P,className:"px-4 py-2 rounded-md text-white ".concat(P?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"),children:P?"Processing...":"Confirm Payroll Run"})]})]})})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"Configure payroll settings and authorizations."}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Payroll Authorizations"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"Designate employees who are authorized to run payroll."}),(0,l.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-4",children:[(0,l.jsx)("h3",{className:"font-medium mb-2",children:"Payroll Administrator"}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"The payroll administrator has full access to all payroll functions and can authorize other users. By default, only the business owner has this privilege."}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Administrator"}),(0,l.jsxs)("div",{className:"flex items-center space-x-3 bg-gray-50 p-3 rounded-md",children:[(0,l.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-700",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:"Business Owner"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Owner privileges cannot be revoked"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delegate Administrative Rights"}),(0,l.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:ec,onChange:e=>en(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Select an employee"}),D.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,l.jsx)("button",{className:"mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>{ec?(F.success("Payroll administrator updated successfully"),es(e=>{if(!e.find(e=>e.id===ec)){let a=D.find(e=>e.id===ec);return[...e,{id:a.id,name:a.name,role:"Admin",isAdmin:!0}]}return e})):F.error("Please select an employee")},children:"Save Administrator"})]})]}),(0,l.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,l.jsx)("h3",{className:"font-medium mb-2",children:"Authorized Payroll Users"}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"These employees can run payroll but cannot change payroll settings."}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",onChange:e=>{if(e.target.value){let a=D.find(a=>a.id===e.target.value);a&&!ea.find(e=>e.id===a.id)&&(es(e=>[...e,{id:a.id,name:a.name,role:"User",isAdmin:!1}]),e.target.value="",F.success("".concat(a.name," added as authorized payroll user")))}},children:[(0,l.jsx)("option",{value:"",children:"Add an employee"}),D.filter(e=>!ea.find(a=>a.id===e.id)).map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})}),ea.length>0?(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full bg-white",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"py-2 px-4 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Name"}),(0,l.jsx)("th",{className:"py-2 px-4 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Role"}),(0,l.jsx)("th",{className:"py-2 px-4 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-200",children:ea.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-4 whitespace-nowrap",children:e.name}),(0,l.jsx)("td",{className:"py-2 px-4 whitespace-nowrap",children:(0,l.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(e.isAdmin?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:e.role})}),(0,l.jsx)("td",{className:"py-2 px-4 whitespace-nowrap text-sm text-gray-500",children:(0,l.jsx)("button",{onClick:()=>{es(a=>a.filter(a=>a.id!==e.id)),F.success("".concat(e.name," removed from authorized users"))},className:"text-red-600 hover:text-red-900",children:"Remove"})})]},e.id))})]})}):(0,l.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No additional authorized users"})]})]}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Tax Information"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"Configure tax IDs and identifiers for payroll processing."}),(0,l.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Country"}),(0,l.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:el,onChange:e=>{ed(e.target.value),er(e=>(0,r._)((0,t._)({},e),{countrySpecificIds:{}}))},children:[(0,l.jsx)("option",{value:"",children:"Select Country"}),(0,l.jsx)("option",{value:"US",children:"United States"}),(0,l.jsx)("option",{value:"CA",children:"Canada"}),(0,l.jsx)("option",{value:"GB",children:"United Kingdom"}),(0,l.jsx)("option",{value:"AU",children:"Australia"}),(0,l.jsx)("option",{value:"DE",children:"Germany"}),(0,l.jsx)("option",{value:"FR",children:"France"}),(0,l.jsx)("option",{value:"JP",children:"Japan"}),(0,l.jsx)("option",{value:"IN",children:"India"}),(0,l.jsx)("option",{value:"BR",children:"Brazil"}),(0,l.jsx)("option",{value:"ZA",children:"South Africa"})]})]})}),"US"===el&&(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Federal Employer Identification Number (EIN)"}),(0,l.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"XX-XXXXXXX",value:et.ein,onChange:e=>er(a=>(0,r._)((0,t._)({},a),{ein:e.target.value}))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State Tax ID"}),(0,l.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"State Tax ID",value:et.stateId,onChange:e=>er(a=>(0,r._)((0,t._)({},a),{stateId:e.target.value}))})]})]}),"CA"===el&&(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Number (BN)"}),(0,l.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Business Number",value:et.countrySpecificIds.bn||"",onChange:e=>er(a=>(0,r._)((0,t._)({},a),{countrySpecificIds:(0,r._)((0,t._)({},a.countrySpecificIds),{bn:e.target.value})}))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Provincial Tax ID"}),(0,l.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Provincial Tax ID",value:et.countrySpecificIds.provincialId||"",onChange:e=>er(a=>(0,r._)((0,t._)({},a),{countrySpecificIds:(0,r._)((0,t._)({},a.countrySpecificIds),{provincialId:e.target.value})}))})]})]}),"GB"===el&&(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PAYE Reference"}),(0,l.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"123/AB12345",value:et.countrySpecificIds.payeRef||"",onChange:e=>er(a=>(0,r._)((0,t._)({},a),{countrySpecificIds:(0,r._)((0,t._)({},a.countrySpecificIds),{payeRef:e.target.value})}))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Accounts Office Reference"}),(0,l.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"123PX00123456",value:et.countrySpecificIds.aoRef||"",onChange:e=>er(a=>(0,r._)((0,t._)({},a),{countrySpecificIds:(0,r._)((0,t._)({},a.countrySpecificIds),{aoRef:e.target.value})}))})]})]}),el&&!["US","CA","GB"].includes(el)&&(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Tax ID"}),(0,l.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Business Tax ID",value:et.countrySpecificIds.businessTaxId||"",onChange:e=>er(a=>(0,r._)((0,t._)({},a),{countrySpecificIds:(0,r._)((0,t._)({},a.countrySpecificIds),{businessTaxId:e.target.value})}))})]})}),(0,l.jsx)("button",{className:"mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>{F.success("Tax information saved successfully")},children:"Save Tax Information"})]})]}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Pay Schedule"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"Configure your default pay schedule and cycle."}),(0,l.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Pay Frequency"}),(0,l.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:U,onChange:e=>$(e.target.value),children:[(0,l.jsx)("option",{value:"weekly",children:"Weekly"}),(0,l.jsx)("option",{value:"biweekly",children:"Bi-Weekly"}),(0,l.jsx)("option",{value:"semimonthly",children:"Semi-Monthly"}),(0,l.jsx)("option",{value:"monthly",children:"Monthly"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pay Day"}),(0,l.jsx)("select",{className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:"monthly"===U?Array.from({length:31},(e,a)=>a+1).map(e=>(0,l.jsx)("option",{value:e,children:e},e)):"biweekly"===U?["Monday","Tuesday","Wednesday","Thursday","Friday"].map(e=>(0,l.jsx)("option",{value:e,children:e},e)):["Monday","Tuesday","Wednesday","Thursday","Friday"].map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]})]}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Settings"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",id:"autorunPayroll",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,l.jsx)("label",{htmlFor:"autorunPayroll",className:"ml-2 block text-sm text-gray-900",children:"Automatically run payroll on schedule (requires admin approval)"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",id:"automaticTaxes",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",defaultChecked:!0}),(0,l.jsx)("label",{htmlFor:"automaticTaxes",className:"ml-2 block text-sm text-gray-900",children:"Automatically calculate taxes and deductions"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",id:"directDeposit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",defaultChecked:!0}),(0,l.jsx)("label",{htmlFor:"directDeposit",className:"ml-2 block text-sm text-gray-900",children:"Use direct deposit for all employees with bank information"})]})]})]}),(0,l.jsx)("button",{className:"mt-6 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>{F.success("Pay schedule saved successfully")},children:"Save Pay Schedule"})]})]})]})]})}}}]);