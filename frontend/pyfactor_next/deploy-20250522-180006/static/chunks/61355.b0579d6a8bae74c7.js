(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[55803,61355,63170],{4582:()=>{},55803:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AnnotationLayer:()=>i,GlobalWorkerOptions:()=>o,LinkTarget:()=>c,PDFWorker:()=>n,RenderingCancelledException:()=>m,SVGGraphics:()=>h,TextLayer:()=>d,build:()=>x,createObjectURL:()=>g,createValidAbsoluteUrl:()=>p,default:()=>s,getDocument:()=>l,renderTextLayer:()=>u,shadow:()=>y,version:()=>b});let a={GlobalWorkerOptions:{workerSrc:"",set workerSrc(value){this._workerSrc=value},get workerSrc(){return this._workerSrc||""}},getDocument:e=>({promise:Promise.resolve({numPages:0,getPage:e=>Promise.resolve({getViewport:e=>{let{scale:t,rotation:r}=e;return{width:800,height:1100,scale:t||1,rotation:r||0,clone:()=>({width:800,height:1100,scale:t||1})}},render:()=>Promise.resolve({promise:Promise.resolve()}),getTextContent:()=>Promise.resolve({items:[],styles:{}}),getAnnotations:()=>Promise.resolve([]),getOperatorList:()=>Promise.resolve({fnArray:[],argsArray:[[]]}),transport:{pageCache:{0:{}},commonObjs:{has:()=>!1,get:()=>({}),resolve:()=>{}},fontCache:{}}}),_transport:{messageHandler:{on:()=>{},off:()=>{}},annotationStorage:{getValue:()=>({}),getAll:()=>({})},cleanup:()=>{}},destroy:()=>Promise.resolve()})}),version:"2.16.105",build:"0000000",PDFWorker:class e{destroy(){return this.destroyed=!0,Promise.resolve()}get promise(){return this._readyCapability.promise}static fromPort(t){return new e}static getWorkerSrc(){return""}constructor(e={}){this.name=e.name||"worker",this.destroyed=!1,this._readyCapability={promise:Promise.resolve()}}},AnnotationLayer:{render:()=>{},update:()=>{}},TextLayer:{render:()=>({cancel:()=>{}}),renderTextLayer:()=>({cancel:()=>{}})},LinkTarget:{NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},createObjectURL:()=>"",createValidAbsoluteUrl:()=>"",shadow:(e,t,r)=>(Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!1}),r),SVGGraphics:class{},RenderingCancelledException:class extends Error{},renderTextLayer:()=>({promise:Promise.resolve(),cancel:()=>{}})},s=new Proxy(a,{get:function(e,t){return void 0===e[t]?"string"==typeof t&&(t.startsWith("get")||t.startsWith("set"))?()=>({}):{}:e[t]}}),o=a.GlobalWorkerOptions,l=a.getDocument,n=a.PDFWorker,i=a.AnnotationLayer,d=a.TextLayer,c=a.LinkTarget,m=a.RenderingCancelledException,u=a.renderTextLayer,g=a.createObjectURL,p=a.createValidAbsoluteUrl,y=a.shadow,h=a.SVGGraphics,b=a.version,x=a.build},56864:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a=r(95155),s=r(12115),o=r(20171),l=r(80021);r(81056);var n=r(81931);r(68773);var i=r(37921),d=r(90306),c=r(55803);function m(e){let{type:t="general"}=e,[c,m]=(0,s.useState)(""),[u,g]=(0,s.useState)(""),[p,y]=(0,s.useState)(""),[h,b]=(0,s.useState)(null),[x,f]=(0,s.useState)(!1),v=async()=>{if(!c||!u||!p)return void i.oR.error("Please select report type and date range");f(!0);try{let e=await o.A.get("/api/reports/",{params:{type:c,start_date:u,end_date:p}});b(e.data),i.oR.success("Report generated successfully")}catch(e){console.error("Error generating report:",e),i.oR.error("Failed to generate report"),"sales"===t?w(c):b(null)}finally{f(!1)}},w=e=>{let t=null,r=u?(0,d.A)(new Date(u),"MM/dd/yyyy"):"",a=p?(0,d.A)(new Date(p),"MM/dd/yyyy"):"",s="".concat(r," - ").concat(a);switch(e){case"sales-by-customer":t={title:"Sales by Customer",dateRange:s,columns:["Customer","Number of Orders","Total Amount","Average Order"],data:[["Acme Corporation",12,"$45,678.90","$3,806.58"],["Globex Industries",8,"$32,456.78","$4,057.10"],["Wayne Enterprises",6,"$28,765.43","$4,794.24"],["Stark Industries",5,"$23,987.65","$4,797.53"],["Umbrella Corporation",4,"$19,876.54","$4,969.14"]],summary:{totalCustomers:5,totalOrders:35,totalSales:"$150,765.30",averageOrderValue:"$4,307.58"}};break;case"sales-by-product":t={title:"Sales by Product",dateRange:s,columns:["Product","Quantity Sold","Total Revenue","Average Price"],data:[["Product A",156,"$15,600.00","$100.00"],["Product B",98,"$14,700.00","$150.00"],["Product C",75,"$22,500.00","$300.00"],["Product D",45,"$13,500.00","$300.00"],["Product E",32,"$9,600.00","$300.00"]],summary:{totalProducts:5,totalQuantity:406,totalRevenue:"$75,900.00",averagePrice:"$186.95"}};break;case"sales-by-service":t={title:"Sales by Service",dateRange:s,columns:["Service","Hours Billed","Total Revenue","Average Rate"],data:[["Consulting",250,"$37,500.00","$150.00/hr"],["Development",320,"$48,000.00","$150.00/hr"],["Design",180,"$22,500.00","$125.00/hr"],["Support",420,"$42,000.00","$100.00/hr"],["Training",150,"$22,500.00","$150.00/hr"]],summary:{totalServices:5,totalHours:1320,totalRevenue:"$172,500.00",averageRate:"$130.68/hr"}};break;case"invoice-aging":t={title:"Invoice Aging Report",dateRange:s,columns:["Customer","Invoice #","Date","Amount","Current","1-30 Days","31-60 Days","61-90 Days",">90 Days"],data:[["Acme Corporation","INV-1001","01/15/2023","$5,678.90","$5,678.90","","","",""],["Globex Industries","INV-1002","12/05/2022","$4,567.89","","$4,567.89","","",""],["Wayne Enterprises","INV-1003","11/20/2022","$6,789.01","","","$6,789.01","",""],["Stark Industries","INV-1004","10/10/2022","$3,456.78","","","","$3,456.78",""],["Umbrella Corporation","INV-1005","09/01/2022","$7,890.12","","","","","$7,890.12"]],summary:{totalInvoices:5,totalAmount:"$28,382.70",current:"$5,678.90","1-30Days":"$4,567.89","31-60Days":"$6,789.01","61-90Days":"$3,456.78",over90Days:"$7,890.12"}};break;default:t={title:"Sales Report",dateRange:s,message:"Sample report data not available for this report type"}}b(t)};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"mb-4 text-2xl font-bold",children:"sales"===t?"Sales Reports":"Reports"}),(0,a.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow-md",children:[(0,a.jsx)("h2",{className:"mb-4 text-lg font-medium",children:"Generate Report"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"reportType",className:"mb-1 block text-sm font-medium text-gray-700",children:"Report Type"}),(0,a.jsxs)("select",{id:"reportType",className:"mt-1 block w-full rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 text-base focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm",value:c,onChange:e=>m(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select Report Type"}),("sales"===t?[{value:"sales-by-customer",label:"Sales by Customer"},{value:"sales-by-product",label:"Sales by Product"},{value:"sales-by-service",label:"Sales by Service"},{value:"invoice-aging",label:"Invoice Aging"},{value:"sales-tax",label:"Sales Tax"},{value:"sales-by-rep",label:"Sales by Representative"},{value:"estimate-conversion",label:"Estimate to Invoice Conversion"}]:[{value:"profit-loss",label:"Profit and Loss"},{value:"balance-sheet",label:"Balance Sheet"},{value:"cash-flow",label:"Cash Flow"},{value:"tax-summary",label:"Tax Summary"}]).map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"startDate",className:"mb-1 block text-sm font-medium text-gray-700",children:"Start Date"}),(0,a.jsx)("input",{type:"date",id:"startDate",className:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm",value:u,onChange:e=>g(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"endDate",className:"mb-1 block text-sm font-medium text-gray-700",children:"End Date"}),(0,a.jsx)("input",{type:"date",id:"endDate",className:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm",value:p,onChange:e=>y(e.target.value)})]})]})]}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)("button",{className:"inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:v,disabled:x,children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"mr-3 -ml-1 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Generate Report"})})]}),h?(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow-md",children:[(0,a.jsx)("h2",{className:"mb-2 text-xl font-semibold",children:h.title}),(0,a.jsx)("p",{className:"mb-4 text-sm text-gray-600",children:h.dateRange}),h.message?(0,a.jsx)("p",{children:h.message}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-6 mt-4 overflow-x-auto rounded-lg border border-gray-200",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsx)("tr",{children:h.columns.map((e,t)=>(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:e.title||e.label},t))})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:h.data.map((e,t)=>(0,a.jsx)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:h.columns.map((t,r)=>(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:"object"==typeof e[t.field]&&null!==e[t.field]?JSON.stringify(e[t.field]):e[t.field]},r))},t))})]})}),h.summary&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-3 text-lg font-medium",children:"Summary"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-4",children:Object.entries(h.summary).map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 p-4",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:t.replace(/([A-Z])/g," $1").replace(/^./,function(e){return e.toUpperCase()})}),(0,a.jsx)("p",{className:"mt-1 text-lg font-semibold",children:r})]},t)})})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>{try{let e=function(e){if(!e)return null;let t=e.close;return e.close=function(){let e=t?t.apply(this):void 0;return this.internal&&this.internal.pages&&(this.internal.pages.length=0),window.gc?window.gc():void 0!==r.g&&r.g.gc&&r.g.gc(),e},e}(new n.default);e.setFontSize(18),e.text(h.title,14,22),e.setFontSize(11),e.text("Generated on: ".concat((0,d.A)(new Date,"yyyy-MM-dd")),14,32),h.dateRange&&e.text("Date Range: ".concat(h.dateRange),14,38);let t=h.columns||[],a=h.data||[],s=Array.isArray(t)?t.map(e=>"string"==typeof e?e:e.title||e.label||""):[],o=a.map(e=>Array.isArray(e)?e:s.map(r=>{var a;let s=e[(null==(a=t.find(e=>(e.title||e.label)===r))?void 0:a.field)||r];return"object"==typeof s&&null!==s?JSON.stringify(s):s||""}));if(e.autoTable({startY:45,head:[s],body:o,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,240]},margin:{top:50},styles:{overflow:"linebreak",cellPadding:3}}),h.summary){let t=e.lastAutoTable.finalY+10;e.setFontSize(14),e.text("Summary",14,t),e.setFontSize(11);let r=t+10;Object.entries(h.summary).forEach(t=>{let[a,s]=t,o=a.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).replace(/([0-9]+)/g," $1");e.text("".concat(o,": ").concat(s),14,r),r+=7})}e.save("".concat(h.title.replace(/\s+/g,"_").toLowerCase(),"_").concat((0,d.A)(new Date,"yyyyMMdd"),".pdf")),i.oR.success("Report exported to PDF")}catch(e){console.error("Error exporting to PDF:",e),i.oR.error("Failed to export to PDF")}},className:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[(0,a.jsx)("svg",{className:"mr-2 -ml-1 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),"Download PDF"]}),(0,a.jsxs)("button",{onClick:()=>{if(!h)return;let e=l.utils.book_new();if(h.message){let t=[[h.title],[h.dateRange],[h.message]],r=l.utils.aoa_to_sheet(t);l.utils.book_append_sheet(e,r,"Report")}else{let t=[h.columns.map(e=>e.title||e.label),...h.data.map(e=>h.columns.map(t=>"object"==typeof e[t.field]&&null!==e[t.field]?JSON.stringify(e[t.field]):e[t.field]))],r=l.utils.aoa_to_sheet(t);if(l.utils.book_append_sheet(e,r,"Report Data"),h.summary){let t=[["Metric","Value"],...Object.entries(h.summary).map(e=>{let[t,r]=e;return[t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),r]})],r=l.utils.aoa_to_sheet(t);l.utils.book_append_sheet(e,r,"Summary")}}let t="".concat(h.title.replace(/\s+/g,"_").toLowerCase(),"_").concat((0,d.A)(new Date,"yyyy-MM-dd"),".xlsx");l.writeFile(e,t)},className:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[(0,a.jsx)("svg",{className:"mr-2 -ml-1 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),"Download CSV"]})]})]})}):null]})}c.default.GlobalWorkerOptions&&(c.default.GlobalWorkerOptions.workerSrc="")},71615:()=>{}}]);