"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32060,82561],{32060:(e,t,a)=>{a.r(t),a.d(t,{ArcElement:()=>g,BarController:()=>s,BarElement:()=>h,BubbleController:()=>o,CategoryScale:()=>f,Chart:()=>l,DoughnutController:()=>i,Filler:()=>C,Legend:()=>w,LineController:()=>r,LineElement:()=>p,LinearScale:()=>y,PieController:()=>c,PointElement:()=>b,PolarAreaController:()=>n,RadarController:()=>d,RadialLinearScale:()=>j,Scale:()=>x,ScatterController:()=>u,TimeScale:()=>v,Title:()=>_,Tooltip:()=>N,default:()=>k,register:()=>m,registerables:()=>A});class l{destroy(){}update(){}render(){}stop(){}resize(){}clear(){}toBase64Image(){return""}getElementsAtEventForMode(){return[]}getDatasetMeta(){return{}}constructor(){this.type="line",this.data={},this.options={}}}let r={id:"line",defaults:{}},s={id:"bar",defaults:{}},d={id:"radar",defaults:{}},i={id:"doughnut",defaults:{}},n={id:"polarArea",defaults:{}},o={id:"bubble",defaults:{}},c={id:"pie",defaults:{}},u={id:"scatter",defaults:{}};function m(){}let x={extend:()=>{}},g={id:"arc",defaults:{}},p={id:"line",defaults:{}},h={id:"bar",defaults:{}},b={id:"point",defaults:{}},f={id:"category",defaults:{}},y={id:"linear",defaults:{}},j={id:"radialLinear",defaults:{}},v={id:"time",defaults:{}},N={id:"tooltip",defaults:{},positioners:{}},w={id:"legend",defaults:{}},_={id:"title",defaults:{}},C={id:"filler",defaults:{}},A=[g,p,h,b,f,y,j,v,N,w,_],k=l},80561:(e,t,a)=>{a.d(t,{Fq:()=>u,N1:()=>n,nu:()=>c,yP:()=>o});var l=a(55166),r=a(36465),s=a(95155);a(12115);var d=a(32060);let i=e=>{var{type:t,height:a="300px",width:l="100%"}=e;return(0,r._)(e,["type","height","width"]),(0,s.jsx)("div",{style:{height:a,width:l,backgroundColor:"#f5f5f5",border:"1px solid #ddd",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsxs)("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:[t.charAt(0).toUpperCase()+t.slice(1)," Chart"]}),(0,s.jsx)("div",{style:{fontSize:"0.8rem",color:"#666"},children:"(Chart rendering disabled)"})]})})},n=e=>(0,s.jsx)(i,(0,l._)({type:"line"},e)),o=e=>(0,s.jsx)(i,(0,l._)({type:"bar"},e)),c=e=>(0,s.jsx)(i,(0,l._)({type:"doughnut"},e)),u=e=>(0,s.jsx)(i,(0,l._)({type:"pie"},e));e=>(0,s.jsx)(i,(0,l._)({type:"radar"},e)),d.default},82561:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var l=a(95155),r=a(12115),s=a(80561),d=a(32060),i=a(29729);d.Chart.register(d.ArcElement,d.Tooltip,d.Legend,d.CategoryScale,d.LinearScale,d.BarElement,d.PointElement,d.LineElement,d.Title);let n=[{value:"1",label:"1 Month"},{value:"3",label:"3 Months"},{value:"6",label:"6 Months"},{value:"12",label:"1 Year"}],o=e=>"number"==typeof e?e.toFixed(2):"N/A",c=(e,t)=>"number"!=typeof e||"number"!=typeof t?"N/A":((t-e)/e*100).toFixed(2)+"%";function u(){let[e,t]=(0,r.useState)("3"),[a,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{u()},[e]);let u=async()=>{try{let t=await i.SP.get("/api/analysis/budget-vs-actual",{params:{time_range:e}});d(t.data)}catch(e){console.error("Error fetching data:",e)}};if(!a)return(0,l.jsx)("p",{className:"text-gray-600 text-lg",children:"Loading..."});let m={labels:a.map(e=>e.account_name),datasets:[{label:"Budgeted",data:a.map(e=>e.budgeted_amount),backgroundColor:"rgba(75, 192, 192, 0.6)"},{label:"Actual",data:a.map(e=>e.actual_amount),backgroundColor:"rgba(255, 99, 132, 0.6)"}]},x={labels:a.map(e=>e.account_name),datasets:[{label:"Variance %",data:a.map(e=>(e.actual_amount-e.budgeted_amount)/e.budgeted_amount*100),fill:!1,borderColor:"rgb(75, 192, 192)",tension:.1}]};return(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Budget vs Actual Analysis"}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("label",{htmlFor:"timeRange",className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Range"}),(0,l.jsx)("select",{id:"timeRange",value:e,onChange:e=>{t(e.target.value)},className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:n.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsx)("div",{className:"mt-8 overflow-x-auto rounded-lg border border-gray-200",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budgeted"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actual"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variance"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variance %"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((e,t)=>{let a=e.actual_amount-e.budgeted_amount,r=a>=0;return(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.account_name}),(0,l.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:["$",o(e.budgeted_amount)]}),(0,l.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:["$",o(e.actual_amount)]}),(0,l.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right ".concat(r?"text-green-600":"text-red-600"),children:["$",o(a)]}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-right ".concat(r?"text-green-600":"text-red-600"),children:c(e.budgeted_amount,e.actual_amount)})]},t)})})]})}),(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between mt-8 gap-6",children:[(0,l.jsxs)("div",{className:"w-full lg:w-1/2",children:[(0,l.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Budget vs Actual Comparison"}),(0,l.jsx)("div",{className:"relative h-80",children:(0,l.jsx)(s.yP,{data:m})})]}),(0,l.jsxs)("div",{className:"w-full lg:w-1/2",children:[(0,l.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Variance Trend"}),(0,l.jsx)("div",{className:"relative h-80",children:(0,l.jsx)(s.N1,{data:x})})]})]})]})}}}]);