"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64148],{30721:(e,s,t)=>{t.d(s,{t:()=>l});var r=t(95155),a=t(12115),i=t(29670);let n={default:3,signin:3,businessInfo:2,dashboard:3};class l extends a.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("Error caught by ErrorBoundary:",e,s),this.setState({errorInfo:s}),this.props.onError&&this.props.onError(e,s)}render(){return this.state.hasError?this.props.fallback||(0,r.jsxs)("div",{className:"error-boundary",children:[(0,r.jsx)("h2",{children:"Something went wrong"}),(0,r.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[(0,r.jsx)("summary",{children:"Error details"}),this.state.error&&this.state.error.toString(),(0,r.jsx)("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]}),this.props.resetButton&&(0,r.jsx)("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"reset-button",children:"Try again"})]}):this.props.children}constructor(e){super(e),this.handleResetState=()=>{try{Object.keys(n).forEach(e=>{!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";(0,i.mm)("".concat(e,"_redirect_count"),"0")}(e)}),(0,i.A6)("signin_attempts"),(0,i.A6)("business_auth_errors"),(0,i.A6)("middleware_redirect_counter"),(0,i.A6)("preventSigninRedirects"),sessionStorage.clear(),localStorage.clear(),this.setState({hasError:!1,error:null,errorInfo:null,resetMessage:"Application state reset successfully. Reloading..."}),setTimeout(()=>{window.location.href="/"},1500)}catch(e){this.setState({resetMessage:"Failed to reset state: ".concat(e.message,". Try reloading manually.")})}},this.state={hasError:!1,error:null,errorInfo:null}}}},64148:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var r=t(95155),a=t(12115),i=t(38637),n=t.n(i),l=t(29729),o=t(42749),c=t(30721),d=t(24139);let m=e=>{let{invoiceId:s,onBackToCustomerDetails:t}=e,[i,n]=(0,a.useState)(null),[m,h]=(0,a.useState)(!0),[u,x]=(0,a.useState)(null),{profileData:p,loading:g,error:j}=(0,d.sb)(),f=null==p?void 0:p.schema_name;return((0,a.useEffect)(()=>{if(!s){x("Invoice ID is required"),h(!1);return}if(!g){if(j){x("Error loading user profile: "+j),h(!1);return}if(!f){o.vF.warn("No user database available from profile, cannot fetch invoice details"),x("User database information not available"),h(!1);return}(async()=>{try{h(!0);let e=await l.SP.get("/api/invoices/".concat(s),{params:{schema_name:f}});n(e.data),h(!1)}catch(e){o.vF.error("Error fetching invoice details:",e),x("Failed to load invoice details"),h(!1)}})()}},[s,f,g,j]),m)?(0,r.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):u?(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("p",{className:"text-red-600 mb-4",children:u}),(0,r.jsxs)("button",{onClick:t,className:"flex items-center text-blue-600 hover:text-blue-800 focus:outline-none",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Customer Details"]})]}):i?(0,r.jsx)(c.t,{children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsx)("div",{className:"mb-4 border-b pb-4",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Invoice Details"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Invoice Number"}),(0,r.jsx)("p",{className:"font-medium",children:i.invoice_num})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Amount"}),(0,r.jsxs)("p",{className:"font-medium",children:["$",i.amount]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Date"}),(0,r.jsx)("p",{className:"font-medium",children:new Date(i.date).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Due Date"}),(0,r.jsx)("p",{className:"font-medium",children:new Date(i.due_date).toLocaleDateString()})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Status"}),(0,r.jsx)("p",{className:"font-medium",children:i.status})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Is Paid"}),(0,r.jsx)("p",{className:"font-medium",children:i.is_paid?(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Yes"}):(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"No"})})]})]})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)("button",{onClick:t,className:"flex items-center text-blue-600 hover:text-blue-800 focus:outline-none",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Customer Details"]})})]})}):(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"No invoice data available."}),(0,r.jsxs)("button",{onClick:t,className:"flex items-center text-blue-600 hover:text-blue-800 focus:outline-none",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Customer Details"]})]})};m.propTypes={invoiceId:n().string.isRequired,onBackToCustomerDetails:n().func.isRequired};let h=m}}]);