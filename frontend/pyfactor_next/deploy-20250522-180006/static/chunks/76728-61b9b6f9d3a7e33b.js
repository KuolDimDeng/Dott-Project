"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76728],{27494:(e,t,r)=>{r.d(t,{$n:()=>c,KZ:()=>o,tg:()=>i});var n=r(42749);let o=()=>"req_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),c=e=>{try{let t=e.split(".")[1];if(!t)throw Error("Invalid token format");let r=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(r).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(n)}catch(e){return n.vF.error("[authUtils] Failed to parse JWT:",e),{}}},s=["/","/index","/home","/auth/signin","/auth/signup","/auth/forgot-password","/auth/reset-password","/auth/verify","/auth/verify-email","/about","/privacy","/terms","/auth/reset","/auth/reset/confirm","/auth/callback","/api/health","/api/public","/api/login","/api/signup","/login","/signup","/reset-password","/onboarding/business-info","/onboarding/subscription","/onboarding/payment","/onboarding/setup"],i=e=>{if("/"===e||""===e||"/index.html"===e)return n.vF.debug("[authUtils] Route ".concat(e," is public (root path)")),!0;if(e.startsWith("/onboarding/"))return n.vF.debug("[authUtils] Route ".concat(e," is treated as public for redirection purposes")),!0;let t=e.endsWith("/")?e.slice(0,-1):e;if(n.vF.debug("[authUtils] Checking if route is public: ".concat(e," (normalized: ").concat(t,")")),s.includes(t))return n.vF.debug("[authUtils] Route ".concat(e," is public (exact match)")),!0;let r=s.some(e=>t===e||t.startsWith(e+"/")&&"/"!==e);return n.vF.debug("[authUtils] Route ".concat(e," is ").concat(r?"public":"private"," (prefix match)")),r}},42749:(e,t,r)=>{r.d(t,{vF:()=>s});let n={debug:0,info:1,warn:2,error:3},o="info",c=()=>!1,s={setLevel(e){void 0!==n[e]&&(o=e)},getLevel:()=>o,debug:(e,t)=>{},info:(e,t)=>{n[o]<=n.info&&(c()?void 0!==t?console.info("[SERVER INFO] ".concat(e),t):console.info("[SERVER INFO] ".concat(e)):void 0!==t?console.info(e,t):console.info(e))},warn:(e,t)=>{n[o]<=n.warn&&(c()?void 0!==t?console.warn("[SERVER WARN] ".concat(e),t):console.warn("[SERVER WARN] ".concat(e)):void 0!==t?console.warn(e,t):console.warn(e))},error:(e,t)=>{n[o]<=n.error&&(c()?void 0!==t?console.error("[SERVER ERROR] ".concat(e),t):console.error("[SERVER ERROR] ".concat(e)):void 0!==t?console.error(e,t):console.error(e))}}},51313:(e,t,r)=>{r.d(t,{jo:()=>n}),r(55166),r(68387),r(42749),r(27494);let n={NOT_STARTED:"not_started",BUSINESS_INFO:"business_info",SUBSCRIPTION:"subscription",PAYMENT:"payment",SETUP:"setup",COMPLETE:"complete"}},99944:(e,t,r)=>{r.d(t,{Hu:()=>g,V4:()=>i,YR:()=>h,_X:()=>u,cD:()=>p,dA:()=>m,of:()=>E,qp:()=>_,zz:()=>f});var n=r(11024),o=r(52584),c=r(29670),s=r(42749);let i={LANGUAGE:"custom:language",THEME:"custom:theme",BUSINESS_NAME:"custom:businessname",BUSINESS_TYPE:"custom:businesstype",TENANT_ID:"custom:tenant_ID",UI_SCALE:"custom:ui_scale",UI_DENSITY:"custom:ui_density",SIDEBAR_COLLAPSED:"custom:sidebar_collapsed",ONBOARDING_STATUS:"custom:onboarding",ONBOARDING_STEP:"custom:onboarding_step",SUBSCRIPTION_PLAN:"custom:subscription",PREFERENCES_MIGRATED:"custom:preferences_migrated",UI_PREFERENCES_MIGRATED:"custom:ui_preferences_migrated",COOKIE_CONSENT:"custom:cookie_consent",ANALYTICS_CONSENT:"custom:analytics_consent",MARKETING_CONSENT:"custom:marketing_consent"};async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!e)throw Error("Preference key is required");let r="user_pref_".concat(e),o=(0,c.gd)(r);if(void 0!==o)return o;let s=(await (0,n.T)())[e]||t;return null!==s&&(0,c.mm)(r,s,{ttl:2592e6}),s}catch(r){return s.vF.error('[userPreferences] Error getting preference "'.concat(e,'":'),r),t}}async function u(e,t){try{if(!e)throw Error("Preference key is required");if(!e.startsWith("custom:"))throw Error('Preference key must start with "custom:"');let r="user_pref_".concat(e);return(0,c.mm)(r,t,{ttl:2592e6}),await (0,o.u)({userAttributes:{[e]:null!=t?String(t):""}}),s.vF.debug("[userPreferences] Preference saved: ".concat(e,"=").concat(t)),!0}catch(t){return s.vF.error('[userPreferences] Error saving preference "'.concat(e,'":'),t),!1}}async function l(e){try{if(!e||0===Object.keys(e).length)throw Error("Preferences object is required");let t={};return Object.entries(e).forEach(e=>{let[r,n]=e,o=r.startsWith("custom:")?r:"custom:".concat(r);t[o]=null!=n?String(n):"",(0,c.mm)("user_pref_".concat(o),n,{ttl:2592e6})}),await (0,o.u)({userAttributes:t}),s.vF.debug("[userPreferences] Multiple preferences saved: ".concat(Object.keys(e).join(", "))),!0}catch(e){return s.vF.error("[userPreferences] Error saving multiple preferences:",e),!1}}async function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"system";return a(i.THEME,e)}async function E(e){return u(i.THEME,e)}async function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return a(i.LANGUAGE,e)}async function g(e){return u(i.LANGUAGE,e)}async function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not_started";return a(i.ONBOARDING_STATUS,e)}async function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"business_info";return a(i.ONBOARDING_STEP,e)}async function m(e){let t={};return e.status&&(t[i.ONBOARDING_STATUS]=e.status),e.step&&(t[i.ONBOARDING_STEP]=e.step),l(t)}function _(){return{name:"cognitoDetector",lookup:async function(){try{let e=(0,c.gd)("user_pref_".concat(i.LANGUAGE));if(e)return e;let t=await d();if(t)return t;if("undefined"!=typeof localStorage){let e=localStorage.getItem("i18nextLng");if(e)return g(e).then(()=>{(0,c.mm)("user_pref_".concat(i.LANGUAGE),e)}).catch(e=>{s.vF.error("[i18n] Error saving migrated language preference:",e)}),e}return null}catch(e){return s.vF.error("[i18n] Error in Cognito language detector:",e),null}},cacheUserLanguage:function(e){g(e).then(()=>{(0,c.mm)("user_pref_".concat(i.LANGUAGE),e)}).catch(e=>{s.vF.error("[i18n] Error saving language preference:",e)})}}}}}]);