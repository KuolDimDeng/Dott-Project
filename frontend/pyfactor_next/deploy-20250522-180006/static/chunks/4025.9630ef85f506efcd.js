"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4025],{4025:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var s=a(95155),r=a(12115),l=a(29729),n=a(87449);let d=()=>{let[e,t]=(0,r.useState)([]),[a,d]=(0,r.useState)([]),[i,c]=(0,r.useState)(new Date().getFullYear()),[o,x]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),[p,u]=(0,r.useState)(null),[y,g]=(0,r.useState)(!1),[j,f]=(0,r.useState)(!1),N=(0,n.d)(),[b,w]=(0,r.useState)([]),[v,S]=(0,r.useState)(!1);(0,r.useEffect)(()=>{l.SP.defaults.headers.common["X-Data-Source"]="AWS_RDS",D(),k()},[i]);let D=async()=>{S(!0);try{let e={headers:{"X-Data-Source":"AWS_RDS"},params:{year:i,start_date:C(o),end_date:C(m)}},a=await l.SP.get("/api/payroll/runs/",e);t(a.data)}catch(e){console.error("Error fetching payroll runs from AWS RDS:",e),N.error("Error fetching payroll data from AWS RDS"),t([])}finally{S(!1)}},k=async()=>{try{let e=await l.SP.get("/api/payroll/archived-years/",{headers:{"X-Data-Source":"AWS_RDS"}});d(e.data)}catch(e){N.error("Error fetching archived years from AWS RDS"),console.error("Error fetching archived years from AWS RDS:",e),d([])}},_=async e=>{try{let t=await l.SP.get("/api/payroll/runs/".concat(e,"/"),{headers:{"X-Data-Source":"AWS_RDS"}});u(t.data),g(!0)}catch(e){N.error("Error fetching payroll run details from AWS RDS"),console.error("Error fetching payroll run details from AWS RDS:",e)}},A=e=>e?new Date(e).toLocaleDateString():"",C=e=>e?e instanceof Date?e.toISOString().split("T")[0]:e:null,E=e=>e?new Date(e).toISOString().split("T")[0]:"";return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Payroll Transactions"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Manage your payroll transactions."}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6 items-end",children:[(0,s.jsxs)("div",{className:"min-w-[150px]",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),(0,s.jsxs)("select",{value:i,onChange:e=>{c(e.target.value)},className:"w-full p-2 border border-gray-300 rounded-md bg-white",children:[(0,s.jsx)("option",{value:new Date().getFullYear(),children:"Current Year"}),Array.isArray(a)&&a.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,s.jsx)("input",{type:"date",value:o?E(o):"",onChange:e=>x(e.target.value?new Date(e.target.value):null),className:"p-2 border border-gray-300 rounded-md"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,s.jsx)("input",{type:"date",value:m?E(m):"",onChange:e=>h(e.target.value?new Date(e.target.value):null),className:"p-2 border border-gray-300 rounded-md"})]}),(0,s.jsx)("button",{onClick:()=>{D()},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Apply Filter"})]}),(0,s.jsx)("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Run Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"End Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.isArray(e)&&e.length>0?e.map(e=>(0,s.jsxs)("tr",{onClick:()=>_(e.id),className:"hover:bg-gray-50 cursor-pointer",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A(e.run_date)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A(e.start_date)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A(e.end_date)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.status}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.total_amount.toFixed(2)]})]},e.id)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-sm text-center text-gray-500",children:"No payroll runs found"})})})]})}),y&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-3xl w-full",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Payroll Run Details"}),(0,s.jsx)("button",{onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"General Information"}),(0,s.jsxs)("div",{className:"space-y-1 mb-4",children:[(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"Run Date:"})," ",A(p.run_date)]}),(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"Start Date:"})," ",A(p.start_date)]}),(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"End Date:"})," ",A(p.end_date)]}),(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"Status:"})," ",p.status]}),(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"Total Amount:"})," $",p.total_amount.toFixed(2)]})]}),(0,s.jsx)("h3",{className:"text-lg font-semibold mt-4 mb-2",children:"Employee Details"}),(0,s.jsxs)("div",{className:"border border-gray-200 rounded-md mb-4",children:[(0,s.jsxs)("button",{className:"flex w-full justify-between items-center p-3 focus:outline-none",onClick:()=>f(!j),children:[(0,s.jsx)("span",{className:"font-medium",children:"Employee List"}),(0,s.jsx)("svg",{className:"w-5 h-5 transition-transform ".concat(j?"transform rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),j&&(0,s.jsx)("div",{className:"p-3 border-t border-gray-200",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Bank Details"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p.employees.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.name}),(0,s.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:["$",e.amount.toFixed(2)]}),(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.bank_details})]},e.id))})]})})})]}),(0,s.jsx)("h3",{className:"text-lg font-semibold mt-4 mb-2",children:"Notes"}),(0,s.jsx)("p",{className:"text-sm text-gray-700",children:p.notes||"No notes available."}),(0,s.jsx)("div",{className:"mt-6 flex justify-end",children:(0,s.jsx)("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Close"})})]})]})})]})}}}]);