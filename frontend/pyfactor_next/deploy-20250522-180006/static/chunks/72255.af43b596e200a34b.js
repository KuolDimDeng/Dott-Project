"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32060,72255],{32060:(e,s,r)=>{r.r(s),r.d(s,{ArcElement:()=>p,BarController:()=>l,BarElement:()=>v,BubbleController:()=>n,CategoryScale:()=>b,Chart:()=>t,DoughnutController:()=>d,Filler:()=>k,Legend:()=>C,LineController:()=>a,LineElement:()=>g,LinearScale:()=>w,PieController:()=>c,PointElement:()=>x,PolarAreaController:()=>i,RadarController:()=>o,RadialLinearScale:()=>f,Scale:()=>h,ScatterController:()=>u,TimeScale:()=>j,Title:()=>N,Tooltip:()=>y,default:()=>O,register:()=>m,registerables:()=>_});class t{destroy(){}update(){}render(){}stop(){}resize(){}clear(){}toBase64Image(){return""}getElementsAtEventForMode(){return[]}getDatasetMeta(){return{}}constructor(){this.type="line",this.data={},this.options={}}}let a={id:"line",defaults:{}},l={id:"bar",defaults:{}},o={id:"radar",defaults:{}},d={id:"doughnut",defaults:{}},i={id:"polarArea",defaults:{}},n={id:"bubble",defaults:{}},c={id:"pie",defaults:{}},u={id:"scatter",defaults:{}};function m(){}let h={extend:()=>{}},p={id:"arc",defaults:{}},g={id:"line",defaults:{}},v={id:"bar",defaults:{}},x={id:"point",defaults:{}},b={id:"category",defaults:{}},w={id:"linear",defaults:{}},f={id:"radialLinear",defaults:{}},j={id:"time",defaults:{}},y={id:"tooltip",defaults:{},positioners:{}},C={id:"legend",defaults:{}},N={id:"title",defaults:{}},k={id:"filler",defaults:{}},_=[p,g,v,x,b,w,f,j,y,C,N],O=t},72255:(e,s,r)=>{r.r(s),r.d(s,{default:()=>u});var t=r(95155),a=r(12115),l=r(80561),o=r(32060),d=r(29729);o.Chart.register(o.ArcElement,o.Tooltip,o.Legend,o.CategoryScale,o.LinearScale,o.BarElement,o.PointElement,o.LineElement,o.Title,o.RadialLinearScale);let i=[{value:"1",label:"1 Month"},{value:"3",label:"3 Months"},{value:"6",label:"6 Months"},{value:"12",label:"1 Year"}],n=e=>"number"==typeof e?e.toFixed(2):"N/A",c=e=>{let{title:s,value:r,iconType:a,trend:l,trendValue:o,colorClass:d}=e,i="up"===l?"text-green-600":"text-red-600";return(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow h-full",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-600",children:s}),(0,t.jsx)("div",{className:"".concat(d," bg-opacity-20 p-2 rounded-full"),children:(e=>{switch(e){case"money":return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"cart":return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})});case"inventory":return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})});case"people":return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})});default:return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}})(a)})]}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:r}),l&&(0,t.jsxs)("div",{className:"flex items-center mt-2 ".concat(i),children:["up"===l?(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}):(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),(0,t.jsx)("span",{className:"text-sm",children:o})]})]})};function u(){var e,s,r,o,u,m;let[h,p]=(0,a.useState)("3"),[g,v]=(0,a.useState)(null),[x,b]=(0,a.useState)(null),[w,f]=(0,a.useState)(0);(0,a.useEffect)(()=>{j()},[h]);let j=async()=>{try{let e=(await d.SP.get("/api/analysis/sales-data",{params:{time_range:h}})).data||{},s={totalSales:e.totalSales||0,previousPeriodSales:e.previousPeriodSales||0,salesGrowth:e.salesGrowth||0,averageOrderValue:e.averageOrderValue||0,previousAverageOrderValue:e.previousAverageOrderValue||0,aovGrowth:e.aovGrowth||0,numberOfOrders:e.numberOfOrders||0,previousNumberOfOrders:e.previousNumberOfOrders||0,ordersGrowth:e.ordersGrowth||0,activeCustomers:e.activeCustomers||0,previousActiveCustomers:e.previousActiveCustomers||0,customersGrowth:e.customersGrowth||0,topProducts:e.topProducts||[],salesByCustomer:e.salesByCustomer||[],salesOverTime:e.salesOverTime||[],salesByCategory:e.salesByCategory||[]};v(s),b(null)}catch(e){console.error("Error fetching data:",e),e.response&&console.error("Error response:",e.response.data),b("Failed to fetch sales data. Please try again later."),v({totalSales:0,previousPeriodSales:0,salesGrowth:0,averageOrderValue:0,previousAverageOrderValue:0,aovGrowth:0,numberOfOrders:0,previousNumberOfOrders:0,ordersGrowth:0,activeCustomers:0,previousActiveCustomers:0,customersGrowth:0,topProducts:[],salesByCustomer:[],salesOverTime:[],salesByCategory:[]})}},y=e=>{f(e)};if(!g)return v({totalSales:125436.78,previousPeriodSales:115000.25,salesGrowth:9.1,averageOrderValue:245.67,previousAverageOrderValue:220.32,aovGrowth:11.5,numberOfOrders:510,previousNumberOfOrders:522,ordersGrowth:-2.3,activeCustomers:350,previousActiveCustomers:320,customersGrowth:9.4,topProducts:[{product__name:"Product A",sales:12500},{product__name:"Product B",sales:8700},{product__name:"Product C",sales:6300},{product__name:"Product D",sales:4100},{product__name:"Product E",sales:3200}],salesByCustomer:[{customer__customerName:"Customer 1",sales:15e3},{customer__customerName:"Customer 2",sales:12e3},{customer__customerName:"Customer 3",sales:9500},{customer__customerName:"Customer 4",sales:7800},{customer__customerName:"Customer 5",sales:6200}],salesOverTime:Array.from({length:12},(e,s)=>({date:"".concat(s+1,"/1/2023"),amount:8e3+4e3*Math.random()})),salesByCategory:[{category:"Electronics",sales:35e3},{category:"Furniture",sales:22e3},{category:"Clothing",sales:18e3},{category:"Books",sales:12e3},{category:"Other",sales:8e3}]}),(0,t.jsx)("p",{className:"text-xl",children:"Loading..."});let C={labels:(null==(e=g.salesOverTime)?void 0:e.map(e=>e.date))||[],datasets:[{label:"Sales",data:(null==(s=g.salesOverTime)?void 0:s.map(e=>e.amount))||[],fill:!0,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgb(75, 192, 192)",tension:.4}]},N={labels:(null==(r=g.topProducts)?void 0:r.map(e=>e.product__name))||[],datasets:[{data:(null==(o=g.topProducts)?void 0:o.map(e=>e.sales))||[],backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]},k={labels:(null==(u=g.salesByCustomer)?void 0:u.map(e=>e.customer__customerName))||[],datasets:[{label:"Sales",data:(null==(m=g.salesByCustomer)?void 0:m.map(e=>e.sales))||[],backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},_={labels:g.salesByCategory?g.salesByCategory.map(e=>e.category):[],datasets:[{data:g.salesByCategory?g.salesByCategory.map(e=>e.sales):[],backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)"],borderWidth:0}]};return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Sales Dashboard"}),(0,t.jsx)("div",{className:"relative w-48",children:(0,t.jsx)("select",{value:h,onChange:e=>{p(e.target.value)},className:"w-full bg-white border border-gray-300 rounded-md py-2 pl-3 pr-10 shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:i.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})})]}),x&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 rounded-md p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:x}),(0,t.jsx)("button",{onClick:j,className:"mt-2 text-sm font-medium text-red-600 hover:text-red-500",children:"Try again"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,t.jsx)("div",{children:(0,t.jsx)(c,{title:"Total Sales",value:"$".concat(n(g.totalSales)),iconType:"money",trend:g.salesGrowth>=0?"up":"down",trendValue:"".concat(Math.abs(g.salesGrowth).toFixed(1),"% from last period"),colorClass:"text-blue-600"})}),(0,t.jsx)("div",{children:(0,t.jsx)(c,{title:"Average Order Value",value:"$".concat(n(g.averageOrderValue)),iconType:"cart",trend:g.aovGrowth>=0?"up":"down",trendValue:"".concat(Math.abs(g.aovGrowth).toFixed(1),"% from last period"),colorClass:"text-green-600"})}),(0,t.jsx)("div",{children:(0,t.jsx)(c,{title:"Number of Orders",value:g.numberOfOrders,iconType:"inventory",trend:g.ordersGrowth>=0?"up":"down",trendValue:"".concat(Math.abs(g.ordersGrowth).toFixed(1),"% from last period"),colorClass:"text-yellow-600"})}),(0,t.jsx)("div",{children:(0,t.jsx)(c,{title:"Active Customers",value:g.activeCustomers,iconType:"people",trend:g.customersGrowth>=0?"up":"down",trendValue:"".concat(Math.abs(g.customersGrowth).toFixed(1),"% from last period"),colorClass:"text-purple-600"})})]}),(0,t.jsx)("div",{className:"border-b border-gray-200 mb-4",children:(0,t.jsx)("div",{className:"flex",children:["Overview","Products","Customers","Categories"].map((e,s)=>(0,t.jsx)("button",{className:"py-2 px-4 font-medium border-b-2 mr-2 ".concat(w===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>y(s),children:e},s))})}),0===w&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-700 mb-3",children:"Sales Trend"}),(0,t.jsx)(l.N1,{data:C,options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!1}}}})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md h-full",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-700 mb-3",children:"Top Products"}),(0,t.jsx)("div",{className:"h-64",children:(0,t.jsx)(l.nu,{data:N,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}})})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md h-full",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-700 mb-3",children:"Sales by Category"}),(0,t.jsx)("div",{className:"h-64",children:(0,t.jsx)(l.Fq,{data:_,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}})})]})})]}),1===w&&(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-700 mb-3",children:"Top Products"}),(0,t.jsx)("div",{className:"h-80",children:(0,t.jsx)(l.nu,{data:N,options:{responsive:!0,maintainAspectRatio:!1}})})]}),2===w&&(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-700 mb-3",children:"Sales by Customer"}),(0,t.jsx)("div",{className:"h-80",children:(0,t.jsx)(l.yP,{data:k,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}}}})})]}),3===w&&(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-700 mb-3",children:"Sales by Category"}),(0,t.jsx)("div",{className:"h-80",children:(0,t.jsx)(l.Fq,{data:_,options:{responsive:!0,maintainAspectRatio:!1}})})]})]})}},80561:(e,s,r)=>{r.d(s,{Fq:()=>u,N1:()=>i,nu:()=>c,yP:()=>n});var t=r(55166),a=r(36465),l=r(95155);r(12115);var o=r(32060);let d=e=>{var{type:s,height:r="300px",width:t="100%"}=e;return(0,a._)(e,["type","height","width"]),(0,l.jsx)("div",{style:{height:r,width:t,backgroundColor:"#f5f5f5",border:"1px solid #ddd",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:(0,l.jsxs)("div",{style:{textAlign:"center"},children:[(0,l.jsxs)("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:[s.charAt(0).toUpperCase()+s.slice(1)," Chart"]}),(0,l.jsx)("div",{style:{fontSize:"0.8rem",color:"#666"},children:"(Chart rendering disabled)"})]})})},i=e=>(0,l.jsx)(d,(0,t._)({type:"line"},e)),n=e=>(0,l.jsx)(d,(0,t._)({type:"bar"},e)),c=e=>(0,l.jsx)(d,(0,t._)({type:"doughnut"},e)),u=e=>(0,l.jsx)(d,(0,t._)({type:"pie"},e));e=>(0,l.jsx)(d,(0,t._)({type:"radar"},e)),o.default}}]);