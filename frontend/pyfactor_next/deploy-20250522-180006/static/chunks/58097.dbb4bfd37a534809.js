"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[58097],{58097:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var n=s(55166),r=s(68387),o=s(95155),l=s(12115),a=s(29729);let i=()=>{let[e,t]=(0,l.useState)([]),[s,i]=(0,l.useState)(!1),[c,d]=(0,l.useState)(null),[u,m]=(0,l.useState)([]);(0,l.useEffect)(()=>{x(),h()},[]);let x=async()=>{try{let e=await a.SP.get("/api/journal-entries/");t(e.data)}catch(e){console.error("Error fetching journal entries:",e)}},h=async()=>{try{let e=await a.SP.get("/api/chart-of-accounts/");m(e.data)}catch(e){console.error("Error fetching accounts:",e)}},p=e=>{d(e),i(!0)},g=async e=>{if(window.confirm("Are you sure you want to delete this journal entry?"))try{await a.SP.delete("/api/journal-entries/".concat(e,"/")),x()}catch(e){console.error("Error deleting journal entry:",e)}},w=async()=>{try{c.id?await a.SP.put("/api/journal-entries/".concat(c.id,"/"),c):await a.SP.post("/api/journal-entries/",c),i(!1),x()}catch(e){console.error("Error saving journal entry:",e)}},f=(e,t)=>{let{name:s,value:o}=e.target;if("date"===s||"description"===s)d((0,r._)((0,n._)({},c),{[s]:o}));else{let e=[...c.lines];e[t]=(0,r._)((0,n._)({},e[t]),{[s]:o}),d((0,r._)((0,n._)({},c),{lines:e}))}},b=e=>{let t=c.lines.filter((t,s)=>s!==e);d((0,r._)((0,n._)({},c),{lines:t}))};return(0,o.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,o.jsx)("h4",{className:"text-2xl font-semibold mb-4",children:"Journal Entry Management"}),(0,o.jsxs)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center",onClick:()=>{d({date:new Date().toISOString().split("T")[0],description:"",lines:[{account:"",description:"",debit_amount:0,credit_amount:0}]}),i(!0)},children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Journal Entry"]}),(0,o.jsx)("div",{className:"mt-4 overflow-x-auto shadow-md rounded-lg",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,o.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.date}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.description}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(e.is_posted?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.is_posted?"Posted":"Draft"})}),(0,o.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,o.jsx)("button",{onClick:()=>p(e),className:"text-blue-600 hover:text-blue-900 mr-3",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,o.jsx)("button",{onClick:()=>g(e.id),className:"text-red-600 hover:text-red-900",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.id))})]})}),s&&(0,o.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex justify-center items-center",children:(0,o.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto mx-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,o.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:(null==c?void 0:c.id)?"Edit Journal Entry":"Create Journal Entry"}),(0,o.jsx)("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-500",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,o.jsx)("input",{id:"date",type:"date",name:"date",value:(null==c?void 0:c.date)||"",onChange:e=>f(e),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,o.jsx)("input",{id:"description",type:"text",name:"description",value:(null==c?void 0:c.description)||"",onChange:e=>f(e),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h6",{className:"text-lg font-medium mt-4 mb-2",children:"Journal Entry Lines"}),null==c?void 0:c.lines.map((e,t)=>(0,o.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 mb-4 pb-4 border-b border-gray-200",children:[(0,o.jsxs)("div",{className:"w-full md:w-1/4",children:[(0,o.jsx)("label",{htmlFor:"account-".concat(t),className:"block text-sm font-medium text-gray-700 mb-1",children:"Account"}),(0,o.jsxs)("select",{id:"account-".concat(t),name:"account",value:e.account,onChange:e=>f(e,t),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,o.jsx)("option",{value:"",children:"Select an account"}),u.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,o.jsxs)("div",{className:"w-full md:w-1/4",children:[(0,o.jsx)("label",{htmlFor:"line-desc-".concat(t),className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,o.jsx)("input",{id:"line-desc-".concat(t),type:"text",name:"description",value:e.description,onChange:e=>f(e,t),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,o.jsxs)("div",{className:"w-full md:w-1/6",children:[(0,o.jsx)("label",{htmlFor:"debit-".concat(t),className:"block text-sm font-medium text-gray-700 mb-1",children:"Debit"}),(0,o.jsx)("input",{id:"debit-".concat(t),type:"number",name:"debit_amount",value:e.debit_amount,onChange:e=>f(e,t),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,o.jsxs)("div",{className:"w-full md:w-1/6",children:[(0,o.jsx)("label",{htmlFor:"credit-".concat(t),className:"block text-sm font-medium text-gray-700 mb-1",children:"Credit"}),(0,o.jsx)("input",{id:"credit-".concat(t),type:"number",name:"credit_amount",value:e.credit_amount,onChange:e=>f(e,t),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,o.jsx)("div",{className:"flex items-end justify-end md:w-1/12",children:(0,o.jsx)("button",{type:"button",onClick:()=>b(t),className:"text-red-600 hover:text-red-900 p-2",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},t)),(0,o.jsxs)("button",{type:"button",onClick:()=>{d((0,r._)((0,n._)({},c),{lines:[...c.lines,{account:"",description:"",debit_amount:0,credit_amount:0}]}))},className:"flex items-center text-blue-600 hover:text-blue-800",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Line"]})]})]}),(0,o.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t flex justify-end gap-3",children:[(0,o.jsxs)("button",{onClick:()=>i(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 flex items-center",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]}),(0,o.jsxs)("button",{onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save"]})]})]})})]})}}}]);