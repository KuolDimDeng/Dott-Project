(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64502],{2091:(e,t,s)=>{Promise.resolve().then(s.bind(s,11344))},11344:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(95155),r=s(51935),n=s(20088),l=s(12115),i=s(35695),c=s(53498);let o=(0,r.A)(()=>{(0,i.useRouter)();let[e,t]=(0,l.useState)("leads-by-source"),s=e=>{t(e)},r={"leads-by-source":{title:"Leads by Source",type:"bar",data:[{source:"Website",count:45,conversionRate:15},{source:"Referral",count:32,conversionRate:22},{source:"Social Media",count:28,conversionRate:8},{source:"Email Campaign",count:24,conversionRate:12},{source:"Trade Show",count:18,conversionRate:18},{source:"Cold Call",count:12,conversionRate:5}]},"sales-pipeline":{title:"Sales Pipeline",type:"funnel",data:[{stage:"Qualification",count:45,value:675e3},{stage:"Needs Analysis",count:30,value:45e4},{stage:"Proposal",count:20,value:3e5},{stage:"Negotiation",count:15,value:225e3},{stage:"Closed Won",count:10,value:15e4}]},"contact-activity":{title:"Contact Activity",type:"table",data:[{activity:"Emails Sent",count:450,conversionImpact:"Medium"},{activity:"Calls Made",count:320,conversionImpact:"High"},{activity:"Meetings Held",count:120,conversionImpact:"Very High"},{activity:"Website Visits",count:780,conversionImpact:"Low"},{activity:"Document Downloads",count:230,conversionImpact:"Medium"}]},"campaign-performance":{title:"Campaign Performance",type:"bar",data:[{campaign:"Q4 Product Launch",sent:1500,opened:750,clicked:300,converted:45},{campaign:"Healthcare Outreach",sent:1200,opened:480,clicked:180,converted:30},{campaign:"Trade Show Follow-up",sent:500,opened:320,clicked:180,converted:35},{campaign:"Enterprise Webinar",sent:1e3,opened:450,clicked:200,converted:15}]},"deal-conversion":{title:"Deal Conversion",type:"pie",data:[{status:"Won",count:24,percentage:40},{status:"Lost",count:18,percentage:30},{status:"Pending",count:18,percentage:30}]},"revenue-forecast":{title:"Revenue Forecast",type:"line",data:[{month:"Jan",projected:12e4,actual:115e3},{month:"Feb",projected:135e3,actual:14e4},{month:"Mar",projected:15e4,actual:145e3},{month:"Apr",projected:145e3,actual:13e4},{month:"May",projected:16e4,actual:17e4},{month:"Jun",projected:175e3,actual:18e4}]}},n=e=>"$".concat(e.toLocaleString());return(0,a.jsx)(c.A,{children:(0,a.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-700",children:"CRM Reports"}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>{alert("Exporting ".concat(e," report"))},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Export Report"}),(0,a.jsx)("button",{onClick:()=>{},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Share Report"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"md:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-blue-50 rounded-lg shadow p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-700 mb-4",children:"Available Reports"}),(0,a.jsx)("div",{className:"space-y-2",children:[{id:"leads-by-source",name:"Leads by Source",description:"Analysis of lead sources and their conversion rates"},{id:"sales-pipeline",name:"Sales Pipeline",description:"Overview of sales pipeline by stage and value"},{id:"contact-activity",name:"Contact Activity",description:"Activity tracking for contacts in your CRM"},{id:"campaign-performance",name:"Campaign Performance",description:"Performance metrics for marketing campaigns"},{id:"deal-conversion",name:"Deal Conversion",description:"Conversion rates from opportunities to closed deals"},{id:"revenue-forecast",name:"Revenue Forecast",description:"Projected revenue based on pipeline and probabilities"}].map(t=>(0,a.jsxs)("div",{className:"p-3 rounded-md cursor-pointer transition-colors ".concat(e===t.id?"bg-blue-50 dark:bg-blue-100 border-l-4 border-blue-500":"hover:bg-gray-50 dark:hover:bg-blue-100"),onClick:()=>s(t.id),children:[(0,a.jsx)("h3",{className:"font-medium text-gray-800 dark:text-gray-700",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-600 mt-1",children:t.description})]},t.id))})]})}),(0,a.jsx)("div",{className:"md:col-span-3",children:(()=>{let t=r[e];if(!t)return(0,a.jsx)("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Please select a report to view"})});switch(t.type){case"bar":if("leads-by-source"===e)return(0,a.jsxs)("div",{className:"bg-white dark:bg-blue-50 p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-700",children:t.title}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Leads: 159"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Average Conversion Rate: 13.3%"})]}),(0,a.jsx)("div",{className:"h-2 bg-gray-200 rounded-full",children:(0,a.jsx)("div",{className:"h-2 bg-blue-600 rounded-full",style:{width:"13.3%"}})})]}),(0,a.jsx)("div",{className:"space-y-4",children:t.data.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,a.jsx)("span",{className:"font-medium",children:e.source}),(0,a.jsxs)("span",{className:"text-gray-600",children:[e.count," leads"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Conversion Rate"}),(0,a.jsxs)("span",{className:"text-green-500",children:[e.conversionRate,"%"]})]}),(0,a.jsx)("div",{className:"h-2 bg-gray-100 rounded-full",children:(0,a.jsx)("div",{className:"h-2 bg-blue-400 rounded-full",style:{width:"".concat(e.count/45*100,"%")}})})]},t))})]});return(0,a.jsxs)("div",{className:"bg-white dark:bg-blue-50 p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-700",children:t.title}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50",children:[(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Campaign"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Sent"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Open Rate"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Click Rate"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Conversion"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:t.data.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:e.campaign}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:e.sent}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm",children:[Math.round(e.opened/e.sent*100),"%"]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm",children:[Math.round(e.clicked/e.opened*100),"%"]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm font-medium text-green-600",children:[Math.round(e.converted/e.sent*100),"%"]})]},t))})]})}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-100",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Performance Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Average Open Rate"}),(0,a.jsx)("p",{className:"text-xl font-bold text-blue-500",children:"40%"})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Average Click Rate"}),(0,a.jsx)("p",{className:"text-xl font-bold text-purple-500",children:"45%"})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Average Conversion"}),(0,a.jsx)("p",{className:"text-xl font-bold text-green-500",children:"3%"})]})]})]})]});case"funnel":return(0,a.jsxs)("div",{className:"bg-white dark:bg-blue-50 p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-700",children:t.title}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Total Opportunities: ",t.data[0].count]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Pipeline Value: ",n(t.data[0].value)]})]})}),(0,a.jsx)("div",{className:"space-y-2",children:t.data.map((e,s)=>(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:"p-4 rounded-lg ".concat(0===s?"bg-blue-50":s===t.data.length-1?"bg-green-50":"bg-indigo-50"),style:{width:"".concat(e.count/t.data[0].count*100,"%")},children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:e.stage}),(0,a.jsxs)("span",{children:[e.count," deals"]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:n(e.value)})]})},s))}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Conversion Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-500",children:[Math.round(t.data[t.data.length-1].count/t.data[0].count*100),"%"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"From qualification to closed won"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Average Deal Size"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-500",children:n(t.data[t.data.length-1].value/t.data[t.data.length-1].count)}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Based on closed won deals"})]})]})]});case"table":return(0,a.jsxs)("div",{className:"bg-white dark:bg-blue-50 p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-700",children:t.title}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50",children:[(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Activity Type"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Count"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Conversion Impact"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:t.data.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm font-medium",children:e.activity}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:e.count}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("Very High"===e.conversionImpact?"bg-green-50 text-green-600":"High"===e.conversionImpact?"bg-blue-50 text-blue-600":"Medium"===e.conversionImpact?"bg-yellow-50 text-yellow-600":"bg-gray-50 text-gray-600"),children:e.conversionImpact})})]},t))})]})}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Key Insight"}),(0,a.jsx)("p",{className:"text-gray-700",children:"Direct interactions like meetings and calls have the highest impact on conversion rates. Consider allocating more resources to these high-impact activities."})]})]});case"pie":return(0,a.jsxs)("div",{className:"bg-white dark:bg-blue-50 p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-700",children:t.title}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsxs)("div",{className:"relative h-64 w-64",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-lg font-medium text-gray-700",children:"60 Deals"})}),(0,a.jsxs)("svg",{viewBox:"0 0 36 36",className:"w-full h-full",children:[(0,a.jsx)("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#E5E7EB",strokeWidth:"3"}),(0,a.jsx)("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#10B981",strokeWidth:"3",strokeDasharray:"40, 100",strokeDashoffset:"0"}),(0,a.jsx)("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#EF4444",strokeWidth:"3",strokeDasharray:"30, 100",strokeDashoffset:"40"}),(0,a.jsx)("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#F59E0B",strokeWidth:"3",strokeDasharray:"30, 100",strokeDashoffset:"70"})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"space-y-4",children:t.data.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-4 w-4 rounded-full mr-2 ".concat("Won"===e.status?"bg-green-400":"Lost"===e.status?"bg-red-400":"bg-yellow-400")}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:e.status}),(0,a.jsxs)("span",{children:[e.count," deals (",e.percentage,"%)"]})]}),(0,a.jsx)("div",{className:"h-1.5 bg-gray-200 rounded-full mt-1",children:(0,a.jsx)("div",{className:"h-1.5 rounded-full ".concat("Won"===e.status?"bg-green-400":"Lost"===e.status?"bg-red-400":"bg-yellow-400"),style:{width:"".concat(e.percentage,"%")}})})]})]},t))}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Win Rate"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-500",children:"40%"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Historical deal conversion rate"})]})]})]})]});case"line":return(0,a.jsxs)("div",{className:"bg-white dark:bg-blue-50 p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-700",children:t.title}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("div",{className:"h-3 w-3 rounded-full bg-blue-400 mr-1"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 mr-4",children:"Projected"}),(0,a.jsx)("div",{className:"h-3 w-3 rounded-full bg-green-400 mr-1"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Actual"})]}),(0,a.jsx)("div",{className:"h-64 relative",children:(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 w-full h-full flex flex-col justify-end",children:[(0,a.jsx)("div",{className:"w-full border-t border-gray-200 h-8 mb-6 relative",children:t.data.map((e,s)=>(0,a.jsx)("div",{className:"absolute",style:{left:"".concat(s*(100/(t.data.length-1)),"%"),bottom:"0"},children:(0,a.jsx)("div",{className:"text-xs text-gray-500 -ml-4",children:e.month})},s))}),(0,a.jsx)("div",{className:"flex items-end justify-between h-48 relative pb-8",children:t.data.map((e,s)=>{let r=Math.max(...t.data.map(e=>Math.max(e.projected,e.actual))),n=e.projected/r*100,l=e.actual/r*100;return(0,a.jsxs)("div",{className:"flex items-end space-x-1 mx-1",style:{height:"100%"},children:[(0,a.jsx)("div",{className:"bg-blue-400 w-3",style:{height:"".concat(n,"%")}}),(0,a.jsx)("div",{className:"bg-green-400 w-3",style:{height:"".concat(l,"%")}})]},s)})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-600 mb-1",children:"YTD Revenue"}),(0,a.jsx)("p",{className:"text-xl font-bold text-green-500",children:n(88e4)}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Total revenue year to date"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Projected Q3 Revenue"}),(0,a.jsx)("p",{className:"text-xl font-bold text-blue-500",children:n(51e4)}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Based on current pipeline"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Forecast Accuracy"}),(0,a.jsx)("p",{className:"text-xl font-bold text-purple-500",children:"96.7%"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Avg. accuracy this year"})]})]})]});default:return(0,a.jsx)("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Report type not supported"})})}})()})]})]})})},n.F2.CRM)},12743:(e,t,s)=>{"use strict";s.d(t,{A:()=>n}),s(95155);var a=s(12115),r=s(29729);function n(){let[e,t]=(0,a.useState)(!1),[s,n]=(0,a.useState)("");return(0,a.useEffect)(()=>(t("https:"===window.location.protocol),window.__resetCircuitBreakers=r.resetCircuitBreakers,window.resetCircuitBreakers=()=>((0,r.resetCircuitBreakers)(),console.log("[HttpsConfig] Circuit breakers manually reset"),!0),"https:"===window.location.protocol&&((0,r.resetCircuitBreakers)(),console.log("[HttpsConfig] Circuit breakers auto-reset for HTTPS mode")),()=>{delete window.__resetCircuitBreakers}),[]),null}},15343:(e,t,s)=>{"use strict";s.d(t,{A:()=>a.A});var a=s(14745)},19596:(e,t,s)=>{"use strict";s.d(t,{kd:()=>a});let a={BUSINESS_INFO:"business-info",SUBSCRIPTION:"subscription",PAYMENT:"payment",SETUP:"setup",COMPLETE:"complete",DASHBOARD:"dashboard"}},20088:(e,t,s)=>{"use strict";s.d(t,{F2:()=>l,ij:()=>c});var a=s(29670),r=s(42749),n=s(99783);let l={DASHBOARD:"dashboard",PRODUCTS:"inventory_products",INVENTORY:"inventory_stock",SALES:"sales_orders",PURCHASES:"sales_customers",ACCOUNTING:"billing_invoices",BANKING:"banking",PAYROLL:"hr_payroll",REPORTS:"reports_sales",ANALYSIS:"reports_financial",TAXES:"billing_taxes",CRM:"crm_contacts",TRANSPORT:"transport",HR:"hr_employees",EMPLOYEE_MANAGEMENT:"hr_employees",SETTINGS:"settings_business",BILLING:"billing_invoices"};async function i(){try{var e,t,s,l,i,c;let o=(0,a.gd)("isBusinessOwner"),d=(0,a.gd)("ownerVerificationTimestamp"),m=Date.now();if(void 0!==o&&d&&m-parseInt(d)<3e5)return r.vF.debug("[verifyTenantOwnership] Using cached owner status:",o),o;let x=(null==(e=(0,a.gd)("auth"))?void 0:e.userAttributes)||(null==(s=window.__APP_CACHE)||null==(t=s.user)?void 0:t.attributes),u=(null==x?void 0:x["custom:userrole"])||"";if("owner"===u.toLowerCase())return r.vF.info("[verifyTenantOwnership] User has owner role in Cognito attributes"),(0,a.mm)("isBusinessOwner",!0),(0,a.mm)("ownerVerificationTimestamp",m.toString()),!0;let h=(null==(l=(0,a.gd)("auth"))?void 0:l.tenantId)||(null==(c=window.__APP_CACHE)||null==(i=c.auth)?void 0:i.tenantId)||(0,a.gd)("tenantId");if(!h)return r.vF.warn("[verifyTenantOwnership] No tenant ID found in cache"),!1;r.vF.info("[verifyTenantOwnership] Verifying owner status with backend");let g=await n.Ay.get("/tenants/api/verify-owner/?tenant_id=".concat(h));if((null==g?void 0:g.is_owner)===!0)return r.vF.info("[verifyTenantOwnership] Backend confirmed user is the owner"),(0,a.mm)("isBusinessOwner",!0),(0,a.mm)("ownerVerificationTimestamp",m.toString()),!0;return r.vF.info("[verifyTenantOwnership] User is not the tenant owner"),(0,a.mm)("isBusinessOwner",!1),(0,a.mm)("ownerVerificationTimestamp",m.toString()),!1}catch(e){return r.vF.error("[verifyTenantOwnership] Error verifying tenant ownership:",e),!1}}function c(e){try{let t=(0,a.gd)("isBusinessOwner");if(!0===t||e===l.DASHBOARD||"dashboard"===e)return!0;let s=(0,a.gd)("userPagePrivileges")||[];if(!s||0===s.length)return!1;let r=l[e]||e;return s.includes(r.toLowerCase())}catch(t){return r.vF.error("[hasPageAccess] Error checking access for page ".concat(e,":"),t),!1}}},51935:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(55166),r=s(95155),n=s(12115),l=s(20088);function i(){return(0,r.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] px-4",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("svg",{className:"w-20 h-20 mx-auto text-gray-400 mb-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Access Restricted"}),(0,r.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:"You do not have access to this page. Please make a request to your administrator for access."}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)("button",{onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Go Back"]})})]})})}var c=s(35695),o=s(42749);function d(e,t){return function(s){let[d,m]=(0,n.useState)(null),[x,u]=(0,n.useState)(!0),h=(0,c.usePathname)();return((0,n.useEffect)(()=>{try{let e=(0,l.ij)(t);m(e),o.vF.debug("[withPageAccess] Access to ".concat(t," page: ").concat(e?"granted":"denied"))}catch(e){o.vF.error("[withPageAccess] Error checking page access: ".concat(e)),m(!1)}finally{u(!1)}},[h]),x)?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-[60vh]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):d?(0,r.jsx)(e,(0,a._)({},s)):(0,r.jsx)(i,{})}}},53498:(e,t,s)=>{"use strict";s.d(t,{A:()=>b});var a=s(95155),r=s(11518),n=s.n(r),l=s(12115),i=s(35695),c=s(42749);s(55028),s(66766);var o=s(15343);s(19596);var d=s(51174),m=s(12743),x=s(55166),u=s(68387);async function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.startsWith("/")?e.substring(1):e,a=(0,u._)((0,x._)({},t),{headers:(0,x._)({"Content-Type":"application/json"},t.headers)});try{let e=await fetch("/api/proxy/".concat(s),a);if(!e.ok)throw Error("API request failed with status ".concat(e.status));return await e.json()}catch(t){throw console.error("[proxyFetch] Error fetching ".concat(e,":"),t),t}}let g={get:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h(e,(0,x._)({method:"GET"},t))},resetCircuitBreakers:function(){let e=Object.keys(localStorage).filter(e=>e.startsWith("circuitBreaker:"));return e.forEach(e=>{console.log("[resetCircuitBreakers] Removing ".concat(e," from localStorage")),localStorage.removeItem(e)}),console.log("[resetCircuitBreakers] Reset ".concat(e.length," circuit breakers")),window.__resetCircuitBreakers&&(window.__resetCircuitBreakers(),console.log("[resetCircuitBreakers] Called global reset function")),e.length}};function p(){let[e,t]=(0,l.useState)(null),[s,r]=(0,l.useState)(null),[n,i]=(0,l.useState)(!1),[c,o]=(0,l.useState)(!1),[d,m]=(0,l.useState)("hr/employees"),[x,u]=(0,l.useState)(""),h=async()=>{i(!0);try{try{let e={"Content-Type":"application/json"};x&&(e.Authorization="Bearer ".concat(x));let t=await fetch("https://127.0.0.1:8000/api/".concat(d,"/"),{method:"GET",headers:e});console.log("[HttpsDebugger] Direct API response:",t)}catch(e){console.warn("[HttpsDebugger] Direct API request failed:",e)}let e={};x&&(e={headers:{Authorization:"Bearer ".concat(x)}});let s=await g.get(d,e);t({success:!0,message:"API connection successful",data:s})}catch(e){t({success:!1,message:"API connection failed",error:e.message})}finally{i(!1)}};return(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-4 my-4 max-w-xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"HTTPS Debug Tools"}),(0,a.jsx)("button",{onClick:()=>o(!c),className:"text-gray-600 hover:text-blue-500",children:c?"Collapse":"Expand"})]}),c&&(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["API Endpoint",(0,a.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),placeholder:"e.g., hr/employees",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Auth Token (optional)",(0,a.jsx)("input",{type:"text",value:x,onChange:e=>u(e.target.value),placeholder:"Bearer token for authenticated endpoints",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:h,disabled:n,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:n?"Testing...":"Test API Connection"}),(0,a.jsx)("button",{onClick:()=>{try{let e=g.resetCircuitBreakers();r({success:!0,message:"Reset ".concat(e," circuit breakers")})}catch(e){r({success:!1,message:"Failed to reset circuit breakers",error:e.message})}},className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Reset Circuit Breakers"})]}),e&&(0,a.jsxs)("div",{className:"p-3 rounded ".concat(e.success?"bg-green-100":"bg-red-100"),children:[(0,a.jsx)("p",{className:"font-semibold",children:e.message}),!e.success&&(0,a.jsx)("p",{className:"text-red-600 text-sm",children:e.error}),e.success&&e.data&&(0,a.jsx)("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-sm overflow-auto max-h-40",children:JSON.stringify(e.data,null,2)})]}),s&&(0,a.jsxs)("div",{className:"p-3 rounded ".concat(s.success?"bg-green-100":"bg-red-100"),children:[(0,a.jsx)("p",{className:"font-semibold",children:s.message}),!s.success&&(0,a.jsx)("p",{className:"text-red-600 text-sm",children:s.error})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Connection Information"}),(0,a.jsxs)("ul",{className:"text-sm space-y-1 text-gray-600",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Frontend URL:"})," ",window.location.origin]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"API Proxy:"})," ",window.location.origin,"/api/proxy/"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Backend URL:"})," https://127.0.0.1:8000/api/"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"HTTPS Mode:"})," ",window.__HTTPS_ENABLED?"Enabled":"Disabled"]})]})]}),(0,a.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Common API Endpoints"}),(0,a.jsxs)("div",{className:"text-sm space-y-1 text-gray-600",children:[(0,a.jsx)("button",{onClick:()=>m("hr/employees"),className:"block text-blue-500 hover:underline",children:"HR Employees"}),(0,a.jsx)("button",{onClick:()=>m("finance/transactions"),className:"block text-blue-500 hover:underline",children:"Finance Transactions"}),(0,a.jsx)("button",{onClick:()=>m("database/health-check"),className:"block text-blue-500 hover:underline",children:"Database Health Check"})]})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:(0,a.jsx)("p",{children:"* This component is for development debugging only."})})]})]})}function b(e){let{children:t,newAccount:s,plan:r,tenantId:x}=e,u=(0,i.useRouter)(),[h,g]=(0,l.useState)(!1),[b,v]=(0,l.useState)(!1),[f,y]=(0,l.useState)(x),[j,N]=(0,l.useState)("initial"),w=(0,l.useRef)(0);return(0,l.useEffect)(()=>{var e;let t=()=>{w.current+=1,N("navigation-".concat(w.current))};return null==(e=u.events)||e.on("routeChangeComplete",t),()=>{var e;null==(e=u.events)||e.off("routeChangeComplete",t)}},[u]),(0,l.useEffect)(()=>{if(x)return void y(x);let e=(()=>{let e=document.cookie.split(";"),t=null;for(let s of e){let[e,a]=s.trim().split("=");if("tenantId"===e){t=a;break}}if(t)return t;try{return localStorage.getItem("tenantId")||sessionStorage.getItem("tenantId")}catch(e){return null}})();e&&(c.vF.info("[DashboardWrapper] Using tenant ID from cache: ".concat(e)),y(e))},[x]),(0,l.useEffect)(()=>{f&&(0,d.isValidUUID)(f)?(c.vF.info("[DashboardWrapper] Storing valid tenant ID: ".concat(f)),(0,d.$_)(f)):f&&c.vF.warn("[DashboardWrapper] Invalid tenant ID format: ".concat(f))},[f]),(0,a.jsxs)("div",{className:"jsx-2ea202641b209f13 flex flex-col min-h-screen bg-gray-50",children:[(0,a.jsx)(n(),{id:"2ea202641b209f13",children:'html,body{height:100%;min-height:100%;width:100%;overflow-x:hidden}body{font-family:var(--font-family,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif);margin:0;padding:0}::-moz-selection{background-color:rgba(67,56,202,.3)}::selection{background-color:rgba(67,56,202,.3)}'}),(0,a.jsxs)("main",{className:"jsx-2ea202641b209f13 flex-1",children:[(0,a.jsx)(p,{}),(0,a.jsx)(o.A,{tenantId:f,newAccount:s,plan:r,children:t},j)]}),(0,a.jsx)(m.A,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[54940,9296,79480,58430,84620,23639,38501,78746,20171,79189,6874,62052,66766,31296,66352,38772,35162,37921,8896,29729,44367,47856,67953,3963,83531,93078,14719,14745,28441,31684,77358],()=>t(2091)),_N_E=e.O()}]);