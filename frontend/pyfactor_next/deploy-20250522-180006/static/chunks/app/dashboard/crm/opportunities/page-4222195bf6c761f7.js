(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69696],{12743:(e,t,s)=>{"use strict";s.d(t,{A:()=>i}),s(95155);var a=s(12115),r=s(29729);function i(){let[e,t]=(0,a.useState)(!1),[s,i]=(0,a.useState)("");return(0,a.useEffect)(()=>(t("https:"===window.location.protocol),window.__resetCircuitBreakers=r.resetCircuitBreakers,window.resetCircuitBreakers=()=>((0,r.resetCircuitBreakers)(),console.log("[HttpsConfig] Circuit breakers manually reset"),!0),"https:"===window.location.protocol&&((0,r.resetCircuitBreakers)(),console.log("[HttpsConfig] Circuit breakers auto-reset for HTTPS mode")),()=>{delete window.__resetCircuitBreakers}),[]),null}},15343:(e,t,s)=>{"use strict";s.d(t,{A:()=>a.A});var a=s(14745)},16905:(e,t,s)=>{"use strict";s.d(t,{E:()=>r});var a=s(29670);let r={get:async e=>(0,a.gd)(e),set:async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=s.expires?1e3*s.expires:void 0;return(0,a.mm)(e,t,{ttl:r})},remove:async e=>(0,a.A6)(e),clear:async()=>(0,a.IL)(),keys:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object.keys(window.__APP_CACHE||{}).filter(t=>t.startsWith(e))}}},19596:(e,t,s)=>{"use strict";s.d(t,{kd:()=>a});let a={BUSINESS_INFO:"business-info",SUBSCRIPTION:"subscription",PAYMENT:"payment",SETUP:"setup",COMPLETE:"complete",DASHBOARD:"dashboard"}},20088:(e,t,s)=>{"use strict";s.d(t,{F2:()=>n,ij:()=>o});var a=s(29670),r=s(42749),i=s(99783);let n={DASHBOARD:"dashboard",PRODUCTS:"inventory_products",INVENTORY:"inventory_stock",SALES:"sales_orders",PURCHASES:"sales_customers",ACCOUNTING:"billing_invoices",BANKING:"banking",PAYROLL:"hr_payroll",REPORTS:"reports_sales",ANALYSIS:"reports_financial",TAXES:"billing_taxes",CRM:"crm_contacts",TRANSPORT:"transport",HR:"hr_employees",EMPLOYEE_MANAGEMENT:"hr_employees",SETTINGS:"settings_business",BILLING:"billing_invoices"};async function l(){try{var e,t,s,n,l,o;let c=(0,a.gd)("isBusinessOwner"),d=(0,a.gd)("ownerVerificationTimestamp"),m=Date.now();if(void 0!==c&&d&&m-parseInt(d)<3e5)return r.vF.debug("[verifyTenantOwnership] Using cached owner status:",c),c;let u=(null==(e=(0,a.gd)("auth"))?void 0:e.userAttributes)||(null==(s=window.__APP_CACHE)||null==(t=s.user)?void 0:t.attributes),p=(null==u?void 0:u["custom:userrole"])||"";if("owner"===p.toLowerCase())return r.vF.info("[verifyTenantOwnership] User has owner role in Cognito attributes"),(0,a.mm)("isBusinessOwner",!0),(0,a.mm)("ownerVerificationTimestamp",m.toString()),!0;let x=(null==(n=(0,a.gd)("auth"))?void 0:n.tenantId)||(null==(o=window.__APP_CACHE)||null==(l=o.auth)?void 0:l.tenantId)||(0,a.gd)("tenantId");if(!x)return r.vF.warn("[verifyTenantOwnership] No tenant ID found in cache"),!1;r.vF.info("[verifyTenantOwnership] Verifying owner status with backend");let h=await i.Ay.get("/tenants/api/verify-owner/?tenant_id=".concat(x));if((null==h?void 0:h.is_owner)===!0)return r.vF.info("[verifyTenantOwnership] Backend confirmed user is the owner"),(0,a.mm)("isBusinessOwner",!0),(0,a.mm)("ownerVerificationTimestamp",m.toString()),!0;return r.vF.info("[verifyTenantOwnership] User is not the tenant owner"),(0,a.mm)("isBusinessOwner",!1),(0,a.mm)("ownerVerificationTimestamp",m.toString()),!1}catch(e){return r.vF.error("[verifyTenantOwnership] Error verifying tenant ownership:",e),!1}}function o(e){try{let t=(0,a.gd)("isBusinessOwner");if(!0===t||e===n.DASHBOARD||"dashboard"===e)return!0;let s=(0,a.gd)("userPagePrivileges")||[];if(!s||0===s.length)return!1;let r=n[e]||e;return s.includes(r.toLowerCase())}catch(t){return r.vF.error("[hasPageAccess] Error checking access for page ".concat(e,":"),t),!1}}},43018:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(95155),r=s(51935),i=s(20088),n=s(12115),l=s(35695),o=s(53498),c=s(24818),d=s(16905);let m=(0,r.A)(()=>{(0,l.useRouter)();let[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!0),[i,m]=(0,n.useState)(null),[u,p]=(0,n.useState)(""),[x,h]=(0,n.useState)(null),[g,b]=(0,n.useState)(!1),[y,f]=(0,n.useState)("all"),v=[{id:"qualification",label:"Qualification",color:"bg-blue-100 text-blue-800"},{id:"needs-analysis",label:"Needs Analysis",color:"bg-indigo-100 text-indigo-800"},{id:"proposal",label:"Proposal",color:"bg-purple-100 text-purple-800"},{id:"negotiation",label:"Negotiation",color:"bg-yellow-100 text-yellow-800"},{id:"closed-won",label:"Closed Won",color:"bg-green-100 text-green-800"},{id:"closed-lost",label:"Closed Lost",color:"bg-red-100 text-red-800"}];(0,n.useEffect)(()=>{let e=async e=>{try{let e=[{id:1,name:"Enterprise Software Package - Tech Innovators",contactName:"Robert Chambers",company:"Tech Innovators",stage:"proposal",value:75e3,closeDate:"2023-12-15",probability:70,owner:"Jane Smith",source:"Website Lead",tags:["Enterprise","Software"],description:"Comprehensive enterprise software solution including inventory management, HR, and finance modules.",activities:[{id:1,type:"Call",date:"2023-10-05",description:"Initial discovery call"},{id:2,type:"Meeting",date:"2023-10-12",description:"Product demo"},{id:3,type:"Email",date:"2023-10-20",description:"Sent proposal"}]},{id:2,name:"POS System Upgrade - Retail Masters",contactName:"Alice Cooper",company:"Retail Masters",stage:"needs-analysis",value:35e3,closeDate:"2023-11-30",probability:50,owner:"Mike Johnson",source:"Trade Show",tags:["Retail","POS"],description:"Upgrade of existing POS system to include inventory management and customer loyalty features.",activities:[{id:1,type:"Meeting",date:"2023-09-15",description:"Met at trade show"},{id:2,type:"Call",date:"2023-09-22",description:"Follow-up call"}]},{id:3,name:"Healthcare Data Solution - Healthcare Plus",contactName:"James Wilson",company:"Healthcare Plus",stage:"closed-won",value:12e4,closeDate:"2023-10-05",probability:100,owner:"Jane Smith",source:"Referral",tags:["Healthcare","Data"],description:"Comprehensive HIPAA-compliant data management solution for healthcare providers.",activities:[{id:1,type:"Call",date:"2023-07-10",description:"Initial contact"},{id:2,type:"Meeting",date:"2023-07-25",description:"Requirements gathering"},{id:3,type:"Meeting",date:"2023-08-15",description:"Solution presentation"},{id:4,type:"Email",date:"2023-09-01",description:"Contract negotiation"},{id:5,type:"Meeting",date:"2023-10-05",description:"Deal closing"}]},{id:4,name:"CRM Implementation - Global Logistics",contactName:"Maria Rodriguez",company:"Global Logistics",stage:"qualification",value:45e3,closeDate:"2024-01-15",probability:30,owner:"David Smith",source:"LinkedIn",tags:["Logistics","CRM"],description:"Custom CRM implementation with shipment tracking integration.",activities:[{id:1,type:"Email",date:"2023-10-02",description:"Initial contact"},{id:2,type:"Call",date:"2023-10-10",description:"Discovery call"}]},{id:5,name:"Startup Growth Package - Startup Ventures",contactName:"Thomas Baker",company:"Startup Ventures",stage:"negotiation",value:25e3,closeDate:"2023-11-15",probability:80,owner:"Mike Johnson",source:"Content Download",tags:["Startup","Growth"],description:"Tailored software package for startups including CRM, inventory, and basic accounting.",activities:[{id:1,type:"Email",date:"2023-09-05",description:"Content download follow-up"},{id:2,type:"Call",date:"2023-09-12",description:"Discovery call"},{id:3,type:"Meeting",date:"2023-09-20",description:"Demo"},{id:4,type:"Email",date:"2023-10-01",description:"Proposal sent"},{id:5,type:"Call",date:"2023-10-10",description:"Negotiation call"}]},{id:6,name:"Manufacturing Solution - Industrial Systems Inc.",contactName:"George Miller",company:"Industrial Systems Inc.",stage:"closed-lost",value:85e3,closeDate:"2023-09-30",probability:0,owner:"Jane Smith",source:"Cold Call",tags:["Manufacturing","IoT"],description:"IoT-based manufacturing monitoring and management system.",activities:[{id:1,type:"Call",date:"2023-07-05",description:"Cold call"},{id:2,type:"Meeting",date:"2023-07-20",description:"Initial meeting"},{id:3,type:"Meeting",date:"2023-08-10",description:"Demo and presentation"},{id:4,type:"Email",date:"2023-08-25",description:"Proposal sent"},{id:5,type:"Call",date:"2023-09-15",description:"Lost to competitor"}]}];await d.E.set("crm_opportunities",JSON.stringify(e),{expires:600}),t(e),r(!1)}catch(e){console.error("Error updating opportunities:",e),m("Failed to update opportunities. Please try again later."),r(!1)}};(async()=>{try{r(!0);let s=(await (0,c.$)()).tokens.idToken.toString(),a=await d.E.get("crm_opportunities");if(a){t(JSON.parse(a)),r(!1),e(s);return}await e(s)}catch(e){console.error("Error fetching opportunities:",e),m("Failed to load opportunities. Please try again later."),r(!1)}})()},[]);let j=e=>{f(e)},w=e.filter(e=>{let t=e.name.toLowerCase().includes(u.toLowerCase())||e.contactName.toLowerCase().includes(u.toLowerCase())||e.company.toLowerCase().includes(u.toLowerCase());return"all"===y?t:t&&e.stage===y}),N=e=>{h(e),b(!0)},C=e.filter(e=>"closed-lost"!==e.stage).reduce((e,t)=>e+t.value,0),k=e.filter(e=>"closed-lost"!==e.stage).reduce((e,t)=>e+t.value*t.probability/100,0),S=e=>{let t=v.find(t=>t.id===e);return t?t.color:"bg-gray-100 text-gray-800"},A=e=>{let t=v.find(t=>t.id===e);return t?t.label:e},E=e=>"$".concat(e.toLocaleString());return(0,a.jsxs)(o.A,{children:[(0,a.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4 md:mb-0",children:"Opportunities"}),(0,a.jsx)("button",{onClick:()=>{alert("Add opportunity functionality would go here")},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Add Opportunity"})]}),i&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-md",children:i}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold uppercase text-gray-500 mb-1",children:"Total Pipeline Value"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:s?(0,a.jsx)("div",{className:"h-8 bg-blue-100 rounded animate-pulse w-2/3"}):E(C)}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Total value of all active opportunities"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold uppercase text-gray-500 mb-1",children:"Weighted Pipeline Value"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:s?(0,a.jsx)("div",{className:"h-8 bg-green-100 rounded animate-pulse w-2/3"}):E(k)}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Pipeline value adjusted by probability"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold uppercase text-gray-500 mb-1",children:"Average Deal Size"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:s?(0,a.jsx)("div",{className:"h-8 bg-purple-100 rounded animate-pulse w-2/3"}):E(e.length>0?C/e.filter(e=>"closed-lost"!==e.stage).length:0)}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Average value per opportunity"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between mb-4",children:[(0,a.jsx)("div",{className:"w-full md:w-1/2 mb-4 md:mb-0 md:mr-4",children:(0,a.jsx)("input",{type:"text",placeholder:"Search opportunities...",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:u,onChange:e=>{p(e.target.value)}})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>j("all"),className:"px-3 py-1 rounded-md ".concat("all"===y?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),children:"All"}),v.map(e=>(0,a.jsx)("button",{onClick:()=>j(e.id),className:"px-3 py-1 rounded-md ".concat(y===e.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),children:e.label},e.id))]})]}),s?(0,a.jsx)("div",{className:"animate-pulse",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"flex py-4 border-b border-gray-200",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-full mr-4"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]}),(0,a.jsx)("div",{className:"w-24 h-8 bg-gray-200 rounded"})]},t))}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50",children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opportunity"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stage"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Close Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Probability"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w.length>0?w.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-purple-600 font-medium",children:e.company.substring(0,2).toUpperCase()})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.company})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(S(e.stage)),children:A(e.stage)})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:E(e.value)})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.closeDate})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,a.jsx)("div",{className:"h-2.5 rounded-full ".concat(e.probability>70?"bg-green-600":e.probability>40?"bg-yellow-600":"bg-red-600"),style:{width:"".concat(e.probability,"%")}})}),(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-600",children:[e.probability,"%"]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>N(e),className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-900",children:"Edit"})]})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No opportunities found matching your search criteria."})})})]})})]})]}),g&&x&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 overflow-auto py-10",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-3xl w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Opportunity Details"}),(0,a.jsx)("button",{onClick:()=>{b(!1)},className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:x.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(S(x.stage)),children:A(x.stage)}),(0,a.jsx)("span",{className:"text-gray-600",children:E(x.value)}),(0,a.jsxs)("span",{className:"text-gray-600",children:["Close date: ",x.closeDate]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold uppercase text-gray-500 mb-2",children:"Contact"}),(0,a.jsx)("p",{className:"text-gray-800 font-medium",children:x.contactName}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:x.company})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold uppercase text-gray-500 mb-2",children:"Ownership"}),(0,a.jsxs)("p",{className:"text-gray-800",children:["Owner: ",(0,a.jsx)("span",{className:"font-medium",children:x.owner})]}),(0,a.jsxs)("p",{className:"text-gray-600 text-sm",children:["Source: ",x.source]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold uppercase text-gray-500 mb-2",children:"Probability"}),(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mr-2",children:(0,a.jsx)("div",{className:"h-2.5 rounded-full ".concat(x.probability>70?"bg-green-600":x.probability>40?"bg-yellow-600":"bg-red-600"),style:{width:"".concat(x.probability,"%")}})}),(0,a.jsxs)("span",{className:"text-gray-800 font-medium",children:[x.probability,"%"]})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:x.probability>70?"High probability":x.probability>40?"Medium probability":"Low probability"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold uppercase text-gray-500 mb-2",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-800 bg-gray-50 p-3 rounded",children:x.description})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold uppercase text-gray-500 mb-2",children:"Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap",children:x.tags.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full mr-2 mb-2",children:e},t))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold uppercase text-gray-500 mb-2",children:"Activity History"}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:x.activities.length>0?(0,a.jsx)("div",{className:"space-y-4",children:x.activities.map(e=>(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:(0,a.jsx)("span",{className:"text-blue-600 text-xs font-medium",children:e.type.substring(0,1)})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"font-medium text-gray-800",children:e.type}),(0,a.jsx)("span",{className:"mx-2 text-gray-400",children:"•"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.date})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:e.description})]})]},e.id))}):(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"No activities recorded yet."})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{className:"px-4 py-2 bg-white text-blue-600 border border-blue-600 rounded-md hover:bg-blue-50 transition-colors",children:"Edit"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Add Activity"}),"closed-won"!==x.stage&&"closed-lost"!==x.stage&&(0,a.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Mark as Won"})]})]})})]})},i.F2.CRM)},51935:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(55166),r=s(95155),i=s(12115),n=s(20088);function l(){return(0,r.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] px-4",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("svg",{className:"w-20 h-20 mx-auto text-gray-400 mb-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Access Restricted"}),(0,r.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:"You do not have access to this page. Please make a request to your administrator for access."}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)("button",{onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Go Back"]})})]})})}var o=s(35695),c=s(42749);function d(e,t){return function(s){let[d,m]=(0,i.useState)(null),[u,p]=(0,i.useState)(!0),x=(0,o.usePathname)();return((0,i.useEffect)(()=>{try{let e=(0,n.ij)(t);m(e),c.vF.debug("[withPageAccess] Access to ".concat(t," page: ").concat(e?"granted":"denied"))}catch(e){c.vF.error("[withPageAccess] Error checking page access: ".concat(e)),m(!1)}finally{p(!1)}},[x]),u)?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-[60vh]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):d?(0,r.jsx)(e,(0,a._)({},s)):(0,r.jsx)(l,{})}}},53498:(e,t,s)=>{"use strict";s.d(t,{A:()=>b});var a=s(95155),r=s(11518),i=s.n(r),n=s(12115),l=s(35695),o=s(42749);s(55028),s(66766);var c=s(15343);s(19596);var d=s(51174),m=s(12743),u=s(55166),p=s(68387);async function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.startsWith("/")?e.substring(1):e,a=(0,p._)((0,u._)({},t),{headers:(0,u._)({"Content-Type":"application/json"},t.headers)});try{let e=await fetch("/api/proxy/".concat(s),a);if(!e.ok)throw Error("API request failed with status ".concat(e.status));return await e.json()}catch(t){throw console.error("[proxyFetch] Error fetching ".concat(e,":"),t),t}}let h={get:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return x(e,(0,u._)({method:"GET"},t))},resetCircuitBreakers:function(){let e=Object.keys(localStorage).filter(e=>e.startsWith("circuitBreaker:"));return e.forEach(e=>{console.log("[resetCircuitBreakers] Removing ".concat(e," from localStorage")),localStorage.removeItem(e)}),console.log("[resetCircuitBreakers] Reset ".concat(e.length," circuit breakers")),window.__resetCircuitBreakers&&(window.__resetCircuitBreakers(),console.log("[resetCircuitBreakers] Called global reset function")),e.length}};function g(){let[e,t]=(0,n.useState)(null),[s,r]=(0,n.useState)(null),[i,l]=(0,n.useState)(!1),[o,c]=(0,n.useState)(!1),[d,m]=(0,n.useState)("hr/employees"),[u,p]=(0,n.useState)(""),x=async()=>{l(!0);try{try{let e={"Content-Type":"application/json"};u&&(e.Authorization="Bearer ".concat(u));let t=await fetch("https://127.0.0.1:8000/api/".concat(d,"/"),{method:"GET",headers:e});console.log("[HttpsDebugger] Direct API response:",t)}catch(e){console.warn("[HttpsDebugger] Direct API request failed:",e)}let e={};u&&(e={headers:{Authorization:"Bearer ".concat(u)}});let s=await h.get(d,e);t({success:!0,message:"API connection successful",data:s})}catch(e){t({success:!1,message:"API connection failed",error:e.message})}finally{l(!1)}};return(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-4 my-4 max-w-xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"HTTPS Debug Tools"}),(0,a.jsx)("button",{onClick:()=>c(!o),className:"text-gray-600 hover:text-blue-500",children:o?"Collapse":"Expand"})]}),o&&(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["API Endpoint",(0,a.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),placeholder:"e.g., hr/employees",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Auth Token (optional)",(0,a.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value),placeholder:"Bearer token for authenticated endpoints",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:x,disabled:i,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:i?"Testing...":"Test API Connection"}),(0,a.jsx)("button",{onClick:()=>{try{let e=h.resetCircuitBreakers();r({success:!0,message:"Reset ".concat(e," circuit breakers")})}catch(e){r({success:!1,message:"Failed to reset circuit breakers",error:e.message})}},className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Reset Circuit Breakers"})]}),e&&(0,a.jsxs)("div",{className:"p-3 rounded ".concat(e.success?"bg-green-100":"bg-red-100"),children:[(0,a.jsx)("p",{className:"font-semibold",children:e.message}),!e.success&&(0,a.jsx)("p",{className:"text-red-600 text-sm",children:e.error}),e.success&&e.data&&(0,a.jsx)("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-sm overflow-auto max-h-40",children:JSON.stringify(e.data,null,2)})]}),s&&(0,a.jsxs)("div",{className:"p-3 rounded ".concat(s.success?"bg-green-100":"bg-red-100"),children:[(0,a.jsx)("p",{className:"font-semibold",children:s.message}),!s.success&&(0,a.jsx)("p",{className:"text-red-600 text-sm",children:s.error})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Connection Information"}),(0,a.jsxs)("ul",{className:"text-sm space-y-1 text-gray-600",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Frontend URL:"})," ",window.location.origin]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"API Proxy:"})," ",window.location.origin,"/api/proxy/"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Backend URL:"})," https://127.0.0.1:8000/api/"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"HTTPS Mode:"})," ",window.__HTTPS_ENABLED?"Enabled":"Disabled"]})]})]}),(0,a.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Common API Endpoints"}),(0,a.jsxs)("div",{className:"text-sm space-y-1 text-gray-600",children:[(0,a.jsx)("button",{onClick:()=>m("hr/employees"),className:"block text-blue-500 hover:underline",children:"HR Employees"}),(0,a.jsx)("button",{onClick:()=>m("finance/transactions"),className:"block text-blue-500 hover:underline",children:"Finance Transactions"}),(0,a.jsx)("button",{onClick:()=>m("database/health-check"),className:"block text-blue-500 hover:underline",children:"Database Health Check"})]})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:(0,a.jsx)("p",{children:"* This component is for development debugging only."})})]})]})}function b(e){let{children:t,newAccount:s,plan:r,tenantId:u}=e,p=(0,l.useRouter)(),[x,h]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),[f,v]=(0,n.useState)(u),[j,w]=(0,n.useState)("initial"),N=(0,n.useRef)(0);return(0,n.useEffect)(()=>{var e;let t=()=>{N.current+=1,w("navigation-".concat(N.current))};return null==(e=p.events)||e.on("routeChangeComplete",t),()=>{var e;null==(e=p.events)||e.off("routeChangeComplete",t)}},[p]),(0,n.useEffect)(()=>{if(u)return void v(u);let e=(()=>{let e=document.cookie.split(";"),t=null;for(let s of e){let[e,a]=s.trim().split("=");if("tenantId"===e){t=a;break}}if(t)return t;try{return localStorage.getItem("tenantId")||sessionStorage.getItem("tenantId")}catch(e){return null}})();e&&(o.vF.info("[DashboardWrapper] Using tenant ID from cache: ".concat(e)),v(e))},[u]),(0,n.useEffect)(()=>{f&&(0,d.isValidUUID)(f)?(o.vF.info("[DashboardWrapper] Storing valid tenant ID: ".concat(f)),(0,d.$_)(f)):f&&o.vF.warn("[DashboardWrapper] Invalid tenant ID format: ".concat(f))},[f]),(0,a.jsxs)("div",{className:"jsx-2ea202641b209f13 flex flex-col min-h-screen bg-gray-50",children:[(0,a.jsx)(i(),{id:"2ea202641b209f13",children:'html,body{height:100%;min-height:100%;width:100%;overflow-x:hidden}body{font-family:var(--font-family,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif);margin:0;padding:0}::-moz-selection{background-color:rgba(67,56,202,.3)}::selection{background-color:rgba(67,56,202,.3)}'}),(0,a.jsxs)("main",{className:"jsx-2ea202641b209f13 flex-1",children:[(0,a.jsx)(g,{}),(0,a.jsx)(c.A,{tenantId:f,newAccount:s,plan:r,children:t},j)]}),(0,a.jsx)(m.A,{})]})}},83701:(e,t,s)=>{Promise.resolve().then(s.bind(s,43018))}},e=>{var t=t=>e(e.s=t);e.O(0,[54940,9296,79480,58430,84620,23639,38501,78746,20171,79189,6874,62052,66766,31296,66352,38772,35162,37921,8896,29729,44367,47856,67953,3963,83531,93078,14719,14745,28441,31684,77358],()=>t(83701)),_N_E=e.O()}]);