(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98425],{7035:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var r=a(95155),t=a(12115),n=a(55166),l=a(68387),i=a(35695);function o(e){let{service:s,mode:a="create"}=e,o=(0,i.useRouter)(),[d,c]=(0,t.useState)(!1),[u,m]=(0,t.useState)(""),[x,h]=(0,t.useState)((0,n._)({name:"",code:"",description:"",rate:"",duration:"",category:"",status:"Active",taxRate:""},s)),b=e=>{let{name:s,value:a}=e.target;h(e=>(0,l._)((0,n._)({},e),{[s]:a}))},p=async e=>{e.preventDefault(),c(!0),m("");try{let e="create"===a?"/api/services":"/api/services/".concat(s.id);if(!(await fetch(e,{method:"create"===a?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).ok)throw Error("Failed to save service");o.push("/dashboard/services")}catch(e){m(e.message)}finally{c(!1)}};return(0,r.jsx)("form",{onSubmit:p,className:"p-6",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"create"===a?"Add New Service":"Edit Service"}),u&&(0,r.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm text-red-700",children:u})})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Service Name ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{id:"name",name:"name",type:"text",required:!0,value:x.name,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-1",children:["Service Code ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{id:"code",name:"code",type:"text",required:!0,value:x.code,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{id:"description",name:"description",rows:4,value:x.description,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{className:"md:col-span-1",children:[(0,r.jsxs)("label",{htmlFor:"rate",className:"block text-sm font-medium text-gray-700 mb-1",children:["Rate ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),(0,r.jsx)("input",{id:"rate",name:"rate",type:"number",required:!0,value:x.rate,onChange:b,className:"w-full pl-7 pr-12 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,r.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"/hr"})})]})]}),(0,r.jsxs)("div",{className:"md:col-span-1",children:[(0,r.jsxs)("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:["Duration ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,r.jsx)("input",{id:"duration",name:"duration",type:"number",required:!0,value:x.duration,onChange:b,className:"w-full pr-12 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,r.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"mins"})})]})]}),(0,r.jsxs)("div",{className:"md:col-span-1",children:[(0,r.jsxs)("label",{htmlFor:"taxRate",className:"block text-sm font-medium text-gray-700 mb-1",children:["Tax Rate ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,r.jsx)("input",{id:"taxRate",name:"taxRate",type:"number",required:!0,value:x.taxRate,onChange:b,className:"w-full pr-8 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,r.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"%"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,r.jsxs)("select",{id:"category",name:"category",value:x.category,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"",disabled:!0,children:"Select a category"}),(0,r.jsx)("option",{value:"consulting",children:"Consulting"}),(0,r.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,r.jsx)("option",{value:"repair",children:"Repair"}),(0,r.jsx)("option",{value:"installation",children:"Installation"}),(0,r.jsx)("option",{value:"training",children:"Training"}),(0,r.jsx)("option",{value:"support",children:"Support"}),(0,r.jsx)("option",{value:"other",children:"Other"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,r.jsxs)("select",{id:"status",name:"status",value:x.status,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"Active",children:"Active"}),(0,r.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,r.jsx)("option",{value:"Discontinued",children:"Discontinued"})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 flex justify-end space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>o.push("/dashboard/services"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(d?"opacity-75 cursor-not-allowed":""),children:d?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{children:"Processing..."})]}):"create"===a?"Create Service":"Save Changes"})]})]})})}function d(){let e=(0,i.useParams)(),[s,a]=(0,t.useState)(null),[n,l]=(0,t.useState)(!0),[d,c]=(0,t.useState)(null);return((0,t.useEffect)(()=>{(async()=>{try{let s=await fetch("/api/services/".concat(e.id));if(!s.ok)throw Error("Failed to fetch service");let r=await s.json();a(r)}catch(e){c(e.message)}finally{l(!1)}})()},[e.id]),n)?(0,r.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):d?(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("p",{className:"text-red-600",children:["Error: ",d]})}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("h1",{className:"text-2xl font-semibold",children:["Edit Service: ",null==s?void 0:s.name]})}),(0,r.jsx)(o,{mode:"edit",service:s})]})}},35695:(e,s,a)=>{"use strict";var r=a(18999);a.o(r,"useParams")&&a.d(s,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(s,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})},98898:(e,s,a)=>{Promise.resolve().then(a.bind(a,7035))}},e=>{var s=s=>e(e.s=s);e.O(0,[28441,31684,77358],()=>s(98898)),_N_E=e.O()}]);