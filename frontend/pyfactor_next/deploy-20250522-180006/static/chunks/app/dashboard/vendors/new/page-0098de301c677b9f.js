(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38050,40808],{12743:(e,t,s)=>{"use strict";s.d(t,{A:()=>n}),s(95155);var r=s(12115),a=s(29729);function n(){let[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)("");return(0,r.useEffect)(()=>(t("https:"===window.location.protocol),window.__resetCircuitBreakers=a.resetCircuitBreakers,window.resetCircuitBreakers=()=>((0,a.resetCircuitBreakers)(),console.log("[HttpsConfig] Circuit breakers manually reset"),!0),"https:"===window.location.protocol&&((0,a.resetCircuitBreakers)(),console.log("[HttpsConfig] Circuit breakers auto-reset for HTTPS mode")),()=>{delete window.__resetCircuitBreakers}),[]),null}},15343:(e,t,s)=>{"use strict";s.d(t,{A:()=>r.A});var r=s(14745)},19596:(e,t,s)=>{"use strict";s.d(t,{kd:()=>r});let r={BUSINESS_INFO:"business-info",SUBSCRIPTION:"subscription",PAYMENT:"payment",SETUP:"setup",COMPLETE:"complete",DASHBOARD:"dashboard"}},23425:(e,t,s)=>{Promise.resolve().then(s.bind(s,82866))},38050:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(55166),a=s(68387),n=s(95155),o=s(12115),i=s(29729);let c=e=>{let{newVendor:t=!1}=e,[s,c]=(0,o.useState)(2*!t),[l,d]=(0,o.useState)([]),[m,u]=(0,o.useState)(null),[x,h]=(0,o.useState)({vendor_name:"",street:"",postcode:"",city:"",state:"",phone:""});(0,o.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=await i.SP.get("/api/vendors/");d(Array.isArray(e.data)?e.data:[])}catch(e){console.error("Error fetching vendors:",e),d([])}},g=e=>{c(e),u(null)},y=e=>{let{name:t,value:s}=e.target;h(e=>(0,a._)((0,r._)({},e),{[t]:s}))},f=async e=>{e.preventDefault();try{await i.SP.post("/api/vendors/create/",x),p(),h({vendor_name:"",street:"",postcode:"",city:"",state:"",phone:""}),c(2)}catch(e){console.error("Error creating vendor:",e)}},b=e=>{u(e),c(1)};return(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Vendor Management"}),(0,n.jsx)("div",{className:"border-b border-gray-200 mb-4",children:(0,n.jsxs)("nav",{className:"flex -mb-px",children:[(0,n.jsx)("button",{className:"py-2 px-4 border-b-2 font-medium text-sm ".concat(0===s?"border-primary-main text-primary-main":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>g(0),children:"Create Vendor"}),(0,n.jsx)("button",{className:"py-2 px-4 border-b-2 font-medium text-sm ".concat(1===s?"border-primary-main text-primary-main":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>g(1),disabled:!m&&1!==s,children:"Vendor Detail"}),(0,n.jsx)("button",{className:"py-2 px-4 border-b-2 font-medium text-sm ".concat(2===s?"border-primary-main text-primary-main":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>g(2),children:"Vendor List"})]})}),0===s&&(0,n.jsx)("form",{onSubmit:f,children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)("label",{htmlFor:"vendor_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor Name"}),(0,n.jsx)("input",{id:"vendor_name",type:"text",name:"vendor_name",value:x.vendor_name,onChange:y,required:!0,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-main focus:ring focus:ring-primary-light focus:ring-opacity-50"})]}),(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700 mb-1",children:"Street"}),(0,n.jsx)("input",{id:"street",type:"text",name:"street",value:x.street,onChange:y,required:!0,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-main focus:ring focus:ring-primary-light focus:ring-opacity-50"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"postcode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode"}),(0,n.jsx)("input",{id:"postcode",type:"text",name:"postcode",value:x.postcode,onChange:y,required:!0,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-main focus:ring focus:ring-primary-light focus:ring-opacity-50"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,n.jsx)("input",{id:"city",type:"text",name:"city",value:x.city,onChange:y,required:!0,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-main focus:ring focus:ring-primary-light focus:ring-opacity-50"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,n.jsx)("input",{id:"state",type:"text",name:"state",value:x.state,onChange:y,required:!0,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-main focus:ring focus:ring-primary-light focus:ring-opacity-50"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,n.jsx)("input",{id:"phone",type:"text",name:"phone",value:x.phone,onChange:y,required:!0,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-main focus:ring focus:ring-primary-light focus:ring-opacity-50"})]}),(0,n.jsx)("div",{className:"md:col-span-2 mt-4",children:(0,n.jsx)("button",{type:"submit",className:"px-4 py-2 bg-primary-main text-white rounded-md hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-primary-light focus:ring-opacity-50",children:"Create Vendor"})})]})}),1===s&&m&&(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Vendor Details"}),(0,n.jsxs)("p",{className:"text-gray-700",children:[(0,n.jsx)("span",{className:"font-medium",children:"Vendor Number:"})," ",m.vendor_number]}),(0,n.jsxs)("p",{className:"text-gray-700",children:[(0,n.jsx)("span",{className:"font-medium",children:"Vendor Name:"})," ",m.vendor_name]}),(0,n.jsxs)("p",{className:"text-gray-700",children:[(0,n.jsx)("span",{className:"font-medium",children:"Street:"})," ",m.street]}),(0,n.jsxs)("p",{className:"text-gray-700",children:[(0,n.jsx)("span",{className:"font-medium",children:"Postcode:"})," ",m.postcode]}),(0,n.jsxs)("p",{className:"text-gray-700",children:[(0,n.jsx)("span",{className:"font-medium",children:"City:"})," ",m.city]}),(0,n.jsxs)("p",{className:"text-gray-700",children:[(0,n.jsx)("span",{className:"font-medium",children:"State:"})," ",m.state]}),(0,n.jsxs)("p",{className:"text-gray-700",children:[(0,n.jsx)("span",{className:"font-medium",children:"Phone:"})," ",m.phone]})]}),2===s&&(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor Number"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor Name"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),(0,n.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.isArray(l)&&l.length>0?l.map(e=>(0,n.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.vendor_number}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.vendor_name}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.city}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.phone}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,n.jsx)("button",{onClick:()=>b(e),className:"text-primary-main hover:text-primary-dark",children:"View Details"})})]},e.id)):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No vendors found"})})})]})})]})}},53498:(e,t,s)=>{"use strict";s.d(t,{A:()=>y});var r=s(95155),a=s(11518),n=s.n(a),o=s(12115),i=s(35695),c=s(42749);s(55028),s(66766);var l=s(15343);s(19596);var d=s(51174),m=s(12743),u=s(55166),x=s(68387);async function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.startsWith("/")?e.substring(1):e,r=(0,x._)((0,u._)({},t),{headers:(0,u._)({"Content-Type":"application/json"},t.headers)});try{let e=await fetch("/api/proxy/".concat(s),r);if(!e.ok)throw Error("API request failed with status ".concat(e.status));return await e.json()}catch(t){throw console.error("[proxyFetch] Error fetching ".concat(e,":"),t),t}}let p={get:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h(e,(0,u._)({method:"GET"},t))},resetCircuitBreakers:function(){let e=Object.keys(localStorage).filter(e=>e.startsWith("circuitBreaker:"));return e.forEach(e=>{console.log("[resetCircuitBreakers] Removing ".concat(e," from localStorage")),localStorage.removeItem(e)}),console.log("[resetCircuitBreakers] Reset ".concat(e.length," circuit breakers")),window.__resetCircuitBreakers&&(window.__resetCircuitBreakers(),console.log("[resetCircuitBreakers] Called global reset function")),e.length}};function g(){let[e,t]=(0,o.useState)(null),[s,a]=(0,o.useState)(null),[n,i]=(0,o.useState)(!1),[c,l]=(0,o.useState)(!1),[d,m]=(0,o.useState)("hr/employees"),[u,x]=(0,o.useState)(""),h=async()=>{i(!0);try{try{let e={"Content-Type":"application/json"};u&&(e.Authorization="Bearer ".concat(u));let t=await fetch("https://127.0.0.1:8000/api/".concat(d,"/"),{method:"GET",headers:e});console.log("[HttpsDebugger] Direct API response:",t)}catch(e){console.warn("[HttpsDebugger] Direct API request failed:",e)}let e={};u&&(e={headers:{Authorization:"Bearer ".concat(u)}});let s=await p.get(d,e);t({success:!0,message:"API connection successful",data:s})}catch(e){t({success:!1,message:"API connection failed",error:e.message})}finally{i(!1)}};return(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-4 my-4 max-w-xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"HTTPS Debug Tools"}),(0,r.jsx)("button",{onClick:()=>l(!c),className:"text-gray-600 hover:text-blue-500",children:c?"Collapse":"Expand"})]}),c&&(0,r.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["API Endpoint",(0,r.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),placeholder:"e.g., hr/employees",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Auth Token (optional)",(0,r.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value),placeholder:"Bearer token for authenticated endpoints",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:h,disabled:n,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:n?"Testing...":"Test API Connection"}),(0,r.jsx)("button",{onClick:()=>{try{let e=p.resetCircuitBreakers();a({success:!0,message:"Reset ".concat(e," circuit breakers")})}catch(e){a({success:!1,message:"Failed to reset circuit breakers",error:e.message})}},className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Reset Circuit Breakers"})]}),e&&(0,r.jsxs)("div",{className:"p-3 rounded ".concat(e.success?"bg-green-100":"bg-red-100"),children:[(0,r.jsx)("p",{className:"font-semibold",children:e.message}),!e.success&&(0,r.jsx)("p",{className:"text-red-600 text-sm",children:e.error}),e.success&&e.data&&(0,r.jsx)("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-sm overflow-auto max-h-40",children:JSON.stringify(e.data,null,2)})]}),s&&(0,r.jsxs)("div",{className:"p-3 rounded ".concat(s.success?"bg-green-100":"bg-red-100"),children:[(0,r.jsx)("p",{className:"font-semibold",children:s.message}),!s.success&&(0,r.jsx)("p",{className:"text-red-600 text-sm",children:s.error})]})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Connection Information"}),(0,r.jsxs)("ul",{className:"text-sm space-y-1 text-gray-600",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Frontend URL:"})," ",window.location.origin]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"API Proxy:"})," ",window.location.origin,"/api/proxy/"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Backend URL:"})," https://127.0.0.1:8000/api/"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"HTTPS Mode:"})," ",window.__HTTPS_ENABLED?"Enabled":"Disabled"]})]})]}),(0,r.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Common API Endpoints"}),(0,r.jsxs)("div",{className:"text-sm space-y-1 text-gray-600",children:[(0,r.jsx)("button",{onClick:()=>m("hr/employees"),className:"block text-blue-500 hover:underline",children:"HR Employees"}),(0,r.jsx)("button",{onClick:()=>m("finance/transactions"),className:"block text-blue-500 hover:underline",children:"Finance Transactions"}),(0,r.jsx)("button",{onClick:()=>m("database/health-check"),className:"block text-blue-500 hover:underline",children:"Database Health Check"})]})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:(0,r.jsx)("p",{children:"* This component is for development debugging only."})})]})]})}function y(e){let{children:t,newAccount:s,plan:a,tenantId:u}=e,x=(0,i.useRouter)(),[h,p]=(0,o.useState)(!1),[y,f]=(0,o.useState)(!1),[b,j]=(0,o.useState)(u),[N,v]=(0,o.useState)("initial"),w=(0,o.useRef)(0);return(0,o.useEffect)(()=>{var e;let t=()=>{w.current+=1,v("navigation-".concat(w.current))};return null==(e=x.events)||e.on("routeChangeComplete",t),()=>{var e;null==(e=x.events)||e.off("routeChangeComplete",t)}},[x]),(0,o.useEffect)(()=>{if(u)return void j(u);let e=(()=>{let e=document.cookie.split(";"),t=null;for(let s of e){let[e,r]=s.trim().split("=");if("tenantId"===e){t=r;break}}if(t)return t;try{return localStorage.getItem("tenantId")||sessionStorage.getItem("tenantId")}catch(e){return null}})();e&&(c.vF.info("[DashboardWrapper] Using tenant ID from cache: ".concat(e)),j(e))},[u]),(0,o.useEffect)(()=>{b&&(0,d.isValidUUID)(b)?(c.vF.info("[DashboardWrapper] Storing valid tenant ID: ".concat(b)),(0,d.$_)(b)):b&&c.vF.warn("[DashboardWrapper] Invalid tenant ID format: ".concat(b))},[b]),(0,r.jsxs)("div",{className:"jsx-2ea202641b209f13 flex flex-col min-h-screen bg-gray-50",children:[(0,r.jsx)(n(),{id:"2ea202641b209f13",children:'html,body{height:100%;min-height:100%;width:100%;overflow-x:hidden}body{font-family:var(--font-family,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif);margin:0;padding:0}::-moz-selection{background-color:rgba(67,56,202,.3)}::selection{background-color:rgba(67,56,202,.3)}'}),(0,r.jsxs)("main",{className:"jsx-2ea202641b209f13 flex-1",children:[(0,r.jsx)(g,{}),(0,r.jsx)(l.A,{tenantId:b,newAccount:s,plan:a,children:t},N)]}),(0,r.jsx)(m.A,{})]})}},82866:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(95155);s(12115);var a=s(53498),n=s(38050);function o(){return(0,r.jsx)(a.A,{children:(0,r.jsx)(n.default,{newVendor:!0})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[54940,9296,79480,58430,84620,23639,38501,78746,20171,79189,6874,62052,66766,31296,66352,38772,35162,37921,8896,29729,44367,47856,67953,3963,83531,93078,14719,14745,28441,31684,77358],()=>t(23425)),_N_E=e.O()}]);