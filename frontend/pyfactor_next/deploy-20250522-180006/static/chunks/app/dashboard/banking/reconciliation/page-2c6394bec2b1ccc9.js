(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56532,77376],{6654:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let r=s(12115);function a(e,t){let s=(0,r.useRef)(null),a=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=s.current;e&&(s.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(s.current=n(e,r)),t&&(a.current=n(t,r))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},37811:e=>{var t,s,r,a=e.exports={};function n(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{s="function"==typeof clearTimeout?clearTimeout:l}catch(e){s=l}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}var c=[],d=!1,o=-1;function x(){d&&r&&(d=!1,r.length?c=r.concat(c):o=-1,c.length&&u())}function u(){if(!d){var e=i(x);d=!0;for(var t=c.length;t;){for(r=c,c=[];++o<t;)r&&r[o].run();o=-1,t=c.length}r=null,d=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===l||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];c.push(new m(e,t)),1!==c.length||d||i(u)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}},56532:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(55166),a=s(68387),n=s(95155),l=s(12115),i=s(29729),c=s(66766);let d=()=>{let[e,t]=(0,l.useState)(""),[s,d]=(0,l.useState)(null),[o,x]=(0,l.useState)(null),[u,m]=(0,l.useState)(0),[h,p]=(0,l.useState)(0),[g,f]=(0,l.useState)(0),[y,j]=(0,l.useState)(0),[b,v]=(0,l.useState)(0),[w,N]=(0,l.useState)([]),[k,S]=(0,l.useState)([]),[T,_]=(0,l.useState)([]),[C,D]=(0,l.useState)(0),[A,E]=(0,l.useState)(0),[M,R]=(0,l.useState)([]),[B,O]=(0,l.useState)(!1),[L,P]=(0,l.useState)({adjustments:!1,unmatched:!1});(0,l.useEffect)(()=>{F()},[]),(0,l.useEffect)(()=>{e&&s&&o&&(z(),I())},[e,s,o]),(0,l.useEffect)(()=>{j(h-g),v(g+C+A)},[h,g,C,A]);let F=async()=>{try{let e=await i.SP.get("/api/banking/accounts/");e.data.accounts&&Array.isArray(e.data.accounts)?R(e.data.accounts):R([])}catch(e){console.error("Error fetching connected banks:",e)}},z=async()=>{O(!0);try{let t=await i.SP.get("/api/banking/transactions/",{params:{account_id:e,start_date:s.toISOString().split("T")[0],end_date:o.toISOString().split("T")[0]}});t.data.transactions&&Array.isArray(t.data.transactions)?N(t.data.transactions):N([])}catch(e){console.error("Error fetching bank transactions:",e)}finally{O(!1)}},I=async()=>{O(!0);try{let t=await i.SP.get("/api/general-ledger/",{params:{account_id:e,start_date:s.toISOString().split("T")[0],end_date:o.toISOString().split("T")[0]}});t.data&&Array.isArray(t.data)?S(t.data):S([])}catch(e){console.error("Error fetching book transactions:",e)}finally{O(!1)}},$=e=>e?new Date(e).toISOString().split("T")[0]:"",H=e=>{P(t=>(0,a._)((0,r._)({},t),{[e]:!t[e]}))};return(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"mr-4 text-blue-600",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Bank Reconciliation"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Manage your bank reconciliation"})]})]}),(0,n.jsx)("div",{className:"mt-4 md:mt-0",children:(0,n.jsx)(c.default,{src:"/static/images/Recon.png",alt:"Reconciliation",width:130,height:130,style:{objectFit:"contain"}})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Account"}),(0,n.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md bg-white",value:e,onChange:e=>t(e.target.value),children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"Select Bank Account"}),M.map(e=>(0,n.jsx)("option",{value:e.account_id,children:e.name},e.account_id))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,n.jsx)("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded-md",value:$(s),onChange:e=>d(e.target.value?new Date(e.target.value):null)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,n.jsx)("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded-md",value:$(o),onChange:e=>x(e.target.value?new Date(e.target.value):null)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ending Balance"}),(0,n.jsx)("input",{type:"number",className:"w-full p-2 border border-gray-300 rounded-md",value:h,onChange:e=>p(Number(e.target.value))})]})]}),(0,n.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Reconciliation Summary"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-gray-600",children:"Book Balance:"}),(0,n.jsxs)("p",{className:"text-lg font-medium",children:["$",g.toFixed(2)]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-gray-600",children:"Difference:"}),(0,n.jsxs)("p",{className:"text-lg font-medium ".concat(0!==y?"text-red-600":"text-green-600"),children:["$",y.toFixed(2)]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-gray-600",children:"Adjusted Balance:"}),(0,n.jsxs)("p",{className:"text-lg font-medium",children:["$",b.toFixed(2)]})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Bank Transactions"}),B?(0,n.jsx)("div",{className:"flex justify-center py-4",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,n.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[w.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.amount.toFixed(2)]}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.status||"Pending"})]},t)),0===w.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No bank transactions found"})})]})]})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Book Transactions"}),B?(0,n.jsx)("div",{className:"flex justify-center py-4",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,n.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[k.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.amount.toFixed(2)]}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.status||"Posted"})]},t)),0===k.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No book transactions found"})})]})]})})]})]}),(0,n.jsxs)("div",{className:"mb-6 border border-gray-200 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center p-4 cursor-pointer",onClick:()=>H("adjustments"),children:[(0,n.jsx)("h3",{className:"text-lg font-medium",children:"Adjustments"}),(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform ".concat(L.adjustments?"rotate-180":""," transition-transform"),viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),L.adjustments&&(0,n.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Fees"}),(0,n.jsx)("input",{type:"number",className:"w-full p-2 border border-gray-300 rounded-md",value:C,onChange:e=>D(Number(e.target.value))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interest Earned"}),(0,n.jsx)("input",{type:"number",className:"w-full p-2 border border-gray-300 rounded-md",value:A,onChange:e=>E(Number(e.target.value))})]})]}),(0,n.jsx)("button",{type:"button",onClick:()=>{},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Missing Transaction"})]})]}),(0,n.jsxs)("div",{className:"mb-6 border border-gray-200 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center p-4 cursor-pointer",onClick:()=>H("unmatched"),children:[(0,n.jsx)("h3",{className:"text-lg font-medium",children:"Unmatched Transactions"}),(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform ".concat(L.unmatched?"rotate-180":""," transition-transform"),viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),L.unmatched&&(0,n.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"})]})}),(0,n.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[T.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.date}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.amount}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.source})]},t)),0===T.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No unmatched transactions found"})})]})]})})})]}),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4 mb-6",children:[(0,n.jsx)("button",{type:"button",onClick:()=>{},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Save Draft"}),(0,n.jsx)("button",{type:"button",onClick:()=>{},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Finalize & Reconcile"}),(0,n.jsx)("button",{type:"button",onClick:()=>{},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Generate Report"})]}),0!==y&&(0,n.jsx)("div",{className:"p-4 mb-4 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,n.jsxs)("div",{className:"flex items-start",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,n.jsx)("div",{className:"ml-3",children:(0,n.jsxs)("p",{className:"text-sm text-yellow-700",children:["There is a discrepancy of $",Math.abs(y).toFixed(2)," in your reconciliation. Please review your transactions."]})})]})})]})}},65506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(95155);s(12115);var a=s(56532);function n(){return(0,r.jsx)("div",{className:"flex flex-col items-stretch w-full h-full p-4",children:(0,r.jsx)(a.default,{})})}},78499:(e,t,s)=>{Promise.resolve().then(s.bind(s,65506))}},e=>{var t=t=>e(e.s=t);e.O(0,[54940,20171,79189,66766,29729,28441,31684,77358],()=>t(78499)),_N_E=e.O()}]);