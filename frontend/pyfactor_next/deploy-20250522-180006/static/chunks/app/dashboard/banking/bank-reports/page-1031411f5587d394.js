(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[15319,45277],{15319:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(95155),a=s(12115),n=s(29729);let i=()=>{let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[l,d]=(0,a.useState)(""),[h,u]=(0,a.useState)(null),[x,m]=(0,a.useState)(!1),[g,p]=(0,a.useState)("");(0,a.useEffect)(()=>{f()},[]),(0,a.useEffect)(()=>{console.log("Selected account updated:",s)},[s]);let f=async()=>{m(!0),p("");try{let e=await n.SP.get("/api/banking/accounts/");console.log("Bank accounts response:",e.data),Array.isArray(e.data)?t(e.data):e.data&&Array.isArray(e.data.accounts)?t(e.data.accounts):(console.error("Unexpected response format:",e.data),t([]),p("Unexpected response format from server"))}catch(e){console.error("Error fetching bank accounts:",e),t([]),p("Failed to fetch bank accounts")}finally{m(!1)}},b=async()=>{m(!0),p("");try{console.log("Fetching report for account:",s);let e=await n.SP.get("/api/banking/report/",{params:{account_id:s,start_date:o,end_date:l}});console.log("Report data:",e.data),u(e.data)}catch(e){console.error("Error fetching report data:",e),p("Failed to fetch report data")}finally{m(!1)}},y=e=>{console.log("Exporting report as ".concat(e))};return(0,r.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Banking Report"}),g&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:g}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 items-center",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("select",{className:"block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:s,onChange:e=>{let t=e.target.value;console.log("Account selected:",t),i(t)},children:[(0,r.jsx)("option",{value:"",disabled:!0,children:"Select Bank Account"}),Array.isArray(e)&&e.length>0?e.map(e=>(0,r.jsxs)("option",{value:e.account_id,children:[e.name," - ",e.mask]},e.account_id)):(0,r.jsx)("option",{disabled:!0,children:"No bank accounts available"})]})}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"date",className:"block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:o,onChange:e=>{console.log("Start date changed:",e.target.value),c(e.target.value)},placeholder:"Start Date"})}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"date",className:"block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:l,onChange:e=>{console.log("End date changed:",e.target.value),d(e.target.value)},placeholder:"End Date"})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>(console.log("Generate report clicked. Selected account:",s),s)?o&&l?void b():void p("Please select both start and end dates"):void p("Please select a bank account"),disabled:x,children:x?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{children:"Generating..."})]}):"Generate Report"})})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 mr-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>y("PDF"),disabled:!h,children:[(0,r.jsx)("svg",{className:"mr-2 -ml-1 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export PDF"]}),(0,r.jsxs)("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>y("CSV"),disabled:!h,children:[(0,r.jsx)("svg",{className:"mr-2 -ml-1 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export CSV"]})]})]}),h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Report Summary"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-gray-800",children:["Bank: ",h.bank_name]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-gray-800",children:["Account: ",h.account_number]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-gray-800",children:["Beginning Balance: $",h.beginning_balance.toFixed(2)]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-gray-800",children:["Ending Balance: $",h.ending_balance.toFixed(2)]})})]})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow mb-6 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Check Number"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Debit"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credit"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.transactions.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.description}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.check_number||"-"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:e.debit?"$".concat(e.debit.toFixed(2)):"-"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:e.credit?"$".concat(e.credit.toFixed(2)):"-"}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:["$",e.balance.toFixed(2)]})]},e.id))})]})})}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Reconciliation Summary"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-gray-800",children:["Outstanding Checks: $",h.outstanding_checks.toFixed(2)]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-gray-800",children:["Deposits in Transit: $",h.deposits_in_transit.toFixed(2)]})})]})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Summary"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-gray-800",children:["Total Debits: $",h.total_debits.toFixed(2)]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-gray-800",children:["Total Credits: $",h.total_credits.toFixed(2)]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-gray-800",children:["Net Change: $",h.net_change.toFixed(2)]})})]})]})]})]})}},27361:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(95155);s(12115);var a=s(15319);function n(){return(0,r.jsx)("div",{className:"flex flex-col items-stretch w-full h-full p-4",children:(0,r.jsx)(a.default,{})})}},37811:e=>{var t,s,r,a=e.exports={};function n(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{s="function"==typeof clearTimeout?clearTimeout:i}catch(e){s=i}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}var c=[],l=!1,d=-1;function h(){l&&r&&(l=!1,r.length?c=r.concat(c):d=-1,c.length&&u())}function u(){if(!l){var e=o(h);l=!0;for(var t=c.length;t;){for(r=c,c=[];++d<t;)r&&r[d].run();d=-1,t=c.length}r=null,l=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===i||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function x(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];c.push(new x(e,t)),1!==c.length||l||o(u)},x.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}},76214:(e,t,s)=>{Promise.resolve().then(s.bind(s,27361))}},e=>{var t=t=>e(e.s=t);e.O(0,[54940,20171,79189,29729,28441,31684,77358],()=>t(76214)),_N_E=e.O()}]);