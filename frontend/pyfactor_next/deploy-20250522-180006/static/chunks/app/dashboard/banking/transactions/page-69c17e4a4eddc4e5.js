(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6792,87880],{37811:e=>{var t,a,r,n=e.exports={};function s(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{a="function"==typeof clearTimeout?clearTimeout:c}catch(e){a=c}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}var i=[],o=!1,d=-1;function u(){o&&r&&(o=!1,r.length?i=r.concat(i):d=-1,i.length&&h())}function h(){if(!o){var e=l(u);o=!0;for(var t=i.length;t;){for(r=i,i=[];++d<t;)r&&r[d].run();d=-1,t=i.length}r=null,o=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===c||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function x(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];i.push(new m(e,t)),1!==i.length||o||l(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=x,n.addListener=x,n.once=x,n.off=x,n.removeListener=x,n.removeAllListeners=x,n.emit=x,n.prependListener=x,n.prependOnceListener=x,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}},47818:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(95155);a(12115);var n=a(87880);function s(){return(0,r.jsx)("div",{className:"flex flex-col items-stretch w-full h-full p-4",children:(0,r.jsx)(n.default,{})})}},68639:(e,t,a)=>{Promise.resolve().then(a.bind(a,47818))},87880:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(95155),n=a(12115),s=a(29729);let c=()=>{let[e,t]=(0,n.useState)([]),[a,c]=(0,n.useState)(""),[l,i]=(0,n.useState)(""),[o,d]=(0,n.useState)(""),[u,h]=(0,n.useState)([]),[m,x]=(0,n.useState)(!1),[f,p]=(0,n.useState)(null),g=(0,n.useCallback)(async()=>{try{x(!0);let e=await s.SP.get("/api/banking/accounts/");e.data.accounts&&Array.isArray(e.data.accounts)?t(e.data.accounts):t([])}catch(e){console.error("Error fetching bank accounts:",e),p("Failed to fetch bank accounts. Please try again later.")}finally{x(!1)}},[]);(0,n.useEffect)(()=>{g()},[g]);let y=async()=>{if(!a||!l||!o)return void p("Please select an account and date range.");try{x(!0);let e=await s.SP.get("/api/banking/transactions/",{params:{account_id:a,start_date:l,end_date:o}});e.data.transactions&&Array.isArray(e.data.transactions)?h(e.data.transactions):h([]),p(null)}catch(e){console.error("Error fetching transactions:",e),p("Failed to fetch transactions. Please try again later.")}finally{x(!1)}};return(0,r.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,r.jsxs)("h4",{className:"text-2xl font-semibold mb-4 flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})}),"Bank Transactions"]}),(0,r.jsxs)("div",{className:"w-full mt-6",children:[(0,r.jsx)("label",{htmlFor:"bank-account-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Account"}),(0,r.jsxs)("select",{id:"bank-account-select",value:a,onChange:e=>{c(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Select a bank account"}),e.map(e=>(0,r.jsx)("option",{value:e.account_id,children:e.name},e.account_id))]})]}),(0,r.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,r.jsx)("label",{htmlFor:"start-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,r.jsx)("input",{id:"start-date",type:"date",value:l,onChange:e=>{i(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,r.jsx)("label",{htmlFor:"end-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,r.jsx)("input",{id:"end-date",type:"date",value:o,onChange:e=>{d(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsxs)("button",{onClick:y,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Fetch Transactions"]})})]}),f&&(0,r.jsx)("div",{className:"mt-4 text-red-600",children:f}),m?(0,r.jsx)("div",{className:"flex justify-center my-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):(0,r.jsx)("div",{className:"mt-6 overflow-x-auto shadow-md rounded-lg max-h-[440px]",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"})]})}),(0,r.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[u.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(e.date).toLocaleDateString()}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.description}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:["$",e.amount.toFixed(2)]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.category})]},e.id)),0===u.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No transactions found."})})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[54940,20171,79189,29729,28441,31684,77358],()=>t(68639)),_N_E=e.O()}]);