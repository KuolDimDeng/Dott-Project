(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70263],{43337:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(95155),s=r(12115),n=r(55166),o=r(68387),d=r(81243),l=r(29729),i=r(42749),c=r(44754),u=r(51174);let m={CACHE_CONFIG:{SUMMARY_TTL:12e4,LIST_TTL:3e5,DETAIL_TTL:6e5,STALE_WHILE_REVALIDATE:!0},async getProductSummary(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t="product_summary";try{if(e){let e=c.dH.get(t);if(e)return i.vF.debug("Using cached product summary data"),this.CACHE_CONFIG.STALE_WHILE_REVALIDATE&&this._refreshInBackground("summary",t),e}let r=await l.SP.get("/api/inventory/optimized/products/summary/",{timeout:1e4});return r.data&&r.data.results&&c.dH.set(t,r.data.results,this.CACHE_CONFIG.SUMMARY_TTL),r.data.results||[]}catch(e){throw i.vF.error("Error fetching product summary:",e),e}},async getOptimizedProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=new URLSearchParams;e.page&&r.append("page",e.page),void 0!==e.is_for_sale&&r.append("is_for_sale",e.is_for_sale),void 0!==e.min_stock&&r.append("min_stock",e.min_stock);let a=r.toString(),s="optimized_products_".concat(a||"default");try{if(t){let t=c.dH.get(s);if(t)return i.vF.debug("Using cached optimized products data for query: ".concat(a)),this.CACHE_CONFIG.STALE_WHILE_REVALIDATE&&this._refreshInBackground("products",s,e),t}let r=await l.SP.get("/api/inventory/optimized/products/".concat(a?"?".concat(a):""),{timeout:15e3});return r.data&&c.dH.set(s,r.data,this.CACHE_CONFIG.LIST_TTL),r.data}catch(e){throw i.vF.error("Error fetching optimized products: ".concat(e)),e}},async getProductById(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r="product_detail_".concat(e);try{if(t){let t=c.dH.get(r);if(t)return i.vF.debug("Using cached product detail data for ID: ".concat(e)),this.CACHE_CONFIG.STALE_WHILE_REVALIDATE&&this._refreshInBackground("detail",r,{productId:e}),t}let a=await l.SP.get("/api/inventory/optimized/products/".concat(e,"/"),{timeout:1e4});return a.data&&c.dH.set(r,a.data,this.CACHE_CONFIG.DETAIL_TTL),a.data}catch(t){throw i.vF.error("Error fetching product detail for ID ".concat(e,":"),t),t}},async prefetchProducts(){try{i.vF.debug("Prefetching product data"),this.getProductSummary(!1).catch(e=>{i.vF.warn("Failed to prefetch product summary:",e)}),this.getOptimizedProducts({},!1).catch(e=>{i.vF.warn("Failed to prefetch product list:",e)})}catch(e){i.vF.error("Error prefetching products:",e)}},clearProductCache(){var e;i.vF.debug("Clearing product cache"),(0,u.getTenantId)(),c.dH.clearTenant(),(null==(e=window.__APP_CACHE)?void 0:e.offline)&&(delete window.__APP_CACHE.offline.products,i.vF.debug("Cleared product cache from APP_CACHE"))},storeProductsOffline(e){try{if(!Array.isArray(e)||0===e.length)return;let t=(0,u.getTenantId)()||"default",r={timestamp:Date.now(),products:e};window.__APP_CACHE=window.__APP_CACHE||{},window.__APP_CACHE.offline=window.__APP_CACHE.offline||{},window.__APP_CACHE.offline["products_".concat(t)]=r,i.vF.debug("Stored ".concat(e.length," products in APP_CACHE for offline use"))}catch(e){i.vF.error("Error storing products offline:",e)}},getOfflineProducts(){try{var e,t;let r=(0,u.getTenantId)()||"default";if(!(null==(t=window.__APP_CACHE)||null==(e=t.offline)?void 0:e["products_".concat(r)]))return[];let a=window.__APP_CACHE.offline["products_".concat(r)];return Date.now()-a.timestamp>864e5&&i.vF.warn("Offline product data is stale (>24h old)"),a.products||[]}catch(e){return i.vF.error("Error retrieving offline products:",e),[]}},async _refreshInBackground(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};setTimeout(async()=>{try{let a;switch(i.vF.debug("Background refresh for ".concat(e," data: ").concat(t)),e){case"summary":(a=await l.SP.get("/api/inventory/optimized/products/summary/",{timeout:1e4})).data&&a.data.results&&(c.dH.set(t,a.data.results,this.CACHE_CONFIG.SUMMARY_TTL),i.vF.debug("Background refresh of product summary completed"));break;case"products":let s=new URLSearchParams;r.page&&s.append("page",r.page),void 0!==r.is_for_sale&&s.append("is_for_sale",r.is_for_sale),void 0!==r.min_stock&&s.append("min_stock",r.min_stock);let n=s.toString();(a=await l.SP.get("/api/inventory/optimized/products/".concat(n?"?".concat(n):""),{timeout:15e3})).data&&(c.dH.set(t,a.data,this.CACHE_CONFIG.LIST_TTL),i.vF.debug("Background refresh of product list completed"));break;case"detail":(a=await l.SP.get("/api/inventory/optimized/products/".concat(r.productId,"/"),{timeout:1e4})).data&&(c.dH.set(t,a.data,this.CACHE_CONFIG.DETAIL_TTL),i.vF.debug("Background refresh of product detail for ID ".concat(r.productId," completed")))}}catch(t){i.vF.warn("Background refresh failed for ".concat(e," data:"),t)}},100)}},h=()=>{let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(!0),[c,u]=(0,s.useState)(!0),[h,p]=(0,s.useState)(null),[x,g]=(0,s.useState)(1),[f,b]=(0,s.useState)(1),[v,y]=(0,s.useState)(0),[w,j]=(0,s.useState)(!1),[N,_]=(0,s.useState)({name:"",product_code:"",description:"",stock_quantity:0,reorder_level:0,price:0}),[k,C]=(0,s.useState)(!1),[F,L]=(0,s.useState)(!1),[A,P]=(0,s.useState)(""),[E,S]=(0,s.useState)("info"),[I,T]=(0,s.useState)(!1),[H,M]=(0,s.useState)(!1),[z,B]=(0,s.useState)(!1),[D,O]=(0,s.useState)(!0),[U,W]=(0,s.useState)({is_for_sale:!0,min_stock:""}),R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";P(e),S(t),L(!0)},q=(0,s.useCallback)(async function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],p(null),i.vF.info("Using mock inventory data due to network issues");let e=d.GX.getMockProducts();t(e),y(e.length),b(1),M(!0),R("Using demo data (API unavailable)","info"),l(!1),u(!1)},[R]);(0,s.useEffect)(()=>{c&&m.prefetchProducts().catch(()=>{}),q()},[q,x,D]);let G=(e,t)=>{g(t)},V=e=>{let{name:t,value:r,type:a,checked:s}=e.target;W(e=>(0,o._)((0,n._)({},e),{[t]:"checkbox"===a?s:r})),g(1)},K=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(_((0,o._)((0,n._)({},e),{name:e.name||"",product_code:e.product_code||"",description:e.description||"",stock_quantity:e.stock_quantity||0,reorder_level:e.reorder_level||0,price:e.price||0})),C(!0)):(_({name:"",product_code:"",description:"",stock_quantity:0,reorder_level:0,price:0,is_for_sale:!0}),C(!1)),j(!0)},Y=()=>{j(!1),_({name:"",product_code:"",description:"",stock_quantity:0,reorder_level:0,price:0,is_for_sale:!0}),C(!1)},X=e=>{let{name:t,value:r,type:a,checked:s}=e.target;_(e=>(0,o._)((0,n._)({},e),{[t]:"checkbox"===a?s:r}))},Q=async()=>{try{if(!N.name)return void R("Name is required","error");let e={name:N.name,description:N.description||"",price:parseFloat(N.price)||0,product_code:N.product_code||void 0,stock_quantity:parseInt(N.stock_quantity,10)||0,reorder_level:parseInt(N.reorder_level,10)||0,is_for_sale:!1!==N.is_for_sale};if(i.vF.info("Submitting product data:",e),l(!0),k)try{await d.GX.updateProduct(N.id,e),i.vF.info("Product updated successfully"),R("Product updated successfully","success"),m.clearProductCache()}catch(e){i.vF.error("Error updating product:",e),R("Failed to update product. Please try again.","error"),l(!1);return}else try{await d.GX.createProduct(e),i.vF.info("Product created successfully"),R("Product created successfully","success"),m.clearProductCache()}catch(e){i.vF.error("Error creating product:",e),R("Failed to create product. Please try again.","error"),l(!1);return}await q(),Y()}catch(e){i.vF.error("Error saving product:",e),R("Failed to save product. Please try again later.","error")}finally{l(!1)}},$=async e=>{if(window.confirm("Are you sure you want to delete this product?"))try{l(!0),await d.GX.deleteProduct(e),i.vF.info("Product deleted successfully"),R("Product deleted successfully","success"),m.clearProductCache(),await q()}catch(e){i.vF.error("Error deleting product:",e),R("Failed to delete product. Please try again later.","error")}finally{l(!1)}};return(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-wrap",children:[(0,a.jsxs)("h4",{className:"text-2xl font-semibold flex items-center",children:["Inventory Items",(0,a.jsx)(()=>{let e="online",t="Using live data",r="bg-green-100 text-green-800 border-green-200",s="w-4 h-4 mr-1";return I?(e="demo",t="Using demo data",r="bg-purple-100 text-purple-800 border-purple-200"):z?(e="offline",t="Using offline data",r="bg-amber-100 text-amber-800 border-amber-200"):D||(e="standard",t="Using standard endpoint",r="bg-blue-100 text-blue-800 border-blue-200"),(0,a.jsxs)("div",{className:"".concat(r," flex items-center text-xs rounded-full px-2.5 py-1 border ml-2 inline-flex"),title:t,children:["online"===e||"standard"===e?(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}):(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"})}),e]})},{})]}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap mt-2 sm:mt-0",children:[(0,a.jsxs)("button",{className:"px-4 py-2 border border-blue-500 text-blue-500 rounded-md hover:bg-blue-50 flex items-center disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{M(!1),B(!1),q(!1)},disabled:r,children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),(0,a.jsx)("button",{className:"px-4 py-2 rounded-md flex items-center ".concat(I?"bg-purple-600 text-white hover:bg-purple-700":"border border-blue-500 text-blue-500 hover:bg-blue-50"," disabled:opacity-50 disabled:cursor-not-allowed"),onClick:()=>{T(!I),B(!1),q(!I)},disabled:r,children:I?"Using Demo Data":"Use Demo Data"}),(0,a.jsxs)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>K(),disabled:r,children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Item"]})]})]}),(0,a.jsxs)("div",{className:"mb-4 p-4 bg-white rounded-md shadow-sm",children:[(0,a.jsx)("h6",{className:"text-lg font-medium mb-4",children:"Filters"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,a.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",className:"sr-only peer",name:"is_for_sale",checked:U.is_for_sale,onChange:V}),(0,a.jsx)("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),(0,a.jsx)("span",{className:"ms-3 text-sm font-medium text-gray-900",children:"For Sale Only"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"min_stock",className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Stock"}),(0,a.jsx)("input",{id:"min_stock",className:"w-28 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",name:"min_stock",type:"number",value:U.min_stock,onChange:V})]}),(0,a.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:D,onChange:e=>O(e.target.checked)}),(0,a.jsx)("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}),(0,a.jsx)("span",{className:"ms-3 text-sm font-medium text-gray-900",children:"Use Optimized Endpoint"})]})]})]}),(I||H)&&(0,a.jsxs)("div",{className:"mb-4 p-4 bg-amber-50 border border-amber-200 rounded-md",children:[(0,a.jsx)("p",{className:"font-bold text-amber-800",children:"Using Demo Data"}),(0,a.jsx)("p",{className:"text-sm text-amber-700 mt-1",children:H?"The inventory API is currently unavailable. All data shown is demo data and changes will not be saved.":"You are viewing demo data. Changes will not be persisted to the database."})]}),z&&(0,a.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[(0,a.jsx)("p",{className:"font-bold text-blue-800",children:"Using Offline Data"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"You are viewing cached offline data. This data may not be up-to-date with the latest changes."})]}),h&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:(0,a.jsx)("p",{className:"text-red-800",children:h})}),0===e.length?(0,a.jsxs)("div",{className:"text-center p-8 bg-white rounded-md shadow-sm",children:[(0,a.jsx)("h6",{className:"text-lg font-medium text-gray-500",children:"No inventory items found"}),(0,a.jsx)("p",{className:"text-gray-500 mt-2",children:'Click "Add New Item" to create your first inventory item'})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-full overflow-x-auto rounded-lg shadow bg-white",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-3 px-4 text-left font-medium text-gray-600",children:"Name"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-medium text-gray-600",children:"SKU"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-medium text-gray-600",children:"Description"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-medium text-gray-600",children:"Quantity"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-medium text-gray-600",children:"Reorder Level"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-medium text-gray-600",children:"Price"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-medium text-gray-600",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:r&&!c?[,,,,,].fill(0).map((e,t)=>(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-4/5"})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/5"})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-[90%]"})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-2/5"})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-2/5"})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-1/2"})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("div",{className:"h-6 w-6 bg-gray-200 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"h-6 w-6 bg-gray-200 rounded-full animate-pulse"})]})})]},"skeleton-".concat(t))):e.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:e.name}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.product_code||"N/A"}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.description||"No description"}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.stock_quantity||0}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.reorder_level||0}),(0,a.jsxs)("td",{className:"py-3 px-4",children:["$","number"==typeof e.price?e.price.toFixed(2):parseFloat(e.price||0).toFixed(2)]}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>K(e),className:"text-blue-600 hover:text-blue-800 p-1 rounded hover:bg-blue-50",title:"Edit",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,a.jsx)("button",{onClick:()=>$(e.id),className:"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50",title:"Delete",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e.id))})]})}),f>1&&(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsxs)("nav",{className:"inline-flex rounded-md shadow",children:[(0,a.jsx)("button",{onClick:()=>G(null,Math.max(1,x-1)),disabled:1===x||r,className:"px-3 py-1 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(f)].map((e,t)=>(0,a.jsx)("button",{onClick:()=>G(null,t+1),className:"px-3 py-1 border border-gray-300 text-sm font-medium ".concat(x===t+1?"bg-blue-50 text-blue-600 border-blue-500 z-10":"bg-white text-gray-700 hover:bg-gray-50"),children:t+1},t+1)),(0,a.jsx)("button",{onClick:()=>G(null,Math.min(f,x+1)),disabled:x===f||r,className:"px-3 py-1 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})}),(0,a.jsx)("div",{className:"mt-3 text-right",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing ",e.length," of ",v," items"]})})]}),F&&(0,a.jsx)("div",{className:"fixed bottom-4 inset-x-0 flex justify-center z-50",children:(0,a.jsxs)("div",{className:"\n            p-4 rounded-md shadow-lg flex items-center gap-2\n            ".concat("success"===E?"bg-green-50 border border-green-200 text-green-800":"","\n            ").concat("error"===E?"bg-red-50 border border-red-200 text-red-800":"","\n            ").concat("warning"===E?"bg-amber-50 border border-amber-200 text-amber-800":"","\n            ").concat("info"===E?"bg-blue-50 border border-blue-200 text-blue-800":"","\n          "),children:["success"===E&&(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"error"===E&&(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"warning"===E&&(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"info"===E&&(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("span",{children:A}),(0,a.jsx)("button",{onClick:()=>{L(!1)},className:"ml-3 text-gray-500 hover:text-gray-700",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),w&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:k?"Edit Product":"Add New Product"}),(0,a.jsx)("button",{onClick:Y,className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,a.jsx)("input",{id:"name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",name:"name",type:"text",value:N.name,onChange:X,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"product_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),(0,a.jsx)("input",{id:"product_code",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",name:"product_code",type:"text",value:N.product_code,onChange:X}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Leave blank to auto-generate"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{id:"description",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",name:"description",rows:3,value:N.description,onChange:X})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"stock_quantity",className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,a.jsx)("input",{id:"stock_quantity",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",name:"stock_quantity",type:"number",value:N.stock_quantity,onChange:X})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"reorder_level",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Level"}),(0,a.jsx)("input",{id:"reorder_level",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",name:"reorder_level",type:"number",value:N.reorder_level,onChange:X})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),(0,a.jsx)("input",{id:"price",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",name:"price",type:"number",step:"0.01",value:N.price,onChange:X})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",className:"sr-only peer",name:"is_for_sale",checked:!1!==N.is_for_sale,onChange:X}),(0,a.jsx)("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),(0,a.jsx)("span",{className:"ms-3 text-sm font-medium text-gray-900",children:"Available for Sale"})]})})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,a.jsx)("button",{onClick:Y,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:Q,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:k?"Update":"Add"})]})]})})})]})};var p=r(35695);function x(){let e=(0,p.useRouter)();return(0,s.useEffect)(()=>{i.vF.info("Initializing optimized inventory page"),m.prefetchProducts().catch(e=>{i.vF.warn("Failed to prefetch product data:",e)})},[]),(0,a.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,a.jsx)("div",{className:"p-6 mb-6 rounded-lg shadow-md bg-gradient-to-r from-purple-900 to-purple-700",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-white flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Optimized Inventory Management"]}),(0,a.jsx)("p",{className:"text-white mt-2 opacity-90",children:"Enhanced performance with optimized backend and frontend"})]}),(0,a.jsxs)("button",{className:"bg-purple-200 hover:bg-purple-300 text-purple-900 font-bold py-2 px-4 rounded inline-flex items-center",onClick:()=>e.push("/inventory"),children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Standard View"]})]})}),(0,a.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"About Optimized Inventory"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:(0,a.jsx)("p",{children:"This page uses optimized endpoints and advanced caching strategies for better performance. It includes features like progressive loading, stale-while-revalidate caching, and offline support."})})]})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[{title:"Lightweight API",description:"Optimized endpoints return only essential data"},{title:"Progressive Loading",description:"Load basic data first, then details as needed"},{title:"Smart Caching",description:"Stale-while-revalidate strategy for faster loading"},{title:"Offline Support",description:"Continue working even when offline"}].map((e,t)=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded shadow-md border-l-4 border-purple-700",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]},t))}),(0,a.jsx)(h,{})]})}},44754:(e,t,r)=>{"use strict";r.d(t,{dH:()=>o});var a=r(51174),s=r(42749);class n{getTenantKey(e){let t=(0,a.getTenantId)()||"default";return"".concat(this.namespace,":").concat(t,":").concat(e)}set(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.defaultTTL;try{let a=this.getTenantKey(e),n=Date.now()+r;return this.cache.set(a,{value:t,expiresAt:n}),s.vF.debug("[Cache] Set: ".concat(a),{ttl:r,expiresAt:new Date(n).toISOString()}),!0}catch(t){return s.vF.error("[Cache] Error setting ".concat(e,":"),t),!1}}get(e){try{let t=this.getTenantKey(e),r=this.cache.get(t);if(!r)return s.vF.debug("[Cache] Miss: ".concat(t," (not found)")),null;if(r.expiresAt<Date.now())return s.vF.debug("[Cache] Miss: ".concat(t," (expired)")),this.cache.delete(t),null;return s.vF.debug("[Cache] Hit: ".concat(t)),r.value}catch(t){return s.vF.error("[Cache] Error getting ".concat(e,":"),t),null}}delete(e){try{let t=this.getTenantKey(e),r=this.cache.delete(t);return s.vF.debug("[Cache] Delete: ".concat(t),{success:r}),r}catch(t){return s.vF.error("[Cache] Error deleting ".concat(e,":"),t),!1}}clearTenant(){try{let e=(0,a.getTenantId)()||"default",t="".concat(this.namespace,":").concat(e,":"),r=0;for(let e of this.cache.keys())e.startsWith(t)&&(this.cache.delete(e),r++);return s.vF.debug("[Cache] Cleared tenant cache",{tenantId:e,itemsCleared:r}),!0}catch(e){return s.vF.error("[Cache] Error clearing tenant cache:",e),!1}}clear(){try{return this.cache.clear(),s.vF.debug("[Cache] Cleared all cache"),!0}catch(e){return s.vF.error("[Cache] Error clearing cache:",e),!1}}constructor(e="app"){this.namespace=e,this.cache=new Map,this.defaultTTL=3e5}}let o=new n("inventory");new n("user"),new n("settings")},65996:(e,t,r)=>{Promise.resolve().then(r.bind(r,43337))}},e=>{var t=t=>e(e.s=t);e.O(0,[54940,9296,79480,58430,84620,20171,79189,62052,56657,29729,44367,47856,81243,28441,31684,77358],()=>t(65996)),_N_E=e.O()}]);