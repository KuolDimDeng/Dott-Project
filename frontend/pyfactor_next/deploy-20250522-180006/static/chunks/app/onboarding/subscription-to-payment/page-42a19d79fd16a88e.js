(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62323],{2543:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(55166),r=a(68387),n=a(95155),i=a(12115),o=a(35695),c=a(66591),l=a(19596);function u(){let e=(0,o.useSearchParams)(),[t,a]=(0,i.useState)(null);(0,i.useEffect)(()=>{try{let t=e.get("plan"),s=e.get("cycle");if(t)return void a({plan:t,billing_interval:s||"monthly"});let r=sessionStorage.getItem("pendingSubscription")||sessionStorage.getItem("selectedPlan");if(r){let e=JSON.parse(r);a(e)}}catch(e){console.error("Error retrieving subscription data:",e)}},[e]);let u="Preparing payment for ".concat((()=>{var e;if(!t)return"";let a=(null==(e=t.plan)?void 0:e.toLowerCase())||"";return"professional"===a?"Professional":"enterprise"===a?"Enterprise":a.charAt(0).toUpperCase()+a.slice(1)})()," plan...");return(0,n.jsx)(c.A,{from:l.kd.SUBSCRIPTION,to:l.kd.PAYMENT,message:u,delayMs:2e3,data:t,onBeforeNavigate:()=>{if(t)try{sessionStorage.setItem("pendingSubscription",JSON.stringify((0,r._)((0,s._)({},t),{timestamp:Date.now()}))),document.cookie="onboardingStep=".concat(l.kd.PAYMENT,"; path=/; max-age=").concat(86400,"; samesite=lax"),document.cookie="subscriptionCompleted=true; path=/; max-age=".concat(86400,"; samesite=lax"),document.cookie="selectedPlan=".concat(t.plan,"; path=/; max-age=").concat(86400,"; samesite=lax"),document.cookie="billingCycle=".concat(t.billing_interval||t.billingCycle||"monthly","; path=/; max-age=").concat(86400,"; samesite=lax")}catch(e){console.error("Error setting payment transition data:",e)}}})}},7006:(e,t,a)=>{Promise.resolve().then(a.bind(a,2543))},19596:(e,t,a)=>{"use strict";a.d(t,{kd:()=>s});let s={BUSINESS_INFO:"business-info",SUBSCRIPTION:"subscription",PAYMENT:"payment",SETUP:"setup",COMPLETE:"complete",DASHBOARD:"dashboard"}},35695:(e,t,a)=>{"use strict";var s=a(18999);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},66591:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(95155),r=a(12115),n=a(35695),i=a(77657),o=a(19596);function c(e){let{from:t="",to:a="",toPath:c="",message:l="",delayMs:u=1500,data:d=null,onBeforeNavigate:m=null}=e,h=(0,n.useRouter)(),[p,g]=(0,r.useState)(Math.ceil(u/1e3)),[f,x]=(0,r.useState)(0),S=()=>c||("dashboard"===a?"/dashboard":"/onboarding/".concat(a)),y=()=>{if(d)try{sessionStorage.setItem("onboardingTransitionData",JSON.stringify({from:t,to:a,timestamp:Date.now(),data:d}))}catch(e){console.error("Failed to persist transition data:",e)}};return(0,r.useEffect)(()=>{let e=setInterval(()=>{x(e=>Math.min(e+100/(u/100),100))},100),t=setInterval(()=>{g(e=>Math.max(e-1,0))},1e3),a=setTimeout(()=>{if(y(),m)try{m()}catch(e){console.error("Error in onBeforeNavigate callback:",e)}let e=S();h.push(e)},u);return()=>{clearInterval(e),clearInterval(t),clearTimeout(a)}},[u,h,t,a,c,m,d]),(0,s.jsx)("div",{className:"flex h-screen items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center max-w-md mx-auto p-8 rounded-xl bg-white shadow-sm",children:[(0,s.jsx)(i.A,{size:"large",showProgress:!0,progress:f}),(0,s.jsx)("h2",{className:"mt-6 text-xl font-semibold text-gray-800",children:l||(()=>{if(t===o.kd.BUSINESS_INFO&&a===o.kd.SUBSCRIPTION)return"Saving your business information...";if(t===o.kd.SUBSCRIPTION&&a===o.kd.PAYMENT)return"Preparing payment options...";if(t===o.kd.SUBSCRIPTION&&"dashboard"===a)return"Setting up your free account...";if(t===o.kd.PAYMENT&&a===o.kd.SETUP)return"Processing your payment...";if(t===o.kd.PAYMENT&&"dashboard"===a)return"Finalizing your account setup...";else if("dashboard"===a)return"Redirecting to dashboard...";else return"Redirecting to next step..."})()}),(0,s.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Redirecting ",a?"to ".concat(a):""," in ",p," second",1!==p?"s":""]}),(0,s.jsx)("div",{className:"mt-6 w-full bg-gray-100 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300 ease-in-out",style:{width:"".concat(f,"%")}})})]})})}},77657:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(95155);function r(e){let{size:t="medium",fullscreen:a=!1,message:r="Loading...",color:n="currentColor"}=e,i={small:{spinner:"h-4 w-4",text:"text-sm"},medium:{spinner:"h-8 w-8",text:"text-base"},large:{spinner:"h-12 w-12",text:"text-lg"}},o=i[t]||i.medium;return(0,s.jsx)("div",{className:a?"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-80":"flex flex-col items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"".concat(o.spinner," animate-spin"),style:{color:n},children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"opacity-25",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),r&&(0,s.jsx)("div",{className:"mt-3 ".concat(o.text," text-gray-700"),children:r})]})})}a(12115)}},e=>{var t=t=>e(e.s=t);e.O(0,[28441,31684,77358],()=>t(7006)),_N_E=e.O()}]);