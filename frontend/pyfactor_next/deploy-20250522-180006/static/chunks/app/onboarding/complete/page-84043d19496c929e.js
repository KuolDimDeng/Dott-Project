(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17488],{14090:(e,t,r)=>{"use strict";r.d(t,{ZF:()=>d,lx:()=>i,tv:()=>c});var n=r(73767),s=r(81011),o=r(42749);let a=new Map,l=(0,n.D)(),i=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{let n=r.ttl||18e5,s=Date.now()+n;return a.set(e,{data:t,expiry:s}),o.vF.debug("[CacheClient] Data cached successfully",{key:e}),!0}catch(t){return o.vF.error("[CacheClient] Error caching data",{key:e,error:t}),!1}},c=e=>{try{let t=a.get(e);if(!t)return o.vF.debug("[CacheClient] Cache miss",{key:e}),null;if(Date.now()>t.expiry)return o.vF.debug("[CacheClient] Cache expired",{key:e}),a.delete(e),null;return o.vF.debug("[CacheClient] Cache hit",{key:e}),t.data}catch(t){return o.vF.error("[CacheClient] Error retrieving cached data",{key:e,error:t}),null}},d=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{bypassCache:n=!1,ttl:a,query:d,variables:u}=r,h=(0,s.A)().substring(0,8);try{let r;if(!n){let t=c(e);if(t)return o.vF.debug("[CacheClient] Returning cached data",{cacheKey:e,requestId:h}),t}if(d){var g,m,f;if(o.vF.debug("[CacheClient] Executing GraphQL operation",{requestId:h,operationName:(null==(f=d.definitions)||null==(m=f[0])||null==(g=m.name)?void 0:g.value)||"Unknown"}),(r=await l.graphql({query:d,variables:u||{},authMode:"AMAZON_COGNITO_USER_POOLS"})).data){let e=Object.keys(r.data)[0];r=r.data[e]}}else o.vF.debug("[CacheClient] Using data provided directly",{requestId:h}),r=t;return i(e,r,{ttl:a}),r}catch(t){throw o.vF.error("[CacheClient] Fetch error",{cacheKey:e,requestId:h,error:t}),t}};setInterval(()=>{let e=0;for(let[t,r]of a.entries())r.isExpired()&&(a.delete(t),e++);e>0&&o.vF.debug("[cacheClient] Cleaned up expired entries",{expiredCount:e})},18e5)},21787:(e,t,r)=>{Promise.resolve().then(r.bind(r,91498))},32590:(e,t,r)=>{"use strict";r.d(t,{J:()=>s});var n=r(44367);r(42749);let s=()=>{let{user:e,isLoading:t,hasSession:r,hasError:s}=(0,n.w)();return{user:e,isLoading:t,isAuthenticated:r&&!s&&!!e,hasError:s}}},36465:(e,t,r)=>{"use strict";function n(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}r.r(t),r.d(t,{_:()=>n})},42749:(e,t,r)=>{"use strict";r.d(t,{vF:()=>a});let n={debug:0,info:1,warn:2,error:3},s="info",o=()=>!1,a={setLevel(e){void 0!==n[e]&&(s=e)},getLevel:()=>s,debug:(e,t)=>{},info:(e,t)=>{n[s]<=n.info&&(o()?void 0!==t?console.info("[SERVER INFO] ".concat(e),t):console.info("[SERVER INFO] ".concat(e)):void 0!==t?console.info(e,t):console.info(e))},warn:(e,t)=>{n[s]<=n.warn&&(o()?void 0!==t?console.warn("[SERVER WARN] ".concat(e),t):console.warn("[SERVER WARN] ".concat(e)):void 0!==t?console.warn(e,t):console.warn(e))},error:(e,t)=>{n[s]<=n.error&&(o()?void 0!==t?console.error("[SERVER ERROR] ".concat(e),t):console.error("[SERVER ERROR] ".concat(e)):void 0!==t?console.error(e,t):console.error(e))}}},91498:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(95155),s=r(12115),o=r(35695),a=r(95241),l=r(32590),i=r(14090),c=r(42749);function d(){let e=(0,o.useRouter)(),{user:t,isLoading:r}=(0,l.J)(),[d,u]=(0,s.useState)(!0),[h,g]=(0,s.useState)(null);return((0,s.useEffect)(()=>{let n=async()=>{try{if(u(!0),!t)throw Error("User not authenticated");c.vF.debug("[OnboardingComplete] Completing onboarding process",{userId:t.id}),await (0,i.ZF)("user_onboarding_status",{userId:t.id,status:"completed",completedAt:new Date().toISOString()},{bypassCache:!0}),setTimeout(()=>{u(!1)},1e3),setTimeout(()=>{e.push("/dashboard")},3e3)}catch(e){c.vF.error("[OnboardingComplete] Error completing onboarding:",e),g(e.message||"Failed to complete onboarding process"),u(!1)}};t&&!r&&n()},[t,r,e]),h)?(0,n.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 px-4",children:(0,n.jsxs)("div",{className:"w-full max-w-md p-8 bg-white rounded-xl shadow-lg",children:[(0,n.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,n.jsx)("h2",{className:"mt-4 text-xl font-bold text-center text-gray-900",children:"Something went wrong"}),(0,n.jsx)("p",{className:"mt-2 text-sm text-center text-gray-600",children:h}),(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)("button",{onClick:()=>e.push("/onboarding/business-info"),className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Restart Onboarding"})})]})}):(0,n.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 px-4",children:(0,n.jsx)("div",{className:"w-full max-w-md p-8 bg-white rounded-xl shadow-lg text-center",children:d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsxs)("svg",{className:"animate-spin h-10 w-10 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,n.jsx)("h2",{className:"mt-4 text-xl font-bold text-gray-900",children:"Finalizing your account..."}),(0,n.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Please wait while we set up your dashboard"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(a.A,{className:"h-16 w-16 text-green-500"})}),(0,n.jsx)("h2",{className:"mt-4 text-2xl font-bold text-gray-900",children:"Onboarding Complete!"}),(0,n.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Your account has been successfully set up. You'll be redirected to your dashboard in a few seconds."}),(0,n.jsx)("div",{className:"mt-8",children:(0,n.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Go to Dashboard"})})]})})})}},95241:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(36465),s=r(12115);let o=s.forwardRef(function(e,t){var{title:r,titleId:o}=e,a=(0,n._)(e,["title","titleId"]);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},a),r?s.createElement("title",{id:o},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})}},e=>{var t=t=>e(e.s=t);e.O(0,[54940,9296,79480,58430,18702,44367,28441,31684,77358],()=>t(21787)),_N_E=e.O()}]);