(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65386],{19596:(e,t,a)=>{"use strict";a.d(t,{kd:()=>s});let s={BUSINESS_INFO:"business-info",SUBSCRIPTION:"subscription",PAYMENT:"payment",SETUP:"setup",COMPLETE:"complete",DASHBOARD:"dashboard"}},35695:(e,t,a)=>{"use strict";var s=a(18999);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},66591:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(95155),r=a(12115),n=a(35695),o=a(77657),i=a(19596);function c(e){let{from:t="",to:a="",toPath:c="",message:l="",delayMs:u=1500,data:d=null,onBeforeNavigate:m=null}=e,p=(0,n.useRouter)(),[h,g]=(0,r.useState)(Math.ceil(u/1e3)),[x,f]=(0,r.useState)(0),S=()=>c||("dashboard"===a?"/dashboard":"/onboarding/".concat(a)),y=()=>{if(d)try{sessionStorage.setItem("onboardingTransitionData",JSON.stringify({from:t,to:a,timestamp:Date.now(),data:d}))}catch(e){console.error("Failed to persist transition data:",e)}};return(0,r.useEffect)(()=>{let e=setInterval(()=>{f(e=>Math.min(e+100/(u/100),100))},100),t=setInterval(()=>{g(e=>Math.max(e-1,0))},1e3),a=setTimeout(()=>{if(y(),m)try{m()}catch(e){console.error("Error in onBeforeNavigate callback:",e)}let e=S();p.push(e)},u);return()=>{clearInterval(e),clearInterval(t),clearTimeout(a)}},[u,p,t,a,c,m,d]),(0,s.jsx)("div",{className:"flex h-screen items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center max-w-md mx-auto p-8 rounded-xl bg-white shadow-sm",children:[(0,s.jsx)(o.A,{size:"large",showProgress:!0,progress:x}),(0,s.jsx)("h2",{className:"mt-6 text-xl font-semibold text-gray-800",children:l||(()=>{if(t===i.kd.BUSINESS_INFO&&a===i.kd.SUBSCRIPTION)return"Saving your business information...";if(t===i.kd.SUBSCRIPTION&&a===i.kd.PAYMENT)return"Preparing payment options...";if(t===i.kd.SUBSCRIPTION&&"dashboard"===a)return"Setting up your free account...";if(t===i.kd.PAYMENT&&a===i.kd.SETUP)return"Processing your payment...";if(t===i.kd.PAYMENT&&"dashboard"===a)return"Finalizing your account setup...";else if("dashboard"===a)return"Redirecting to dashboard...";else return"Redirecting to next step..."})()}),(0,s.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Redirecting ",a?"to ".concat(a):""," in ",h," second",1!==h?"s":""]}),(0,s.jsx)("div",{className:"mt-6 w-full bg-gray-100 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300 ease-in-out",style:{width:"".concat(x,"%")}})})]})})}},68540:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(55166),r=a(68387),n=a(95155),o=a(12115),i=a(35695),c=a(66591),l=a(19596);function u(){let e=(0,i.useSearchParams)(),[t,a]=(0,o.useState)(null);(0,o.useEffect)(()=>{try{let t=e.get("success"),s=e.get("plan"),r=e.get("payment_id");if("true"===t||r)return void a({paymentSuccess:!0,plan:s,paymentId:r||"unknown",timestamp:Date.now()});let n=sessionStorage.getItem("paymentCompleted")||sessionStorage.getItem("subscriptionActivated");if(n){let e=JSON.parse(n);a(e)}else a({paymentSuccess:!0,plan:"paid",timestamp:Date.now()})}catch(e){console.error("Error retrieving payment data:",e),a({paymentSuccess:!0,timestamp:Date.now()})}},[e]);let u="Finalizing your ".concat((()=>{if(!t||!t.plan)return"subscription";let e=t.plan.toLowerCase();return"professional"===e?"Professional":"enterprise"===e?"Enterprise":e.charAt(0).toUpperCase()+e.slice(1)})()," plan...");return(0,n.jsx)(c.A,{from:l.kd.PAYMENT,to:"dashboard",message:u,delayMs:3e3,data:t,onBeforeNavigate:()=>{try{document.cookie="onboardingStep=dashboard; path=/; max-age=".concat(2592e3,"; samesite=lax"),document.cookie="paymentCompleted=true; path=/; max-age=".concat(2592e3,"; samesite=lax"),document.cookie="onboardingCompleted=true; path=/; max-age=".concat(2592e3,"; samesite=lax"),document.cookie="paidPlanActive=true; path=/; max-age=".concat(2592e3,"; samesite=lax"),localStorage.setItem("onboardingStatus","complete"),localStorage.setItem("paymentCompleted","true"),sessionStorage.setItem("paidPlanActivated",JSON.stringify((0,r._)((0,s._)({},t),{activationSource:"payment_complete"})))}catch(e){console.error("Error setting dashboard transition data:",e)}}})}},77657:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(95155);function r(e){let{size:t="medium",fullscreen:a=!1,message:r="Loading...",color:n="currentColor"}=e,o={small:{spinner:"h-4 w-4",text:"text-sm"},medium:{spinner:"h-8 w-8",text:"text-base"},large:{spinner:"h-12 w-12",text:"text-lg"}},i=o[t]||o.medium;return(0,s.jsx)("div",{className:a?"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-80":"flex flex-col items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"".concat(i.spinner," animate-spin"),style:{color:n},children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"opacity-25",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),r&&(0,s.jsx)("div",{className:"mt-3 ".concat(i.text," text-gray-700"),children:r})]})})}a(12115)},94945:(e,t,a)=>{Promise.resolve().then(a.bind(a,68540))}},e=>{var t=t=>e(e.s=t);e.O(0,[28441,31684,77358],()=>t(94945)),_N_E=e.O()}]);