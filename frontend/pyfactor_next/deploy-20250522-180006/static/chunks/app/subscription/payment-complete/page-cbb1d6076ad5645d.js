(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2725],{15366:(e,t,a)=>{Promise.resolve().then(a.bind(a,82329))},35695:(e,t,a)=>{"use strict";var s=a(18999);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},82329:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(95155),r=a(12115),o=a(35695);function n(){let[e,t]=(0,r.useState)(!0),[a,n]=(0,r.useState)("Processing payment..."),[c,u]=(0,r.useState)("");return(0,o.useRouter)(),(0,r.useEffect)(()=>{(async()=>{try{t(!0),n("Payment successful! Finalizing your account...");let e=new Date(new Date().getTime()+2592e6);document.cookie="setupCompleted=true; path=/; expires=".concat(e.toUTCString(),"; samesite=lax"),document.cookie="onboardingStep=complete; path=/; expires=".concat(e.toUTCString(),"; samesite=lax"),document.cookie="onboardedStatus=COMPLETE; path=/; expires=".concat(e.toUTCString(),"; samesite=lax"),document.cookie="setupUseRLS=true; path=/; expires=".concat(e.toUTCString(),"; samesite=lax"),document.cookie="hasSession=true; path=/; expires=".concat(e.toUTCString(),"; samesite=lax"),localStorage.setItem("setupCompleted","true"),localStorage.setItem("setupTimestamp",Date.now().toString()),localStorage.setItem("onboardingStep","complete"),localStorage.setItem("setupUseRLS","true");let a=crypto.randomUUID();fetch("/api/onboarding/background-setup?plan=paid&background=true",{method:"POST",headers:{"Content-Type":"application/json","X-Background-Setup":"true","X-Request-ID":a},keepalive:!0,body:JSON.stringify({plan:"paid",timestamp:Date.now(),requestId:a,paymentComplete:!0})}).catch(()=>{}),fetch("/api/dashboard/initial-data?prefetch=true",{headers:{"x-prefetch":"true","Cache-Control":"no-store"}}).catch(()=>{}),n("Payment processed successfully! Redirecting to your dashboard..."),setTimeout(()=>{window.location.href="/dashboard?newAccount=true&setupBackground=true"},1500)}catch(e){u("There was an error processing your payment. Please contact support."),t(!1)}})()},[]),(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("div",{className:"max-w-md w-full space-y-8 p-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Payment Complete"}),e&&(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:a})]}),c&&(0,s.jsx)("div",{className:"mt-8 p-4 bg-red-50 border border-red-200 rounded-md",children:(0,s.jsx)("p",{className:"text-red-800",children:c})})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[28441,31684,77358],()=>t(15366)),_N_E=e.O()}]);