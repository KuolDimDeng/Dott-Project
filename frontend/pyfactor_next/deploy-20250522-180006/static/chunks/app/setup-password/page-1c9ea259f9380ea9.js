(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[67954],{6218:(e,t,r)=>{"use strict";r.d(t,{Y:()=>n});var s=r(10831);let n={convert(e,t={urlSafe:!1,skipPadding:!1}){let r="string"==typeof e?e:Array.from(e,e=>String.fromCodePoint(e)).join(""),n=(0,s.xA)()(r);return t.urlSafe&&(n=n.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(n=n.replace(/=/g,"")),n}}},14661:(e,t,r)=>{Promise.resolve().then(r.bind(r,70132))},19002:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});var s=r(45103),n=r(84295);let a=async e=>{var t;let r=e.getConfig().Auth?.Cognito;(0,s.$y)(r);let a=await e.Auth.getTokens({forceRefresh:!1});(0,n.H0)(a);let{"cognito:username":o,sub:i}=a.idToken?.payload??{},l={username:o,userId:i},c=(t=a,t?.signInDetails);return c&&(l.signInDetails=c),l}},35695:(e,t,r)=>{"use strict";var s=r(18999);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},37811:e=>{var t,r,s,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}var l=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&m())}function m(){if(!c){var e=i(d);c=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new h(e,t)),1!==l.length||c||i(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}},39641:(e,t,r)=>{"use strict";r.d(t,{C:()=>i,p:()=>o});var s=r(62904),n=r(61573);let a=new s.C("CoreStorageUtils"),o=()=>{try{if("undefined"!=typeof window&&window.localStorage)return window.localStorage}catch(e){a.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new n._},i=()=>{try{if("undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw Error("sessionStorage is not defined")}catch(e){return a.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new n._}}},59262:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(32307),n=r(27593);let a=(e,t)=>(0,s.fE)({category:n.b7.Auth,action:e,...t})},61573:(e,t,r)=>{"use strict";r.d(t,{_:()=>s});class s{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,t){this.storage.set(e,t)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}}},70132:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(95155),n=r(12115),a=r(35695),o=r(29729),i=r(23639),l=r(42749);function c(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),r=t.get("token"),c=t.get("email"),[u,d]=(0,n.useState)(""),[m,h]=(0,n.useState)(""),[f,p]=(0,n.useState)(!1),[g,x]=(0,n.useState)(""),[w,y]=(0,n.useState)(!1),[v,b]=(0,n.useState)(!1),[j,N]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{if(!r||!c){x("Invalid invitation link. Please request a new invitation."),N(!0);return}try{p(!0),(await o.SP.post("/api/verify-invitation",{token:r,email:c})).data.valid?b(!0):x("This invitation link has expired or is invalid. Please request a new invitation.")}catch(e){l.vF.error("[SetupPassword] Error validating token:",e),x("Error validating invitation. Please try again or request a new invitation.")}finally{p(!1),N(!0)}})()},[r,c]);let S=async t=>{if(t.preventDefault(),u!==m)return void x("Passwords do not match");if(u.length<8)return void x("Password must be at least 8 characters long");try{p(!0),x(""),await (0,i.J)({username:c,password:r,options:{authFlowType:"USER_PASSWORD_AUTH"}}),await o.SP.post("/api/complete-registration",{token:r,email:c,password:u}),y(!0),setTimeout(()=>{e.push("/auth/signin")},3e3)}catch(e){l.vF.error("[SetupPassword] Error setting password:",e),x("Error setting password. Please try again or request a new invitation.")}finally{p(!1)}};return j?!v&&j?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Invalid Invitation"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:g})]}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)("button",{onClick:()=>e.push("/auth/signin"),className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Return to Sign In"})})]})}):w?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Password Set Successfully"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Your password has been set successfully. You will be redirected to the login page in a few seconds."})]}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)("button",{onClick:()=>e.push("/auth/signin"),className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Go to Sign In"})})]})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Set Your Password"}),(0,s.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Please set a password for your account."})]}),g&&(0,s.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,s.jsx)("div",{className:"flex",children:(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,s.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,s.jsx)("p",{children:g})})]})})}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:S,children:[(0,s.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,s.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:c||"",disabled:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password",value:u,onChange:e=>d(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm password"}),(0,s.jsx)("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirm password",value:m,onChange:e=>h(e.target.value)})]})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:f,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(f?"opacity-70 cursor-not-allowed":""),children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),"Setting Password..."]}):"Set Password"})})]})]})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Verifying invitation"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Please wait while we verify your invitation."})]}),(0,s.jsx)("div",{className:"mt-8 flex justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})]})})}},81746:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});var s=r(87970),n=r(19002);let a=async()=>(0,n.H)(s.H)},94225:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});var s=r(95730);class n{constructor(e){this.storage=e}async setItem(e,t){if(!this.storage)throw new s.h;this.storage.setItem(e,t)}async getItem(e){if(!this.storage)throw new s.h;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new s.h;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new s.h;this.storage.clear()}}},95730:(e,t,r)=>{"use strict";r.d(t,{h:()=>a});var s=r(31241),n=r(65206);class a extends n.x{constructor(){super({name:s.m.PlatformNotSupported,message:"Function not supported on current platform"})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[54940,9296,79480,58430,84620,23639,20171,79189,29729,28441,31684,77358],()=>t(14661)),_N_E=e.O()}]);