(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31715],{19316:(e,t,n)=>{Promise.resolve().then(n.bind(n,82095))},25578:(e,t,n)=>{"use strict";n.d(t,{v:()=>c});var r=n(29670);let a={DEBUG:0,INFO:1,WARN:2,ERROR:3},s=a.INFO,o=()=>{try{{let e=(0,r.gd)("logLevel");if(e&&void 0!==a[e])return a[e]}}catch(e){}return s},i=()=>new Date().toISOString(),l=(e,t)=>{let n=i();return"[".concat(n,"] [").concat(e,"] ").concat(t)},c={debug:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o()<=a.DEBUG&&console.debug(l("DEBUG",e),...n)},info:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o()<=a.INFO&&console.info(l("INFO",e),...n)},warn:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o()<=a.WARN&&console.warn(l("WARN",e),...n)},error:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o()<=a.ERROR&&console.error(l("ERROR",e),...n)},setLogLevel:e=>{try{void 0!==a[e]&&(0,r.mm)("logLevel",e)}catch(e){}}}},82095:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n(95155),a=n(12115),s=n(35695),o=n(25578),i=n(47611),l=n(14745),c=n(18997);function d(){let e=(0,s.useParams)(),t=(0,s.useSearchParams)(),[d,u]=(0,a.useState)(!0),[h,m]=(0,a.useState)(null),[b,g]=(0,a.useState)(!1),[w,f]=(0,a.useState)(0),x=null==e?void 0:e.tenantId,y=(null==t?void 0:t.get("direct"))==="true",v=(null==t?void 0:t.get("fromSignIn"))==="true";return((0,a.useEffect)(()=>{if(!x){o.v.error("[TenantDashboard] No tenant ID found in URL params"),m("Missing tenant ID in URL parameters"),u(!1);return}o.v.info("[TenantDashboard] Processing tenant-specific dashboard for: ".concat(x));try{(async()=>{try{let{updateUserAttributes:e}=await Promise.all([n.e(31861),n.e(55158)]).then(n.bind(n,55158));await e({userAttributes:{"custom:tenant_ID":x,"custom:businessid":x}}),o.v.info("[TenantDashboard] Successfully updated Cognito attributes with tenant ID");try{(await (0,c.UF)("/api/health",{method:"HEAD",cache:"no-store",headers:{"Cache-Control":"no-cache"},timeout:3e3})).ok||o.v.warn("[TenantDashboard] Health check failed, but continuing anyway")}catch(e){o.v.warn("[TenantDashboard] Health check error, but continuing:",e)}window.__APP_CACHE=window.__APP_CACHE||{},window.__APP_CACHE.tenant=window.__APP_CACHE.tenant||{},window.__APP_CACHE.tenant.id=x}catch(e){o.v.warn("[TenantDashboard] Could not update Cognito attributes:",e),e.message&&(e.message.includes("NetworkError")||e.message.includes("Network Error")||e.message.includes("Failed to fetch"))&&g(!0)}})();let e=setTimeout(()=>{u(!1)},500);return()=>clearTimeout(e)}catch(e){o.v.error("[TenantDashboard] Error initializing tenant dashboard:",e),m("Error initializing tenant dashboard"),u(!1),e.message&&(e.message.includes("NetworkError")||e.message.includes("Network Error")||e.message.includes("Failed to fetch"))&&g(!0)}},[x,y,v,w]),d)?(0,r.jsx)(i.A,{message:"Initializing tenant dashboard for ".concat(x,"...")}):h?(0,r.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center max-w-md mx-auto p-8 bg-white rounded-xl shadow-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Dashboard Error"}),(0,r.jsx)("p",{className:"text-gray-700 mb-6",children:h}),b&&(0,r.jsxs)("div",{className:"mb-6 bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[(0,r.jsx)("h3",{className:"text-yellow-800 font-semibold mb-2",children:"Network Connection Issue"}),(0,r.jsx)("p",{className:"text-sm text-yellow-700 mb-3",children:"Unable to connect to the server. Please check your internet connection."}),(0,r.jsxs)("ul",{className:"text-sm list-disc list-inside text-yellow-700 mb-4",children:[(0,r.jsx)("li",{children:"Verify your network connection is stable"}),(0,r.jsx)("li",{children:"Check if backend server is running"}),(0,r.jsx)("li",{children:"Make sure HTTPS certificates are properly installed"})]})]}),(0,r.jsxs)("p",{className:"text-gray-500 mb-6 text-sm",children:["Tenant ID: ",x||"None"]}),(0,r.jsx)("button",{onClick:()=>{m(null),g(!1),f(e=>e+1),u(!0),w>=3&&window.location.reload()},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 mr-3",children:"Retry Loading"}),(0,r.jsx)("button",{onClick:()=>window.location.href="/dashboard?fromSignIn=true&reset=true",className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"Return to Dashboard"})]})}):(0,r.jsx)(l.A,{tenantId:x})}}},e=>{var t=t=>e(e.s=t);e.O(0,[54940,9296,79480,58430,84620,23639,38501,78746,20171,79189,6874,62052,66766,31296,66352,38772,35162,37921,8896,29729,44367,47856,67953,3963,83531,93078,14719,14745,28441,31684,77358],()=>t(19316)),_N_E=e.O()}]);