(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52053,82786],{12743:(e,t,s)=>{"use strict";s.d(t,{A:()=>n}),s(95155);var r=s(12115),a=s(29729);function n(){let[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)("");return(0,r.useEffect)(()=>(t("https:"===window.location.protocol),window.__resetCircuitBreakers=a.resetCircuitBreakers,window.resetCircuitBreakers=()=>((0,a.resetCircuitBreakers)(),console.log("[HttpsConfig] Circuit breakers manually reset"),!0),"https:"===window.location.protocol&&((0,a.resetCircuitBreakers)(),console.log("[HttpsConfig] Circuit breakers auto-reset for HTTPS mode")),()=>{delete window.__resetCircuitBreakers}),[]),null}},14713:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(95155),a=s(12115),n=s(35695),o=s(54717),c=s(82786),l=s(1199),i=s(53498),d=s(42749);function u(){(0,n.useRouter)();let e=(0,n.useSearchParams)(),{tenantId:t}=(0,n.useParams)(),[s,u]=(0,a.useState)("list"),[m,h]=(0,a.useState)(null),[x,g]=(0,a.useState)(!1),p=(0,a.useRef)(0);(0,a.useEffect)(()=>{let s=e.get("tab"),r=e.get("id");e.get("edit"),s&&u(s),r&&(h(r),u("details")),d.vF.info("[TenantCustomersPage] Initialized with tenant ID: ".concat(t,", tab: ").concat(s||"list"))},[e,t]),(0,a.useEffect)(()=>{"list"===s&&x&&(p.current+=1,g(!1))},[s,x]);let f=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=new URLSearchParams;r.set("tab",e),s&&r.set("id",s),window.history.pushState({},"","/".concat(t,"/dashboard/customers?").concat(r.toString()))},v=e=>{u(e),f(e,"details"===e?m:null)},b=()=>{u("add"),f("add")},w=e=>{h(e),u("details"),f("details",e)},y=()=>{u("list"),g(!0),f("list")},j=e=>{d.vF.info("[TenantCustomersPage] New customer created:",e),g(!0),u("list"),f("list")};return(0,r.jsx)(i.A,{tenantId:t,children:(0,r.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Customer Management"}),(0,r.jsxs)("button",{onClick:b,className:"flex items-center gap-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Customer"]})]}),(0,r.jsx)("div",{className:"border-b border-gray-300 mb-6 bg-white shadow-sm rounded-t-lg",children:(0,r.jsxs)("nav",{className:"flex -mb-px max-w-4xl mx-auto",children:[(0,r.jsxs)("button",{onClick:()=>v("list"),className:"py-4 px-8 text-center border-b-2 font-medium text-md transition-colors duration-200 ease-in-out focus:outline-none flex items-center gap-2 ".concat("list"===s?"text-blue-600 border-blue-600 bg-blue-50":"text-gray-600 border-transparent hover:text-gray-700 hover:border-gray-300"),children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"List Customers"]}),(0,r.jsxs)("button",{onClick:()=>v("add"),className:"py-4 px-8 text-center border-b-2 font-medium text-md transition-colors duration-200 ease-in-out focus:outline-none flex items-center gap-2 ".concat("add"===s?"text-blue-600 border-blue-600 bg-blue-50":"text-gray-600 border-transparent hover:text-gray-700 hover:border-gray-300"),children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Customer"]}),(0,r.jsxs)("button",{onClick:()=>m&&v("details"),className:"py-4 px-8 text-center border-b-2 font-medium text-md transition-colors duration-200 ease-in-out focus:outline-none flex items-center gap-2 ".concat("details"===s?"text-blue-600 border-blue-600 bg-blue-50":"text-gray-600 border-transparent hover:text-gray-700 hover:border-gray-300"," ").concat(m?"":"opacity-50 cursor-not-allowed"),disabled:!m,children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,r.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),"Customer Details",m&&(0,r.jsx)("span",{className:"ml-2 bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded",children:"Selected"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(()=>{let t="true"===e.get("edit");switch(s){case"add":return(0,r.jsx)(o.A,{mode:"create",onBackToList:y,onCustomerCreated:j});case"details":return m?(0,r.jsx)(l.default,{customerId:m,onBackToList:y,isEditing:t}):(0,r.jsx)("div",{className:"p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700",children:"Please select a customer to view details"});default:return(0,r.jsx)(c.default,{onCreateCustomer:b,onCustomerSelect:w,refreshTrigger:p.current},"customer-list-".concat(p.current))}})()})]})})}},15343:(e,t,s)=>{"use strict";s.d(t,{A:()=>r.A});var r=s(14745)},19596:(e,t,s)=>{"use strict";s.d(t,{kd:()=>r});let r={BUSINESS_INFO:"business-info",SUBSCRIPTION:"subscription",PAYMENT:"payment",SETUP:"setup",COMPLETE:"complete",DASHBOARD:"dashboard"}},53498:(e,t,s)=>{"use strict";s.d(t,{A:()=>f});var r=s(95155),a=s(11518),n=s.n(a),o=s(12115),c=s(35695),l=s(42749);s(55028),s(66766);var i=s(15343);s(19596);var d=s(51174),u=s(12743),m=s(55166),h=s(68387);async function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.startsWith("/")?e.substring(1):e,r=(0,h._)((0,m._)({},t),{headers:(0,m._)({"Content-Type":"application/json"},t.headers)});try{let e=await fetch("/api/proxy/".concat(s),r);if(!e.ok)throw Error("API request failed with status ".concat(e.status));return await e.json()}catch(t){throw console.error("[proxyFetch] Error fetching ".concat(e,":"),t),t}}let g={get:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return x(e,(0,m._)({method:"GET"},t))},resetCircuitBreakers:function(){let e=Object.keys(localStorage).filter(e=>e.startsWith("circuitBreaker:"));return e.forEach(e=>{console.log("[resetCircuitBreakers] Removing ".concat(e," from localStorage")),localStorage.removeItem(e)}),console.log("[resetCircuitBreakers] Reset ".concat(e.length," circuit breakers")),window.__resetCircuitBreakers&&(window.__resetCircuitBreakers(),console.log("[resetCircuitBreakers] Called global reset function")),e.length}};function p(){let[e,t]=(0,o.useState)(null),[s,a]=(0,o.useState)(null),[n,c]=(0,o.useState)(!1),[l,i]=(0,o.useState)(!1),[d,u]=(0,o.useState)("hr/employees"),[m,h]=(0,o.useState)(""),x=async()=>{c(!0);try{try{let e={"Content-Type":"application/json"};m&&(e.Authorization="Bearer ".concat(m));let t=await fetch("https://127.0.0.1:8000/api/".concat(d,"/"),{method:"GET",headers:e});console.log("[HttpsDebugger] Direct API response:",t)}catch(e){console.warn("[HttpsDebugger] Direct API request failed:",e)}let e={};m&&(e={headers:{Authorization:"Bearer ".concat(m)}});let s=await g.get(d,e);t({success:!0,message:"API connection successful",data:s})}catch(e){t({success:!1,message:"API connection failed",error:e.message})}finally{c(!1)}};return(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-4 my-4 max-w-xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"HTTPS Debug Tools"}),(0,r.jsx)("button",{onClick:()=>i(!l),className:"text-gray-600 hover:text-blue-500",children:l?"Collapse":"Expand"})]}),l&&(0,r.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["API Endpoint",(0,r.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:"e.g., hr/employees",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Auth Token (optional)",(0,r.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),placeholder:"Bearer token for authenticated endpoints",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:x,disabled:n,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:n?"Testing...":"Test API Connection"}),(0,r.jsx)("button",{onClick:()=>{try{let e=g.resetCircuitBreakers();a({success:!0,message:"Reset ".concat(e," circuit breakers")})}catch(e){a({success:!1,message:"Failed to reset circuit breakers",error:e.message})}},className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Reset Circuit Breakers"})]}),e&&(0,r.jsxs)("div",{className:"p-3 rounded ".concat(e.success?"bg-green-100":"bg-red-100"),children:[(0,r.jsx)("p",{className:"font-semibold",children:e.message}),!e.success&&(0,r.jsx)("p",{className:"text-red-600 text-sm",children:e.error}),e.success&&e.data&&(0,r.jsx)("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-sm overflow-auto max-h-40",children:JSON.stringify(e.data,null,2)})]}),s&&(0,r.jsxs)("div",{className:"p-3 rounded ".concat(s.success?"bg-green-100":"bg-red-100"),children:[(0,r.jsx)("p",{className:"font-semibold",children:s.message}),!s.success&&(0,r.jsx)("p",{className:"text-red-600 text-sm",children:s.error})]})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Connection Information"}),(0,r.jsxs)("ul",{className:"text-sm space-y-1 text-gray-600",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Frontend URL:"})," ",window.location.origin]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"API Proxy:"})," ",window.location.origin,"/api/proxy/"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Backend URL:"})," https://127.0.0.1:8000/api/"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"HTTPS Mode:"})," ",window.__HTTPS_ENABLED?"Enabled":"Disabled"]})]})]}),(0,r.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Common API Endpoints"}),(0,r.jsxs)("div",{className:"text-sm space-y-1 text-gray-600",children:[(0,r.jsx)("button",{onClick:()=>u("hr/employees"),className:"block text-blue-500 hover:underline",children:"HR Employees"}),(0,r.jsx)("button",{onClick:()=>u("finance/transactions"),className:"block text-blue-500 hover:underline",children:"Finance Transactions"}),(0,r.jsx)("button",{onClick:()=>u("database/health-check"),className:"block text-blue-500 hover:underline",children:"Database Health Check"})]})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:(0,r.jsx)("p",{children:"* This component is for development debugging only."})})]})]})}function f(e){let{children:t,newAccount:s,plan:a,tenantId:m}=e,h=(0,c.useRouter)(),[x,g]=(0,o.useState)(!1),[f,v]=(0,o.useState)(!1),[b,w]=(0,o.useState)(m),[y,j]=(0,o.useState)("initial"),C=(0,o.useRef)(0);return(0,o.useEffect)(()=>{var e;let t=()=>{C.current+=1,j("navigation-".concat(C.current))};return null==(e=h.events)||e.on("routeChangeComplete",t),()=>{var e;null==(e=h.events)||e.off("routeChangeComplete",t)}},[h]),(0,o.useEffect)(()=>{if(m)return void w(m);let e=(()=>{let e=document.cookie.split(";"),t=null;for(let s of e){let[e,r]=s.trim().split("=");if("tenantId"===e){t=r;break}}if(t)return t;try{return localStorage.getItem("tenantId")||sessionStorage.getItem("tenantId")}catch(e){return null}})();e&&(l.vF.info("[DashboardWrapper] Using tenant ID from cache: ".concat(e)),w(e))},[m]),(0,o.useEffect)(()=>{b&&(0,d.isValidUUID)(b)?(l.vF.info("[DashboardWrapper] Storing valid tenant ID: ".concat(b)),(0,d.$_)(b)):b&&l.vF.warn("[DashboardWrapper] Invalid tenant ID format: ".concat(b))},[b]),(0,r.jsxs)("div",{className:"jsx-2ea202641b209f13 flex flex-col min-h-screen bg-gray-50",children:[(0,r.jsx)(n(),{id:"2ea202641b209f13",children:'html,body{height:100%;min-height:100%;width:100%;overflow-x:hidden}body{font-family:var(--font-family,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif);margin:0;padding:0}::-moz-selection{background-color:rgba(67,56,202,.3)}::selection{background-color:rgba(67,56,202,.3)}'}),(0,r.jsxs)("main",{className:"jsx-2ea202641b209f13 flex-1",children:[(0,r.jsx)(p,{}),(0,r.jsx)(i.A,{tenantId:b,newAccount:s,plan:a,children:t},y)]}),(0,r.jsx)(u.A,{})]})}},82786:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(95155),a=s(12115),n=s(56732),o=s(42749),c=s(20171),l=s(29670);let i="/api/customers",d="customer",u="".concat(d,"_list"),m=async e=>{try{let t=await l.Ay.getCacheValue(e);return null!=t}catch(t){return o.vF.warn("[CustomerService] Error checking cache for key ".concat(e,":"),t),!1}},h=e=>{if(!e)return[];try{if("string"==typeof e)return JSON.parse(e);return e}catch(t){return o.vF.error("[CustomerService] Error parsing JSON response:",t),Array.isArray(e)?[]:{}}},x={async getCustomers(){let{forceRefresh:e=!1,headers:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{if(!e&&await m(u))return o.vF.info("[CustomerService] Returning customers from cache"),await l.Ay.getCacheValue(u);o.vF.info("[CustomerService] Fetching customers from API");let s=await c.A.get(i,{headers:t,timeout:8e3,validateStatus:e=>e<500}),r=h(s.data),a=[];return Array.isArray(r)?a=r:r&&"object"==typeof r&&Array.isArray(r.customers)?a=r.customers:(o.vF.warn("[CustomerService] Unexpected data format:",r),a=[]),await l.Ay.setCacheValue(u,a,300),a}catch(e){return o.vF.error("[CustomerService] Error fetching customers:",e),e.response&&o.vF.error("[CustomerService] Error response:",{status:e.response.status,headers:e.response.headers,data:e.response.data}),[]}},async getCustomer(e){let{forceRefresh:t=!1,headers:s={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(!e)return o.vF.error("[CustomerService] Invalid customer ID provided"),null;let r="".concat(d,"_").concat(e);if(!t&&await m(r))return o.vF.info("[CustomerService] Returning customer ".concat(e," from cache")),await l.Ay.getCacheValue(r);o.vF.info("[CustomerService] Fetching customer ".concat(e," from API"));let a=await c.A.get("".concat(i,"/").concat(e),{headers:s,timeout:8e3,validateStatus:e=>e<500}),n=h(a.data);return await l.Ay.setCacheValue(r,n,300),n}catch(t){return o.vF.error("[CustomerService] Error fetching customer ".concat(e,":"),t),t.response&&o.vF.error("[CustomerService] Error response:",{status:t.response.status,headers:t.response.headers,data:t.response.data}),null}},async createCustomer(e){let{headers:t={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{o.vF.info("[CustomerService] Creating new customer");let s=await c.A.post(i,e,{headers:t});return await l.Ay.removeCacheValue(u),s.data}catch(e){throw o.vF.error("[CustomerService] Error creating customer:",e),e}},async updateCustomer(e,t){let{headers:s={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{o.vF.info("[CustomerService] Updating customer ".concat(e));let r=await c.A.put("".concat(i,"/").concat(e),t,{headers:s}),a="".concat(d,"_").concat(e);return await l.Ay.setCacheValue(a,r.data,300),await l.Ay.removeCacheValue(u),r.data}catch(t){throw o.vF.error("[CustomerService] Error updating customer ".concat(e,":"),t),t}},async deleteCustomer(e){let{headers:t={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{o.vF.info("[CustomerService] Deleting customer ".concat(e));let s=await c.A.delete("".concat(i,"/").concat(e),{headers:t}),r="".concat(d,"_").concat(e);return await l.Ay.removeCacheValue(r),await l.Ay.removeCacheValue(u),s.data}catch(t){throw o.vF.error("[CustomerService] Error deleting customer ".concat(e,":"),t),t}},async clearCache(){o.vF.info("[CustomerService] Clearing customer cache"),await l.Ay.clearCache()}};var g=s(47070),p=s(35695);let f=e=>{let{onCustomerSelect:t,onCreateCustomer:s}=e,[c,l]=(0,a.useState)([]),[i,d]=(0,a.useState)(!0),[u,m]=(0,a.useState)(null),[h,f]=(0,a.useState)(""),[v,b]=(0,a.useState)(null),[w,y]=(0,a.useState)(!1),{notifySuccess:j,notifyError:C,notifyInfo:N}=(0,n.d)(),{data:k}=(0,g.useSession)(),S=(0,p.useParams)(),A=null==S?void 0:S.tenantId,E=(0,p.useRouter)(),F=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{d(!0),o.vF.info("[CustomerList] Fetching customers".concat(e?" (force refresh)":""));let t={};(null==k?void 0:k.accessToken)&&(t.Authorization="Bearer ".concat(k.accessToken));let s=await x.getCustomers({forceRefresh:e,headers:t});o.vF.info("[CustomerList] Successfully fetched ".concat(s.length," customers")),l(s),m(null)}catch(e){var t,s;o.vF.error("[CustomerList] Error fetching customers:",e),o.vF.error("[CustomerList] Error details:",{message:e.message,responseData:null==(t=e.response)?void 0:t.data,responseStatus:null==(s=e.response)?void 0:s.status}),m("Error fetching customers"),C("Failed to fetch customers")}finally{d(!1)}},[k,C]);(0,a.useEffect)(()=>{F();let e=setInterval(()=>{F(!0)},3e5);return()=>{clearInterval(e)}},[F]);let I=e=>{o.vF.info("Selected customer:",e),A?window.location.href="/".concat(A,"/dashboard/customers/").concat(e.id):t(e.id),N("Viewing customer: ".concat(e.customer_name||e.customerName||"".concat(e.first_name," ").concat(e.last_name)))},_=(e,t)=>{t&&t.stopPropagation(),o.vF.info("[CustomerList] Editing customer ".concat(e.id)),E.push("/dashboard/customers/edit/".concat(e.id))},B=(e,t)=>{t.stopPropagation(),b(e),y(!0)},T=async()=>{try{d(!0),o.vF.info("[CustomerList] Deleting customer with ID: ".concat(v.id));let e={};(null==k?void 0:k.accessToken)&&(e.Authorization="Bearer ".concat(k.accessToken)),await x.deleteCustomer(v.id,{headers:e}),l(c.filter(e=>e.id!==v.id)),j("Customer deleted successfully")}catch(s){var e,t;o.vF.error("[CustomerList] Error deleting customer:",s),o.vF.error("[CustomerList] Error details:",{message:s.message,responseData:null==(e=s.response)?void 0:e.data,responseStatus:null==(t=s.response)?void 0:t.status}),C("Failed to delete customer")}finally{d(!1),y(!1),b(null)}},R=()=>{F(!0),N("Refreshing customer list...")},P=h?c.filter(e=>{let t="".concat(e.first_name||""," ").concat(e.last_name||"").toLowerCase(),s=(e.customer_name||e.customerName||"").toLowerCase(),r=(e.email||"").toLowerCase(),a=(e.phone||"").toLowerCase(),n=h.toLowerCase();return t.includes(n)||s.includes(n)||r.includes(n)||a.includes(n)}):c;return i&&0===c.length?(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{className:"h-2 bg-gray-200",children:(0,r.jsx)("div",{className:"h-2 bg-blue-600 animate-pulse"})}),(0,r.jsx)("div",{className:"flex justify-center items-center py-16",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})]}):u&&0===c.length?(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-md mb-4",children:(0,r.jsx)("p",{className:"text-red-700",children:u})}),(0,r.jsx)("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",onClick:R,children:"Try Again"})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsxs)("div",{className:"relative flex-grow",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),(0,r.jsx)("input",{type:"text",placeholder:"Search customers...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:h,onChange:e=>f(e.target.value)})]}),(0,r.jsx)("button",{onClick:R,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors",title:"Refresh",disabled:i,children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ".concat(i?"animate-spin":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,r.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",onClick:s,children:"Add Customer"})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:P.length>0?P.map(e=>(0,r.jsxs)("tr",{onClick:()=>I(e),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.customer_name||e.customerName||"".concat(e.first_name||""," ").concat(e.last_name||"")}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.phone}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.city&&e.state?"".concat(e.city,", ").concat(e.state):e.city||e.state||""}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,r.jsx)("button",{onClick:t=>_(e,t),className:"text-blue-600 hover:text-blue-900 mr-4",title:"Edit",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),(0,r.jsx)("button",{onClick:t=>B(e,t),className:"text-red-600 hover:text-red-900",title:"Delete",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]},e.id)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:h?"No customers match your search":"No customers found"})})})]})}),i&&c.length>0&&(0,r.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-60 flex justify-center items-center z-10",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})})]}),w&&(0,r.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,r.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,r.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,r.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,r.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,r.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:(0,r.jsx)("svg",{className:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,r.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Customer"}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this customer? This action cannot be undone."}),v&&(0,r.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 rounded-md",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,r.jsx)("span",{className:"font-medium",children:"Name:"})," ",v.customer_name||v.customerName||"".concat(v.first_name||""," ").concat(v.last_name||"")]}),v.email&&(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,r.jsx)("span",{className:"font-medium",children:"Email:"})," ",v.email]})]})]})]})]})}),(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,r.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:T,disabled:i,children:i?"Deleting...":"Delete"}),(0,r.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:()=>y(!1),disabled:i,children:"Cancel"})]})]})]})})]})}},89112:(e,t,s)=>{Promise.resolve().then(s.bind(s,14713))}},e=>{var t=t=>e(e.s=t);e.O(0,[54940,9296,79480,58430,84620,23639,38501,78746,20171,79189,6874,62052,66766,31296,66352,38772,35162,37921,8896,47070,29729,44367,47856,67953,3963,83531,93078,14719,14745,1199,28441,31684,77358],()=>t(89112)),_N_E=e.O()}]);