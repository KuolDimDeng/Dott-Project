(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45066,47459],{19002:(t,e,n)=>{"use strict";n.d(e,{H:()=>a});var r=n(45103),o=n(84295);let a=async t=>{var e;let n=t.getConfig().Auth?.Cognito;(0,r.$y)(n);let a=await t.Auth.getTokens({forceRefresh:!1});(0,o.H0)(a);let{"cognito:username":s,sub:i}=a.idToken?.payload??{},c={username:s,userId:i},l=(e=a,e?.signInDetails);return l&&(c.signInDetails=l),c}},24818:(t,e,n)=>{"use strict";n.d(e,{$:()=>a});var r=n(87970),o=n(57762);let a=t=>(0,o.$)(r.H,t)},35695:(t,e,n)=>{"use strict";var r=n(18999);n.o(r,"useParams")&&n.d(e,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(e,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(e,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(e,{useSearchParams:function(){return r.useSearchParams}})},39641:(t,e,n)=>{"use strict";n.d(e,{C:()=>i,p:()=>s});var r=n(62904),o=n(61573);let a=new r.C("CoreStorageUtils"),s=()=>{try{if("undefined"!=typeof window&&window.localStorage)return window.localStorage}catch(t){a.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new o._},i=()=>{try{if("undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw Error("sessionStorage is not defined")}catch(t){return a.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new o._}}},42749:(t,e,n)=>{"use strict";n.d(e,{vF:()=>s});let r={debug:0,info:1,warn:2,error:3},o="info",a=()=>!1,s={setLevel(t){void 0!==r[t]&&(o=t)},getLevel:()=>o,debug:(t,e)=>{},info:(t,e)=>{r[o]<=r.info&&(a()?void 0!==e?console.info("[SERVER INFO] ".concat(t),e):console.info("[SERVER INFO] ".concat(t)):void 0!==e?console.info(t,e):console.info(t))},warn:(t,e)=>{r[o]<=r.warn&&(a()?void 0!==e?console.warn("[SERVER WARN] ".concat(t),e):console.warn("[SERVER WARN] ".concat(t)):void 0!==e?console.warn(t,e):console.warn(t))},error:(t,e)=>{r[o]<=r.error&&(a()?void 0!==e?console.error("[SERVER ERROR] ".concat(t),e):console.error("[SERVER ERROR] ".concat(t)):void 0!==e?console.error(t,e):console.error(t))}}},51174:(t,e,n)=>{"use strict";n.d(e,{$_:()=>l,BI:()=>y,FB:()=>v,Nf:()=>f,Pc:()=>d,fy:()=>_,getTenantId:()=>i,getTenantIdFromCognito:()=>w,h_:()=>h,isValidUUID:()=>c,jW:()=>I,oA:()=>u,pm:()=>m,updateTenantIdInCognito:()=>g});var r=n(81746),o=n(24818),a=n(62052);let s="tenantId",i=async()=>{try{var t,e,n,i,c,l;let u=await a.l.getItem(s);if(u)return u;let d=await (0,r.H)(),g=await (0,o.$)(),h=(null==d||null==(t=d.attributes)?void 0:t["custom:tenant_ID"])||(null==d||null==(e=d.attributes)?void 0:e["custom:tenantId"])||(null==g||null==(i=g.accessToken)||null==(n=i.payload)?void 0:n["custom:tenant_ID"])||(null==g||null==(l=g.accessToken)||null==(c=l.payload)?void 0:c["custom:tenantId"]);if(!h)throw Error("Tenant ID not found in user attributes or session");return await a.l.setItem(s,h),h}catch(t){throw console.error("Error getting tenant ID:",t),t}},c=t=>/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t),l=async t=>{try{await a.l.setItem(s,t)}catch(t){throw console.error("Error storing tenant ID:",t),t}},u=async t=>{let{tenantId:e,metadata:n={}}=t;try{if(!e)return void console.error("Cannot store tenant info: No tenant ID provided");await a.l.setItem(s,e),window.__APP_CACHE||(window.__APP_CACHE={}),window.__APP_CACHE.tenant||(window.__APP_CACHE.tenant={}),window.__APP_CACHE.tenant.id=e,window.__APP_CACHE.tenant.metadata=n,window.__APP_CACHE.tenant.timestamp=Date.now();try{sessionStorage.setItem("tenant_id",e),sessionStorage.setItem("tenant_info",JSON.stringify({id:e,metadata:n,timestamp:Date.now()}))}catch(t){console.debug("Could not store tenant info in sessionStorage:",t)}console.debug("[TenantUtils] Stored tenant info for ID: ".concat(e))}catch(t){console.error("Error storing tenant info:",t)}},d=t=>t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():t,g=async t=>{try{let{updateUserAttributes:e}=await Promise.all([n.e(58430),n.e(84620),n.e(23639),n.e(38501),n.e(31861),n.e(94901)]).then(n.bind(n,55158));await e({userAttributes:{"custom:tenant_ID":t}}),await l(t),console.debug("[TenantUtils] Updated tenant ID in Cognito: ".concat(t))}catch(e){console.error("Error updating tenant ID in Cognito:",e),await l(t)}},h=async t=>{try{await a.l.setItem("auth_tokens",t)}catch(t){throw console.error("Error setting tokens:",t),t}},w=async()=>{try{var t,e,n,i,c,l;let u=await a.l.getItem(s);if(u)return u;let d=await (0,r.H)(),g=await (0,o.$)(),h=(null==d||null==(t=d.attributes)?void 0:t["custom:tenant_ID"])||(null==d||null==(e=d.attributes)?void 0:e["custom:tenantId"])||(null==g||null==(i=g.accessToken)||null==(n=i.payload)?void 0:n["custom:tenant_ID"])||(null==g||null==(l=g.accessToken)||null==(c=l.payload)?void 0:c["custom:tenantId"]);if(!h)return null;return await a.l.setItem(s,h),h}catch(t){return console.error("Error getting tenant ID from Cognito:",t),null}},f=async t=>{try{if(!c(t))return!1;return(await fetch("/api/tenants/".concat(t,"/validate"))).ok}catch(t){return console.error("Error validating tenant ID:",t),!1}},m=t=>{let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return"00000000-0000-4000-a000-".concat(Math.abs(e).toString(16).padStart(12,"0"))},I=async()=>{try{let t=await i();if(!c(t))return console.error("Invalid tenant ID format:",t),null;return t}catch(t){return console.error("Error getting secure tenant ID:",t),null}},y=t=>c(t),v=t=>t?"tenant_".concat(t.replace(/-/g,"_")):"public",_=async()=>{try{let t=await i(),e={"Content-Type":"application/json","x-tenant-id":t};try{let{getCurrentUser:t}=await Promise.all([n.e(58430),n.e(84620),n.e(23639),n.e(38501),n.e(31861),n.e(94901)]).then(n.bind(n,55158)),r=await t();r&&r.userId&&(e["x-user-id"]=r.userId)}catch(t){}return e}catch(t){return console.error("Error getting tenant headers:",t),{"Content-Type":"application/json"}}}},57762:(t,e,n)=>{"use strict";n.d(e,{$:()=>r});let r=(t,e)=>t.Auth.fetchAuthSession(e)},61573:(t,e,n)=>{"use strict";n.d(e,{_:()=>r});class r{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,e){this.storage.set(t,e)}getItem(t){return this.storage.get(t)??null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}}},70055:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>c});var r=n(95155),o=n(12115),a=n(35695),s=n(51174),i=n(42749);function c(){let t=(0,a.useRouter)();return(0,o.useEffect)(()=>{try{(0,s.clearTenantStorage)(),i.vF.info("[ClearTenant] Tenant storage cleared successfully"),t.push("/")}catch(t){i.vF.error("[ClearTenant] Error clearing tenant storage:",t)}},[t]),(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Clearing Tenant Data..."}),(0,r.jsx)("p",{className:"text-gray-600",children:"You will be redirected to the home page shortly."})]})})}},77200:(t,e,n)=>{Promise.resolve().then(n.bind(n,70055))},81746:(t,e,n)=>{"use strict";n.d(e,{H:()=>a});var r=n(87970),o=n(19002);let a=async()=>(0,o.H)(r.H)},94225:(t,e,n)=>{"use strict";n.d(e,{U:()=>o});var r=n(95730);class o{constructor(t){this.storage=t}async setItem(t,e){if(!this.storage)throw new r.h;this.storage.setItem(t,e)}async getItem(t){if(!this.storage)throw new r.h;return this.storage.getItem(t)}async removeItem(t){if(!this.storage)throw new r.h;this.storage.removeItem(t)}async clear(){if(!this.storage)throw new r.h;this.storage.clear()}}},95730:(t,e,n)=>{"use strict";n.d(e,{h:()=>a});var r=n(31241),o=n(65206);class a extends o.x{constructor(){super({name:r.m.PlatformNotSupported,message:"Function not supported on current platform"})}}}},t=>{var e=e=>t(t.s=e);t.O(0,[54940,9296,79480,62052,28441,31684,77358],()=>e(77200)),_N_E=t.O()}]);