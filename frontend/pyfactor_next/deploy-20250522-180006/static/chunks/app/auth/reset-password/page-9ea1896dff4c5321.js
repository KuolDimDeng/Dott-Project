(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64089],{6218:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});var n=r(10831);let a={convert(e,t={urlSafe:!1,skipPadding:!1}){let r="string"==typeof e?e:Array.from(e,e=>String.fromCodePoint(e)).join(""),a=(0,n.xA)()(r);return t.urlSafe&&(a=a.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(a=a.replace(/=/g,"")),a}}},11024:(e,t,r)=>{"use strict";r.d(t,{T:()=>o});var n=r(87970),a=r(69496);let o=()=>(0,a.T)(n.H)},15706:(e,t,r)=>{Promise.resolve().then(r.bind(r,49117))},35695:(e,t,r)=>{"use strict";var n=r(18999);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},36465:(e,t,r)=>{"use strict";function n(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}r.r(t),r.d(t,{_:()=>n})},42749:(e,t,r)=>{"use strict";r.d(t,{vF:()=>s});let n={debug:0,info:1,warn:2,error:3},a="info",o=()=>!1,s={setLevel(e){void 0!==n[e]&&(a=e)},getLevel:()=>a,debug:(e,t)=>{},info:(e,t)=>{n[a]<=n.info&&(o()?void 0!==t?console.info("[SERVER INFO] ".concat(e),t):console.info("[SERVER INFO] ".concat(e)):void 0!==t?console.info(e,t):console.info(e))},warn:(e,t)=>{n[a]<=n.warn&&(o()?void 0!==t?console.warn("[SERVER WARN] ".concat(e),t):console.warn("[SERVER WARN] ".concat(e)):void 0!==t?console.warn(e,t):console.warn(e))},error:(e,t)=>{n[a]<=n.error&&(o()?void 0!==t?console.error("[SERVER ERROR] ".concat(e),t):console.error("[SERVER ERROR] ".concat(e)):void 0!==t?console.error(e,t):console.error(e))}}},49117:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(95155),a=r(12115),o=r(35695),s=r(6874),i=r.n(s),l=r(83531),c=r(42749);function d(){let e=(0,o.useSearchParams)(),{confirmPasswordReset:t,isLoading:r}=(0,l.A)(),[s,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[f,g]=(0,a.useState)(""),[w,h]=(0,a.useState)(""),[b,p]=(0,a.useState)("");(0,a.useEffect)(()=>{let t=e.get("email");t&&d(t)},[e]);let y=async e=>{if(e.preventDefault(),p(""),f!==w)return void p("Passwords do not match");if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(f))return void p("Password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, one number, and one special character");try{await t(s,u,f),c.vF.debug("Password reset successful")}catch(e){c.vF.error("Password reset failed:",e),p(e.message||"Failed to reset password")}};return(0,n.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen p-6",children:(0,n.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-8 flex flex-col items-center max-w-md w-full",children:[(0,n.jsx)("h1",{className:"text-xl font-semibold mb-2",children:"Reset Password"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 text-center mb-6",children:"Enter the verification code sent to your email and your new password."}),b&&(0,n.jsx)("div",{className:"bg-red-50 text-red-700 p-4 rounded-md mb-4 w-full border border-red-200",children:b}),(0,n.jsxs)("form",{onSubmit:y,className:"w-full",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,n.jsx)("input",{className:"w-full px-3 py-2 border ".concat(r?"bg-gray-100":"bg-white"," border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"),required:!0,id:"email",name:"email",type:"email",autoComplete:"email",value:s,onChange:e=>d(e.target.value),disabled:r})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Code"}),(0,n.jsx)("input",{className:"w-full px-3 py-2 border ".concat(r?"bg-gray-100":"bg-white"," border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"),required:!0,id:"code",name:"code",value:u,onChange:e=>m(e.target.value),disabled:r})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,n.jsx)("input",{className:"w-full px-3 py-2 border ".concat(r?"bg-gray-100":"bg-white"," border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"),required:!0,id:"newPassword",name:"newPassword",type:"password",autoComplete:"new-password",value:f,onChange:e=>g(e.target.value),disabled:r})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,n.jsx)("input",{className:"w-full px-3 py-2 border ".concat(r?"bg-gray-100":"bg-white"," border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"),required:!0,id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",value:w,onChange:e=>h(e.target.value),disabled:r})]}),(0,n.jsx)("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 ".concat(r?"opacity-70 cursor-not-allowed":"hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),disabled:r,children:r?(0,n.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Reset Password"}),(0,n.jsx)("div",{className:"mt-4 text-center",children:(0,n.jsx)(i(),{href:"/auth/signin",className:"text-sm text-indigo-600 hover:text-indigo-500",children:"Back to Sign In"})})]})]})})}},50581:(e,t,r)=>{"use strict";r.d(t,{N:()=>l});var n=r(90808),a=r(55413),o=r(2242),s=r(41811),i=r(83854);let l=e=>(0,n.A)(a.e,(0,o._)("GetUser"),(0,s.T)(),{...i.C,...e})},51174:(e,t,r)=>{"use strict";r.d(t,{$_:()=>c,BI:()=>p,FB:()=>y,Nf:()=>w,Pc:()=>u,fy:()=>v,getTenantId:()=>i,getTenantIdFromCognito:()=>g,h_:()=>f,isValidUUID:()=>l,jW:()=>b,oA:()=>d,pm:()=>h,updateTenantIdInCognito:()=>m});var n=r(81746),a=r(24818),o=r(62052);let s="tenantId",i=async()=>{try{var e,t,r,i,l,c;let d=await o.l.getItem(s);if(d)return d;let u=await (0,n.H)(),m=await (0,a.$)(),f=(null==u||null==(e=u.attributes)?void 0:e["custom:tenant_ID"])||(null==u||null==(t=u.attributes)?void 0:t["custom:tenantId"])||(null==m||null==(i=m.accessToken)||null==(r=i.payload)?void 0:r["custom:tenant_ID"])||(null==m||null==(c=m.accessToken)||null==(l=c.payload)?void 0:l["custom:tenantId"]);if(!f)throw Error("Tenant ID not found in user attributes or session");return await o.l.setItem(s,f),f}catch(e){throw console.error("Error getting tenant ID:",e),e}},l=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e),c=async e=>{try{await o.l.setItem(s,e)}catch(e){throw console.error("Error storing tenant ID:",e),e}},d=async e=>{let{tenantId:t,metadata:r={}}=e;try{if(!t)return void console.error("Cannot store tenant info: No tenant ID provided");await o.l.setItem(s,t),window.__APP_CACHE||(window.__APP_CACHE={}),window.__APP_CACHE.tenant||(window.__APP_CACHE.tenant={}),window.__APP_CACHE.tenant.id=t,window.__APP_CACHE.tenant.metadata=r,window.__APP_CACHE.tenant.timestamp=Date.now();try{sessionStorage.setItem("tenant_id",t),sessionStorage.setItem("tenant_info",JSON.stringify({id:t,metadata:r,timestamp:Date.now()}))}catch(e){console.debug("Could not store tenant info in sessionStorage:",e)}console.debug("[TenantUtils] Stored tenant info for ID: ".concat(t))}catch(e){console.error("Error storing tenant info:",e)}},u=e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e,m=async e=>{try{let{updateUserAttributes:t}=await Promise.all([r.e(58430),r.e(84620),r.e(23639),r.e(38501),r.e(31861),r.e(94901)]).then(r.bind(r,55158));await t({userAttributes:{"custom:tenant_ID":e}}),await c(e),console.debug("[TenantUtils] Updated tenant ID in Cognito: ".concat(e))}catch(t){console.error("Error updating tenant ID in Cognito:",t),await c(e)}},f=async e=>{try{await o.l.setItem("auth_tokens",e)}catch(e){throw console.error("Error setting tokens:",e),e}},g=async()=>{try{var e,t,r,i,l,c;let d=await o.l.getItem(s);if(d)return d;let u=await (0,n.H)(),m=await (0,a.$)(),f=(null==u||null==(e=u.attributes)?void 0:e["custom:tenant_ID"])||(null==u||null==(t=u.attributes)?void 0:t["custom:tenantId"])||(null==m||null==(i=m.accessToken)||null==(r=i.payload)?void 0:r["custom:tenant_ID"])||(null==m||null==(c=m.accessToken)||null==(l=c.payload)?void 0:l["custom:tenantId"]);if(!f)return null;return await o.l.setItem(s,f),f}catch(e){return console.error("Error getting tenant ID from Cognito:",e),null}},w=async e=>{try{if(!l(e))return!1;return(await fetch("/api/tenants/".concat(e,"/validate"))).ok}catch(e){return console.error("Error validating tenant ID:",e),!1}},h=e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return"00000000-0000-4000-a000-".concat(Math.abs(t).toString(16).padStart(12,"0"))},b=async()=>{try{let e=await i();if(!l(e))return console.error("Invalid tenant ID format:",e),null;return e}catch(e){return console.error("Error getting secure tenant ID:",e),null}},p=e=>l(e),y=e=>e?"tenant_".concat(e.replace(/-/g,"_")):"public",v=async()=>{try{let e=await i(),t={"Content-Type":"application/json","x-tenant-id":e};try{let{getCurrentUser:e}=await Promise.all([r.e(58430),r.e(84620),r.e(23639),r.e(38501),r.e(31861),r.e(94901)]).then(r.bind(r,55158)),n=await e();n&&n.userId&&(t["x-user-id"]=n.userId)}catch(e){}return t}catch(e){return console.error("Error getting tenant headers:",e),{"Content-Type":"application/json"}}}},52584:(e,t,r)=>{"use strict";r.d(t,{u:()=>p});var n=r(87970),a=r(24818),o=r(45103),s=r(27593),i=r(84295),l=r(88726),c=r(85565),d=r(59262),u=r(90808),m=r(55413),f=r(2242),g=r(41811),w=r(83854);let h=e=>(0,u.A)(m.e,(0,f._)("UpdateUserAttributes"),(0,g.T)(),{...w.C,...e});var b=r(32712);let p=async e=>{let{userAttributes:t,options:r}=e,u=n.H.getConfig().Auth?.Cognito,m=r?.clientMetadata;(0,o.$y)(u);let{userPoolEndpoint:f,userPoolId:g}=u,{tokens:w}=await (0,a.$)({forceRefresh:!1});(0,i.H0)(w);let p=h({endpointResolver:(0,b.o)({endpointOverride:f})}),{CodeDeliveryDetailsList:y}=await p({region:(0,l.J)(g),userAgentValue:(0,d.A)(s.BM.UpdateUserAttributes)},{AccessToken:w.accessToken.toString(),ClientMetadata:m,UserAttributes:(0,c.Q)(t)});return{...function(e){let t={};return Object.keys(e)?.forEach(e=>{t[e]={isUpdated:!0,nextStep:{updateAttributeStep:"DONE"}}}),t}(t),...function(e){let t={};return e?.forEach(e=>{let{AttributeName:r,DeliveryMedium:n,Destination:a}=e;r&&(t[r]={isUpdated:!1,nextStep:{updateAttributeStep:"CONFIRM_ATTRIBUTE_WITH_CODE",codeDeliveryDetails:{attributeName:r,deliveryMedium:n,destination:a}}})}),t}(y)}}},59262:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(32307),a=r(27593);let o=(e,t)=>(0,n.fE)({category:a.b7.Auth,action:e,...t})},69496:(e,t,r)=>{"use strict";r.d(t,{T:()=>m});var n=r(45103),a=r(57762),o=r(27593),s=r(88726),i=r(84295),l=r(85565),c=r(59262),d=r(50581),u=r(32712);let m=async e=>{let t=e.getConfig().Auth?.Cognito;(0,n.$y)(t);let{userPoolEndpoint:r,userPoolId:m}=t,{tokens:f}=await (0,a.$)(e,{forceRefresh:!1});(0,i.H0)(f);let g=(0,d.N)({endpointResolver:(0,u.o)({endpointOverride:r})}),{UserAttributes:w}=await g({region:(0,s.J)(m),userAgentValue:(0,c.A)(o.BM.FetchUserAttributes)},{AccessToken:f.accessToken.toString()});return(0,l.J)(w)}},85565:(e,t,r)=>{"use strict";function n(e){return Object.entries(e).map(([e,t])=>({Name:e,Value:t}))}function a(e){let t={};return e?.forEach(e=>{e.Name&&(t[e.Name]=e.Value)}),t}r.d(t,{J:()=>a,Q:()=>n})}},e=>{var t=t=>e(e.s=t);e.O(0,[54940,9296,79480,58430,84620,23639,38501,78746,6874,62052,44367,67953,83531,28441,31684,77358],()=>t(15706)),_N_E=e.O()}]);