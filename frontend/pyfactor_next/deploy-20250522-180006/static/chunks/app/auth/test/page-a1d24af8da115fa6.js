(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6890,38475],{6218:(e,t,i)=>{"use strict";i.d(t,{Y:()=>r});var n=i(10831);let r={convert(e,t={urlSafe:!1,skipPadding:!1}){let i="string"==typeof e?e:Array.from(e,e=>String.fromCodePoint(e)).join(""),r=(0,n.xA)()(i);return t.urlSafe&&(r=r.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(r=r.replace(/=/g,"")),r}}},11024:(e,t,i)=>{"use strict";i.d(t,{T:()=>o});var n=i(87970),r=i(69496);let o=()=>(0,r.T)(n.H)},42749:(e,t,i)=>{"use strict";i.d(t,{vF:()=>s});let n={debug:0,info:1,warn:2,error:3},r="info",o=()=>!1,s={setLevel(e){void 0!==n[e]&&(r=e)},getLevel:()=>r,debug:(e,t)=>{},info:(e,t)=>{n[r]<=n.info&&(o()?void 0!==t?console.info("[SERVER INFO] ".concat(e),t):console.info("[SERVER INFO] ".concat(e)):void 0!==t?console.info(e,t):console.info(e))},warn:(e,t)=>{n[r]<=n.warn&&(o()?void 0!==t?console.warn("[SERVER WARN] ".concat(e),t):console.warn("[SERVER WARN] ".concat(e)):void 0!==t?console.warn(e,t):console.warn(e))},error:(e,t)=>{n[r]<=n.error&&(o()?void 0!==t?console.error("[SERVER ERROR] ".concat(e),t):console.error("[SERVER ERROR] ".concat(e)):void 0!==t?console.error(e,t):console.error(e))}}},50581:(e,t,i)=>{"use strict";i.d(t,{N:()=>l});var n=i(90808),r=i(55413),o=i(2242),s=i(41811),a=i(83854);let l=e=>(0,n.A)(r.e,(0,o._)("GetUser"),(0,s.T)(),{...a.C,...e})},52584:(e,t,i)=>{"use strict";i.d(t,{u:()=>A});var n=i(87970),r=i(24818),o=i(45103),s=i(27593),a=i(84295),l=i(88726),c=i(85565),u=i(59262),f=i(90808),d=i(55413),g=i(2242),m=i(41811),h=i(83854);let p=e=>(0,f.A)(d.e,(0,g._)("UpdateUserAttributes"),(0,m.T)(),{...h.C,...e});var y=i(32712);let A=async e=>{let{userAttributes:t,options:i}=e,f=n.H.getConfig().Auth?.Cognito,d=i?.clientMetadata;(0,o.$y)(f);let{userPoolEndpoint:g,userPoolId:m}=f,{tokens:h}=await (0,r.$)({forceRefresh:!1});(0,a.H0)(h);let A=p({endpointResolver:(0,y.o)({endpointOverride:g})}),{CodeDeliveryDetailsList:v}=await A({region:(0,l.J)(m),userAgentValue:(0,u.A)(s.BM.UpdateUserAttributes)},{AccessToken:h.accessToken.toString(),ClientMetadata:d,UserAttributes:(0,c.Q)(t)});return{...function(e){let t={};return Object.keys(e)?.forEach(e=>{t[e]={isUpdated:!0,nextStep:{updateAttributeStep:"DONE"}}}),t}(t),...function(e){let t={};return e?.forEach(e=>{let{AttributeName:i,DeliveryMedium:n,Destination:r}=e;i&&(t[i]={isUpdated:!1,nextStep:{updateAttributeStep:"CONFIRM_ATTRIBUTE_WITH_CODE",codeDeliveryDetails:{attributeName:i,deliveryMedium:n,destination:r}}})}),t}(v)}}},59262:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(32307),r=i(27593);let o=(e,t)=>(0,n.fE)({category:r.b7.Auth,action:e,...t})},60584:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Amplify:()=>n.E,Hub:()=>U,configureAmplify:()=>N,confirmResetPassword:()=>c.P,confirmSignUp:()=>a.z,confirmUserAttribute:()=>y.w,fetchAuthSession:()=>d.$,fetchAuthSessionWithConfig:()=>j,fetchUserAttributes:()=>f.T,fetchUserAttributesWithConfig:()=>k,getCurrentUser:()=>u.H,getCurrentUserWithConfig:()=>O,initAmplify:()=>I,isAmplifyConfigured:()=>S,resendSignUpCode:()=>g.h,resetPassword:()=>l.x,safeSignOut:()=>P,sendUserAttributeVerificationCode:()=>p.c,setUpTOTP:()=>A.x,signIn:()=>o.J,signInWithConfig:()=>T,signInWithRedirect:()=>h.$,signOut:()=>r.C,signOutWithConfig:()=>R,signUp:()=>s.H,updateUserAttributes:()=>m.u});var n=i(63900),r=i(82354),o=i(23639),s=i(95027),a=i(55481),l=i(27755),c=i(80079),u=i(81746),f=i(11024),d=i(24818),g=i(97220),m=i(52584),h=i(15102),p=i(35220),y=i(71194),A=i(35030),v=i(51148),b=i(42749),w=i(49509);let U=v.YZ,C="1o5v84mrgn4gt87khtr179uc5b",E="us-east-1_JPL8vGfb6",x="us-east-1";b.vF.debug("[AmplifyUnified] Configuration values:",{COGNITO_CLIENT_ID:C,COGNITO_USER_POOL_ID:E,AWS_REGION:x});let _=!1,N=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(_&&!e)return b.vF.debug("[AmplifyUnified] Amplify already configured, skipping"),!0;try{e&&(b.vF.info("[AmplifyUnified] Force reconfiguring Amplify"),window.__amplifyConfigured&&(window.__amplifyConfigured=!1))}catch(e){b.vF.error("[AmplifyUnified] Error during force reconfigure:",e)}try{b.vF.info("[AmplifyUnified] Configuring Amplify",{environment:"production",isDevelopment:!1});let e=E||w.env.NEXT_PUBLIC_USER_POOL_ID||"us-east-1_JPL8vGfb6",t=C||w.env.NEXT_PUBLIC_USER_POOL_CLIENT_ID||"1o5v84mrgn4gt87khtr179uc5b";if(!e||!t)return b.vF.error("[AmplifyUnified] Missing required configuration:",{hasUserPoolId:!!e,hasClientId:!!t}),_=!1,!1;let i={Auth:{Cognito:{userPoolId:e,userPoolClientId:t,identityPoolId:w.env.NEXT_PUBLIC_COGNITO_IDENTITY_POOL_ID,region:x||"us-east-1",loginWith:{email:!0,username:!0,phone:!1},httpOptions:{timeout:3e4,connectTimeout:1e4,rejectUnauthorized:!1,retryable:!0,maxRetries:3}}}};b.vF.debug("[AmplifyUnified] Amplify configuration:",{userPoolId:i.Auth.Cognito.userPoolId,userPoolClientId:i.Auth.Cognito.userPoolClientId,region:i.Auth.Cognito.region}),n.E.configure(i);let r=n.E.getConfig();if(!(r&&r.Auth&&r.Auth.Cognito&&r.Auth.Cognito.userPoolId))return b.vF.error("[AmplifyUnified] Configuration verification failed",{hasConfig:!!r,hasAuth:!!(r&&r.Auth),hasCognito:!!(r&&r.Auth&&r.Auth.Cognito)}),_=!1,!1;return U.listen("auth",e=>{if("signOut"===e.payload.event||"signIn_failure"===e.payload.event){var t,i;b.vF.debug("[AmplifyUnified] Auth event that might require reconfiguration:",{event:e.payload.event,data:e.payload.data});let r=n.E.getConfig();(null==r||null==(i=r.Auth)||null==(t=i.Cognito)?void 0:t.userPoolId)||(b.vF.warn("[AmplifyUnified] Configuration lost after auth event, reconfiguring..."),N())}}),_=!0,b.vF.info("[AmplifyUnified] Amplify configured successfully"),window.__amplifyConfigured=!0,!0}catch(e){return b.vF.error("[AmplifyUnified] Failed to configure Amplify:",{error:e.message,stack:e.stack}),_=!1,!1}};try{N()}catch(e){b.vF.error("[AmplifyUnified] Error during initial Amplify configuration:",e)}let S=()=>{var e,t;if(!_)return b.vF.info("[AmplifyUnified] Amplify configuration status check: Not configured"),!1;let i=n.E.getConfig(),r=!!(i&&(null==(t=i.Auth)||null==(e=t.Cognito)?void 0:e.userPoolId));return b.vF.debug("[AmplifyUnified] Amplify configuration status:",{isConfigured:_,hasAuth:r,config:{isConfigured:_,hasAuth:r}}),_&&r},P=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{global:!0};try{b.vF.info("[AmplifyUnified] Amplify configuration status before sign out:",{isConfigured:S()}),S()||(b.vF.warn("[AmplifyUnified] Attempting to reconfigure Amplify before signing out"),N());try{return await (0,r.C)(e),b.vF.info("[AmplifyUnified] Successfully signed out user"),!0}catch(e){if(b.vF.error("[AmplifyUnified] Error during Amplify signOut:",e),"AuthUserPoolException"===e.name||e.message&&e.message.includes("UserPool not configured")){b.vF.warn("[AmplifyUnified] Auth UserPool not configured, attempting recovery"),N();try{window.__APP_CACHE&&(window.__APP_CACHE.auth={},window.__APP_CACHE.user={},b.vF.info("[AmplifyUnified] Cleared app cache for auth data"))}catch(e){b.vF.error("[AmplifyUnified] Error clearing app cache:",e)}}return!0}}catch(e){return b.vF.error("[AmplifyUnified] Unexpected error in safeSignOut:",e),!0}},F=async function(e){for(var t,i,n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];try{if(e===o.J)try{if(await (0,u.H)()){b.vF.warn("[AmplifyUnified] User already authenticated, signing out first");try{await P({global:!0})}catch(e){b.vF.error("[AmplifyUnified] Error signing out before signIn:",e)}}}catch(e){(null==(t=e.message)?void 0:t.includes("not authenticated"))||b.vF.warn("[AmplifyUnified] Error checking current user before signIn:",e)}S()||(b.vF.warn("[AmplifyUnified] Amplify not configured before auth function call, configuring now"),N(!0));let n=0;for(;n<=3;)try{return await e(...r)}catch(r){if(n++,b.vF.error("[AmplifyUnified] Error in ".concat(e.name," (retry ").concat(n,"/").concat(3,"):"),{name:r.name,message:r.message,code:r.code,statusCode:null==r||null==(i=r.response)?void 0:i.status,retryable:r.retryable}),("AuthUserPoolException"===r.name||r.message&&r.message.includes("UserPool not configured"))&&(b.vF.warn("[AmplifyUnified] Auth UserPool not configured, attempting recovery (retry ".concat(n,"/").concat(3,")")),N(!0),n<=3)){await new Promise(e=>setTimeout(e,1e3*n));continue}if(("NetworkError"===r.name||r.message&&(r.message.includes("network")||r.message.includes("Network")||r.message.includes("SSL")||r.message.includes("certificate")||r.message.includes("CORS")||r.message.includes("timeout"))||"NETWORK_ERROR"===r.code||"NetworkingError"===r.code)&&(b.vF.warn("[AmplifyUnified] Network error, attempting retry with backoff (retry ".concat(n,"/").concat(3,")")),N(!0),n<=3)){let e=Math.min(2e3*Math.pow(2,n-1),1e4);b.vF.info("[AmplifyUnified] Waiting ".concat(e,"ms before retry")),await new Promise(t=>setTimeout(t,e));continue}if(n>3)throw r;let t=1e3*n;await new Promise(e=>setTimeout(e,t))}throw Error("[AmplifyUnified] Failed to execute ".concat(e.name," after ").concat(3," retries"))}catch(e){throw b.vF.error("[AmplifyUnified] Error in ensureConfigAndCall:",e),e}},I=()=>window.__amplifyConfigured?window.__amplifyConfigured:(b.vF.info("[AmplifyUnified] Initializing Amplify from hook"),N(),!0),T=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return F(o.J,...t)},R=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return F(r.C,...t)},O=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return F(u.H,...t)},k=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return F(f.T,...t)},j=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return F(d.$,...t)}},69496:(e,t,i)=>{"use strict";i.d(t,{T:()=>d});var n=i(45103),r=i(57762),o=i(27593),s=i(88726),a=i(84295),l=i(85565),c=i(59262),u=i(50581),f=i(32712);let d=async e=>{let t=e.getConfig().Auth?.Cognito;(0,n.$y)(t);let{userPoolEndpoint:i,userPoolId:d}=t,{tokens:g}=await (0,r.$)(e,{forceRefresh:!1});(0,a.H0)(g);let m=(0,u.N)({endpointResolver:(0,f.o)({endpointOverride:i})}),{UserAttributes:h}=await m({region:(0,s.J)(d),userAgentValue:(0,c.A)(o.BM.FetchUserAttributes)},{AccessToken:g.accessToken.toString()});return(0,l.J)(h)}},73826:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var n=i(95155),r=i(12115),o=i(60584),s=i(42749),a=i(63900);function l(){return(0,r.useEffect)(()=>{s.vF.debug("[ConfigureAmplify] Configuring Amplify on client side");try{a.E.configure({Auth:{Cognito:{userPoolId:"us-east-1_JPL8vGfb6",userPoolClientId:"1o5v84mrgn4gt87khtr179uc5b",region:"us-east-1",loginWith:{username:!0,email:!0,phone:!1}}}}),s.vF.info("[ConfigureAmplify] Amplify configured successfully")}catch(e){s.vF.error("[ConfigureAmplify] Error configuring Amplify:",e)}},[]),null}var c=i(49509);function u(){let[e,t]=(0,r.useState)("Not started"),[i,s]=(0,r.useState)(null),[a,u]=(0,r.useState)({}),[f,d]=(0,r.useState)({}),[g,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[y,A]=(0,r.useState)(!1),[v,b]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{let e={region:"us-east-1",userPoolId:"us-east-1_JPL8vGfb6",clientId:"1o5v84mrgn4gt87khtr179uc5b",authFlow:c.env.NEXT_PUBLIC_AUTH_FLOW_TYPE,allowedFlows:c.env.NEXT_PUBLIC_ALLOWED_AUTH_FLOWS};d(e),t("Ready")}catch(e){console.error("Error getting configuration:",e),s(e.message),t("Error loading config")}})()},[]);let w=async()=>{if(!g||!h)return void s("Please provide both email and password");A(!0),s(null),b([]);try{U("info","Starting authentication test"),U("info","Testing with email: ".concat(g));let i=!1;for(let t of["USER_PASSWORD_AUTH","USER_SRP_AUTH"])try{var e;U("info","Attempting sign in with auth flow: ".concat(t));let n=Date.now(),r=await (0,o.signIn)({username:g,password:h,options:{authFlowType:t,clientMetadata:{test_timestamp:new Date().toISOString(),test_client:"web_diagnostics"}}}),s=Date.now();U("success","Auth flow ".concat(t," succeeded in ").concat(s-n,"ms")),U("info",JSON.stringify({isSignedIn:r.isSignedIn,nextStep:null==(e=r.nextStep)?void 0:e.signInStep},null,2)),i=!0;try{U("info","Fetching auth session...");let e=await (0,o.fetchAuthSession)();U("success","Session retrieved successfully"),U("info","Token expiration: ".concat(new Date(1e3*e.tokens.accessToken.payload.exp).toLocaleString())),U("info","Fetching user attributes...");let t=await (0,o.fetchUserAttributes)();if(U("success","User attributes retrieved successfully"),t){let e={email:t.email,email_verified:t.email_verified,onboarding:t["custom:onboarding"],setupdone:t["custom:setupdone"]};U("info","Key attributes: "+JSON.stringify(e,null,2))}}catch(e){U("error","Error after authentication: ".concat(e.message))}break}catch(e){U("error","Auth flow ".concat(t," failed: ").concat(e.message)),e.code&&U("info","Error code: ".concat(e.code)),e.message&&(e.message.includes("UserNotConfirmedException")?U("warning","User exists but is not confirmed"):e.message.includes("NotAuthorizedException")?U("warning","Incorrect username or password"):e.message.includes("UserNotFoundException")&&U("warning","User does not exist in Cognito"))}i||U("error","All authentication flows failed"),t(i?"Authentication successful":"Authentication failed")}catch(e){console.error("Error in auth test:",e),s(e.message),t("Test failed")}finally{A(!1)}},U=(e,t)=>{b(i=>[...i,{type:e,message:t,timestamp:new Date().toLocaleString()}])};return(0,n.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,n.jsx)(l,{}),(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Auth Diagnostics"}),(0,n.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-md",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Configuration"}),(0,n.jsx)("pre",{className:"bg-gray-100 p-3 rounded text-sm overflow-auto",children:JSON.stringify(f,null,2)})]}),(0,n.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-md",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Test Authentication"}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,n.jsx)("input",{type:"email",value:g,onChange:e=>m(e.target.value),disabled:y,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,n.jsx)("input",{type:"password",value:h,onChange:e=>p(e.target.value),disabled:y,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,n.jsx)("button",{onClick:w,disabled:y,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:y?"Testing...":"Test Authentication"})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("h2",{className:"text-lg font-semibold mb-2",children:["Status: ",e]}),i&&(0,n.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 text-red-800 rounded-md mb-4",children:i})]}),v.length>0&&(0,n.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-md",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Test Results"}),(0,n.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:v.map((e,t)=>(0,n.jsxs)("div",{className:"p-2 rounded text-sm ".concat("error"===e.type?"bg-red-50 text-red-800":"success"===e.type?"bg-green-50 text-green-800":"warning"===e.type?"bg-yellow-50 text-yellow-800":"bg-gray-100 text-gray-800"),children:[(0,n.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp}),(0,n.jsx)("div",{className:"font-mono",children:e.message})]},t))})]})]})}},80089:(e,t,i)=>{Promise.resolve().then(i.bind(i,73826))},85565:(e,t,i)=>{"use strict";function n(e){return Object.entries(e).map(([e,t])=>({Name:e,Value:t}))}function r(e){let t={};return e?.forEach(e=>{e.Name&&(t[e.Name]=e.Value)}),t}i.d(t,{J:()=>r,Q:()=>n})}},e=>{var t=t=>e(e.s=t);e.O(0,[54940,9296,79480,58430,84620,23639,38501,78746,28441,31684,77358],()=>t(80089)),_N_E=e.O()}]);