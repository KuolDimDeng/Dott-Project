(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79413],{6218:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});var r=n(10831);let a={convert(e,t={urlSafe:!1,skipPadding:!1}){let n="string"==typeof e?e:Array.from(e,e=>String.fromCodePoint(e)).join(""),a=(0,r.xA)()(n);return t.urlSafe&&(a=a.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(a=a.replace(/=/g,"")),a}}},11024:(e,t,n)=>{"use strict";n.d(t,{T:()=>o});var r=n(87970),a=n(69496);let o=()=>(0,a.T)(r.H)},35695:(e,t,n)=>{"use strict";var r=n(18999);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},36465:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}n.r(t),n.d(t,{_:()=>r})},40148:(e,t,n)=>{Promise.resolve().then(n.bind(n,49329))},42749:(e,t,n)=>{"use strict";n.d(t,{vF:()=>s});let r={debug:0,info:1,warn:2,error:3},a="info",o=()=>!1,s={setLevel(e){void 0!==r[e]&&(a=e)},getLevel:()=>a,debug:(e,t)=>{},info:(e,t)=>{r[a]<=r.info&&(o()?void 0!==t?console.info("[SERVER INFO] ".concat(e),t):console.info("[SERVER INFO] ".concat(e)):void 0!==t?console.info(e,t):console.info(e))},warn:(e,t)=>{r[a]<=r.warn&&(o()?void 0!==t?console.warn("[SERVER WARN] ".concat(e),t):console.warn("[SERVER WARN] ".concat(e)):void 0!==t?console.warn(e,t):console.warn(e))},error:(e,t)=>{r[a]<=r.error&&(o()?void 0!==t?console.error("[SERVER ERROR] ".concat(e),t):console.error("[SERVER ERROR] ".concat(e)):void 0!==t?console.error(e,t):console.error(e))}}},49329:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(95155),a=n(12115),o=n(6874),s=n.n(o),i=n(83531),l=n(42749);function c(){let{resetPassword:e,isLoading:t}=(0,i.A)(),[n,o]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[d,m]=(0,a.useState)(!1),f=async t=>{t.preventDefault(),u(""),m(!1);try{await e(n),m(!0),l.vF.debug("Password reset code sent successfully")}catch(e){l.vF.error("Failed to send password reset code:",e),u(e.message||"Failed to send password reset code")}};return(0,r.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen p-6",children:(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-8 flex flex-col items-center max-w-md w-full",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold mb-2",children:"Reset Password"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 text-center mb-6",children:"Enter your email address and we'll send you a code to reset your password."}),c&&(0,r.jsx)("div",{className:"bg-red-50 text-red-700 p-4 rounded-md mb-4 w-full border border-red-200",children:c}),d&&(0,r.jsx)("div",{className:"bg-green-50 text-green-700 p-4 rounded-md mb-4 w-full border border-green-200",children:"Password reset code sent successfully. Please check your email."}),(0,r.jsxs)("form",{onSubmit:f,className:"w-full",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,r.jsx)("input",{className:"w-full px-3 py-2 border ".concat(t||d?"bg-gray-100":"bg-white"," border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"),required:!0,id:"email",name:"email",type:"email",autoComplete:"email",autoFocus:!0,value:n,onChange:e=>o(e.target.value),disabled:t||d})]}),(0,r.jsx)("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 mt-6 mb-4 ".concat(t||d?"opacity-70 cursor-not-allowed":"hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),disabled:t||d,children:t?(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Send Reset Code"}),(0,r.jsx)("div",{className:"mt-4 text-center",children:(0,r.jsx)(s(),{href:"/auth/signin",className:"text-sm text-indigo-600 hover:text-indigo-500",children:"Back to Sign In"})})]})]})})}},50581:(e,t,n)=>{"use strict";n.d(t,{N:()=>l});var r=n(90808),a=n(55413),o=n(2242),s=n(41811),i=n(83854);let l=e=>(0,r.A)(a.e,(0,o._)("GetUser"),(0,s.T)(),{...i.C,...e})},51174:(e,t,n)=>{"use strict";n.d(t,{$_:()=>c,BI:()=>b,FB:()=>y,Nf:()=>w,Pc:()=>d,fy:()=>v,getTenantId:()=>i,getTenantIdFromCognito:()=>g,h_:()=>f,isValidUUID:()=>l,jW:()=>p,oA:()=>u,pm:()=>h,updateTenantIdInCognito:()=>m});var r=n(81746),a=n(24818),o=n(62052);let s="tenantId",i=async()=>{try{var e,t,n,i,l,c;let u=await o.l.getItem(s);if(u)return u;let d=await (0,r.H)(),m=await (0,a.$)(),f=(null==d||null==(e=d.attributes)?void 0:e["custom:tenant_ID"])||(null==d||null==(t=d.attributes)?void 0:t["custom:tenantId"])||(null==m||null==(i=m.accessToken)||null==(n=i.payload)?void 0:n["custom:tenant_ID"])||(null==m||null==(c=m.accessToken)||null==(l=c.payload)?void 0:l["custom:tenantId"]);if(!f)throw Error("Tenant ID not found in user attributes or session");return await o.l.setItem(s,f),f}catch(e){throw console.error("Error getting tenant ID:",e),e}},l=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e),c=async e=>{try{await o.l.setItem(s,e)}catch(e){throw console.error("Error storing tenant ID:",e),e}},u=async e=>{let{tenantId:t,metadata:n={}}=e;try{if(!t)return void console.error("Cannot store tenant info: No tenant ID provided");await o.l.setItem(s,t),window.__APP_CACHE||(window.__APP_CACHE={}),window.__APP_CACHE.tenant||(window.__APP_CACHE.tenant={}),window.__APP_CACHE.tenant.id=t,window.__APP_CACHE.tenant.metadata=n,window.__APP_CACHE.tenant.timestamp=Date.now();try{sessionStorage.setItem("tenant_id",t),sessionStorage.setItem("tenant_info",JSON.stringify({id:t,metadata:n,timestamp:Date.now()}))}catch(e){console.debug("Could not store tenant info in sessionStorage:",e)}console.debug("[TenantUtils] Stored tenant info for ID: ".concat(t))}catch(e){console.error("Error storing tenant info:",e)}},d=e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e,m=async e=>{try{let{updateUserAttributes:t}=await Promise.all([n.e(58430),n.e(84620),n.e(23639),n.e(38501),n.e(31861),n.e(94901)]).then(n.bind(n,55158));await t({userAttributes:{"custom:tenant_ID":e}}),await c(e),console.debug("[TenantUtils] Updated tenant ID in Cognito: ".concat(e))}catch(t){console.error("Error updating tenant ID in Cognito:",t),await c(e)}},f=async e=>{try{await o.l.setItem("auth_tokens",e)}catch(e){throw console.error("Error setting tokens:",e),e}},g=async()=>{try{var e,t,n,i,l,c;let u=await o.l.getItem(s);if(u)return u;let d=await (0,r.H)(),m=await (0,a.$)(),f=(null==d||null==(e=d.attributes)?void 0:e["custom:tenant_ID"])||(null==d||null==(t=d.attributes)?void 0:t["custom:tenantId"])||(null==m||null==(i=m.accessToken)||null==(n=i.payload)?void 0:n["custom:tenant_ID"])||(null==m||null==(c=m.accessToken)||null==(l=c.payload)?void 0:l["custom:tenantId"]);if(!f)return null;return await o.l.setItem(s,f),f}catch(e){return console.error("Error getting tenant ID from Cognito:",e),null}},w=async e=>{try{if(!l(e))return!1;return(await fetch("/api/tenants/".concat(e,"/validate"))).ok}catch(e){return console.error("Error validating tenant ID:",e),!1}},h=e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return"00000000-0000-4000-a000-".concat(Math.abs(t).toString(16).padStart(12,"0"))},p=async()=>{try{let e=await i();if(!l(e))return console.error("Invalid tenant ID format:",e),null;return e}catch(e){return console.error("Error getting secure tenant ID:",e),null}},b=e=>l(e),y=e=>e?"tenant_".concat(e.replace(/-/g,"_")):"public",v=async()=>{try{let e=await i(),t={"Content-Type":"application/json","x-tenant-id":e};try{let{getCurrentUser:e}=await Promise.all([n.e(58430),n.e(84620),n.e(23639),n.e(38501),n.e(31861),n.e(94901)]).then(n.bind(n,55158)),r=await e();r&&r.userId&&(t["x-user-id"]=r.userId)}catch(e){}return t}catch(e){return console.error("Error getting tenant headers:",e),{"Content-Type":"application/json"}}}},52584:(e,t,n)=>{"use strict";n.d(t,{u:()=>b});var r=n(87970),a=n(24818),o=n(45103),s=n(27593),i=n(84295),l=n(88726),c=n(85565),u=n(59262),d=n(90808),m=n(55413),f=n(2242),g=n(41811),w=n(83854);let h=e=>(0,d.A)(m.e,(0,f._)("UpdateUserAttributes"),(0,g.T)(),{...w.C,...e});var p=n(32712);let b=async e=>{let{userAttributes:t,options:n}=e,d=r.H.getConfig().Auth?.Cognito,m=n?.clientMetadata;(0,o.$y)(d);let{userPoolEndpoint:f,userPoolId:g}=d,{tokens:w}=await (0,a.$)({forceRefresh:!1});(0,i.H0)(w);let b=h({endpointResolver:(0,p.o)({endpointOverride:f})}),{CodeDeliveryDetailsList:y}=await b({region:(0,l.J)(g),userAgentValue:(0,u.A)(s.BM.UpdateUserAttributes)},{AccessToken:w.accessToken.toString(),ClientMetadata:m,UserAttributes:(0,c.Q)(t)});return{...function(e){let t={};return Object.keys(e)?.forEach(e=>{t[e]={isUpdated:!0,nextStep:{updateAttributeStep:"DONE"}}}),t}(t),...function(e){let t={};return e?.forEach(e=>{let{AttributeName:n,DeliveryMedium:r,Destination:a}=e;n&&(t[n]={isUpdated:!1,nextStep:{updateAttributeStep:"CONFIRM_ATTRIBUTE_WITH_CODE",codeDeliveryDetails:{attributeName:n,deliveryMedium:r,destination:a}}})}),t}(y)}}},59262:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(32307),a=n(27593);let o=(e,t)=>(0,r.fE)({category:a.b7.Auth,action:e,...t})},69496:(e,t,n)=>{"use strict";n.d(t,{T:()=>m});var r=n(45103),a=n(57762),o=n(27593),s=n(88726),i=n(84295),l=n(85565),c=n(59262),u=n(50581),d=n(32712);let m=async e=>{let t=e.getConfig().Auth?.Cognito;(0,r.$y)(t);let{userPoolEndpoint:n,userPoolId:m}=t,{tokens:f}=await (0,a.$)(e,{forceRefresh:!1});(0,i.H0)(f);let g=(0,u.N)({endpointResolver:(0,d.o)({endpointOverride:n})}),{UserAttributes:w}=await g({region:(0,s.J)(m),userAgentValue:(0,c.A)(o.BM.FetchUserAttributes)},{AccessToken:f.accessToken.toString()});return(0,l.J)(w)}},85565:(e,t,n)=>{"use strict";function r(e){return Object.entries(e).map(([e,t])=>({Name:e,Value:t}))}function a(e){let t={};return e?.forEach(e=>{e.Name&&(t[e.Name]=e.Value)}),t}n.d(t,{J:()=>a,Q:()=>r})}},e=>{var t=t=>e(e.s=t);e.O(0,[54940,9296,79480,58430,84620,23639,38501,78746,6874,62052,44367,67953,83531,28441,31684,77358],()=>t(40148)),_N_E=e.O()}]);