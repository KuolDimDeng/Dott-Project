(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38475,83270],{6218:(e,i,r)=>{"use strict";r.d(i,{Y:()=>n});var t=r(10831);let n={convert(e,i={urlSafe:!1,skipPadding:!1}){let r="string"==typeof e?e:Array.from(e,e=>String.fromCodePoint(e)).join(""),n=(0,t.xA)()(r);return i.urlSafe&&(n=n.replace(/\+/g,"-").replace(/\//g,"_")),i.skipPadding&&(n=n.replace(/=/g,"")),n}}},11024:(e,i,r)=>{"use strict";r.d(i,{T:()=>a});var t=r(87970),n=r(69496);let a=()=>(0,n.T)(t.H)},29670:(e,i,r)=>{"use strict";r.d(i,{$R:()=>c,A6:()=>s,Ay:()=>d,IL:()=>l,bB:()=>u,gd:()=>o,mm:()=>a});var t=r(42749);let n=null;try{window.AWSCache&&(n=window.AWSCache,t.vF.debug("[appCache] AWS App Cache initialized successfully"))}catch(e){t.vF.warn("[appCache] Failed to initialize AWS App Cache:",e)}async function a(e,i,r){try{if(!e)throw Error("Cache key is required");if(n)await n.set(e,i,r),t.vF.debug("[appCache] Set value for key: ".concat(e));else{let n={value:i,timestamp:Date.now(),ttl:r?1e3*r:null};window.sessionStorage.setItem(e,JSON.stringify(n)),t.vF.debug("[appCache] Set value in sessionStorage for key: ".concat(e))}}catch(i){throw t.vF.error("[appCache] Error setting cache value for key ".concat(e,":"),i),i}}async function o(e){try{if(!e)throw Error("Cache key is required");if(n){let i=await n.get(e);return t.vF.debug("[appCache] Retrieved value for key: ".concat(e)),i}{let i=window.sessionStorage.getItem(e);if(!i)return null;let{value:r,timestamp:n,ttl:a}=JSON.parse(i);if(a&&Date.now()-n>a)return window.sessionStorage.removeItem(e),t.vF.debug("[appCache] Removed expired value for key: ".concat(e)),null;return t.vF.debug("[appCache] Retrieved value from sessionStorage for key: ".concat(e)),r}}catch(i){return t.vF.error("[appCache] Error getting cache value for key ".concat(e,":"),i),null}}async function s(e){try{if(!e)throw Error("Cache key is required");n?(await n.remove(e),t.vF.debug("[appCache] Removed value for key: ".concat(e))):(window.sessionStorage.removeItem(e),t.vF.debug("[appCache] Removed value from sessionStorage for key: ".concat(e)))}catch(i){throw t.vF.error("[appCache] Error removing cache value for key ".concat(e,":"),i),i}}async function l(){try{n?(await n.clear(),t.vF.debug("[appCache] Cleared all values from AWS App Cache")):(window.sessionStorage.clear(),t.vF.debug("[appCache] Cleared all values from sessionStorage"))}catch(e){throw t.vF.error("[appCache] Error clearing cache:",e),e}}let c=s,u=l,d={setCacheValue:a,getCacheValue:o,removeCacheValue:s,clearCache:l,setAppCacheItem:a,getAppCacheItem:o,removeAppCacheItem:c,clearAppCache:u}},35695:(e,i,r)=>{"use strict";var t=r(18999);r.o(t,"useParams")&&r.d(i,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(i,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(i,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(i,{useSearchParams:function(){return t.useSearchParams}})},38867:(e,i,r)=>{"use strict";r.r(i),r.d(i,{default:()=>m});var t=r(95155),n=r(12115),a=r(35695),o=r(6874),s=r.n(o),l=r(60584),c=r(42749),u=r(29670);function d(){let e=(0,a.useRouter)(),i=(0,a.useSearchParams)().get("email"),[r,o]=(0,n.useState)(""),[d,f]=(0,n.useState)(""),[m,g]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[v,y]=(0,n.useState)(null),[A,w]=(0,n.useState)(null),[C,_]=(0,n.useState)(null),[b,E]=(0,n.useState)(!1),[x,P]=(0,n.useState)(3);(0,n.useEffect)(()=>{let e=(0,u.gd)("auth_email"),r=i||e||"";r&&(o(r),c.vF.debug("[VerifyEmail] Email set from params or AppCache",{source:i?"url":"AppCache",email:r}))},[i]),(0,n.useEffect)(()=>{if(b&&x>0){let e=setInterval(()=>{P(e=>e-1)},1e3);return()=>clearInterval(e)}b&&0===x&&e.push("/auth/signin")},[b,x,e]);let U=async e=>{var i,t,n,a;if(e.preventDefault(),!r)return void y("Email address is required");if(!d||d.length<6)return void y("Please enter a valid verification code");g(!0),y(null),w(null);try{if(c.vF.debug("[VerifyEmail] Attempting to verify email",{email:r,codeLength:d.length}),(0,u.gd)("auth_verified_email")===r){c.vF.debug("[VerifyEmail] Email already verified according to AppCache"),(0,u.mm)("auth_just_verified","true"),(0,u.mm)("auth_email_verified_timestamp",Date.now()),(0,u.A6)("auth_email"),(0,u.A6)("auth_needs_verification"),w("Email already verified! Redirecting to sign in page..."),E(!0);return}try{let{isSignUpComplete:e,nextStep:i}=await (0,l.confirmSignUp)({username:r,confirmationCode:d});if(c.vF.debug("[VerifyEmail] Email verification result",{isSignUpComplete:e,nextStep:null==i?void 0:i.signUpStep}),e)(0,u.mm)("auth_verified_email",r),(0,u.mm)("auth_just_verified","true"),(0,u.mm)("auth_email_verified_timestamp",Date.now()),(0,u.A6)("auth_email"),(0,u.A6)("auth_needs_verification"),w("Email verified successfully! Redirecting to sign in page..."),E(!0);else throw Error("Email verification failed. Please try again.")}catch(e){if((null==(i=e.message)?void 0:i.includes("User cannot be confirmed"))&&(null==(t=e.message)?void 0:t.includes("CONFIRMED"))){c.vF.info("[VerifyEmail] User is already confirmed, treating as success"),(0,u.mm)("auth_verified_email",r),(0,u.mm)("auth_just_verified","true"),(0,u.mm)("auth_email_verified_timestamp",Date.now()),(0,u.A6)("auth_email"),(0,u.A6)("auth_needs_verification"),w("Account already verified! Redirecting to sign in page..."),E(!0);return}throw c.vF.error("[VerifyEmail] Error verifying email:",e),e}}catch(e){if(c.vF.error("[VerifyEmail] Verification error:",e),"CodeMismatchException"===e.name)y("The verification code is incorrect. Please try again.");else if("ExpiredCodeException"===e.name)y("The verification code has expired. Please request a new code.");else if("UserNotFoundException"===e.name)y("We couldn't find an account with this email address.");else if((null==(n=e.message)?void 0:n.includes("network"))||"NetworkError"===e.name)y("Network error. Please check your internet connection and try again.");else if(null==(a=e.message)?void 0:a.includes("User is already confirmed")){c.vF.info("[VerifyEmail] User is already confirmed, redirecting to sign in"),(0,u.mm)("auth_verified_email",r),(0,u.mm)("auth_just_verified","true"),(0,u.mm)("auth_email_verified_timestamp",Date.now()),(0,u.A6)("auth_email"),(0,u.A6)("auth_needs_verification"),w("Your account is already verified! Redirecting to sign in..."),E(!0);return}else y(e.message||"An error occurred. Please try again.")}finally{g(!1)}},F=async()=>{var e,i,t;if(!r)return void y("Please enter your email address to receive a new code");p(!0),y(null),_(null);try{c.vF.debug("[VerifyEmail] Resending verification code",{email:r});let i=await (0,l.resendSignUpCode)({username:r});c.vF.debug("[VerifyEmail] Code resent successfully",{destination:null==(e=i.destination)?void 0:e.deliveryMedium}),_("A new verification code has been sent to your email")}catch(e){if(c.vF.error("[VerifyEmail] Error resending code:",e),"LimitExceededException"===e.name)y("You've requested too many codes. Please wait a few minutes and try again.");else if("UserNotFoundException"===e.name)y("We couldn't find an account with this email address.");else if((null==(i=e.message)?void 0:i.includes("network"))||"NetworkError"===e.name)y("Network error. Please check your internet connection and try again.");else if(null==(t=e.message)?void 0:t.includes("User is already confirmed")){c.vF.info("[VerifyEmail] User is already confirmed, redirecting to sign in"),(0,u.mm)("auth_verified_email",r),(0,u.mm)("auth_just_verified","true"),(0,u.mm)("auth_email_verified_timestamp",Date.now()),(0,u.A6)("auth_email"),(0,u.A6)("auth_needs_verification"),w("Your account is already verified! Redirecting to sign in..."),E(!0);return}else y(e.message||"An error occurred. Please try again.")}finally{p(!1)}};return(0,t.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,t.jsxs)("div",{className:"bg-white shadow-md rounded-lg px-8 py-6 mb-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Verify Your Email"}),v&&(0,t.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded-md",role:"alert",children:(0,t.jsx)("p",{className:"text-red-700",children:v})}),A&&(0,t.jsxs)("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 mb-6 rounded-md",children:[(0,t.jsx)("p",{className:"text-green-700",children:A}),b&&(0,t.jsxs)("p",{className:"text-green-700 mt-2",children:["Redirecting in ",x," seconds..."]})]}),C&&!A&&(0,t.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded-md",children:(0,t.jsx)("p",{className:"text-blue-700",children:C})}),!b&&(0,t.jsxs)("form",{onSubmit:U,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,t.jsx)("div",{className:"mt-1 relative",children:(0,t.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:e=>{o(e.target.value),v&&y(null)},className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition duration-150 ease-in-out",disabled:m||h||b,placeholder:"your@email.com"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700",children:"Verification Code"}),(0,t.jsx)("div",{className:"mt-1 relative",children:(0,t.jsx)("input",{id:"code",name:"code",type:"text",autoComplete:"one-time-code",required:!0,value:d,onChange:e=>{f(e.target.value),v&&y(null)},className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition duration-150 ease-in-out",placeholder:"Enter 6-digit code",disabled:m||h||b})}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the 6-digit code sent to your email"})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white\n                  ".concat(m?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"," transition-colors duration-150"),disabled:m||h||b,children:m?(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Verify Email"})}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{type:"button",onClick:F,className:"text-sm font-medium text-blue-600 hover:text-blue-500 focus:outline-none ".concat(h||b?"opacity-50 cursor-not-allowed":""),disabled:h||b,children:h?"Sending...":"Resend verification code"}),(0,t.jsx)(s(),{href:"/auth/signin",className:"text-sm font-medium text-gray-600 hover:text-gray-500 transition-colors duration-150",children:"Back to sign in"})]})]})]})})}var f=r(66766);function m(){return(0,n.useEffect)(()=>{try{{window.__APP_CACHE=window.__APP_CACHE||{},window.__APP_CACHE.tenant=window.__APP_CACHE.tenant||{},window.__APP_CACHE.auth=window.__APP_CACHE.auth||{};let e=window.__APP_CACHE.tenant.id||window.__APP_CACHE.auth.tenantId||sessionStorage.getItem("tenantId");e&&(window.__APP_CACHE.tenant.id=e,window.__APP_CACHE.auth.tenantId=e,window.__APP_CACHE.tenantId=e,c.vF.debug("Stored tenant ID in app cache:",e))}}catch(e){c.vF.error("Error initializing app cache:",e)}},[]),(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,t.jsx)("header",{className:"py-4 px-8 border-b border-gray-200",children:(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)(s(),{href:"/",children:(0,t.jsx)(f.default,{src:"/logo.svg",alt:"Logo",width:150,height:40,className:"cursor-pointer"})})})}),(0,t.jsx)("main",{className:"flex-grow flex items-center justify-center p-4",children:(0,t.jsx)(d,{})}),(0,t.jsxs)("footer",{className:"py-4 px-8 border-t border-gray-200 text-center text-gray-600 text-sm",children:["\xa9 ",new Date().getFullYear()," PyFactor. All rights reserved."]})]})}},42749:(e,i,r)=>{"use strict";r.d(i,{vF:()=>o});let t={debug:0,info:1,warn:2,error:3},n="info",a=()=>!1,o={setLevel(e){void 0!==t[e]&&(n=e)},getLevel:()=>n,debug:(e,i)=>{},info:(e,i)=>{t[n]<=t.info&&(a()?void 0!==i?console.info("[SERVER INFO] ".concat(e),i):console.info("[SERVER INFO] ".concat(e)):void 0!==i?console.info(e,i):console.info(e))},warn:(e,i)=>{t[n]<=t.warn&&(a()?void 0!==i?console.warn("[SERVER WARN] ".concat(e),i):console.warn("[SERVER WARN] ".concat(e)):void 0!==i?console.warn(e,i):console.warn(e))},error:(e,i)=>{t[n]<=t.error&&(a()?void 0!==i?console.error("[SERVER ERROR] ".concat(e),i):console.error("[SERVER ERROR] ".concat(e)):void 0!==i?console.error(e,i):console.error(e))}}},50581:(e,i,r)=>{"use strict";r.d(i,{N:()=>l});var t=r(90808),n=r(55413),a=r(2242),o=r(41811),s=r(83854);let l=e=>(0,t.A)(n.e,(0,a._)("GetUser"),(0,o.T)(),{...s.C,...e})},52584:(e,i,r)=>{"use strict";r.d(i,{u:()=>y});var t=r(87970),n=r(24818),a=r(45103),o=r(27593),s=r(84295),l=r(88726),c=r(85565),u=r(59262),d=r(90808),f=r(55413),m=r(2242),g=r(41811),h=r(83854);let p=e=>(0,d.A)(f.e,(0,m._)("UpdateUserAttributes"),(0,g.T)(),{...h.C,...e});var v=r(32712);let y=async e=>{let{userAttributes:i,options:r}=e,d=t.H.getConfig().Auth?.Cognito,f=r?.clientMetadata;(0,a.$y)(d);let{userPoolEndpoint:m,userPoolId:g}=d,{tokens:h}=await (0,n.$)({forceRefresh:!1});(0,s.H0)(h);let y=p({endpointResolver:(0,v.o)({endpointOverride:m})}),{CodeDeliveryDetailsList:A}=await y({region:(0,l.J)(g),userAgentValue:(0,u.A)(o.BM.UpdateUserAttributes)},{AccessToken:h.accessToken.toString(),ClientMetadata:f,UserAttributes:(0,c.Q)(i)});return{...function(e){let i={};return Object.keys(e)?.forEach(e=>{i[e]={isUpdated:!0,nextStep:{updateAttributeStep:"DONE"}}}),i}(i),...function(e){let i={};return e?.forEach(e=>{let{AttributeName:r,DeliveryMedium:t,Destination:n}=e;r&&(i[r]={isUpdated:!1,nextStep:{updateAttributeStep:"CONFIRM_ATTRIBUTE_WITH_CODE",codeDeliveryDetails:{attributeName:r,deliveryMedium:t,destination:n}}})}),i}(A)}}},59262:(e,i,r)=>{"use strict";r.d(i,{A:()=>a});var t=r(32307),n=r(27593);let a=(e,i)=>(0,t.fE)({category:n.b7.Auth,action:e,...i})},60584:(e,i,r)=>{"use strict";r.r(i),r.d(i,{Amplify:()=>t.E,Hub:()=>_,configureAmplify:()=>U,confirmResetPassword:()=>c.P,confirmSignUp:()=>s.z,confirmUserAttribute:()=>v.w,fetchAuthSession:()=>f.$,fetchAuthSessionWithConfig:()=>T,fetchUserAttributes:()=>d.T,fetchUserAttributesWithConfig:()=>O,getCurrentUser:()=>u.H,getCurrentUserWithConfig:()=>I,initAmplify:()=>R,isAmplifyConfigured:()=>F,resendSignUpCode:()=>m.h,resetPassword:()=>l.x,safeSignOut:()=>N,sendUserAttributeVerificationCode:()=>p.c,setUpTOTP:()=>y.x,signIn:()=>a.J,signInWithConfig:()=>k,signInWithRedirect:()=>h.$,signOut:()=>n.C,signOutWithConfig:()=>j,signUp:()=>o.H,updateUserAttributes:()=>g.u});var t=r(63900),n=r(82354),a=r(23639),o=r(95027),s=r(55481),l=r(27755),c=r(80079),u=r(81746),d=r(11024),f=r(24818),m=r(97220),g=r(52584),h=r(15102),p=r(35220),v=r(71194),y=r(35030),A=r(51148),w=r(42749),C=r(49509);let _=A.YZ,b="1o5v84mrgn4gt87khtr179uc5b",E="us-east-1_JPL8vGfb6",x="us-east-1";w.vF.debug("[AmplifyUnified] Configuration values:",{COGNITO_CLIENT_ID:b,COGNITO_USER_POOL_ID:E,AWS_REGION:x});let P=!1,U=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(P&&!e)return w.vF.debug("[AmplifyUnified] Amplify already configured, skipping"),!0;try{e&&(w.vF.info("[AmplifyUnified] Force reconfiguring Amplify"),window.__amplifyConfigured&&(window.__amplifyConfigured=!1))}catch(e){w.vF.error("[AmplifyUnified] Error during force reconfigure:",e)}try{w.vF.info("[AmplifyUnified] Configuring Amplify",{environment:"production",isDevelopment:!1});let e=E||C.env.NEXT_PUBLIC_USER_POOL_ID||"us-east-1_JPL8vGfb6",i=b||C.env.NEXT_PUBLIC_USER_POOL_CLIENT_ID||"1o5v84mrgn4gt87khtr179uc5b";if(!e||!i)return w.vF.error("[AmplifyUnified] Missing required configuration:",{hasUserPoolId:!!e,hasClientId:!!i}),P=!1,!1;let r={Auth:{Cognito:{userPoolId:e,userPoolClientId:i,identityPoolId:C.env.NEXT_PUBLIC_COGNITO_IDENTITY_POOL_ID,region:x||"us-east-1",loginWith:{email:!0,username:!0,phone:!1},httpOptions:{timeout:3e4,connectTimeout:1e4,rejectUnauthorized:!1,retryable:!0,maxRetries:3}}}};w.vF.debug("[AmplifyUnified] Amplify configuration:",{userPoolId:r.Auth.Cognito.userPoolId,userPoolClientId:r.Auth.Cognito.userPoolClientId,region:r.Auth.Cognito.region}),t.E.configure(r);let n=t.E.getConfig();if(!(n&&n.Auth&&n.Auth.Cognito&&n.Auth.Cognito.userPoolId))return w.vF.error("[AmplifyUnified] Configuration verification failed",{hasConfig:!!n,hasAuth:!!(n&&n.Auth),hasCognito:!!(n&&n.Auth&&n.Auth.Cognito)}),P=!1,!1;return _.listen("auth",e=>{if("signOut"===e.payload.event||"signIn_failure"===e.payload.event){var i,r;w.vF.debug("[AmplifyUnified] Auth event that might require reconfiguration:",{event:e.payload.event,data:e.payload.data});let n=t.E.getConfig();(null==n||null==(r=n.Auth)||null==(i=r.Cognito)?void 0:i.userPoolId)||(w.vF.warn("[AmplifyUnified] Configuration lost after auth event, reconfiguring..."),U())}}),P=!0,w.vF.info("[AmplifyUnified] Amplify configured successfully"),window.__amplifyConfigured=!0,!0}catch(e){return w.vF.error("[AmplifyUnified] Failed to configure Amplify:",{error:e.message,stack:e.stack}),P=!1,!1}};try{U()}catch(e){w.vF.error("[AmplifyUnified] Error during initial Amplify configuration:",e)}let F=()=>{var e,i;if(!P)return w.vF.info("[AmplifyUnified] Amplify configuration status check: Not configured"),!1;let r=t.E.getConfig(),n=!!(r&&(null==(i=r.Auth)||null==(e=i.Cognito)?void 0:e.userPoolId));return w.vF.debug("[AmplifyUnified] Amplify configuration status:",{isConfigured:P,hasAuth:n,config:{isConfigured:P,hasAuth:n}}),P&&n},N=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{global:!0};try{w.vF.info("[AmplifyUnified] Amplify configuration status before sign out:",{isConfigured:F()}),F()||(w.vF.warn("[AmplifyUnified] Attempting to reconfigure Amplify before signing out"),U());try{return await (0,n.C)(e),w.vF.info("[AmplifyUnified] Successfully signed out user"),!0}catch(e){if(w.vF.error("[AmplifyUnified] Error during Amplify signOut:",e),"AuthUserPoolException"===e.name||e.message&&e.message.includes("UserPool not configured")){w.vF.warn("[AmplifyUnified] Auth UserPool not configured, attempting recovery"),U();try{window.__APP_CACHE&&(window.__APP_CACHE.auth={},window.__APP_CACHE.user={},w.vF.info("[AmplifyUnified] Cleared app cache for auth data"))}catch(e){w.vF.error("[AmplifyUnified] Error clearing app cache:",e)}}return!0}}catch(e){return w.vF.error("[AmplifyUnified] Unexpected error in safeSignOut:",e),!0}},S=async function(e){for(var i,r,t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];try{if(e===a.J)try{if(await (0,u.H)()){w.vF.warn("[AmplifyUnified] User already authenticated, signing out first");try{await N({global:!0})}catch(e){w.vF.error("[AmplifyUnified] Error signing out before signIn:",e)}}}catch(e){(null==(i=e.message)?void 0:i.includes("not authenticated"))||w.vF.warn("[AmplifyUnified] Error checking current user before signIn:",e)}F()||(w.vF.warn("[AmplifyUnified] Amplify not configured before auth function call, configuring now"),U(!0));let t=0;for(;t<=3;)try{return await e(...n)}catch(n){if(t++,w.vF.error("[AmplifyUnified] Error in ".concat(e.name," (retry ").concat(t,"/").concat(3,"):"),{name:n.name,message:n.message,code:n.code,statusCode:null==n||null==(r=n.response)?void 0:r.status,retryable:n.retryable}),("AuthUserPoolException"===n.name||n.message&&n.message.includes("UserPool not configured"))&&(w.vF.warn("[AmplifyUnified] Auth UserPool not configured, attempting recovery (retry ".concat(t,"/").concat(3,")")),U(!0),t<=3)){await new Promise(e=>setTimeout(e,1e3*t));continue}if(("NetworkError"===n.name||n.message&&(n.message.includes("network")||n.message.includes("Network")||n.message.includes("SSL")||n.message.includes("certificate")||n.message.includes("CORS")||n.message.includes("timeout"))||"NETWORK_ERROR"===n.code||"NetworkingError"===n.code)&&(w.vF.warn("[AmplifyUnified] Network error, attempting retry with backoff (retry ".concat(t,"/").concat(3,")")),U(!0),t<=3)){let e=Math.min(2e3*Math.pow(2,t-1),1e4);w.vF.info("[AmplifyUnified] Waiting ".concat(e,"ms before retry")),await new Promise(i=>setTimeout(i,e));continue}if(t>3)throw n;let i=1e3*t;await new Promise(e=>setTimeout(e,i))}throw Error("[AmplifyUnified] Failed to execute ".concat(e.name," after ").concat(3," retries"))}catch(e){throw w.vF.error("[AmplifyUnified] Error in ensureConfigAndCall:",e),e}},R=()=>window.__amplifyConfigured?window.__amplifyConfigured:(w.vF.info("[AmplifyUnified] Initializing Amplify from hook"),U(),!0),k=function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];return S(a.J,...i)},j=function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];return S(n.C,...i)},I=function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];return S(u.H,...i)},O=function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];return S(d.T,...i)},T=function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];return S(f.$,...i)}},69496:(e,i,r)=>{"use strict";r.d(i,{T:()=>f});var t=r(45103),n=r(57762),a=r(27593),o=r(88726),s=r(84295),l=r(85565),c=r(59262),u=r(50581),d=r(32712);let f=async e=>{let i=e.getConfig().Auth?.Cognito;(0,t.$y)(i);let{userPoolEndpoint:r,userPoolId:f}=i,{tokens:m}=await (0,n.$)(e,{forceRefresh:!1});(0,s.H0)(m);let g=(0,u.N)({endpointResolver:(0,d.o)({endpointOverride:r})}),{UserAttributes:h}=await g({region:(0,o.J)(f),userAgentValue:(0,c.A)(a.BM.FetchUserAttributes)},{AccessToken:m.accessToken.toString()});return(0,l.J)(h)}},79621:(e,i,r)=>{Promise.resolve().then(r.bind(r,38867))},85565:(e,i,r)=>{"use strict";function t(e){return Object.entries(e).map(([e,i])=>({Name:e,Value:i}))}function n(e){let i={};return e?.forEach(e=>{e.Name&&(i[e.Name]=e.Value)}),i}r.d(i,{J:()=>n,Q:()=>t})}},e=>{var i=i=>e(e.s=i);e.O(0,[54940,9296,79480,58430,84620,23639,38501,78746,6874,66766,28441,31684,77358],()=>i(79621)),_N_E=e.O()}]);