(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38475,62580],{6218:(e,i,t)=>{"use strict";t.d(i,{Y:()=>n});var r=t(10831);let n={convert(e,i={urlSafe:!1,skipPadding:!1}){let t="string"==typeof e?e:Array.from(e,e=>String.fromCodePoint(e)).join(""),n=(0,r.xA)()(t);return i.urlSafe&&(n=n.replace(/\+/g,"-").replace(/\//g,"_")),i.skipPadding&&(n=n.replace(/=/g,"")),n}}},11024:(e,i,t)=>{"use strict";t.d(i,{T:()=>o});var r=t(87970),n=t(69496);let o=()=>(0,n.T)(r.H)},42749:(e,i,t)=>{"use strict";t.d(i,{vF:()=>a});let r={debug:0,info:1,warn:2,error:3},n="info",o=()=>!1,a={setLevel(e){void 0!==r[e]&&(n=e)},getLevel:()=>n,debug:(e,i)=>{},info:(e,i)=>{r[n]<=r.info&&(o()?void 0!==i?console.info("[SERVER INFO] ".concat(e),i):console.info("[SERVER INFO] ".concat(e)):void 0!==i?console.info(e,i):console.info(e))},warn:(e,i)=>{r[n]<=r.warn&&(o()?void 0!==i?console.warn("[SERVER WARN] ".concat(e),i):console.warn("[SERVER WARN] ".concat(e)):void 0!==i?console.warn(e,i):console.warn(e))},error:(e,i)=>{r[n]<=r.error&&(o()?void 0!==i?console.error("[SERVER ERROR] ".concat(e),i):console.error("[SERVER ERROR] ".concat(e)):void 0!==i?console.error(e,i):console.error(e))}}},50581:(e,i,t)=>{"use strict";t.d(i,{N:()=>f});var r=t(90808),n=t(55413),o=t(2242),a=t(41811),s=t(83854);let f=e=>(0,r.A)(n.e,(0,o._)("GetUser"),(0,a.T)(),{...s.C,...e})},52584:(e,i,t)=>{"use strict";t.d(i,{u:()=>y});var r=t(87970),n=t(24818),o=t(45103),a=t(27593),s=t(84295),f=t(88726),u=t(85565),l=t(59262),c=t(90808),d=t(55413),g=t(2242),m=t(41811),p=t(83854);let A=e=>(0,c.A)(d.e,(0,g._)("UpdateUserAttributes"),(0,m.T)(),{...p.C,...e});var h=t(32712);let y=async e=>{let{userAttributes:i,options:t}=e,c=r.H.getConfig().Auth?.Cognito,d=t?.clientMetadata;(0,o.$y)(c);let{userPoolEndpoint:g,userPoolId:m}=c,{tokens:p}=await (0,n.$)({forceRefresh:!1});(0,s.H0)(p);let y=A({endpointResolver:(0,h.o)({endpointOverride:g})}),{CodeDeliveryDetailsList:v}=await y({region:(0,f.J)(m),userAgentValue:(0,l.A)(a.BM.UpdateUserAttributes)},{AccessToken:p.accessToken.toString(),ClientMetadata:d,UserAttributes:(0,u.Q)(i)});return{...function(e){let i={};return Object.keys(e)?.forEach(e=>{i[e]={isUpdated:!0,nextStep:{updateAttributeStep:"DONE"}}}),i}(i),...function(e){let i={};return e?.forEach(e=>{let{AttributeName:t,DeliveryMedium:r,Destination:n}=e;t&&(i[t]={isUpdated:!1,nextStep:{updateAttributeStep:"CONFIRM_ATTRIBUTE_WITH_CODE",codeDeliveryDetails:{attributeName:t,deliveryMedium:r,destination:n}}})}),i}(v)}}},59262:(e,i,t)=>{"use strict";t.d(i,{A:()=>o});var r=t(32307),n=t(27593);let o=(e,i)=>(0,r.fE)({category:n.b7.Auth,action:e,...i})},60584:(e,i,t)=>{"use strict";t.r(i),t.d(i,{Amplify:()=>r.E,Hub:()=>w,configureAmplify:()=>F,confirmResetPassword:()=>u.P,confirmSignUp:()=>s.z,confirmUserAttribute:()=>h.w,fetchAuthSession:()=>d.$,fetchAuthSessionWithConfig:()=>j,fetchUserAttributes:()=>c.T,fetchUserAttributesWithConfig:()=>k,getCurrentUser:()=>l.H,getCurrentUserWithConfig:()=>x,initAmplify:()=>N,isAmplifyConfigured:()=>R,resendSignUpCode:()=>g.h,resetPassword:()=>f.x,safeSignOut:()=>I,sendUserAttributeVerificationCode:()=>A.c,setUpTOTP:()=>y.x,signIn:()=>o.J,signInWithConfig:()=>S,signInWithRedirect:()=>p.$,signOut:()=>n.C,signOutWithConfig:()=>O,signUp:()=>a.H,updateUserAttributes:()=>m.u});var r=t(63900),n=t(82354),o=t(23639),a=t(95027),s=t(55481),f=t(27755),u=t(80079),l=t(81746),c=t(11024),d=t(24818),g=t(97220),m=t(52584),p=t(15102),A=t(35220),h=t(71194),y=t(35030),v=t(51148),U=t(42749),C=t(49509);let w=v.YZ,E="1o5v84mrgn4gt87khtr179uc5b",_="us-east-1_JPL8vGfb6",b="us-east-1";U.vF.debug("[AmplifyUnified] Configuration values:",{COGNITO_CLIENT_ID:E,COGNITO_USER_POOL_ID:_,AWS_REGION:b});let P=!1,F=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(P&&!e)return U.vF.debug("[AmplifyUnified] Amplify already configured, skipping"),!0;try{e&&(U.vF.info("[AmplifyUnified] Force reconfiguring Amplify"),window.__amplifyConfigured&&(window.__amplifyConfigured=!1))}catch(e){U.vF.error("[AmplifyUnified] Error during force reconfigure:",e)}try{U.vF.info("[AmplifyUnified] Configuring Amplify",{environment:"production",isDevelopment:!1});let e=_||C.env.NEXT_PUBLIC_USER_POOL_ID||"us-east-1_JPL8vGfb6",i=E||C.env.NEXT_PUBLIC_USER_POOL_CLIENT_ID||"1o5v84mrgn4gt87khtr179uc5b";if(!e||!i)return U.vF.error("[AmplifyUnified] Missing required configuration:",{hasUserPoolId:!!e,hasClientId:!!i}),P=!1,!1;let t={Auth:{Cognito:{userPoolId:e,userPoolClientId:i,identityPoolId:C.env.NEXT_PUBLIC_COGNITO_IDENTITY_POOL_ID,region:b||"us-east-1",loginWith:{email:!0,username:!0,phone:!1},httpOptions:{timeout:3e4,connectTimeout:1e4,rejectUnauthorized:!1,retryable:!0,maxRetries:3}}}};U.vF.debug("[AmplifyUnified] Amplify configuration:",{userPoolId:t.Auth.Cognito.userPoolId,userPoolClientId:t.Auth.Cognito.userPoolClientId,region:t.Auth.Cognito.region}),r.E.configure(t);let n=r.E.getConfig();if(!(n&&n.Auth&&n.Auth.Cognito&&n.Auth.Cognito.userPoolId))return U.vF.error("[AmplifyUnified] Configuration verification failed",{hasConfig:!!n,hasAuth:!!(n&&n.Auth),hasCognito:!!(n&&n.Auth&&n.Auth.Cognito)}),P=!1,!1;return w.listen("auth",e=>{if("signOut"===e.payload.event||"signIn_failure"===e.payload.event){var i,t;U.vF.debug("[AmplifyUnified] Auth event that might require reconfiguration:",{event:e.payload.event,data:e.payload.data});let n=r.E.getConfig();(null==n||null==(t=n.Auth)||null==(i=t.Cognito)?void 0:i.userPoolId)||(U.vF.warn("[AmplifyUnified] Configuration lost after auth event, reconfiguring..."),F())}}),P=!0,U.vF.info("[AmplifyUnified] Amplify configured successfully"),window.__amplifyConfigured=!0,!0}catch(e){return U.vF.error("[AmplifyUnified] Failed to configure Amplify:",{error:e.message,stack:e.stack}),P=!1,!1}};try{F()}catch(e){U.vF.error("[AmplifyUnified] Error during initial Amplify configuration:",e)}let R=()=>{var e,i;if(!P)return U.vF.info("[AmplifyUnified] Amplify configuration status check: Not configured"),!1;let t=r.E.getConfig(),n=!!(t&&(null==(i=t.Auth)||null==(e=i.Cognito)?void 0:e.userPoolId));return U.vF.debug("[AmplifyUnified] Amplify configuration status:",{isConfigured:P,hasAuth:n,config:{isConfigured:P,hasAuth:n}}),P&&n},I=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{global:!0};try{U.vF.info("[AmplifyUnified] Amplify configuration status before sign out:",{isConfigured:R()}),R()||(U.vF.warn("[AmplifyUnified] Attempting to reconfigure Amplify before signing out"),F());try{return await (0,n.C)(e),U.vF.info("[AmplifyUnified] Successfully signed out user"),!0}catch(e){if(U.vF.error("[AmplifyUnified] Error during Amplify signOut:",e),"AuthUserPoolException"===e.name||e.message&&e.message.includes("UserPool not configured")){U.vF.warn("[AmplifyUnified] Auth UserPool not configured, attempting recovery"),F();try{window.__APP_CACHE&&(window.__APP_CACHE.auth={},window.__APP_CACHE.user={},U.vF.info("[AmplifyUnified] Cleared app cache for auth data"))}catch(e){U.vF.error("[AmplifyUnified] Error clearing app cache:",e)}}return!0}}catch(e){return U.vF.error("[AmplifyUnified] Unexpected error in safeSignOut:",e),!0}},T=async function(e){for(var i,t,r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];try{if(e===o.J)try{if(await (0,l.H)()){U.vF.warn("[AmplifyUnified] User already authenticated, signing out first");try{await I({global:!0})}catch(e){U.vF.error("[AmplifyUnified] Error signing out before signIn:",e)}}}catch(e){(null==(i=e.message)?void 0:i.includes("not authenticated"))||U.vF.warn("[AmplifyUnified] Error checking current user before signIn:",e)}R()||(U.vF.warn("[AmplifyUnified] Amplify not configured before auth function call, configuring now"),F(!0));let r=0;for(;r<=3;)try{return await e(...n)}catch(n){if(r++,U.vF.error("[AmplifyUnified] Error in ".concat(e.name," (retry ").concat(r,"/").concat(3,"):"),{name:n.name,message:n.message,code:n.code,statusCode:null==n||null==(t=n.response)?void 0:t.status,retryable:n.retryable}),("AuthUserPoolException"===n.name||n.message&&n.message.includes("UserPool not configured"))&&(U.vF.warn("[AmplifyUnified] Auth UserPool not configured, attempting recovery (retry ".concat(r,"/").concat(3,")")),F(!0),r<=3)){await new Promise(e=>setTimeout(e,1e3*r));continue}if(("NetworkError"===n.name||n.message&&(n.message.includes("network")||n.message.includes("Network")||n.message.includes("SSL")||n.message.includes("certificate")||n.message.includes("CORS")||n.message.includes("timeout"))||"NETWORK_ERROR"===n.code||"NetworkingError"===n.code)&&(U.vF.warn("[AmplifyUnified] Network error, attempting retry with backoff (retry ".concat(r,"/").concat(3,")")),F(!0),r<=3)){let e=Math.min(2e3*Math.pow(2,r-1),1e4);U.vF.info("[AmplifyUnified] Waiting ".concat(e,"ms before retry")),await new Promise(i=>setTimeout(i,e));continue}if(r>3)throw n;let i=1e3*r;await new Promise(e=>setTimeout(e,i))}throw Error("[AmplifyUnified] Failed to execute ".concat(e.name," after ").concat(3," retries"))}catch(e){throw U.vF.error("[AmplifyUnified] Error in ensureConfigAndCall:",e),e}},N=()=>window.__amplifyConfigured?window.__amplifyConfigured:(U.vF.info("[AmplifyUnified] Initializing Amplify from hook"),F(),!0),S=function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return T(o.J,...i)},O=function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return T(n.C,...i)},x=function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return T(l.H,...i)},k=function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return T(c.T,...i)},j=function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return T(d.$,...i)}},65193:(e,i,t)=>{Promise.resolve().then(t.bind(t,80874))},69496:(e,i,t)=>{"use strict";t.d(i,{T:()=>d});var r=t(45103),n=t(57762),o=t(27593),a=t(88726),s=t(84295),f=t(85565),u=t(59262),l=t(50581),c=t(32712);let d=async e=>{let i=e.getConfig().Auth?.Cognito;(0,r.$y)(i);let{userPoolEndpoint:t,userPoolId:d}=i,{tokens:g}=await (0,n.$)(e,{forceRefresh:!1});(0,s.H0)(g);let m=(0,l.N)({endpointResolver:(0,c.o)({endpointOverride:t})}),{UserAttributes:p}=await m({region:(0,a.J)(d),userAgentValue:(0,u.A)(o.BM.FetchUserAttributes)},{AccessToken:g.accessToken.toString()});return(0,f.J)(p)}},80874:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>s});var r=t(95155),n=t(12115),o=t(60584);function a(){let[e,i]=(0,n.useState)("Initializing..."),[t,a]=(0,n.useState)(null);return(0,n.useEffect)(()=>{!async function(){try{let e=(0,o.isAmplifyConfigured)();if(i("Amplify configured: ".concat(e)),!e){let e=(0,o.configureAmplify)();i("Amplify configuration result: ".concat(e))}i("Testing sign in..."),await (0,o.signIn)({username:"test@example.com",password:"password123",options:{authFlowType:"USER_SRP_AUTH"}}),i("Sign in test completed without errors")}catch(e){console.error("Auth test error:",e),i("Auth test failed"),a(e.message||"Unknown error")}}()},[]),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Auth Configuration Test"}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Status:"})," ",e]})}),t&&(0,r.jsx)("div",{className:"p-4 bg-red-100 rounded-md",children:(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Error:"})," ",t]})})]})}function s(){return(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Auth Configuration Test Page"}),(0,r.jsx)(a,{})]})}},85565:(e,i,t)=>{"use strict";function r(e){return Object.entries(e).map(([e,i])=>({Name:e,Value:i}))}function n(e){let i={};return e?.forEach(e=>{e.Name&&(i[e.Name]=e.Value)}),i}t.d(i,{J:()=>n,Q:()=>r})}},e=>{var i=i=>e(e.s=i);e.O(0,[54940,9296,79480,58430,84620,23639,38501,78746,28441,31684,77358],()=>i(65193)),_N_E=e.O()}]);