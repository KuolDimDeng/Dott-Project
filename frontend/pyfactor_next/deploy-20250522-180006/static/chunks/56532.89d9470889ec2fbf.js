"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56532],{56532:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=s(55166),r=s(68387),l=s(95155),n=s(12115),d=s(29729),i=s(66766);let c=()=>{let[e,t]=(0,n.useState)(""),[s,c]=(0,n.useState)(null),[o,x]=(0,n.useState)(null),[m,h]=(0,n.useState)(0),[p,u]=(0,n.useState)(0),[g,y]=(0,n.useState)(0),[j,b]=(0,n.useState)(0),[N,f]=(0,n.useState)(0),[w,v]=(0,n.useState)([]),[k,S]=(0,n.useState)([]),[C,D]=(0,n.useState)([]),[A,B]=(0,n.useState)(0),[_,M]=(0,n.useState)(0),[R,E]=(0,n.useState)([]),[T,F]=(0,n.useState)(!1),[z,I]=(0,n.useState)({adjustments:!1,unmatched:!1});(0,n.useEffect)(()=>{L()},[]),(0,n.useEffect)(()=>{e&&s&&o&&(P(),$())},[e,s,o]),(0,n.useEffect)(()=>{b(p-g),f(g+A+_)},[p,g,A,_]);let L=async()=>{try{let e=await d.SP.get("/api/banking/accounts/");e.data.accounts&&Array.isArray(e.data.accounts)?E(e.data.accounts):E([])}catch(e){console.error("Error fetching connected banks:",e)}},P=async()=>{F(!0);try{let t=await d.SP.get("/api/banking/transactions/",{params:{account_id:e,start_date:s.toISOString().split("T")[0],end_date:o.toISOString().split("T")[0]}});t.data.transactions&&Array.isArray(t.data.transactions)?v(t.data.transactions):v([])}catch(e){console.error("Error fetching bank transactions:",e)}finally{F(!1)}},$=async()=>{F(!0);try{let t=await d.SP.get("/api/general-ledger/",{params:{account_id:e,start_date:s.toISOString().split("T")[0],end_date:o.toISOString().split("T")[0]}});t.data&&Array.isArray(t.data)?S(t.data):S([])}catch(e){console.error("Error fetching book transactions:",e)}finally{F(!1)}},O=e=>e?new Date(e).toISOString().split("T")[0]:"",H=e=>{I(t=>(0,r._)((0,a._)({},t),{[e]:!t[e]}))};return(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"mr-4 text-blue-600",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Bank Reconciliation"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Manage your bank reconciliation"})]})]}),(0,l.jsx)("div",{className:"mt-4 md:mt-0",children:(0,l.jsx)(i.default,{src:"/static/images/Recon.png",alt:"Reconciliation",width:130,height:130,style:{objectFit:"contain"}})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Account"}),(0,l.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md bg-white",value:e,onChange:e=>t(e.target.value),children:[(0,l.jsx)("option",{value:"",disabled:!0,children:"Select Bank Account"}),R.map(e=>(0,l.jsx)("option",{value:e.account_id,children:e.name},e.account_id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,l.jsx)("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded-md",value:O(s),onChange:e=>c(e.target.value?new Date(e.target.value):null)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,l.jsx)("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded-md",value:O(o),onChange:e=>x(e.target.value?new Date(e.target.value):null)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ending Balance"}),(0,l.jsx)("input",{type:"number",className:"w-full p-2 border border-gray-300 rounded-md",value:p,onChange:e=>u(Number(e.target.value))})]})]}),(0,l.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Reconciliation Summary"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Book Balance:"}),(0,l.jsxs)("p",{className:"text-lg font-medium",children:["$",g.toFixed(2)]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Difference:"}),(0,l.jsxs)("p",{className:"text-lg font-medium ".concat(0!==j?"text-red-600":"text-green-600"),children:["$",j.toFixed(2)]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Adjusted Balance:"}),(0,l.jsxs)("p",{className:"text-lg font-medium",children:["$",N.toFixed(2)]})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Bank Transactions"}),T?(0,l.jsx)("div",{className:"flex justify-center py-4",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,l.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[w.map((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description}),(0,l.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.amount.toFixed(2)]}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.status||"Pending"})]},t)),0===w.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No bank transactions found"})})]})]})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Book Transactions"}),T?(0,l.jsx)("div",{className:"flex justify-center py-4",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,l.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[k.map((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description}),(0,l.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.amount.toFixed(2)]}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.status||"Posted"})]},t)),0===k.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No book transactions found"})})]})]})})]})]}),(0,l.jsxs)("div",{className:"mb-6 border border-gray-200 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center p-4 cursor-pointer",onClick:()=>H("adjustments"),children:[(0,l.jsx)("h3",{className:"text-lg font-medium",children:"Adjustments"}),(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform ".concat(z.adjustments?"rotate-180":""," transition-transform"),viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),z.adjustments&&(0,l.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Fees"}),(0,l.jsx)("input",{type:"number",className:"w-full p-2 border border-gray-300 rounded-md",value:A,onChange:e=>B(Number(e.target.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interest Earned"}),(0,l.jsx)("input",{type:"number",className:"w-full p-2 border border-gray-300 rounded-md",value:_,onChange:e=>M(Number(e.target.value))})]})]}),(0,l.jsx)("button",{type:"button",onClick:()=>{},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Missing Transaction"})]})]}),(0,l.jsxs)("div",{className:"mb-6 border border-gray-200 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center p-4 cursor-pointer",onClick:()=>H("unmatched"),children:[(0,l.jsx)("h3",{className:"text-lg font-medium",children:"Unmatched Transactions"}),(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform ".concat(z.unmatched?"rotate-180":""," transition-transform"),viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),z.unmatched&&(0,l.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"})]})}),(0,l.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[C.map((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.date}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.amount}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.source})]},t)),0===C.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No unmatched transactions found"})})]})]})})})]}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4 mb-6",children:[(0,l.jsx)("button",{type:"button",onClick:()=>{},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Save Draft"}),(0,l.jsx)("button",{type:"button",onClick:()=>{},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Finalize & Reconcile"}),(0,l.jsx)("button",{type:"button",onClick:()=>{},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Generate Report"})]}),0!==j&&(0,l.jsx)("div",{className:"p-4 mb-4 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,l.jsx)("div",{className:"ml-3",children:(0,l.jsxs)("p",{className:"text-sm text-yellow-700",children:["There is a discrepancy of $",Math.abs(j).toFixed(2)," in your reconciliation. Please review your transactions."]})})]})})]})}}}]);