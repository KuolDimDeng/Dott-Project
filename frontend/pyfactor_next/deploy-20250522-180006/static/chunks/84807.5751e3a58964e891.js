"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84807],{84807:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var r=a(95155),s=a(12115),c=a(29729),l=a(87449);let d=()=>{let[e,t]=(0,s.useState)([]),[a,d]=(0,s.useState)([]),[n,i]=(0,s.useState)(""),[x,m]=(0,s.useState)(null),[p,o]=(0,s.useState)(null),[h,g]=(0,s.useState)([]);(0,l.d)();let[u,y]=(0,s.useState)([]),[j,w]=(0,s.useState)([]);(0,s.useEffect)(()=>{f(),b(),N()},[]),(0,s.useEffect)(()=>{console.log("Effect triggered. Selected account:",n),N()},[n,x,p]);let f=async()=>{try{let e=await c.SP.get("/api/finance/chart-of-accounts/");d(e.data)}catch(e){console.error("Error fetching accounts:",e)}},N=async()=>{try{let e=await c.SP.get("/api/finance/general-ledger/",{params:{account_id:n,start_date:x?v(x):null,end_date:p?v(p):null}});y(e.data),t(e.data)}catch(e){console.error("Error fetching general ledger:",e)}},b=async()=>{try{let e=await c.SP.get("/api/finance/general-ledger-summary/");w(e.data),g(e.data)}catch(e){console.error("Error fetching general ledger summary:",e)}},v=e=>e?new Date(e).toISOString().split("T")[0]:"";return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"General Ledger"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account"}),(0,r.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md bg-white",value:n,onChange:e=>i(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"All Accounts"}),a.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,r.jsx)("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded-md",value:v(x),onChange:e=>m(e.target.value?new Date(e.target.value):null)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,r.jsx)("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded-md",value:v(p),onChange:e=>o(e.target.value?new Date(e.target.value):null)})]})]}),(0,r.jsx)("div",{className:"overflow-x-auto rounded-lg border border-gray-200 mb-8",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Debit"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credit"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.length>0?u.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.date}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.account_name}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.reference}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:e.debit_amount}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:e.credit_amount}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:e.balance})]},e.id)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No ledger entries found"})})})]})}),(0,r.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Account Balances Summary"}),(0,r.jsx)("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Number"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.length>0?h.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.account_number}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.account_name}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:e.balance})]},e.account_id)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No account summary data found"})})})]})})]})}}}]);