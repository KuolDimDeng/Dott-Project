"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[15319],{15319:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var a=s(95155),r=s(12115),d=s(29729);let i=()=>{let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(""),[c,n]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[x,g]=(0,r.useState)(null),[h,m]=(0,r.useState)(!1),[p,u]=(0,r.useState)("");(0,r.useEffect)(()=>{b()},[]),(0,r.useEffect)(()=>{console.log("Selected account updated:",s)},[s]);let b=async()=>{m(!0),u("");try{let e=await d.SP.get("/api/banking/accounts/");console.log("Bank accounts response:",e.data),Array.isArray(e.data)?t(e.data):e.data&&Array.isArray(e.data.accounts)?t(e.data.accounts):(console.error("Unexpected response format:",e.data),t([]),u("Unexpected response format from server"))}catch(e){console.error("Error fetching bank accounts:",e),t([]),u("Failed to fetch bank accounts")}finally{m(!1)}},j=async()=>{m(!0),u("");try{console.log("Fetching report for account:",s);let e=await d.SP.get("/api/banking/report/",{params:{account_id:s,start_date:c,end_date:o}});console.log("Report data:",e.data),g(e.data)}catch(e){console.error("Error fetching report data:",e),u("Failed to fetch report data")}finally{m(!1)}},y=e=>{console.log("Exporting report as ".concat(e))};return(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Banking Report"}),p&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:p}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 items-center",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("select",{className:"block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:s,onChange:e=>{let t=e.target.value;console.log("Account selected:",t),i(t)},children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select Bank Account"}),Array.isArray(e)&&e.length>0?e.map(e=>(0,a.jsxs)("option",{value:e.account_id,children:[e.name," - ",e.mask]},e.account_id)):(0,a.jsx)("option",{disabled:!0,children:"No bank accounts available"})]})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"date",className:"block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:c,onChange:e=>{console.log("Start date changed:",e.target.value),n(e.target.value)},placeholder:"Start Date"})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"date",className:"block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:o,onChange:e=>{console.log("End date changed:",e.target.value),l(e.target.value)},placeholder:"End Date"})}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>(console.log("Generate report clicked. Selected account:",s),s)?c&&o?void j():void u("Please select both start and end dates"):void u("Please select a bank account"),disabled:h,children:h?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("span",{children:"Generating..."})]}):"Generate Report"})})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 mr-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>y("PDF"),disabled:!x,children:[(0,a.jsx)("svg",{className:"mr-2 -ml-1 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export PDF"]}),(0,a.jsxs)("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>y("CSV"),disabled:!x,children:[(0,a.jsx)("svg",{className:"mr-2 -ml-1 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export CSV"]})]})]}),x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Report Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-gray-800",children:["Bank: ",x.bank_name]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-gray-800",children:["Account: ",x.account_number]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-gray-800",children:["Beginning Balance: $",x.beginning_balance.toFixed(2)]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-gray-800",children:["Ending Balance: $",x.ending_balance.toFixed(2)]})})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow mb-6 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Check Number"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Debit"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credit"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.transactions.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.description}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.check_number||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:e.debit?"$".concat(e.debit.toFixed(2)):"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:e.credit?"$".concat(e.credit.toFixed(2)):"-"}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:["$",e.balance.toFixed(2)]})]},e.id))})]})})}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Reconciliation Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-gray-800",children:["Outstanding Checks: $",x.outstanding_checks.toFixed(2)]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-gray-800",children:["Deposits in Transit: $",x.deposits_in_transit.toFixed(2)]})})]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-gray-800",children:["Total Debits: $",x.total_debits.toFixed(2)]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-gray-800",children:["Total Credits: $",x.total_credits.toFixed(2)]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-gray-800",children:["Net Change: $",x.net_change.toFixed(2)]})})]})]})]})]})}}}]);