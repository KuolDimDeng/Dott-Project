"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40874],{40874:(e,r,t)=>{t.r(r),t.d(r,{default:()=>c});var a=t(55166),s=t(68387),d=t(95155),i=t(12115),n=t(81243),l=t(42749),o=t(8754);let c=()=>{let[e,r]=(0,i.useState)({items:[],isLoading:!0,error:null,snackbar:{open:!1,message:"",severity:"info"},dialogOpen:!1,currentItem:{name:"",sku:"",description:"",quantity:0,reorder_level:0,unit_price:0},isMockData:!1}),[c,m]=(0,i.useState)(!1),[u,x]=(0,i.useState)(!1),[g,y]=(0,i.useState)(!1),b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";r(r=>(0,s._)((0,a._)({},r),{snackbar:{open:!0,message:e,severity:t}}))},h=async()=>{r(e=>(0,s._)((0,a._)({},e),{isLoading:!0,error:null}));try{let e=await n.GX.getProducts({},{timeout:15e3,notify:!0,customMessage:"Unable to load inventory products. Using offline data."}),t=Array.isArray(e)?e:e.results||[],d=t.length>0&&t[0].id&&t[0].id.startsWith("mock-");0===t.length&&l.vF.warn("No inventory items found"),r(e=>(0,s._)((0,a._)({},e),{items:t,isLoading:!1,isMockData:d,error:null}))}catch(n){var e,t;l.vF.error("Error fetching inventory items:",n);let d="Failed to load inventory items",i="error";(null==(e=n.message)?void 0:e.includes("timeout"))?(d="Request timed out. Using demo data instead.",i="warning"):(null==(t=n.message)?void 0:t.includes("tenant schema"))&&(d="Products list is unavailable for your account. Using demo data instead.",i="warning"),r(e=>(0,s._)((0,a._)({},e),{isLoading:!1,error:d,isMockData:!0,snackbar:{open:!0,message:d,severity:i}}))}};(0,i.useEffect)(()=>{h()},[]);let p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?r(r=>(0,s._)((0,a._)({},r),{currentItem:(0,a._)({},e),dialogOpen:!0})):r(e=>(0,s._)((0,a._)({},e),{currentItem:{name:"",sku:"",description:"",quantity:0,reorder_level:0,unit_price:0},dialogOpen:!0}))},f=()=>{r(e=>(0,s._)((0,a._)({},e),{dialogOpen:!1,currentItem:{name:"",sku:"",description:"",quantity:0,reorder_level:0,unit_price:0}}))},k=e=>{let{name:t,value:d}=e.target;r(e=>(0,s._)((0,a._)({},e),{currentItem:(0,s._)((0,a._)({},e.currentItem),{[t]:d})}))},v=async()=>{try{if(!e.currentItem)return void b("No item data available","error");if(!e.currentItem.name)return void b("Name is required","error");let t={name:e.currentItem.name||"",description:e.currentItem.description||"",price:parseFloat(e.currentItem.unit_price||e.currentItem.price||0),product_code:e.currentItem.sku||e.currentItem.product_code||"",stock_quantity:parseInt(e.currentItem.quantity||e.currentItem.stock_quantity||0,10),reorder_level:parseInt(e.currentItem.reorder_level||0,10),is_for_sale:!0};if(l.vF.info("Submitting product data:",t),r(e=>(0,s._)((0,a._)({},e),{isLoading:!0})),e.currentItem.id)try{await n.GX.updateProduct(e.currentItem.id,t),l.vF.info("Product updated successfully"),b("Product updated successfully","success")}catch(e){l.vF.error("Product update failed:",e),b("Failed to update product. Please try again.","error"),r(e=>(0,s._)((0,a._)({},e),{isLoading:!1}));return}else try{await n.GX.createProduct(t),l.vF.info("Product created successfully"),b("Product created successfully","success")}catch(e){l.vF.error("Product creation failed:",e),b("Failed to create product. Please try again.","error"),r(e=>(0,s._)((0,a._)({},e),{isLoading:!1}));return}await h(),f()}catch(e){l.vF.error("Error saving item:",e),b("Failed to save item. Please try again later.","error")}finally{r(e=>(0,s._)((0,a._)({},e),{isLoading:!1}))}},w=async e=>{if(window.confirm("Are you sure you want to delete this item?"))try{r(e=>(0,s._)((0,a._)({},e),{isLoading:!0}));try{await n.GX.deleteProduct(e),l.vF.info("Product deleted successfully"),b("Product deleted successfully","success")}catch(e){l.vF.error("Product deletion failed:",e),b("Failed to delete product. Please try again.","error"),r(e=>(0,s._)((0,a._)({},e),{isLoading:!1}));return}await h()}catch(e){l.vF.error("Error deleting product:",e),b("Failed to delete product. Please try again later.","error")}finally{r(e=>(0,s._)((0,a._)({},e),{isLoading:!1}))}};return(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Inventory Items"}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsxs)("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>{x(!1),h()},disabled:e.isLoading,children:[(0,d.jsx)(o.fN,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,d.jsx)("button",{className:"inline-flex items-center px-3 py-2 border rounded-md shadow-sm text-sm font-medium ".concat(e.isMockData?"bg-purple-600 text-white hover:bg-purple-700 border-purple-600":"border-gray-300 text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"," focus:outline-none focus:ring-2 focus:ring-blue-500"),onClick:()=>{m(!e.isMockData),h()},disabled:e.isLoading,children:e.isMockData?"Using Demo Data":"Use Demo Data"}),(0,d.jsx)("button",{className:"inline-flex items-center px-3 py-2 border border-blue-300 dark:border-blue-600 rounded-md shadow-sm text-sm font-medium text-blue-700 dark:text-blue-200 bg-white dark:bg-gray-700 hover:bg-blue-50 dark:hover:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:async()=>{try{r(e=>(0,s._)((0,a._)({},e),{isLoading:!0})),b("Refreshing session...","info");let{refreshUserSession:e}=await Promise.resolve().then(t.bind(t,60005));await e(),b("Session refreshed successfully","success"),await h()}catch(e){l.vF.error("Error refreshing session:",e),b("Failed to refresh session","error")}finally{r(e=>(0,s._)((0,a._)({},e),{isLoading:!1}))}},disabled:e.isLoading,children:"Refresh Session"}),(0,d.jsxs)("button",{className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>p(),disabled:e.isLoading,children:[(0,d.jsx)(o.RE,{className:"w-4 h-4 mr-2"}),"Add New Item"]})]})]}),e.isLoading&&(0,d.jsx)("div",{className:"flex justify-center my-8",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})}),e.isMockData&&(0,d.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900 border-l-4 border-blue-400 dark:border-blue-600 p-4 mb-4 rounded",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"flex-shrink-0 text-blue-400",children:(0,d.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,d.jsx)("div",{className:"ml-3",children:(0,d.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-200",children:"Showing demo data. Live inventory data is not available."})})]})}),e.error&&(0,d.jsx)("div",{className:"bg-red-50 dark:bg-red-900 border-l-4 border-red-400 dark:border-red-600 p-4 mb-4 rounded",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"flex-shrink-0 text-red-400",children:(0,d.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,d.jsx)("div",{className:"ml-3",children:(0,d.jsx)("p",{className:"text-sm text-red-700 dark:text-red-200",children:e.error})})]})}),0===e.items.length?(0,d.jsxs)("div",{className:"text-center p-8 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-500 dark:text-gray-300",children:"No inventory items found"}),(0,d.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:'Click "Add New Item" to create your first inventory item'})]}):(0,d.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 dark:border-gray-700 rounded-lg",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,d.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"SKU"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Quantity"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Reorder Level"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unit Price"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:e.items.map(e=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.product_code||"N/A"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.description||"No description"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.stock_quantity||0}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.reorder_level||0}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:["$","number"==typeof e.price?e.price.toFixed(2):parseFloat(e.price||0).toFixed(2)]}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsxs)("button",{onClick:()=>p(e),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:[(0,d.jsx)(o.qU,{className:"w-5 h-5"}),(0,d.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,d.jsxs)("button",{onClick:()=>w(e.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:[(0,d.jsx)(o.d7,{className:"w-5 h-5"}),(0,d.jsx)("span",{className:"sr-only",children:"Delete"})]})]})})]},e.id))})]})}),e.snackbar.open&&(0,d.jsxs)("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 flex items-center p-4 mb-4 rounded-lg shadow-lg ".concat("success"===e.snackbar.severity?"bg-green-500 text-white":"error"===e.snackbar.severity?"bg-red-500 text-white":"warning"===e.snackbar.severity?"bg-yellow-500 text-white":"bg-blue-500 text-white"),role:"alert",children:[(0,d.jsx)("div",{className:"ms-3 text-sm font-medium",children:e.snackbar.message}),(0,d.jsxs)("button",{type:"button",className:"ms-auto -mx-1.5 -my-1.5 text-white hover:text-gray-200 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 inline-flex items-center justify-center h-8 w-8",onClick:()=>{r(e=>(0,s._)((0,a._)({},e),{snackbar:(0,s._)((0,a._)({},e.snackbar),{open:!1})}))},"aria-label":"Close",children:[(0,d.jsx)("span",{className:"sr-only",children:"Close"}),(0,d.jsx)(o.US,{className:"w-4 h-4"})]})]}),e.dialogOpen&&(0,d.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,d.jsxs)("div",{className:"flex min-h-screen items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:f}),(0,d.jsxs)("div",{className:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:[(0,d.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900 dark:text-white mb-4",children:e.currentItem&&e.currentItem.id?"Edit Item":"Add New Item"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),(0,d.jsx)("input",{type:"text",name:"name",id:"name",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm",value:e.currentItem&&e.currentItem.name||"",onChange:k})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"SKU"}),(0,d.jsx)("input",{type:"text",name:"sku",id:"sku",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm",value:e.currentItem&&e.currentItem.sku||"",onChange:k})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),(0,d.jsx)("textarea",{rows:"3",name:"description",id:"description",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm",value:e.currentItem&&e.currentItem.description||"",onChange:k})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Quantity"}),(0,d.jsx)("input",{type:"number",name:"quantity",id:"quantity",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm",value:e.currentItem&&e.currentItem.quantity||0,onChange:k})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"reorder_level",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Reorder Level"}),(0,d.jsx)("input",{type:"number",name:"reorder_level",id:"reorder_level",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm",value:e.currentItem&&e.currentItem.reorder_level||0,onChange:k})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"unit_price",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price"}),(0,d.jsx)("input",{type:"number",name:"unit_price",id:"unit_price",step:"0.01",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm",value:e.currentItem&&e.currentItem.unit_price||0,onChange:k})]})]})]}),(0,d.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[(0,d.jsx)("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 sm:ml-3 sm:w-auto",onClick:v,children:e.currentItem&&e.currentItem.id?"Update":"Add"}),(0,d.jsx)("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white dark:bg-gray-800 px-3 py-2 text-sm font-semibold text-gray-900 dark:text-gray-200 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 sm:mt-0 sm:w-auto",onClick:f,children:"Cancel"})]})]})]})})]})}}}]);