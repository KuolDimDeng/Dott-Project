"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95725],{95725:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(55166),o=a(68387),s=a(95155),l=a(12115),r=a(90306),i=a(62376);a(72821),a(42749);var c=a(33339),d=a(38637),u=a.n(d),m=a(66352),g=a(29670);let b=e=>{let{newInvoice:t=!1,mode:a}=e,[d,u]=(0,l.useState)(2*!(t||"create"===a)),[b,h]=(0,l.useState)(()=>[]),[x,v]=(0,l.useState)(null),[f,p]=(0,l.useState)(()=>({customer:"",date:new Date,items:[],discount:0,currency:"USD",totalAmount:0})),{notifySuccess:y,notifyError:j,notifyInfo:w,notifyWarning:N}=(0,c.h)(),[k,I]=(0,l.useState)(!1),[C,F]=(0,l.useState)(null),[_,S]=(0,l.useState)(!1),[M,A]=(0,l.useState)(null),[P,D]=(0,l.useState)(()=>[]),[U,T]=(0,l.useState)(()=>[]),[E,q]=(0,l.useState)(()=>[]),[O,R]=(0,l.useState)(!1),[L,z]=(0,l.useState)(!1);(0,l.useEffect)(()=>{V(),B(),H(),Q()},[]);let V=async()=>{try{var e,t,a;R(!0),console.log("[InvoiceManagement] Fetching invoices...");try{let t=await fetch("/api/invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:"getAll",tenantId:(0,g.gd)("tenantId"),schema:"tenant_".concat(null==(e=(0,g.gd)("tenantId"))?void 0:e.replace(/-/g,"_"))})});if("string"==typeof t&&t.trim().startsWith("<!DOCTYPE html>")){console.error("[InvoiceManagement] Received HTML response instead of JSON for invoices"),h([]),j("Server returned an invalid response. Please try again later.");return}console.log("[InvoiceManagement] Invoices data:",t),Array.isArray(t)?h(t):(console.warn("[InvoiceManagement] Invalid invoice data format:",typeof t),h([]),j("Invalid invoice data format received"))}catch(e){console.error("[InvoiceManagement] Error in API call:",e),h([]),(null==(t=e.message)?void 0:t.includes("relation"))&&(null==(a=e.message)?void 0:a.includes("does not exist"))?m.oR.info("Your invoice database is being set up. This should only happen once."):m.oR.error("Failed to load invoices. Please try again.")}}catch(e){console.error("[InvoiceManagement] Error fetching invoices:",e),h([]),m.oR.error("Failed to load invoices. Please try again.")}finally{R(!1)}},B=async()=>{try{var e;let t=await fetch("/api/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:"getAll",tenantId:(0,g.gd)("tenantId"),schema:"tenant_".concat(null==(e=(0,g.gd)("tenantId"))?void 0:e.replace(/-/g,"_"))})}),a=await t.json();D(Array.isArray(a)?a:[]),console.log("[InvoiceManagement] Customers data:",Array.isArray(a)?"".concat(a.length," customers loaded"):"No customers found or invalid format")}catch(e){console.error("Error fetching customers:",e),D([]),j("Failed to fetch customers")}},H=async()=>{try{var e;console.log("[InvoiceManagement] Fetching products...");let t=await i.GQ.getAll({tenantId:(0,g.gd)("tenantId"),schema:"tenant_".concat(null==(e=(0,g.gd)("tenantId"))?void 0:e.replace(/-/g,"_"))});Array.isArray(t)?(T(t),console.log("[InvoiceManagement] Products data: ".concat(t.length," products loaded"))):t&&"object"==typeof t&&t.is_fallback?(T(t),console.log("[InvoiceManagement] Using fallback products")):(console.warn("[InvoiceManagement] Received invalid products data format:",typeof t),T([{id:"fallback-1",name:"Fallback Product 1",price:9.99,stock_quantity:10,is_fallback:!0},{id:"fallback-2",name:"Fallback Product 2",price:19.99,stock_quantity:5,is_fallback:!0}]),console.log("[InvoiceManagement] Using fallback products due to invalid format"))}catch(e){console.error("[InvoiceManagement] Error fetching products:",e),T([{id:"fallback-1",name:"Fallback Product 1",price:9.99,stock_quantity:10,is_fallback:!0},{id:"fallback-2",name:"Fallback Product 2",price:19.99,stock_quantity:5,is_fallback:!0}]),console.log("[InvoiceManagement] Using fallback products due to error"),j("Failed to fetch products. Using fallback data.")}},Q=async()=>{try{var e;console.log("[InvoiceManagement] Fetching services...");let t=await i.s7.getAll({tenantId:(0,g.gd)("tenantId"),schema:"tenant_".concat(null==(e=(0,g.gd)("tenantId"))?void 0:e.replace(/-/g,"_"))});Array.isArray(t)?(q(t),console.log("[InvoiceManagement] Services data: ".concat(t.length," services loaded"))):t&&"object"==typeof t&&t.is_fallback?(q(t),console.log("[InvoiceManagement] Using fallback services")):(console.warn("[InvoiceManagement] Received invalid services data format:",typeof t),q([{id:"fallback-1",name:"Fallback Service 1",price:49.99,is_fallback:!0},{id:"fallback-2",name:"Fallback Service 2",price:99.99,is_fallback:!0}]),console.log("[InvoiceManagement] Using fallback services due to invalid format"))}catch(e){console.error("[InvoiceManagement] Error fetching services:",e),q([{id:"fallback-1",name:"Fallback Service 1",price:49.99,is_fallback:!0},{id:"fallback-2",name:"Fallback Service 2",price:99.99,is_fallback:!0}]),console.log("[InvoiceManagement] Using fallback services due to error"),j("Failed to fetch services. Using fallback data.")}},Y=(e,t)=>{u(t)},G=e=>{let{name:t,value:a}=e.target;p(e=>(0,o._)((0,n._)({},e),{[t]:a}))},J=(e,t,a)=>{let s=[...f.items];if(s[e][t]=a,"product"===t){console.log("[InvoiceManagement] Handling product selection: ".concat(a));let t=[...Array.isArray(U)?U:[],...Array.isArray(E)?E:[]];console.log("[InvoiceManagement] Available items for selection: ".concat(t.length));let n=t.find(e=>e.id===a);if(n){console.log("[InvoiceManagement] Selected item:",n);let t=parseFloat(n.price)||0;s[e].unitPrice=t,s[e].description=n.name||n.description||"",U.some(e=>e.id===a)?(s[e].itemType="product",s[e].productId=a,s[e].serviceId=null):(s[e].itemType="service",s[e].serviceId=a,s[e].productId=null),console.log("[InvoiceManagement] Updated item ".concat(e," with price: ").concat(t))}else console.warn("[InvoiceManagement] Could not find selected item with ID: ".concat(a))}if("quantity"===t||"unitPrice"===t){let n="quantity"===t?parseFloat(a)||0:s[e].quantity,o="unitPrice"===t?parseFloat(a)||0:s[e].unitPrice;s[e][t]=parseFloat(a)||0,s[e].amount=n*o,console.log("[InvoiceManagement] Updated ".concat(t," for item ").concat(e," to ").concat(parseFloat(a),", amount: ").concat(s[e].amount))}let l=s.reduce((e,t)=>e+(parseFloat(t.quantity)||0)*(parseFloat(t.unitPrice)||0),0);console.log("[InvoiceManagement] Updated total amount: ".concat(l)),p(e=>(0,o._)((0,n._)({},e),{items:s,totalAmount:l-(e.discount||0)}))},W=e=>{console.log("[InvoiceManagement] Removing item at index ".concat(e));let t=f.items.filter((t,a)=>a!==e),a=t.reduce((e,t)=>e+(parseFloat(t.quantity)||0)*(parseFloat(t.unitPrice)||0),0);console.log("[InvoiceManagement] New total amount after removal: ".concat(a)),p(e=>(0,o._)((0,n._)({},e),{items:t,totalAmount:a-(e.discount||0)}))},K=async e=>{try{if(null==e||e.preventDefault(),!f.customer)return void j("Please select a customer");if(0===f.items.length)return void j("Please add at least one item to the invoice");z(!0);let t=P.find(e=>e.id===f.customer);if(!t){j("Selected customer not found"),z(!1);return}let a=f.items.reduce((e,t)=>e+(parseFloat(t.quantity)||0)*(parseFloat(t.unitPrice)||0),0),n=a*(parseFloat(f.discount)/100||0),o=(a-n)*.1,s=a-n+o,l={customer_id:t.id,customer_name:t.name||"".concat(t.first_name||""," ").concat(t.last_name||"").trim()||"Unnamed Customer",issue_date:f.date?new Date(f.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],due_date:f.dueDate?new Date(f.dueDate).toISOString().split("T")[0]:new Date(Date.now()+2592e6).toISOString().split("T")[0],currency:f.currency||"USD",subtotal:a,tax_total:o,total:s,amount_paid:0,balance_due:s,status:"draft",notes:f.notes||"",terms:f.terms||"Payment due within 30 days",invoice_style:f.invoiceStyle||"modern",template:f.template||("classic"===f.invoiceStyle?"Classic":"Modern"),accent_color:f.accentColor||"#000080",items:f.items.map(e=>({description:e.description||"",quantity:parseFloat(e.quantity)||0,unit_price:parseFloat(e.unitPrice)||0,amount:(parseFloat(e.quantity)||0)*(parseFloat(e.unitPrice)||0),product_id:e.productId||("product"===e.itemType?e.product:null),service_id:e.serviceId||("service"===e.itemType?e.product:null)}))};console.log("[InvoiceManagement] Creating invoice with data:",l);try{let e=await i.Q5.create(l);console.log("[InvoiceManagement] Invoice created:",e),y("Invoice created successfully"),p({customer:"",date:new Date,items:[],discount:0,currency:"USD",totalAmount:0,invoiceStyle:"modern",template:"Modern",accentColor:"#000080"}),V(),u(2)}catch(e){console.error("[InvoiceManagement] API error creating invoice:",e),j(e.message||"Failed to create invoice. Please try again.")}}catch(e){console.error("[InvoiceManagement] Error creating invoice:",e),j("Failed to create invoice. Please try again.")}finally{z(!1)}},X=async()=>{try{let e=await i.Q5.update(x.id,C);v(e.data),I(!1),V(),y("Invoice updated successfully")}catch(e){console.error("Error updating invoice:",e),j("Failed to update invoice")}},Z=async()=>{try{await i.Q5.delete(x.id),y("Invoice deleted successfully"),S(!1),v(null),V(),u(2)}catch(e){console.error("Error deleting invoice:",e),j("Failed to delete invoice")}},$=()=>{A(null)},ee=e=>{console.log("Exporting to ".concat(e)),$()};return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Invoice Management"}),(0,s.jsx)("div",{className:"border-b border-gray-200",children:(0,s.jsxs)("nav",{className:"flex -mb-px",children:[(0,s.jsx)("button",{className:"w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm ".concat(0===d?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:e=>Y(e,0),children:"Create"}),(0,s.jsx)("button",{className:"w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm ".concat(1===d?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:e=>Y(e,1),children:"Details"}),(0,s.jsx)("button",{className:"w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm ".concat(2===d?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:e=>Y(e,2),children:"List"})]})}),0===d&&(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Create Invoice"}),(0,s.jsx)("form",{onSubmit:K,className:"space-y-6",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"customer",className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer"}),(0,s.jsxs)("select",{id:"customer",name:"customer",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:f.customer,onChange:G,children:[(0,s.jsx)("option",{value:"",children:"Select a customer"}),Array.isArray(P)&&P.length>0?(P||[]).map(e=>(0,s.jsx)("option",{value:e.id,children:e.customerName||"".concat(e.first_name," ").concat(e.last_name)||e.name||"Unnamed Customer"},e.id)):(0,s.jsx)("option",{value:"",disabled:!0,children:"No customers available"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"invoice-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,s.jsx)("input",{type:"date",id:"invoice-date",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:f.date?(0,r.A)(f.date,"yyyy-MM-dd"):"",onChange:e=>{let t=e.target.value?new Date(e.target.value):null;p(e=>(0,o._)((0,n._)({},e),{date:t}))}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-medium mb-3",children:"Items"}),(0,s.jsx)("div",{className:"space-y-4",children:(f.items||[]).map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 p-4 border border-gray-200 rounded-md",children:[(0,s.jsxs)("div",{className:"sm:flex-grow",children:[(0,s.jsx)("label",{htmlFor:"item-product-".concat(t),className:"block text-sm font-medium text-gray-700 mb-1",children:"Product/Service"}),(0,s.jsxs)("select",{id:"item-product-".concat(t),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:e.product,onChange:e=>J(t,"product",e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Select a product/service"}),(0,s.jsx)("optgroup",{label:"Products",children:Array.isArray(U)&&U.length>0?(U||[]).map(e=>(0,s.jsx)("option",{value:e.id,children:e.name||e.product_name||"Unnamed Product"},e.id)):(0,s.jsx)("option",{value:"",disabled:!0,children:"No products available"})}),(0,s.jsx)("optgroup",{label:"Services",children:Array.isArray(E)&&E.length>0?(E||[]).map(e=>(0,s.jsx)("option",{value:e.id,children:e.name||e.service_name||"Unnamed Service"},e.id)):(0,s.jsx)("option",{value:"",disabled:!0,children:"No services available"})})]})]}),(0,s.jsxs)("div",{className:"w-full sm:w-28",children:[(0,s.jsx)("label",{htmlFor:"item-quantity-".concat(t),className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,s.jsx)("input",{id:"item-quantity-".concat(t),type:"number",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:e.quantity,onChange:e=>J(t,"quantity",e.target.value),min:"1",step:"1"})]}),(0,s.jsxs)("div",{className:"w-full sm:w-36",children:[(0,s.jsx)("label",{htmlFor:"item-unitPrice-".concat(t),className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price"}),(0,s.jsx)("input",{id:"item-unitPrice-".concat(t),type:"number",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:e.unitPrice,onChange:e=>J(t,"unitPrice",e.target.value),min:"0",step:"0.01"})]}),(0,s.jsx)("div",{className:"flex items-end justify-end sm:w-10 pb-1",children:(0,s.jsx)("button",{type:"button",onClick:()=>W(t),className:"inline-flex items-center justify-center h-8 w-8 rounded-full bg-red-100 text-red-500 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})})]},t))}),(0,s.jsxs)("button",{type:"button",onClick:()=>{p(e=>(0,o._)((0,n._)({},e),{items:[...e.items,{product:"",quantity:1,unitPrice:0}]}))},className:"mt-4 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"-ml-0.5 mr-2 h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Item"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"discount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount"}),(0,s.jsx)("input",{id:"discount",name:"discount",type:"number",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:f.discount,onChange:G,min:"0",step:"0.01"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"currency",className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,s.jsxs)("select",{id:"currency",name:"currency",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:f.currency,onChange:G,children:[(0,s.jsx)("option",{value:"USD",children:"USD"}),(0,s.jsx)("option",{value:"EUR",children:"EUR"}),(0,s.jsx)("option",{value:"GBP",children:"GBP"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"totalAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount"}),(0,s.jsx)("input",{id:"totalAmount",type:"text",className:"w-full rounded-md border-gray-300 bg-gray-100 shadow-sm",value:f.totalAmount.toFixed(2),readOnly:!0})]}),(0,s.jsx)("div",{className:"pt-4",children:(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create Invoice"})})]})})]}),1===d&&(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Invoice Details"}),x?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"invoice-number",className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Number"}),(0,s.jsx)("input",{id:"invoice-number",type:"text",className:"w-full rounded-md border-gray-300 bg-gray-100 shadow-sm",value:x.invoice_num,readOnly:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"detail-customer",className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer"}),(0,s.jsx)("input",{id:"detail-customer",type:"text",className:"w-full rounded-md border-gray-300 shadow-sm ".concat(k?"focus:border-blue-500 focus:ring-blue-500":"bg-gray-100"),value:x.customer,readOnly:!k})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"detail-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,s.jsx)("input",{id:"detail-date",type:"date",className:"w-full rounded-md border-gray-300 shadow-sm ".concat(k?"focus:border-blue-500 focus:ring-blue-500":"bg-gray-100"),value:x.date,readOnly:!k})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"detail-total",className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount"}),(0,s.jsx)("input",{id:"detail-total",type:"text",className:"w-full rounded-md border-gray-300 bg-gray-100 shadow-sm",value:x.totalAmount,readOnly:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"detail-discount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount"}),(0,s.jsx)("input",{id:"detail-discount",type:"number",className:"w-full rounded-md border-gray-300 shadow-sm ".concat(k?"focus:border-blue-500 focus:ring-blue-500":"bg-gray-100"),value:x.discount,readOnly:!k,min:"0",step:"0.01"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"detail-currency",className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,s.jsx)("input",{id:"detail-currency",type:"text",className:"w-full rounded-md border-gray-300 shadow-sm ".concat(k?"focus:border-blue-500 focus:ring-blue-500":"bg-gray-100"),value:x.currency,readOnly:!k})]}),(0,s.jsx)("div",{className:"pt-4 flex space-x-4",children:k?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button",onClick:X,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Save"}),(0,s.jsx)("button",{type:"button",onClick:()=>{I(!1),F(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button",onClick:()=>{I(!0),F((0,n._)({},x))},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Edit"}),(0,s.jsx)("button",{type:"button",onClick:()=>{S(!0)},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Delete"})]})})]}):(0,s.jsx)("p",{className:"text-gray-500",children:"Select an invoice from the list to view details"})]}),2===d&&(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Invoice List"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{type:"button",onClick:e=>{A(e.currentTarget)},className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:["Export",(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ml-2 -mr-1 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),!!M&&(0,s.jsx)("div",{className:"origin-top-right absolute right-0 mt-2 w-40 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10",children:(0,s.jsxs)("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[(0,s.jsx)("button",{className:"text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100 w-full text-left",onClick:()=>ee("PDF"),children:"PDF"}),(0,s.jsx)("button",{className:"text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100 w-full text-left",onClick:()=>ee("CSV"),children:"CSV"}),(0,s.jsx)("button",{className:"text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100 w-full text-left",onClick:()=>ee("Excel"),children:"Excel"})]})})]})]}),(0,s.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:O?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading invoices..."})]})}):b&&0!==b.length?void 0:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 bg-white rounded-lg shadow-md p-6",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-gray-300 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No Invoices Yet"}),(0,s.jsx)("p",{className:"text-gray-500 max-w-md",children:'You haven\'t created any invoices yet. Create a new invoice by clicking the "Create Invoice" button above.'})]}),(0,s.jsx)("button",{onClick:()=>u(0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Create Your First Invoice"})]})})]}),_&&(0,s.jsx)("div",{className:"fixed inset-0 overflow-y-auto z-50",children:(0,s.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,s.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,s.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,s.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,s.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,s.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,s.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:"Confirm Delete"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this invoice? This action cannot be undone."})})]})]})}),(0,s.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,s.jsx)("button",{type:"button",onClick:Z,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),(0,s.jsx)("button",{type:"button",onClick:()=>S(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]})};b.propTypes={newInvoice:u().bool,mode:u().string};let h=b}}]);