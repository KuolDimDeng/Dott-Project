"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[20175,32060],{20175:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var r=a(95155),s=a(12115),l=a(80561),n=a(32060),d=a(29729),o=a(87449);n.Chart.register(n.ArcElement,n.Tooltip,n.Legend,n.CategoryScale,n.LinearScale,n.BarElement,n.PointElement,n.LineElement,n.Title);let i=[{value:"1",label:"1 Month"},{value:"3",label:"3 Months"},{value:"6",label:"6 Months"},{value:"12",label:"1 Year"}],c=e=>"number"==typeof e?e.toFixed(2):"N/A";function x(){let[e,t]=(0,s.useState)("3"),[a,n]=(0,s.useState)(null),[x,m]=(0,s.useState)(0),u=(0,o.d)();(0,s.useEffect)(()=>{b()},[e]);let b=async()=>{try{let t=await d.SP.get("/api/analysis/expense-data",{params:{time_range:e}});n(t.data)}catch(e){console.error("Error fetching data:",e),u.error("Failed to fetch expense data")}},p=(e,t)=>{m(t)};if(!a)return(0,r.jsx)("p",{className:"text-gray-600 p-4",children:"Loading..."});let h={labels:a.expensesOverTime.map(e=>e.date),datasets:[{label:"Expenses",data:a.expensesOverTime.map(e=>e.amount),fill:!1,borderColor:"rgb(255, 99, 132)",tension:.1}]},g={labels:a.expensesByCategory.map(e=>e.category),datasets:[{data:a.expensesByCategory.map(e=>e.amount),backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)"]}]},y={labels:a.expensesByVendor.map(e=>e.vendor),datasets:[{label:"Expenses",data:a.expensesByVendor.map(e=>e.amount),backgroundColor:"rgba(75, 192, 192, 0.6)"}]};return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Expense Analysis"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Range"}),(0,r.jsx)("select",{value:e,onChange:e=>{t(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:i.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,r.jsxs)("nav",{className:"flex -mb-px",children:[(0,r.jsx)("button",{onClick:e=>p(e,0),className:"py-2 px-4 text-center border-b-2 font-medium text-sm ".concat(0===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Expenses Over Time"}),(0,r.jsx)("button",{onClick:e=>p(e,1),className:"py-2 px-4 text-center border-b-2 font-medium text-sm ".concat(1===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Expenses by Category"}),(0,r.jsx)("button",{onClick:e=>p(e,2),className:"py-2 px-4 text-center border-b-2 font-medium text-sm ".concat(2===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Expenses by Vendor"}),(0,r.jsx)("button",{onClick:e=>p(e,3),className:"py-2 px-4 text-center border-b-2 font-medium text-sm ".concat(3===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Summary"})]})}),0===x&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Expenses Over Time"}),(0,r.jsx)("div",{className:"h-80",children:(0,r.jsx)(l.N1,{data:h})})]}),1===x&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Expenses by Category"}),(0,r.jsx)("div",{className:"h-80",children:(0,r.jsx)(l.Fq,{data:g})})]}),2===x&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Expenses by Vendor"}),(0,r.jsx)("div",{className:"h-80",children:(0,r.jsx)(l.yP,{data:y})})]}),3===x&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Summary"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{className:"text-gray-700",children:["Total Expenses: ",(0,r.jsxs)("span",{className:"font-medium",children:["$",c(a.totalExpenses)]})]}),(0,r.jsxs)("p",{className:"text-gray-700",children:["Average Expense: ",(0,r.jsxs)("span",{className:"font-medium",children:["$",c(a.averageExpense)]})]}),(0,r.jsxs)("p",{className:"text-gray-700",children:["Number of Expenses: ",(0,r.jsx)("span",{className:"font-medium",children:a.numberOfExpenses})]})]})]})]})}},32060:(e,t,a)=>{a.r(t),a.d(t,{ArcElement:()=>b,BarController:()=>l,BarElement:()=>h,BubbleController:()=>i,CategoryScale:()=>y,Chart:()=>r,DoughnutController:()=>d,Filler:()=>S,Legend:()=>C,LineController:()=>s,LineElement:()=>p,LinearScale:()=>f,PieController:()=>c,PointElement:()=>g,PolarAreaController:()=>o,RadarController:()=>n,RadialLinearScale:()=>j,Scale:()=>u,ScatterController:()=>x,TimeScale:()=>v,Title:()=>E,Tooltip:()=>N,default:()=>k,register:()=>m,registerables:()=>_});class r{destroy(){}update(){}render(){}stop(){}resize(){}clear(){}toBase64Image(){return""}getElementsAtEventForMode(){return[]}getDatasetMeta(){return{}}constructor(){this.type="line",this.data={},this.options={}}}let s={id:"line",defaults:{}},l={id:"bar",defaults:{}},n={id:"radar",defaults:{}},d={id:"doughnut",defaults:{}},o={id:"polarArea",defaults:{}},i={id:"bubble",defaults:{}},c={id:"pie",defaults:{}},x={id:"scatter",defaults:{}};function m(){}let u={extend:()=>{}},b={id:"arc",defaults:{}},p={id:"line",defaults:{}},h={id:"bar",defaults:{}},g={id:"point",defaults:{}},y={id:"category",defaults:{}},f={id:"linear",defaults:{}},j={id:"radialLinear",defaults:{}},v={id:"time",defaults:{}},N={id:"tooltip",defaults:{},positioners:{}},C={id:"legend",defaults:{}},E={id:"title",defaults:{}},S={id:"filler",defaults:{}},_=[b,p,h,g,y,f,j,v,N,C,E],k=r},80561:(e,t,a)=>{a.d(t,{Fq:()=>x,N1:()=>o,nu:()=>c,yP:()=>i});var r=a(55166),s=a(36465),l=a(95155);a(12115);var n=a(32060);let d=e=>{var{type:t,height:a="300px",width:r="100%"}=e;return(0,s._)(e,["type","height","width"]),(0,l.jsx)("div",{style:{height:a,width:r,backgroundColor:"#f5f5f5",border:"1px solid #ddd",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:(0,l.jsxs)("div",{style:{textAlign:"center"},children:[(0,l.jsxs)("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:[t.charAt(0).toUpperCase()+t.slice(1)," Chart"]}),(0,l.jsx)("div",{style:{fontSize:"0.8rem",color:"#666"},children:"(Chart rendering disabled)"})]})})},o=e=>(0,l.jsx)(d,(0,r._)({type:"line"},e)),i=e=>(0,l.jsx)(d,(0,r._)({type:"bar"},e)),c=e=>(0,l.jsx)(d,(0,r._)({type:"doughnut"},e)),x=e=>(0,l.jsx)(d,(0,r._)({type:"pie"},e));e=>(0,l.jsx)(d,(0,r._)({type:"radar"},e)),n.default}}]);