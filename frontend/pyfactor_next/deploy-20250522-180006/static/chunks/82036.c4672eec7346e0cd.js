"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[82036],{82036:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var l=s(95155),a=s(12115),r=s(71308),i=s(36465);let d=a.forwardRef(function(e,t){var{title:s,titleId:l}=e,r=(0,i._)(e,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))});var n=s(78452);let c=a.forwardRef(function(e,t){var{title:s,titleId:l}=e,r=(0,i._)(e,["title","titleId"]);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});var o=s(45425),m=s(81051),x=s(42749);let u=e=>{let{isOpen:t,onClose:s,onSuccess:i}=e,[u,p]=(0,a.useState)(null),[h,g]=(0,a.useState)(!1),[j,b]=(0,a.useState)(null),[f,v]=(0,a.useState)(null),[N,y]=(0,a.useState)("upload"),w=(0,a.useRef)(null);a.useEffect(()=>{t||(p(null),b(null),v(null),y("upload"))},[t]);let k=async()=>{try{g(!0),b(null),y("importing");let e=new FormData;e.append("file",u);let t=await m.o.importProducts(e);v(t),y("complete"),null==i||i(t)}catch(e){x.vF.error("Error importing products:",e),b(e.message||"Failed to import products"),y("mapping")}finally{g(!1)}};return t?(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg max-w-lg w-full p-6 shadow-xl",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"Import Products"}),(0,l.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:(0,l.jsx)(r.A,{className:"h-6 w-6"})})]}),(0,l.jsxs)("div",{className:"mb-6",children:["upload"===N&&(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 mb-4 cursor-pointer hover:bg-gray-50",onClick:()=>{w.current.click()},children:[(0,l.jsx)(d,{className:"h-10 w-10 mx-auto text-gray-400 mb-3"}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Click to upload or drag and drop"}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:"CSV, Excel, or JSON (max 10MB)"}),(0,l.jsx)("input",{type:"file",className:"hidden",ref:w,onChange:e=>{let t=e.target.files[0];if(t){if(!["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv","application/json"].includes(t.type))return void b("Invalid file type. Please upload CSV, Excel, or JSON file.");p(t),b(null),y("mapping")}},accept:".csv,.xlsx,.xls,.json"})]}),j&&(0,l.jsxs)("div",{className:"bg-red-50 text-red-600 p-3 rounded-md text-sm mb-4",children:[(0,l.jsx)(n.A,{className:"h-5 w-5 inline-block mr-1"}),j]}),(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,l.jsx)("p",{className:"mb-2",children:"Supported file formats:"}),(0,l.jsxs)("ul",{className:"list-disc text-left ml-5",children:[(0,l.jsx)("li",{children:"CSV with headers"}),(0,l.jsx)("li",{children:"Excel spreadsheets (.xlsx, .xls)"}),(0,l.jsx)("li",{children:"JSON arrays of product objects"})]})]})]}),"mapping"===N&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center mb-4",children:[(0,l.jsx)(c,{className:"h-8 w-8 text-blue-500 mr-3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:null==u?void 0:u.name}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:[((null==u?void 0:u.size)/1024).toFixed(2)," KB"]})]})]}),(0,l.jsx)("div",{className:"bg-blue-50 p-4 rounded-md mb-4",children:(0,l.jsx)("p",{className:"text-sm text-blue-700",children:"We'll try to automatically map columns from your file to product fields. You'll have a chance to review and adjust the mapping before import."})}),j&&(0,l.jsxs)("div",{className:"bg-red-50 text-red-600 p-3 rounded-md text-sm mb-4",children:[(0,l.jsx)(n.A,{className:"h-5 w-5 inline-block mr-1"}),j]})]}),"importing"===N&&(0,l.jsxs)("div",{className:"text-center p-8",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-700 mb-2",children:"Importing products..."}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"This may take a few moments depending on file size"})]}),"complete"===N&&f&&(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"bg-green-100 rounded-full h-16 w-16 flex items-center justify-center mx-auto mb-4",children:(0,l.jsx)(o.A,{className:"h-8 w-8 text-green-600"})}),(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Import Complete"}),(0,l.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 text-left mb-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Total Records"}),(0,l.jsx)("p",{className:"text-lg font-medium",children:f.total_records||0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Imported"}),(0,l.jsx)("p",{className:"text-lg font-medium",children:f.imported||0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Updated"}),(0,l.jsx)("p",{className:"text-lg font-medium",children:f.updated||0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Failed"}),(0,l.jsx)("p",{className:"text-lg font-medium",children:f.failed||0})]})]})}),f.failed>0&&(0,l.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-md text-sm text-yellow-700 mb-4",children:[(0,l.jsx)(n.A,{className:"h-5 w-5 inline-block mr-1"}),"Some records could not be imported. Check server logs for details."]})]})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3",children:["importing"!==N&&"complete"!==N&&(0,l.jsx)("button",{onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),"mapping"===N&&(0,l.jsx)("button",{onClick:k,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Start Import"}),"complete"===N&&(0,l.jsx)("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Done"})]})]})}):null}}}]);