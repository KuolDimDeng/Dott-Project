"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32060,33823],{32060:(e,l,t)=>{t.r(l),t.d(l,{ArcElement:()=>g,BarController:()=>r,BarElement:()=>p,BubbleController:()=>o,CategoryScale:()=>f,Chart:()=>a,DoughnutController:()=>i,Filler:()=>E,Legend:()=>C,LineController:()=>s,LineElement:()=>h,LinearScale:()=>j,PieController:()=>c,PointElement:()=>b,PolarAreaController:()=>n,RadarController:()=>d,RadialLinearScale:()=>v,Scale:()=>m,ScatterController:()=>x,TimeScale:()=>y,Title:()=>w,Tooltip:()=>N,default:()=>F,register:()=>u,registerables:()=>_});class a{destroy(){}update(){}render(){}stop(){}resize(){}clear(){}toBase64Image(){return""}getElementsAtEventForMode(){return[]}getDatasetMeta(){return{}}constructor(){this.type="line",this.data={},this.options={}}}let s={id:"line",defaults:{}},r={id:"bar",defaults:{}},d={id:"radar",defaults:{}},i={id:"doughnut",defaults:{}},n={id:"polarArea",defaults:{}},o={id:"bubble",defaults:{}},c={id:"pie",defaults:{}},x={id:"scatter",defaults:{}};function u(){}let m={extend:()=>{}},g={id:"arc",defaults:{}},h={id:"line",defaults:{}},p={id:"bar",defaults:{}},b={id:"point",defaults:{}},f={id:"category",defaults:{}},j={id:"linear",defaults:{}},v={id:"radialLinear",defaults:{}},y={id:"time",defaults:{}},N={id:"tooltip",defaults:{},positioners:{}},C={id:"legend",defaults:{}},w={id:"title",defaults:{}},E={id:"filler",defaults:{}},_=[g,h,p,b,f,j,v,y,N,C,w],F=a},33823:(e,l,t)=>{t.r(l),t.d(l,{default:()=>o});var a=t(95155),s=t(12115),r=t(80561),d=t(32060),i=t(29729);d.Chart.register(d.ArcElement,d.Tooltip,d.Legend,d.CategoryScale,d.LinearScale,d.PointElement,d.LineElement,d.Title);let n=[{value:"1",label:"1 Month"},{value:"6",label:"6 Months"},{value:"12",label:"1 Year"},{value:"60",label:"5 Years"},{value:"all",label:"All Time"}];function o(){let[e,l]=(0,s.useState)("12"),[t,d]=(0,s.useState)(null);(0,s.useEffect)(()=>{o()},[e]);let o=async()=>{try{let l=await i.SP.get("/api/analysis/financial-data/get_chart_data",{params:{x_axis:"date",y_axis:"sales",time_granularity:e}});d(l.data)}catch(e){console.error("Error fetching data:",e)}};if(!t)return(0,a.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})});let c=t.reduce((e,l)=>e+l.sales,0),x=t.reduce((e,l)=>e+l.cogs,0),u=t.reduce((e,l)=>e+l.operating_expenses,0),m=c-x-u,g={labels:t.map(e=>e.date),datasets:[{label:"Revenue",data:t.map(e=>e.sales),fill:!1,borderColor:"rgb(75, 192, 192)",tension:.1},{label:"Cost of Goods Sold",data:t.map(e=>e.cogs),fill:!1,borderColor:"rgb(255, 99, 132)",tension:.1},{label:"Operating Expenses",data:t.map(e=>e.operating_expenses),fill:!1,borderColor:"rgb(255, 205, 86)",tension:.1}]};return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Profit & Loss Analysis"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"timeRange",className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Range"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("select",{id:"timeRange",value:e,onChange:e=>{l(e.target.value)},className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:n.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-6 mt-6",children:[(0,a.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Profit & Loss Breakdown"}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,a.jsx)(r.Fq,{data:{labels:["Revenue","Cost of Goods Sold","Operating Expenses"],datasets:[{data:[c,x,u],backgroundColor:["#36A2EB","#FFCE56","#FF6384"],hoverBackgroundColor:["#36A2EB","#FFCE56","#FF6384"]}]}})})]}),(0,a.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Financial Trends Over Time"}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,a.jsx)(r.N1,{data:g})})]})]}),(0,a.jsxs)("div",{className:"mt-8 bg-gray-50 p-5 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:["$",c.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Total Cost of Goods Sold"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-yellow-500",children:["$",x.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Total Operating Expenses"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-red-500",children:["$",u.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Net Income"}),(0,a.jsxs)("p",{className:"text-xl font-bold ".concat(m>=0?"text-green-600":"text-red-600"),children:["$",m.toFixed(2)]})]})]})]})]})}},80561:(e,l,t)=>{t.d(l,{Fq:()=>x,N1:()=>n,nu:()=>c,yP:()=>o});var a=t(55166),s=t(36465),r=t(95155);t(12115);var d=t(32060);let i=e=>{var{type:l,height:t="300px",width:a="100%"}=e;return(0,s._)(e,["type","height","width"]),(0,r.jsx)("div",{style:{height:t,width:a,backgroundColor:"#f5f5f5",border:"1px solid #ddd",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsxs)("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:[l.charAt(0).toUpperCase()+l.slice(1)," Chart"]}),(0,r.jsx)("div",{style:{fontSize:"0.8rem",color:"#666"},children:"(Chart rendering disabled)"})]})})},n=e=>(0,r.jsx)(i,(0,a._)({type:"line"},e)),o=e=>(0,r.jsx)(i,(0,a._)({type:"bar"},e)),c=e=>(0,r.jsx)(i,(0,a._)({type:"doughnut"},e)),x=e=>(0,r.jsx)(i,(0,a._)({type:"pie"},e));e=>(0,r.jsx)(i,(0,a._)({type:"radar"},e)),d.default}}]);