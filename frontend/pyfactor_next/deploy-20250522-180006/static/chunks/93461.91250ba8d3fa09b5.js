"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93461],{93461:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var r=a(55166),s=a(68387),d=a(36465),l=a(95155),n=a(12115),c=a(29729);function i(e){var{children:t,value:a,index:n}=e,c=(0,d._)(e,["children","value","index"]);return(0,l.jsx)("div",(0,s._)((0,r._)({role:"tabpanel",className:"".concat(a!==n?"hidden":""),id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},c),{children:a===n&&(0,l.jsx)("div",{className:"p-4",children:t})}))}a(87449);let o=()=>{let[e,t]=(0,n.useState)(0),[a,d]=(0,n.useState)([]),[o,m]=(0,n.useState)(null),[x,u]=(0,n.useState)({name:"",period:"",start_date:"",end_date:"",department:"",notes:"",items:[]});(0,n.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=await c.SP.get("/api/finance/budgets/");d(e.data)}catch(e){console.error("Error fetching budgets:",e)}},h=e=>{t(e)},b=e=>{u((0,s._)((0,r._)({},x),{[e.target.name]:e.target.value}))},g=(e,t,a)=>{let d=[...x.items];d[e]=(0,s._)((0,r._)({},d[e]),{[t]:a}),u((0,s._)((0,r._)({},x),{items:d}))},y=async e=>{e.preventDefault();try{o?await c.SP.put("/api/finance/budgets/".concat(o.id,"/"),x):await c.SP.post("/api/finance/budgets/",x),p(),u({name:"",period:"",start_date:"",end_date:"",department:"",notes:"",items:[]}),m(null),t(1)}catch(e){console.error("Error saving budget:",e)}},j=e=>{m(e),u(e),t(0)},v=async e=>{if(window.confirm("Are you sure you want to delete this budget?"))try{await c.SP.delete("/api/finance/budgets/".concat(e,"/")),p()}catch(e){console.error("Error deleting budget:",e)}},N=e=>e?new Date(e).toISOString().split("T")[0]:"";return(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{className:"border-b border-gray-200",children:(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)("button",{className:"py-2 px-4 font-medium ".concat(0===e?"text-blue-600 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>h(0),children:"Create/Edit Budget"}),(0,l.jsx)("button",{className:"py-2 px-4 font-medium ".concat(1===e?"text-blue-600 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>h(1),children:"Budget List"}),(0,l.jsx)("button",{className:"py-2 px-4 font-medium ".concat(2===e?"text-blue-600 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>h(2),children:"Budget Details"}),(0,l.jsx)("button",{className:"py-2 px-4 font-medium ".concat(3===e?"text-blue-600 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>h(3),children:"Budget vs Actual"})]})}),(0,l.jsx)(i,{value:e,index:0,children:(0,l.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget Name"}),(0,l.jsx)("input",{id:"name",name:"name",type:"text",value:x.name,onChange:b,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"period",className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),(0,l.jsxs)("select",{id:"period",name:"period",value:x.period,onChange:b,className:"w-full p-2 border border-gray-300 rounded-md bg-white",children:[(0,l.jsx)("option",{value:"",children:"Select a period"}),(0,l.jsx)("option",{value:"monthly",children:"Monthly"}),(0,l.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,l.jsx)("option",{value:"annually",children:"Annually"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"start_date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,l.jsx)("input",{id:"start_date",name:"start_date",type:"date",value:N(x.start_date),onChange:b,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"end_date",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,l.jsx)("input",{id:"end_date",name:"end_date",type:"date",value:N(x.end_date),onChange:b,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,l.jsx)("input",{id:"department",name:"department",type:"text",value:x.department,onChange:b,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,l.jsx)("textarea",{id:"notes",name:"notes",value:x.notes,onChange:b,rows:4,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Budget Items"}),(0,l.jsx)("div",{className:"space-y-3",children:x.items.map((e,t)=>(0,l.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,l.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Code"}),(0,l.jsx)("input",{type:"text",value:e.account_code,onChange:e=>g(t,"account_code",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,l.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Name"}),(0,l.jsx)("input",{type:"text",value:e.account_name,onChange:e=>g(t,"account_name",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,l.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Budgeted Amount"}),(0,l.jsx)("input",{type:"number",value:e.budgeted_amount,onChange:e=>g(t,"budgeted_amount",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})]})]},t))}),(0,l.jsx)("button",{type:"button",onClick:()=>{u((0,s._)((0,r._)({},x),{items:[...x.items,{account_code:"",account_name:"",budgeted_amount:0}]}))},className:"mt-3 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Add Budget Item"})]}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:o?"Update Budget":"Create Budget"})})]})}),(0,l.jsx)(i,{value:e,index:1,children:(0,l.jsx)("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"End Date"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.name}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.period}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.start_date}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.end_date}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.department}),(0,l.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[(0,l.jsx)("button",{onClick:()=>j(e),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),(0,l.jsx)("button",{onClick:()=>v(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id))})]})})}),(0,l.jsx)(i,{value:e,index:2,children:(0,l.jsx)("p",{className:"text-gray-700",children:"Select a budget from the list to view details."})}),(0,l.jsx)(i,{value:e,index:3,children:(0,l.jsx)("p",{className:"text-gray-700",children:"Budget vs Actual comparison will be shown here."})})]})}}}]);