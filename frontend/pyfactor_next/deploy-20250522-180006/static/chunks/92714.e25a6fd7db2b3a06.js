"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92714],{92714:(e,a,s)=>{s.r(a),s.d(a,{default:()=>m});var t=s(55166),l=s(68387),n=s(95155),i=s(12115),r=s(68084),c=s(42749),o=s(19689),d=s(8754);let m=()=>{let[e,a]=(0,i.useState)([]),[s,m]=(0,i.useState)(!0),[x,h]=(0,i.useState)(0),[u,p]=(0,i.useState)(10),[b,g]=(0,i.useState)(0),[f,v]=(0,i.useState)(""),[j,w]=(0,i.useState)(""),[y,N]=(0,i.useState)(!1),[k,_]=(0,i.useState)(!1),[C,S]=(0,i.useState)(null),M=(0,r.P)(e=>e.token);(0,i.useEffect)(()=>{(async()=>{m(!0);try{let e="/api/crm/leads/?page=".concat(x+1,"&limit=").concat(u,"&search=").concat(f);j&&(e+="&status=".concat(j));let s=await fetch(e,{headers:{Authorization:"Bearer ".concat(M)}});if(s.ok){let e=await s.json();a(e.results||[]),g(e.count||0)}else{c.vF.error("Failed to fetch leads");let e=[{id:"1",first_name:"Thomas",last_name:"Anderson",company_name:"Future Tech",email:"thomas@futuretech.com",phone:"555-1111",source:"Website",status:"new",assigned_to_name:"Alex Johnson"},{id:"2",first_name:"Lisa",last_name:"Chen",company_name:"Innovative Solutions",email:"lisa@innosol.com",phone:"555-2222",source:"Referral",status:"contacted",assigned_to_name:"Maria Garcia"},{id:"3",first_name:"David",last_name:"Williams",company_name:"Peak Performance",email:"david@peakperf.com",phone:"555-3333",source:"Event",status:"qualified",assigned_to_name:"Alex Johnson"},{id:"4",first_name:"Emily",last_name:"Taylor",company_name:"Global Retail",email:"emily@globalretail.com",phone:"555-4444",source:"Social Media",status:"unqualified",assigned_to_name:"James Wilson"},{id:"5",first_name:"Mohammed",last_name:"Ali",company_name:"Fast Logistics",email:"mohammed@fastlog.com",phone:"555-5555",source:"Email Campaign",status:"converted",assigned_to_name:"Maria Garcia"}];a(e),g(e.length)}}catch(s){c.vF.error("Error fetching leads:",s);let e=[{id:"1",first_name:"Thomas",last_name:"Anderson",company_name:"Future Tech",email:"thomas@futuretech.com",phone:"555-1111",source:"Website",status:"new",assigned_to_name:"Alex Johnson"},{id:"2",first_name:"Lisa",last_name:"Chen",company_name:"Innovative Solutions",email:"lisa@innosol.com",phone:"555-2222",source:"Referral",status:"contacted",assigned_to_name:"Maria Garcia"},{id:"3",first_name:"David",last_name:"Williams",company_name:"Peak Performance",email:"david@peakperf.com",phone:"555-3333",source:"Event",status:"qualified",assigned_to_name:"Alex Johnson"},{id:"4",first_name:"Emily",last_name:"Taylor",company_name:"Global Retail",email:"emily@globalretail.com",phone:"555-4444",source:"Social Media",status:"unqualified",assigned_to_name:"James Wilson"},{id:"5",first_name:"Mohammed",last_name:"Ali",company_name:"Fast Logistics",email:"mohammed@fastlog.com",phone:"555-5555",source:"Email Campaign",status:"converted",assigned_to_name:"Maria Garcia"}];a(e),g(e.length)}finally{m(!1)}})()},[x,u,f,j,M]);let A=e=>{h(e)},L=e=>{w(e.target.value),h(0)},E=e=>{S(e),N(!0)},P=e=>{S(e),_(!0)},q=async()=>{if(C)try{(await fetch("/api/crm/leads/".concat(C.id,"/convert/"),{method:"POST",headers:{Authorization:"Bearer ".concat(M),"Content-Type":"application/json"}})).ok?a(e.map(e=>e.id===C.id?(0,l._)((0,t._)({},e),{status:"converted"}):e)):c.vF.error("Failed to convert lead")}catch(e){c.vF.error("Error converting lead:",e)}finally{_(!1),S(null)}},F=()=>{N(!1),_(!1),S(null)};return s&&0===e.length?(0,n.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,n.jsx)("div",{className:"w-12 h-12 border-4 border-t-blue-500 border-b-blue-700 rounded-full animate-spin"})}):(0,n.jsxs)("div",{className:"p-6 bg-gray-50",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-black mb-4",children:"Lead Management"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[(0,n.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,n.jsx)("h2",{className:"text-sm font-medium text-black",children:"Total Leads"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-black mt-2",children:b})]}),(0,n.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,n.jsx)("h2",{className:"text-sm font-medium text-black",children:"New Leads (30d)"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-black mt-2",children:e.filter(e=>"new"===e.status).length})]}),(0,n.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,n.jsx)("h2",{className:"text-sm font-medium text-black",children:"Qualified"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-black mt-2",children:e.filter(e=>"qualified"===e.status).length})]}),(0,n.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,n.jsx)("h2",{className:"text-sm font-medium text-black",children:"Conversion Rate"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-black mt-2",children:e.length>0?"".concat(Math.round(e.filter(e=>"converted"===e.status).length/e.length*100),"%"):"0%"})]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center flex-wrap gap-4 mb-6",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,n.jsx)(d.WI,{className:"h-5 w-5 text-gray-400"})}),(0,n.jsx)("input",{type:"text",placeholder:"Search Leads",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-white text-black focus:ring-blue-500 focus:border-blue-500 min-w-[300px]",value:f,onChange:e=>{v(e.target.value),h(0)}})]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("button",{className:"flex items-center px-4 py-2 border border-gray-300 rounded-md bg-white text-black hover:bg-gray-50 transition-colors",onClick:()=>w(""),children:[(0,n.jsx)(d.O7,{className:"h-5 w-5 mr-2"}),"Filter",(0,n.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),j&&(0,n.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:(0,n.jsxs)("div",{className:"p-2",children:[(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"Status"}),(0,n.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded text-black",value:j,onChange:L,children:[(0,n.jsx)("option",{value:"",children:"All Statuses"}),[{value:"new",label:"New",color:"blue"},{value:"contacted",label:"Contacted",color:"indigo"},{value:"qualified",label:"Qualified",color:"green"},{value:"unqualified",label:"Unqualified",color:"yellow"},{value:"converted",label:"Converted",color:"purple"}].map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"Source"}),(0,n.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded text-black",value:j,onChange:L,children:[(0,n.jsx)("option",{value:"",children:"All Sources"}),["Website","Referral","Social Media","Event","Phone Inquiry","Email Campaign","Partner","Other"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsx)("div",{className:"mt-3 flex justify-end",children:(0,n.jsx)("button",{className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>w(""),children:"Clear"})})]})})]}),(0,n.jsxs)("button",{className:"flex items-center px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:[(0,n.jsx)(d.RE,{className:"h-5 w-5 mr-2"}),"Add Lead"]})]})]}),(0,n.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-100",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider",children:"Name"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider",children:"Company"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider",children:"Email"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider",children:"Phone"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider",children:"Status"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider",children:"Source"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-black uppercase tracking-wider",children:"Actions"})]})}),(0,n.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,n.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsx)("div",{className:"text-sm font-medium text-black",children:"".concat(e.first_name," ").concat(e.last_name)})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsx)("div",{className:"text-sm text-black",children:e.company_name||"-"})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsx)("div",{className:"text-sm text-black",children:e.email})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsx)("div",{className:"text-sm text-black",children:e.phone||"-"})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full \n                        ".concat("new"===e.status?"bg-blue-100 text-blue-800":"contacted"===e.status?"bg-yellow-100 text-yellow-800":"qualified"===e.status?"bg-green-100 text-green-800":"unqualified"===e.status?"bg-red-100 text-red-800":"converted"===e.status?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsx)("div",{className:"text-sm text-black",children:e.source||"-"})}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,n.jsx)("button",{className:"text-blue-600 hover:text-blue-900 mr-3",onClick:()=>P(e),children:(0,n.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,n.jsx)("button",{className:"text-red-600 hover:text-red-900",onClick:()=>E(e),children:(0,n.jsx)(d.d7,{className:"h-5 w-5"})})]})]},e.id))})]})}),(0,n.jsx)("div",{className:"px-6 py-3 flex items-center justify-between border-t border-gray-200",children:(0,n.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("p",{className:"text-sm text-black",children:["Showing ",(0,n.jsx)("span",{className:"font-medium",children:e.length>0?(x-1)*u+1:0})," to ",(0,n.jsx)("span",{className:"font-medium",children:Math.min(x*u,b)})," of"," ",(0,n.jsx)("span",{className:"font-medium",children:b})," results"]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,n.jsxs)("button",{onClick:()=>A(x-1),disabled:1===x,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-black hover:bg-gray-50 ".concat(1===x?"opacity-50 cursor-not-allowed":""),children:[(0,n.jsx)("span",{className:"sr-only",children:"Previous"}),(0,n.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),[...Array(Math.ceil(b/u)).keys()].map((e,a)=>(0,n.jsx)("button",{onClick:()=>A(a+1),className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium ".concat(x===a+1?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white text-black hover:bg-gray-50"),children:a+1},a)),(0,n.jsxs)("button",{onClick:()=>A(x+1),disabled:x===Math.ceil(b/u),className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-black hover:bg-gray-50 ".concat(x===Math.ceil(b/u)?"opacity-50 cursor-not-allowed":""),children:[(0,n.jsx)("span",{className:"sr-only",children:"Next"}),(0,n.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})})]}),(0,n.jsxs)(o.lG,{open:k,onClose:F,className:"relative z-50",children:[(0,n.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,n.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,n.jsxs)(o.lG.Panel,{className:"mx-auto max-w-md rounded-lg bg-white p-6 shadow-xl",children:[(0,n.jsx)(o.lG.Title,{className:"text-lg font-medium text-black mb-4",children:"Convert Lead to Customer"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsxs)("p",{className:"text-sm text-black",children:["Are you sure you want to convert",C&&' "'.concat(C.first_name," ").concat(C.last_name,'"'),"from ",null==C?void 0:C.company_name," to a customer? This will create a new customer record in the system."]})}),(0,n.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,n.jsx)("button",{onClick:F,className:"px-4 py-2 border border-gray-300 rounded-md text-black bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,n.jsx)("button",{onClick:q,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Convert"})]})]})})]})]})}}}]);