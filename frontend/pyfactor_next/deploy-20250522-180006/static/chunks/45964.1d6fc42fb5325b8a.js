"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45964],{45964:(e,s,r)=>{r.r(s),r.d(s,{default:()=>j});var a=r(95155),t=r(12115),l=r(3963),n=r(42749),d=r(29670);let i=async(e,s)=>(n.vF.debug("Querying AI with:",{query:e,businessData:s}),await new Promise(e=>setTimeout(e,1500)),{response:'This is a simulated response to your query: "'.concat(e,'". In a real implementation, this would come from Claude 3.7 Sonnet or another AI model.'),tokensUsed:Math.floor(200*Math.random())+50,cost:(.05*Math.random()).toFixed(3)}),o={free:{name:"Free Tier",tokens:5},professional:{name:"Professional Tier",tokens:10},enterprise:{name:"Enterprise Tier",tokens:15}},c=[{id:"basic",tokens:10,price:4.99},{id:"standard",tokens:25,price:9.99},{id:"premium",tokens:50,price:16.99},{id:"business",tokens:100,price:29.99}],x=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}),m=()=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,a.jsx)("path",{d:"M8 2a1 1 0 000 2h2a1 1 0 100-2H8z"}),(0,a.jsx)("path",{d:"M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5zM15 11h2a1 1 0 110 2h-2v-2z"})]}),u=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),h=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})}),b=()=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,a.jsx)("path",{d:"M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z",clipRule:"evenodd"})]}),p=()=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,a.jsx)("path",{fillRule:"evenodd",d:"M5 5a3 3 0 015-2.236A3 3 0 0114.83 6H16a2 2 0 110 4h-5V9a1 1 0 10-2 0v1H4a2 2 0 110-4h1.17C5.06 5.687 5 5.35 5 5zm4 1V5a1 1 0 10-1 1h1zm3 0a1 1 0 10-1-1v1h1z",clipRule:"evenodd"}),(0,a.jsx)("path",{d:"M9 11H3v5a2 2 0 002 2h4v-7zM11 18h4a2 2 0 002-2v-5h-6v7z"})]}),g=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),y=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),j=e=>{var s;let{userData:r}=e,[n,j]=(0,t.useState)(""),[f,v]=(0,t.useState)([]),[k,w]=(0,t.useState)(!1),[N,C]=(0,t.useState)(0),[S,M]=(0,t.useState)(0),[z,A]=(0,t.useState)(0),[H,Q]=(0,t.useState)(!1),[T,$]=(0,t.useState)(!1),[R,F]=(0,t.useState)([]),[I,P]=(0,t.useState)("card"),[V,W]=(0,t.useState)("standard"),[q,B]=(0,t.useState)(0),E=(0,t.useRef)(null),U=(null==(s=o[(null==r?void 0:r.subscription_type)||"free"])?void 0:s.tokens)||o.free.tokens;(0,t.useEffect)(()=>{E.current&&(E.current.scrollTop=E.current.scrollHeight)},[f]),(0,t.useEffect)(()=>{let e=(0,d.gd)("aiQueryHistory"),s=(0,d.gd)("aiQueryTokens"),r=(0,d.gd)("aiQueryCost"),a=(0,d.gd)("aiQueryRemainingTokens");if(e)try{F("string"==typeof e?JSON.parse(e):e)}catch(e){console.error("Error parsing saved query history:",e)}s&&C(parseInt(s,10)||0),r&&A(parseFloat(r)||0),a?M(parseInt(a,10)):(M(U),(0,d.mm)("aiQueryRemainingTokens",U.toString()))},[U]);let _=async e=>{if(e.preventDefault(),n.trim()){if(S<=0)return void $(!0);j(""),w(!0),v(e=>[...e,{type:"user",content:n}]);try{let e=await i(n,{sales:[],customers:[],products:[],expenses:[]});v(s=>[...s,{type:"ai",content:e.response,tokensUsed:e.tokensUsed,cost:e.cost}]);let s=N+e.tokensUsed,r=z+parseFloat(e.cost),a=S-1;C(s),A(parseFloat(r.toFixed(3))),M(a);let t=[{query:n,response:e.response,timestamp:new Date().toISOString(),tokensUsed:e.tokensUsed,cost:e.cost},...R];F(t),(0,d.mm)("aiQueryHistory",t),(0,d.mm)("aiQueryTokens",s.toString()),(0,d.mm)("aiQueryCost",r.toString()),(0,d.mm)("aiQueryRemainingTokens",a.toString())}catch(e){console.error("Error querying AI:",e),v(e=>[...e,{type:"error",content:"Sorry, there was an error processing your request. Please try again."}])}finally{w(!1)}}},D=e=>{navigator.clipboard.writeText(e)},L=e=>{j(e.query),Q(!1)},Y=(e,s)=>{B(s)};return(0,a.jsxs)("div",{className:"h-[calc(100vh-130px)] relative text-blue-900",children:[(0,a.jsxs)("div",{className:"sticky top-0 z-50 p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex flex-col md:flex-row justify-between md:items-center gap-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-blue-900 dark:text-blue-100",children:"A.I. Query"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center w-full sm:w-auto",children:[(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-50 dark:bg-blue-900 border border-blue-500 text-blue-800 dark:text-blue-100",children:[S," Credits Remaining"]}),(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-50 dark:bg-blue-900 border border-blue-500 text-blue-800 dark:text-blue-100",children:["Used: ",N]}),(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-50 dark:bg-blue-900 border border-blue-500 text-blue-800 dark:text-blue-100",children:["Cost: $",z.toFixed(3)]}),(0,a.jsxs)(l.$n,{variant:"primary",onClick:()=>{$(!0)},className:"sm:w-auto w-full flex items-center justify-center",children:[(0,a.jsx)(h,{}),(0,a.jsx)("span",{className:"ml-2",children:"Buy Credits"})]}),(0,a.jsx)("button",{onClick:()=>Q(!0),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"View history",children:(0,a.jsx)(u,{})})]})]}),(0,a.jsx)("div",{ref:E,className:"h-[calc(100%-180px)] overflow-y-auto p-4 pb-28 mb-16",children:0===f.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-blue-900 dark:text-blue-100",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Ask questions about your business data"}),(0,a.jsx)("p",{className:"text-center max-w-lg mb-4",children:"Examples:"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2 max-w-lg w-full",children:[(0,a.jsx)(l.$n,{variant:"outlined",onClick:()=>j("What was my highest selling product last month?"),className:"border-blue-900 text-blue-900 dark:border-blue-400 dark:text-blue-100",children:"What was my highest selling product last month?"}),(0,a.jsx)(l.$n,{variant:"outlined",onClick:()=>j("Show me the trends in my monthly expenses this year"),className:"border-blue-900 text-blue-900 dark:border-blue-400 dark:text-blue-100",children:"Show me the trends in my monthly expenses this year"}),(0,a.jsx)(l.$n,{variant:"outlined",onClick:()=>j("Which customer has spent the most money with us?"),className:"border-blue-900 text-blue-900 dark:border-blue-400 dark:text-blue-100",children:"Which customer has spent the most money with us?"})]})]}):(0,a.jsx)("div",{className:"space-y-4",children:f.map((e,s)=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.type?"justify-end":"justify-start"),children:(0,a.jsx)("div",{className:"max-w-[80%] rounded-lg shadow-sm border \n                  ".concat("user"===e.type?"bg-blue-50 dark:bg-blue-900 border-blue-100 dark:border-blue-800":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"," \n                  ").concat("error"===e.type?"border-red-500 dark:border-red-500":""),children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("p",{className:"user"===e.type?"text-blue-900 dark:text-blue-100":"text-gray-800 dark:text-gray-100",children:e.content}),e.tokensUsed&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 my-2"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Tokens: ",e.tokensUsed," | Cost: $",e.cost]}),(0,a.jsx)("button",{className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>D(e.content),"aria-label":"Copy response",children:(0,a.jsx)(m,{})})]})]})]})})},s))})}),(0,a.jsxs)("form",{onSubmit:_,className:"fixed bottom-20 left-0 sm:left-[70px] lg:left-[260px] right-0 sm:w-[calc(100%-70px)] lg:w-[calc(100%-260px)] p-4 sm:p-6 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-50 flex justify-center shadow-md",children:[(0,a.jsxs)("div",{className:"flex space-x-2 w-full max-w-6xl",children:[(0,a.jsx)(l.A_,{fullWidth:!0,placeholder:"Ask a question about your business data...",value:n,onChange:e=>j(e.target.value),disabled:k,className:"border-blue-900 focus:ring-blue-500 rounded-lg"}),(0,a.jsx)(l.$n,{variant:"primary",type:"submit",disabled:k||!n.trim()||S<=0,className:"h-14 min-w-[100px] rounded-lg",children:k?(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Send"]}):(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsx)(x,{}),(0,a.jsx)("span",{className:"ml-2",children:"Send"})]})})]}),S<=0&&(0,a.jsx)("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 w-full max-w-6xl bg-yellow-50 border-l-4 border-yellow-400 p-4 text-yellow-700",children:(0,a.jsx)("p",{className:"font-medium",children:"You've used all your AI credits. Purchase more to continue using AI Query."})})]}),(0,a.jsxs)(l.lG,{open:H,onClose:()=>Q(!1),children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:"Query History"}),(0,a.jsx)(l.$n,{variant:"outlined",onClick:()=>{F([]),(0,d.A6)("aiQueryHistory")},disabled:0===R.length,className:"text-red-600 border-red-600 hover:bg-red-50",children:"Clear History"})]})}),(0,a.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 max-h-[60vh] overflow-y-auto",children:0===R.length?(0,a.jsx)("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No query history yet"}):(0,a.jsx)("div",{className:"space-y-4",children:R.map((e,s)=>(0,a.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>L(e),children:[(0,a.jsx)("p",{className:"font-medium text-blue-900 dark:text-blue-100 truncate",children:e.query}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 truncate",children:[e.response.substring(0,100),"..."]}),(0,a.jsxs)("div",{className:"flex justify-between mt-2 text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("span",{children:new Date(e.timestamp).toLocaleString()}),(0,a.jsxs)("span",{children:["Tokens: ",e.tokensUsed," | Cost: $",e.cost]})]})]},s))})}),(0,a.jsx)("div",{className:"p-4 flex justify-end",children:(0,a.jsx)(l.$n,{onClick:()=>Q(!1),className:"text-blue-900 dark:text-blue-100",children:"Close"})})]}),(0,a.jsxs)(l.lG,{open:T,onClose:()=>$(!1),children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:"Purchase AI Credits"}),(0,a.jsx)("button",{onClick:()=>$(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:(0,a.jsx)(y,{})})]})}),(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("p",{className:"mb-4 text-gray-700 dark:text-gray-300",children:"Select a token package to enhance your AI analytics capabilities:"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:c.map(e=>(0,a.jsxs)("div",{className:"p-4 text-center rounded-lg cursor-pointer ".concat(V===e.id?"border-2 border-blue-900 bg-blue-50 dark:bg-blue-900/30 dark:border-blue-500":"border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"),onClick:()=>W(e.id),children:[(0,a.jsxs)("p",{className:"text-lg text-blue-900 dark:text-blue-100",children:[e.tokens," Credits"]}),(0,a.jsxs)("p",{className:"text-xl font-bold my-2 text-blue-900 dark:text-blue-100",children:["$",e.price.toFixed(2)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["$",(e.price/e.tokens).toFixed(2)," per credit"]}),(0,a.jsx)("div",{className:"mt-2 flex justify-center",children:(0,a.jsx)("input",{type:"radio",checked:V===e.id,onChange:()=>W(e.id),value:e.id,name:"token-package-radio","aria-label":"".concat(e.tokens," tokens"),className:"form-radio h-5 w-5 text-blue-600"})})]},e.id))}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("button",{className:"flex items-center py-2 px-4 ".concat(0===q?"text-blue-600 border-b-2 border-blue-600 font-medium":"text-gray-500 hover:text-blue-600"),onClick:e=>Y(e,0),"aria-label":"Credit/Debit Card",children:[(0,a.jsx)(b,{}),(0,a.jsx)("span",{className:"ml-2",children:"Credit/Debit Card"})]}),(0,a.jsxs)("button",{className:"flex items-center py-2 px-4 text-gray-400 cursor-not-allowed",disabled:!0,"aria-label":"PayPal",children:[(0,a.jsx)(p,{}),(0,a.jsx)("span",{className:"ml-2",children:"PayPal"})]}),(0,a.jsxs)("button",{className:"flex items-center py-2 px-4 text-gray-400 cursor-not-allowed",disabled:!0,"aria-label":"Mobile Money",children:[(0,a.jsx)(g,{}),(0,a.jsx)("span",{className:"ml-2",children:"Mobile Money"})]})]})}),(0,a.jsxs)("div",{className:"p-4",children:[0===q&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Enter Your Card Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[(0,a.jsx)("div",{className:"md:col-span-12",children:(0,a.jsx)(l.A_,{fullWidth:!0,label:"Card Number",placeholder:"1234 5678 9012 3456",endAdornment:(0,a.jsx)(b,{})})}),(0,a.jsx)("div",{className:"md:col-span-6",children:(0,a.jsx)(l.A_,{fullWidth:!0,label:"Expiry Date",placeholder:"MM/YY"})}),(0,a.jsx)("div",{className:"md:col-span-6",children:(0,a.jsx)(l.A_,{fullWidth:!0,label:"CVV",placeholder:"123",type:"password"})}),(0,a.jsx)("div",{className:"md:col-span-12",children:(0,a.jsx)(l.A_,{fullWidth:!0,label:"Name on Card",placeholder:"John Doe"})})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"Your payment is secure and encrypted. We use Stripe for secure payment processing."})]}),1===q&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{children:"PayPal integration coming soon"})}),2===q&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{children:"Mobile Money integration coming soon"})})]})]})]}),(0,a.jsxs)("div",{className:"p-4 flex justify-end space-x-2",children:[(0,a.jsx)(l.$n,{variant:"text",onClick:()=>$(!1),className:"text-blue-900 dark:text-blue-100",children:"Cancel"}),(0,a.jsx)(l.$n,{variant:"primary",onClick:()=>{let e=c.find(e=>e.id===V);if(e){let s=S+e.tokens;M(s),(0,d.mm)("aiQueryRemainingTokens",s.toString()),$(!1),alert("Successfully purchased ".concat(e.tokens," tokens for $").concat(e.price.toFixed(2),"!"))}},disabled:0!==q,children:"Purchase"})]})]})]})}}}]);