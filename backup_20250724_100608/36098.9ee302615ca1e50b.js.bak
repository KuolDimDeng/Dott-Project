try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d0a4012c-a46b-4867-8a26-7a023dc98215",e._sentryDebugIdIdentifier="sentry-dbid-d0a4012c-a46b-4867-8a26-7a023dc98215")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36098],{836098:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var r=a(455166),o=a(768387),s=a(695155),l=a(212115),n=a(42186),c=a(580021),d=a(681931);a(868773);var i=a(703354),u=a(351174),m=a(371455),p=a(990135);function y(){let[e,t]=(0,l.useState)(""),[a,y]=(0,l.useState)(""),[g,x]=(0,l.useState)(""),[h,b]=(0,l.useState)(null),[f,v]=(0,l.useState)(!1),[k,S]=(0,l.useState)(null),[j,R]=(0,l.useState)({includeFilters:!0,includeSummary:!0,includeDate:!0});(0,l.useEffect)(()=>{(async()=>{let e=await (0,u.jW)();e&&(S(e),console.log("[InventoryReports] Tenant ID initialized:",e))})()},[]);let w=async()=>{if(!e||!a||!g)return void i.Ay.error("Please select report type and date range");if(new Date(a)>new Date(g))return void i.Ay.error("Start date must be before end date");v(!0),console.log("[InventoryReports] Generating report:",{reportType:e,startDate:a,endDate:g});try{let t={"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("accessToken")||"")},r=await fetch("".concat("https://dott-api-y26w.onrender.com","/api/reports/inventory"),{method:"POST",headers:t,body:JSON.stringify({report_type:e,start_date:a,end_date:g})});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let o=await r.json();console.log("[InventoryReports] Report data received:",o);let s=N(o,e);b(s),i.Ay.success("Report generated successfully")}catch(t){console.error("[InventoryReports] Error generating report:",t),i.Ay.error("Failed to generate report. Using sample data."),D(e)}finally{v(!1)}},N=(e,t)=>{let r="".concat((0,n.G)(new Date(a),"MM/dd/yyyy")," - ").concat((0,n.G)(new Date(g),"MM/dd/yyyy"));switch(t){case"stock-levels":return{title:"Stock Levels Report",dateRange:r,columns:["Product Code","Product Name","Current Stock","Min Stock","Max Stock","Status","Value"],data:e.items||[],summary:e.summary||{}};case"stock-movements":return{title:"Stock Movements Report",dateRange:r,columns:["Date","Product","Type","Quantity","From","To","Reference","User"],data:e.movements||[],summary:e.summary||{}};case"low-stock":return{title:"Low Stock Alert Report",dateRange:r,columns:["Product Code","Product Name","Current Stock","Min Stock","Days to Stockout","Reorder Qty"],data:e.lowStockItems||[],summary:e.summary||{}};default:return{title:"Inventory Report",dateRange:r,data:e.items||[],summary:e.summary||{}}}},D=e=>{let t="".concat((0,n.G)(new Date(a),"MM/dd/yyyy")," - ").concat((0,n.G)(new Date(g),"MM/dd/yyyy")),r=null;switch(e){case"stock-levels":r={title:"Stock Levels Report",dateRange:t,columns:["Product Code","Product Name","Current Stock","Min Stock","Max Stock","Status","Value"],data:[["PRD-001","Widget A",150,50,500,"In Stock","$15,000.00"],["PRD-002","Widget B",25,30,300,"Low Stock","$2,500.00"],["PRD-003","Widget C",0,20,200,"Out of Stock","$0.00"],["PRD-004","Widget D",300,100,1e3,"In Stock","$45,000.00"],["PRD-005","Widget E",75,50,250,"In Stock","$5,625.00"]],summary:{totalProducts:5,totalValue:"$68,125.00",inStock:3,lowStock:1,outOfStock:1,averageStockLevel:"30%"}};break;case"stock-movements":r={title:"Stock Movements Report",dateRange:t,columns:["Date","Product","Type","Quantity","From","To","Reference","User"],data:[["2024-01-15","Widget A","Purchase",100,"Supplier","Warehouse A","PO-2024-001","John Doe"],["2024-01-16","Widget B","Sale",-50,"Warehouse A","Customer","INV-2024-001","Jane Smith"],["2024-01-17","Widget C","Transfer",25,"Warehouse A","Warehouse B","TRF-2024-001","Bob Johnson"],["2024-01-18","Widget A","Adjustment",-5,"Warehouse A","Damaged","ADJ-2024-001","Alice Brown"],["2024-01-19","Widget D","Return",10,"Customer","Warehouse A","RET-2024-001","Charlie Wilson"]],summary:{totalMovements:5,totalInbound:110,totalOutbound:-55,netChange:55,movementTypes:{purchase:1,sale:1,transfer:1,adjustment:1,return:1}}};break;case"low-stock":r={title:"Low Stock Alert Report",dateRange:t,columns:["Product Code","Product Name","Current Stock","Min Stock","Days to Stockout","Reorder Qty"],data:[["PRD-002","Widget B",25,30,5,275],["PRD-006","Widget F",15,20,3,180],["PRD-007","Widget G",8,15,1,142],["PRD-008","Widget H",40,50,8,210],["PRD-009","Widget I",5,10,1,95]],summary:{criticalItems:3,warningItems:2,totalLowStock:5,estimatedReorderCost:"$45,750.00",averageDaysToStockout:3.6}};break;case"stock-valuation":r={title:"Stock Valuation Report",dateRange:t,columns:["Product Category","Total Quantity","Average Cost","Total Cost","Market Value","Profit Margin"],data:[["Electronics",500,"$150.00","$75,000.00","$112,500.00","50%"],["Accessories",1200,"$25.00","$30,000.00","$42,000.00","40%"],["Components",3500,"$5.00","$17,500.00","$26,250.00","50%"],["Tools",250,"$80.00","$20,000.00","$30,000.00","50%"],["Supplies",800,"$10.00","$8,000.00","$12,000.00","50%"]],summary:{totalCategories:5,totalQuantity:6250,totalCostValue:"$150,500.00",totalMarketValue:"$222,750.00",averageMargin:"48%",potentialProfit:"$72,250.00"}};break;case"supplier-performance":r={title:"Supplier Performance Report",dateRange:t,columns:["Supplier","Orders","On-Time Delivery","Quality Score","Total Spend","Avg Lead Time"],data:[["Acme Supplies",25,"96%","4.8/5","$125,000","3 days"],["Global Parts Co",18,"88%","4.5/5","$87,500","5 days"],["Quick Stock Ltd",32,"92%","4.6/5","$156,000","2 days"],["Reliable Sources",15,"100%","4.9/5","$67,000","4 days"],["Budget Supplies",22,"75%","3.8/5","$45,000","7 days"]],summary:{totalSuppliers:5,totalOrders:112,averageOnTime:"90.2%",averageQuality:"4.52/5",totalSpend:"$480,500",bestPerformer:"Reliable Sources"}};break;default:r={title:"Inventory Report",dateRange:t,message:"Report data not available for this report type"}}b(r)};return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-black mb-2 flex items-center",children:[(0,s.jsx)(m.A,{className:"h-6 w-6 text-blue-600 mr-2"}),"Inventory Reports"]}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Generate comprehensive reports for inventory analysis, stock levels, movements, and valuation insights."})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Configure Report"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"reportType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),(0,s.jsxs)("select",{id:"reportType",value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Select a report type"}),[{value:"stock-levels",label:"Stock Levels Report"},{value:"stock-movements",label:"Stock Movements Report"},{value:"low-stock",label:"Low Stock Alert Report"},{value:"stock-valuation",label:"Stock Valuation Report"},{value:"stock-adjustments",label:"Stock Adjustments Report"},{value:"location-stock",label:"Stock by Location"},{value:"supplier-performance",label:"Supplier Performance Report"},{value:"product-turnover",label:"Product Turnover Report"},{value:"expiring-stock",label:"Expiring Stock Report"},{value:"dead-stock",label:"Dead Stock Report"}].map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),(0,s.jsx)("input",{type:"date",id:"startDate",value:a,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),(0,s.jsx)("input",{type:"date",id:"endDate",value:g,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-end",children:(0,s.jsx)("button",{onClick:w,disabled:f||!e||!a||!g,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white ".concat(!f&&e&&a&&g?"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"bg-gray-400 cursor-not-allowed"),children:f?(0,s.jsx)(p.az,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Generate Report"]})})})]}),h?(0,s.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:h.title}),(0,s.jsx)("p",{className:"text-blue-100 mt-1",children:h.dateRange})]}),(0,s.jsx)("div",{className:"p-6",children:h.message?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-500",children:h.message})}):(0,s.jsxs)(s.Fragment,{children:[h.columns&&h.data&&(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsx)("tr",{children:h.columns.map((e,t)=>(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e},t))})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.data.map((e,t)=>(0,s.jsx)("tr",{className:"hover:bg-gray-50",children:Array.isArray(e)?e.map((e,t)=>(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e},t)):h.columns.map((t,a)=>(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e[t]||"-"},a))},t))})]})}),h.summary&&Object.keys(h.summary).length>0&&(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Report Summary"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(h.summary).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:t.replace(/([A-Z])/g," $1").trim()}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:a})]},t)})})]})]})}),(0,s.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:j.includeFilters,onChange:e=>R((0,o._)((0,r._)({},j),{includeFilters:e.target.checked}))}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Include Filters"})]}),(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:j.includeSummary,onChange:e=>R((0,o._)((0,r._)({},j),{includeSummary:e.target.checked}))}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Include Summary"})]})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsxs)("button",{onClick:()=>{if(h)try{let t=new d.default;if(t.setFontSize(18),t.text(h.title,14,22),t.setFontSize(11),j.includeDate&&t.text("Generated on: ".concat((0,n.G)(new Date,"yyyy-MM-dd HH:mm")),14,32),j.includeFilters&&h.dateRange&&t.text("Date Range: ".concat(h.dateRange),14,38),h.columns&&h.data&&(t.autoTable({startY:45,head:[h.columns],body:h.data,theme:"grid",headStyles:{fillColor:[59,130,246],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[248,250,252]},margin:{top:50},styles:{overflow:"linebreak",cellPadding:3,fontSize:9}}),j.includeSummary&&h.summary)){let e=t.lastAutoTable.finalY+10;t.setFontSize(14),t.text("Summary",14,e),t.setFontSize(10);let a=e+8;Object.entries(h.summary).forEach(e=>{let[r,o]=e,s=r.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase());t.text("".concat(s,": ").concat(o),14,a),a+=6})}let a="inventory_".concat(e,"_").concat((0,n.G)(new Date,"yyyyMMdd_HHmmss"),".pdf");t.save(a),i.Ay.success("Report exported to PDF"),console.log("[InventoryReports] PDF exported:",a)}catch(e){console.error("[InventoryReports] Error exporting to PDF:",e),i.Ay.error("Failed to export PDF")}},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,s.jsx)("svg",{className:"mr-2 -ml-1 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Export PDF"]}),(0,s.jsxs)("button",{onClick:()=>{if(h)try{let t=c.utils.book_new();if(h.columns&&h.data){let e=[h.columns,...h.data],a=c.utils.aoa_to_sheet(e),r=h.columns.map((e,t)=>{let a=Math.max(e.length,...h.data.map(e=>String(e[t]||"").length));return{wch:Math.min(a+2,50)}});if(a["!cols"]=r,c.utils.book_append_sheet(t,a,"Report Data"),j.includeSummary&&h.summary){let e=[["Summary"],[""],...Object.entries(h.summary).map(e=>{let[t,a]=e;return[t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),a]})],a=c.utils.aoa_to_sheet(e);c.utils.book_append_sheet(t,a,"Summary")}if(j.includeFilters){let e=[["Report Information"],[""],["Report Type",h.title],["Date Range",h.dateRange],["Generated On",(0,n.G)(new Date,"yyyy-MM-dd HH:mm:ss")],["Generated By","Inventory Management System"]],a=c.utils.aoa_to_sheet(e);c.utils.book_append_sheet(t,a,"Report Info")}}let a="inventory_".concat(e,"_").concat((0,n.G)(new Date,"yyyyMMdd_HHmmss"),".xlsx");c.writeFile(t,a),i.Ay.success("Report exported to Excel"),console.log("[InventoryReports] Excel exported:",a)}catch(e){console.error("[InventoryReports] Error exporting to Excel:",e),i.Ay.error("Failed to export Excel")}},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,s.jsx)("svg",{className:"mr-2 -ml-1 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Excel"]})]})]})})]}):null,!1]})}}}]);