const path = require('path')

const dir = path.join(__dirname)

process.env.NODE_ENV = 'production'
process.chdir(__dirname)

const currentPort = parseInt(process.env.PORT, 10) || 3000
const hostname = process.env.HOSTNAME || '0.0.0.0'

let keepAliveTimeout = parseInt(process.env.KEEP_ALIVE_TIMEOUT, 10)
const nextConfig = {"env":{"_sentryRewriteFramesDistDir":".next","_sentryRewriteFramesAssetPrefixPath":"","_sentryRelease":"1b97b2f43cf7a45fba1e9276c8d26bd3cbdaf845","NEXT_PUBLIC_CRISP_WEBSITE_ID":"82ce1965-8acf-4c6e-b8c0-a543ead8004e","NEXT_PUBLIC_AUTH0_DOMAIN":"dev-cbyy63jovi6zrcos.us.auth0.com","NEXT_PUBLIC_AUTH0_AUDIENCE":"https://api.dottapps.com","NEXT_PUBLIC_AUTH0_CLIENT_ID":"9i7GSU4bgh6hFtMXnQACwiRxTudpuOSF","NEXT_PUBLIC_API_URL":"https://dott-api-y26w.onrender.com","NEXT_PUBLIC_BASE_URL":"http://localhost:3000","NEXT_PUBLIC_OAUTH_REDIRECT_SIGN_IN":"http://localhost:3000/api/auth/callback","NEXT_PUBLIC_OAUTH_REDIRECT_SIGN_OUT":"http://localhost:3000/auth/signin","NEXT_PUBLIC_OAUTH_SCOPES":"openid,profile,email","NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY":"pk_test_51RI9epFls6i75mQBc3JI8lpcOUnaMlYAGmbDgOrIylbAqUaCOG035DlZFz35vneimME1QmdSiFiObsv3kcnCSNFi000AABL5EU","NEXT_PUBLIC_SENTRY_DSN":"https://74deffcfad997262710d99acb797fef8@o4509614361804800.ingest.us.sentry.io/4509614433304576","NEXT_PUBLIC_GOOGLE_MAPS_API_KEY":"AIzaSyCC7KgQRztJDsoaQa94zMO7F4Pa-4R73E0","APP_BASE_URL":"http://localhost:3000","AUTH0_BASE_URL":"http://localhost:3000","AUTH0_ISSUER_BASE_URL":"https://auth.dottapps.com","AUTH0_CLIENT_ID":"9i7GSU4bgh6hFtMXnQACwiRxTudpuOSF","AUTH0_CLIENT_SECRET":"IqdjbqNX47Uk7gBOhBFWLQG-ndZ47xI6rNruwpf4jF--5fhZPEMU0INz5ZWTw1qX","AUTH0_DOMAIN":"auth.dottapps.com","AUTH0_SECRET":"l2Je9HkkLgAHNBQ1czyebJFdl18sm51nBL6yAoMyVt4="},"eslint":{"ignoreDuringBuilds":true},"typescript":{"ignoreBuildErrors":true,"tsconfigPath":"tsconfig.json"},"distDir":"./.next","cleanDistDir":true,"assetPrefix":"","cacheMaxMemorySize":52428800,"configOrigin":"next.config.js","useFileSystemPublicRoutes":true,"generateEtags":true,"pageExtensions":["js","jsx"],"poweredByHeader":true,"compress":true,"images":{"deviceSizes":[640,750,828,1080,1200,1920,2048,3840],"imageSizes":[16,32,48,64,96,128,256,384],"path":"/_next/image","loader":"default","loaderFile":"","domains":["api.dottapps.com","dottapps.com","www.dottapps.com","via.placeholder.com","images.unsplash.com","cdn.dottapps.com"],"disableStaticImages":false,"minimumCacheTTL":60,"formats":["image/webp"],"dangerouslyAllowSVG":true,"contentSecurityPolicy":"default-src 'self'; script-src 'none'; sandbox;","contentDispositionType":"attachment","remotePatterns":[{"protocol":"https","hostname":"**.dottapps.com"}],"unoptimized":true},"devIndicators":{"position":"bottom-left"},"onDemandEntries":{"maxInactiveAge":60000,"pagesBufferLength":5},"amp":{"canonicalBase":""},"basePath":"","sassOptions":{},"trailingSlash":false,"i18n":null,"productionBrowserSourceMaps":false,"excludeDefaultMomentLocales":true,"serverRuntimeConfig":{},"publicRuntimeConfig":{},"reactProductionProfiling":false,"reactStrictMode":true,"reactMaxHeadersLength":6000,"httpAgentOptions":{"keepAlive":true},"logging":{},"expireTime":31536000,"staticPageGenerationTimeout":60,"output":"standalone","modularizeImports":{"@mui/icons-material":{"transform":"@mui/icons-material/{{member}}"},"lodash":{"transform":"lodash/{{member}}"}},"outputFileTracingRoot":"/Users/kuoldeng/projectx/frontend/pyfactor_next","experimental":{"nodeMiddleware":false,"cacheLife":{"default":{"stale":300,"revalidate":900,"expire":4294967294},"seconds":{"stale":0,"revalidate":1,"expire":60},"minutes":{"stale":300,"revalidate":60,"expire":3600},"hours":{"stale":300,"revalidate":3600,"expire":86400},"days":{"stale":300,"revalidate":86400,"expire":604800},"weeks":{"stale":300,"revalidate":604800,"expire":2592000},"max":{"stale":300,"revalidate":2592000,"expire":4294967294}},"cacheHandlers":{},"cssChunking":true,"multiZoneDraftMode":false,"appNavFailHandling":false,"prerenderEarlyExit":true,"serverMinification":true,"serverSourceMaps":false,"linkNoTouchStart":false,"caseSensitiveRoutes":false,"clientSegmentCache":false,"dynamicOnHover":false,"preloadEntriesOnStart":true,"clientRouterFilter":true,"clientRouterFilterRedirects":false,"fetchCacheKeyPrefix":"","middlewarePrefetch":"flexible","optimisticClientCache":true,"manualClientBasePath":false,"cpus":2,"memoryBasedWorkersCount":false,"imgOptConcurrency":null,"imgOptTimeoutInSeconds":7,"imgOptMaxInputPixels":268402689,"imgOptSequentialRead":null,"isrFlushToDisk":true,"workerThreads":false,"optimizeCss":false,"nextScriptWorkers":false,"scrollRestoration":false,"externalDir":false,"disableOptimizedLoading":false,"gzipSize":true,"craCompat":false,"esmExternals":true,"fullySpecified":false,"swcTraceProfiling":false,"forceSwcTransforms":false,"largePageDataBytes":128000,"typedRoutes":false,"typedEnv":false,"clientTraceMetadata":["baggage","sentry-trace"],"parallelServerCompiles":false,"parallelServerBuildTraces":false,"ppr":false,"authInterrupts":false,"webpackMemoryOptimizations":false,"optimizeServerReact":true,"useEarlyImport":false,"viewTransition":false,"routerBFCache":false,"staleTimes":{"dynamic":0,"static":300},"serverComponentsHmrCache":true,"staticGenerationMaxConcurrency":8,"staticGenerationMinPagesPerWorker":25,"dynamicIO":false,"inlineCss":false,"useCache":false,"serverActions":{"bodySizeLimit":"2mb","allowedOrigins":["dottapps.com","www.dottapps.com"]},"optimizePackageImports":["lodash","date-fns","@heroicons/react","react-icons","@stripe/stripe-js","lucide-react","lodash-es","ramda","antd","react-bootstrap","ahooks","@ant-design/icons","@headlessui/react","@headlessui-float/react","@heroicons/react/20/solid","@heroicons/react/24/solid","@heroicons/react/24/outline","@visx/visx","@tremor/react","rxjs","@mui/material","@mui/icons-material","recharts","react-use","effect","@effect/schema","@effect/platform","@effect/platform-node","@effect/platform-browser","@effect/platform-bun","@effect/sql","@effect/sql-mssql","@effect/sql-mysql2","@effect/sql-pg","@effect/sql-squlite-node","@effect/sql-squlite-bun","@effect/sql-squlite-wasm","@effect/sql-squlite-react-native","@effect/rpc","@effect/rpc-http","@effect/typeclass","@effect/experimental","@effect/opentelemetry","@material-ui/core","@material-ui/icons","@tabler/icons-react","mui-core","react-icons/ai","react-icons/bi","react-icons/bs","react-icons/cg","react-icons/ci","react-icons/di","react-icons/fa","react-icons/fa6","react-icons/fc","react-icons/fi","react-icons/gi","react-icons/go","react-icons/gr","react-icons/hi","react-icons/hi2","react-icons/im","react-icons/io","react-icons/io5","react-icons/lia","react-icons/lib","react-icons/lu","react-icons/md","react-icons/pi","react-icons/ri","react-icons/rx","react-icons/si","react-icons/sl","react-icons/tb","react-icons/tfi","react-icons/ti","react-icons/vsc","react-icons/wi"],"trustHostHeader":false,"isExperimentalCompile":false},"htmlLimitedBots":"Mediapartners-Google|Slurp|DuckDuckBot|baiduspider|yandex|sogou|bitlybot|tumblr|vkShare|quora link preview|redditbot|ia_archiver|Bingbot|BingPreview|applebot|facebookexternalhit|facebookcatalog|Twitterbot|LinkedInBot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|Yeti","bundlePagesRouterDependencies":false,"configFileName":"next.config.js","serverExternalPackages":["amqplib","connect","dataloader","express","generic-pool","graphql","@hapi/hapi","ioredis","kafkajs","koa","lru-memoizer","mongodb","mongoose","mysql","mysql2","knex","pg","pg-pool","@node-redis/client","@redis/client","redis","tedious"],"turbopack":{"root":"/Users/kuoldeng/projectx/frontend/pyfactor_next"},"_originalRewrites":{"beforeFiles":[],"afterFiles":[{"source":"/api/backend-health","destination":"https://dott-api-y26w.onrender.com/health/"},{"source":"/api/backend/:path*","destination":"https://dott-api-y26w.onrender.com/:path*"}],"fallback":[]},"_originalRedirects":[{"source":"/tenant/:tenantId/dashboard","destination":"/:tenantId/dashboard","permanent":true},{"source":"/tenant/:tenantId/dashboard/:path*","destination":"/:tenantId/dashboard/:path*","permanent":true},{"source":"/tenant/:tenantId/:path*","destination":"/:tenantId/:path*","permanent":true},{"source":"/onboarding/components/stepundefined","destination":"/onboarding/step1","permanent":false},{"source":"/onboarding/components/:path*","destination":"/onboarding/step1","permanent":false}]}

process.env.__NEXT_PRIVATE_STANDALONE_CONFIG = JSON.stringify(nextConfig)

require('next')
const { startServer } = require('next/dist/server/lib/start-server')

if (
  Number.isNaN(keepAliveTimeout) ||
  !Number.isFinite(keepAliveTimeout) ||
  keepAliveTimeout < 0
) {
  keepAliveTimeout = undefined
}

startServer({
  dir,
  isDev: false,
  config: nextConfig,
  hostname,
  port: currentPort,
  allowRetry: false,
  keepAliveTimeout,
}).catch((err) => {
  console.error(err);
  process.exit(1);
});