try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a1492787-3cc5-40e1-86e3-29721bd73815",e._sentryDebugIdIdentifier="sentry-dbid-a1492787-3cc5-40e1-86e3-29721bd73815")}catch(e){}"use strict";exports.id=97422,exports.ids=[97422],exports.modules={97422:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var r=a(649431),s=a(427490),o=a(529384),l=a(140417),n=a(384349);a(271325);var d=a(725410);a(617732);var i=a(127579),c=a(623093);function u(){let[e,t]=(0,s.useState)(""),[a,u]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[y,g]=(0,s.useState)(null),[x,h]=(0,s.useState)(!1),[b,v]=(0,s.useState)(null),[f,k]=(0,s.useState)({includeFilters:!0,includeSummary:!0,includeDate:!0}),S=async()=>{if(!e||!a||!m)return void d.Ay.error("Please select report type and date range");if(new Date(a)>new Date(m))return void d.Ay.error("Start date must be before end date");h(!0),console.log("[InventoryReports] Generating report:",{reportType:e,startDate:a,endDate:m});try{let t={"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`},r=await fetch("https://dott-api-y26w.onrender.com/api/reports/inventory",{method:"POST",headers:t,body:JSON.stringify({report_type:e,start_date:a,end_date:m})});if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);let s=await r.json();console.log("[InventoryReports] Report data received:",s);let o=j(s,e);g(o),d.Ay.success("Report generated successfully")}catch(t){console.error("[InventoryReports] Error generating report:",t),d.Ay.error("Failed to generate report. Using sample data."),R(e)}finally{h(!1)}},j=(e,t)=>{let r=`${(0,o.G)(new Date(a),"MM/dd/yyyy")} - ${(0,o.G)(new Date(m),"MM/dd/yyyy")}`;switch(t){case"stock-levels":return{title:"Stock Levels Report",dateRange:r,columns:["Product Code","Product Name","Current Stock","Min Stock","Max Stock","Status","Value"],data:e.items||[],summary:e.summary||{}};case"stock-movements":return{title:"Stock Movements Report",dateRange:r,columns:["Date","Product","Type","Quantity","From","To","Reference","User"],data:e.movements||[],summary:e.summary||{}};case"low-stock":return{title:"Low Stock Alert Report",dateRange:r,columns:["Product Code","Product Name","Current Stock","Min Stock","Days to Stockout","Reorder Qty"],data:e.lowStockItems||[],summary:e.summary||{}};default:return{title:"Inventory Report",dateRange:r,data:e.items||[],summary:e.summary||{}}}},R=e=>{let t=`${(0,o.G)(new Date(a),"MM/dd/yyyy")} - ${(0,o.G)(new Date(m),"MM/dd/yyyy")}`,r=null;switch(e){case"stock-levels":r={title:"Stock Levels Report",dateRange:t,columns:["Product Code","Product Name","Current Stock","Min Stock","Max Stock","Status","Value"],data:[["PRD-001","Widget A",150,50,500,"In Stock","$15,000.00"],["PRD-002","Widget B",25,30,300,"Low Stock","$2,500.00"],["PRD-003","Widget C",0,20,200,"Out of Stock","$0.00"],["PRD-004","Widget D",300,100,1e3,"In Stock","$45,000.00"],["PRD-005","Widget E",75,50,250,"In Stock","$5,625.00"]],summary:{totalProducts:5,totalValue:"$68,125.00",inStock:3,lowStock:1,outOfStock:1,averageStockLevel:"30%"}};break;case"stock-movements":r={title:"Stock Movements Report",dateRange:t,columns:["Date","Product","Type","Quantity","From","To","Reference","User"],data:[["2024-01-15","Widget A","Purchase",100,"Supplier","Warehouse A","PO-2024-001","John Doe"],["2024-01-16","Widget B","Sale",-50,"Warehouse A","Customer","INV-2024-001","Jane Smith"],["2024-01-17","Widget C","Transfer",25,"Warehouse A","Warehouse B","TRF-2024-001","Bob Johnson"],["2024-01-18","Widget A","Adjustment",-5,"Warehouse A","Damaged","ADJ-2024-001","Alice Brown"],["2024-01-19","Widget D","Return",10,"Customer","Warehouse A","RET-2024-001","Charlie Wilson"]],summary:{totalMovements:5,totalInbound:110,totalOutbound:-55,netChange:55,movementTypes:{purchase:1,sale:1,transfer:1,adjustment:1,return:1}}};break;case"low-stock":r={title:"Low Stock Alert Report",dateRange:t,columns:["Product Code","Product Name","Current Stock","Min Stock","Days to Stockout","Reorder Qty"],data:[["PRD-002","Widget B",25,30,5,275],["PRD-006","Widget F",15,20,3,180],["PRD-007","Widget G",8,15,1,142],["PRD-008","Widget H",40,50,8,210],["PRD-009","Widget I",5,10,1,95]],summary:{criticalItems:3,warningItems:2,totalLowStock:5,estimatedReorderCost:"$45,750.00",averageDaysToStockout:3.6}};break;case"stock-valuation":r={title:"Stock Valuation Report",dateRange:t,columns:["Product Category","Total Quantity","Average Cost","Total Cost","Market Value","Profit Margin"],data:[["Electronics",500,"$150.00","$75,000.00","$112,500.00","50%"],["Accessories",1200,"$25.00","$30,000.00","$42,000.00","40%"],["Components",3500,"$5.00","$17,500.00","$26,250.00","50%"],["Tools",250,"$80.00","$20,000.00","$30,000.00","50%"],["Supplies",800,"$10.00","$8,000.00","$12,000.00","50%"]],summary:{totalCategories:5,totalQuantity:6250,totalCostValue:"$150,500.00",totalMarketValue:"$222,750.00",averageMargin:"48%",potentialProfit:"$72,250.00"}};break;case"supplier-performance":r={title:"Supplier Performance Report",dateRange:t,columns:["Supplier","Orders","On-Time Delivery","Quality Score","Total Spend","Avg Lead Time"],data:[["Acme Supplies",25,"96%","4.8/5","$125,000","3 days"],["Global Parts Co",18,"88%","4.5/5","$87,500","5 days"],["Quick Stock Ltd",32,"92%","4.6/5","$156,000","2 days"],["Reliable Sources",15,"100%","4.9/5","$67,000","4 days"],["Budget Supplies",22,"75%","3.8/5","$45,000","7 days"]],summary:{totalSuppliers:5,totalOrders:112,averageOnTime:"90.2%",averageQuality:"4.52/5",totalSpend:"$480,500",bestPerformer:"Reliable Sources"}};break;default:r={title:"Inventory Report",dateRange:t,message:"Report data not available for this report type"}}g(r)};return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-black mb-2 flex items-center",children:[(0,r.jsx)(i.A,{className:"h-6 w-6 text-blue-600 mr-2"}),"Inventory Reports"]}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Generate comprehensive reports for inventory analysis, stock levels, movements, and valuation insights."})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Configure Report"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"reportType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),(0,r.jsxs)("select",{id:"reportType",value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Select a report type"}),[{value:"stock-levels",label:"Stock Levels Report"},{value:"stock-movements",label:"Stock Movements Report"},{value:"low-stock",label:"Low Stock Alert Report"},{value:"stock-valuation",label:"Stock Valuation Report"},{value:"stock-adjustments",label:"Stock Adjustments Report"},{value:"location-stock",label:"Stock by Location"},{value:"supplier-performance",label:"Supplier Performance Report"},{value:"product-turnover",label:"Product Turnover Report"},{value:"expiring-stock",label:"Expiring Stock Report"},{value:"dead-stock",label:"Dead Stock Report"}].map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),(0,r.jsx)("input",{type:"date",id:"startDate",value:a,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),(0,r.jsx)("input",{type:"date",id:"endDate",value:m,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,r.jsx)("div",{className:"mt-6 flex justify-end",children:(0,r.jsx)("button",{onClick:S,disabled:x||!e||!a||!m,className:`inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white ${x||!e||!a||!m?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}`,children:x?(0,r.jsx)(c.az,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Generate Report"]})})})]}),y?(0,r.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:y.title}),(0,r.jsx)("p",{className:"text-blue-100 mt-1",children:y.dateRange})]}),(0,r.jsx)("div",{className:"p-6",children:y.message?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:y.message})}):(0,r.jsxs)(r.Fragment,{children:[y.columns&&y.data&&(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsx)("tr",{children:y.columns.map((e,t)=>(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e},t))})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:y.data.map((e,t)=>(0,r.jsx)("tr",{className:"hover:bg-gray-50",children:Array.isArray(e)?e.map((e,t)=>(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e},t)):y.columns.map((t,a)=>(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e[t]||"-"},a))},t))})]})}),y.summary&&Object.keys(y.summary).length>0&&(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Report Summary"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(y.summary).map(([e,t])=>(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:t})]},e))})]})]})}),(0,r.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:f.includeFilters,onChange:e=>k({...f,includeFilters:e.target.checked})}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Include Filters"})]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:f.includeSummary,onChange:e=>k({...f,includeSummary:e.target.checked})}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Include Summary"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)("button",{onClick:()=>{if(y)try{let t=new n.default;if(t.setFontSize(18),t.text(y.title,14,22),t.setFontSize(11),f.includeDate&&t.text(`Generated on: ${(0,o.G)(new Date,"yyyy-MM-dd HH:mm")}`,14,32),f.includeFilters&&y.dateRange&&t.text(`Date Range: ${y.dateRange}`,14,38),y.columns&&y.data&&(t.autoTable({startY:45,head:[y.columns],body:y.data,theme:"grid",headStyles:{fillColor:[59,130,246],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[248,250,252]},margin:{top:50},styles:{overflow:"linebreak",cellPadding:3,fontSize:9}}),f.includeSummary&&y.summary)){let e=t.lastAutoTable.finalY+10;t.setFontSize(14),t.text("Summary",14,e),t.setFontSize(10);let a=e+8;Object.entries(y.summary).forEach(([e,r])=>{let s=e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase());t.text(`${s}: ${r}`,14,a),a+=6})}let a=`inventory_${e}_${(0,o.G)(new Date,"yyyyMMdd_HHmmss")}.pdf`;t.save(a),d.Ay.success("Report exported to PDF"),console.log("[InventoryReports] PDF exported:",a)}catch(e){console.error("[InventoryReports] Error exporting to PDF:",e),d.Ay.error("Failed to export PDF")}},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,r.jsx)("svg",{className:"mr-2 -ml-1 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Export PDF"]}),(0,r.jsxs)("button",{onClick:()=>{if(y)try{let t=l.utils.book_new();if(y.columns&&y.data){let e=[y.columns,...y.data],a=l.utils.aoa_to_sheet(e),r=y.columns.map((e,t)=>{let a=Math.max(e.length,...y.data.map(e=>String(e[t]||"").length));return{wch:Math.min(a+2,50)}});if(a["!cols"]=r,l.utils.book_append_sheet(t,a,"Report Data"),f.includeSummary&&y.summary){let e=[["Summary"],[""],...Object.entries(y.summary).map(([e,t])=>[e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),t])],a=l.utils.aoa_to_sheet(e);l.utils.book_append_sheet(t,a,"Summary")}if(f.includeFilters){let e=[["Report Information"],[""],["Report Type",y.title],["Date Range",y.dateRange],["Generated On",(0,o.G)(new Date,"yyyy-MM-dd HH:mm:ss")],["Generated By","Inventory Management System"]],a=l.utils.aoa_to_sheet(e);l.utils.book_append_sheet(t,a,"Report Info")}}let a=`inventory_${e}_${(0,o.G)(new Date,"yyyyMMdd_HHmmss")}.xlsx`;l.writeFile(t,a),d.Ay.success("Report exported to Excel"),console.log("[InventoryReports] Excel exported:",a)}catch(e){console.error("[InventoryReports] Error exporting to Excel:",e),d.Ay.error("Failed to export Excel")}},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,r.jsx)("svg",{className:"mr-2 -ml-1 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Excel"]})]})]})})]}):null,!1]})}}};
//# sourceMappingURL=97422.js.map