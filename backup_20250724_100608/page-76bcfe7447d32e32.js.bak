try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0a6aeb05-965e-4d24-8d23-e16c24f9c8d0",e._sentryDebugIdIdentifier="sentry-dbid-0a6aeb05-965e-4d24-8d23-e16c24f9c8d0")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1844],{257374:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var n=s(695155),c=s(212115),o=s(148585);function a(){var e,t,s,a;let[i,l]=(0,c.useState)({}),[r,d]=(0,c.useState)(!0);(0,c.useEffect)(()=>{u()},[]);let u=async()=>{let e={};e.countryMapping={kenyaNameToCode:(0,o.gI)("Kenya"),kenyaCodeToName:(0,o.qQ)("KE"),testConversion:{input:"Kenya",output:(0,o.gI)("Kenya"),expected:"KE"}};try{console.log("\uD83E\uDDEA Test 1: Calling /api/pricing/by-country?country=KE");let t=await fetch("/api/pricing/by-country?country=KE"),s=await t.json();e.withCountryCode={success:t.ok,status:t.status,data:s,discount:s.discount_percentage,expectedDiscount:50},console.log("\uD83E\uDDEA Test 1 Result:",s)}catch(t){e.withCountryCode={error:t.message}}try{console.log("\uD83E\uDDEA Test 2: Calling /api/pricing/by-country?country=Kenya");let t=await fetch("/api/pricing/by-country?country=Kenya"),s=await t.json();e.withCountryName={success:t.ok,status:t.status,data:s,discount:s.discount_percentage,note:"This should return US pricing (0% discount) because backend expects country code"},console.log("\uD83E\uDDEA Test 2 Result:",s)}catch(t){e.withCountryName={error:t.message}}try{console.log("\uD83E\uDDEA Test 3: Direct backend call with KE");let t="".concat("https://dott-api-y26w.onrender.com","/onboarding/api/pricing/by-country/?country=KE");console.log("\uD83E\uDDEA Backend URL:",t);let s=await fetch(t),n=await s.json();e.directBackend={success:s.ok,status:s.status,data:n,url:t,discount:n.discount_percentage},console.log("\uD83E\uDDEA Test 3 Result:",n)}catch(t){e.directBackend={error:t.message}}l(e),d(!1)};if(r)return(0,n.jsx)("div",{className:"p-8",children:"Running tests..."});let y=(null==(t=i.countryMapping)||null==(e=t.testConversion)?void 0:e.output)==="KE"&&(null==(s=i.withCountryCode)?void 0:s.discount)===50&&(null==(a=i.directBackend)?void 0:a.discount)===50;return(0,n.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Kenya Pricing Fix Test Results"}),(0,n.jsxs)("div",{className:"mb-6 p-4 rounded-lg ".concat(y?"bg-green-50":"bg-red-50"),children:[(0,n.jsxs)("h2",{className:"text-lg font-semibold mb-2",children:["Overall Status: ",y?"✅ FIXED":"❌ STILL BROKEN"]}),(0,n.jsx)("p",{className:"text-sm",children:y?"Kenya discount is now working correctly with country code KE!":"There are still issues with the Kenya discount implementation."})]}),(0,n.jsx)("div",{className:"space-y-6",children:Object.entries(i).map(e=>{let[t,s]=e;return(0,n.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,n.jsx)("h2",{className:"font-semibold text-lg mb-2",children:t}),(0,n.jsx)("pre",{className:"text-sm overflow-auto bg-white p-2 rounded",children:JSON.stringify(s,null,2)})]},t)})}),(0,n.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Fix Summary:"}),(0,n.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[(0,n.jsx)("li",{children:"Business form now stores country codes (KE) instead of names (Kenya)"}),(0,n.jsx)("li",{children:"API calls now convert country names to codes before sending"}),(0,n.jsx)("li",{children:"Backend expects and correctly processes 2-letter country codes"}),(0,n.jsx)("li",{children:"Kenya (KE) should receive 50% discount on all plans"})]})]}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Run Tests Again"})})]})}},700307:(e,t,s)=>{Promise.resolve().then(s.bind(s,257374))}},e=>{var t=t=>e(e.s=t);e.O(0,[34223,85885,98197,42459,77358],()=>t(700307)),_N_E=e.O()}]);