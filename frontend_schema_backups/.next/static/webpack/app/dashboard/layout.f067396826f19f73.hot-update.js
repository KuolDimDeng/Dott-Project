"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/dashboard/layout",{

/***/ "(app-pages-browser)/./src/app/dashboard/DashboardClient.js":
/*!**********************************************!*\
  !*** ./src/app/dashboard/DashboardClient.js ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClientDataSync: () => (/* binding */ ClientDataSync),\n/* harmony export */   \"default\": () => (/* binding */ DashboardClient)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/logger */ \"(app-pages-browser)/./src/utils/logger.js\");\n/* harmony import */ var _DashboardWrapper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DashboardWrapper */ \"(app-pages-browser)/./src/app/dashboard/DashboardWrapper.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _constants_onboarding__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/constants/onboarding */ \"(app-pages-browser)/./src/constants/onboarding.js\");\n/* harmony import */ var _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/auth */ \"(app-pages-browser)/../../node_modules/.pnpm/@aws-amplify+core@6.11.1/node_modules/@aws-amplify/core/dist/esm/singleton/apis/fetchAuthSession.mjs\");\n/* harmony import */ var _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @aws-amplify/auth */ \"(app-pages-browser)/../../node_modules/.pnpm/@aws-amplify+auth@6.12.1_@aws-amplify+core@6.11.1/node_modules/@aws-amplify/auth/dist/esm/providers/cognito/apis/fetchUserAttributes.mjs\");\n/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dynamic */ \"(app-pages-browser)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/api/app-dynamic.js\");\n/* harmony import */ var _components_DashboardLoader__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/DashboardLoader */ \"(app-pages-browser)/./src/components/DashboardLoader.js\");\n/* harmony import */ var _context_NotificationContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/context/NotificationContext */ \"(app-pages-browser)/./src/context/NotificationContext.js\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next-auth/react */ \"(app-pages-browser)/../../node_modules/.pnpm/next-auth@4.24.11_next@15.2.2_react-dom@18.3.1_react@18.3.1/node_modules/next-auth/react/index.js\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_9__);\n/* __next_internal_client_entry_do_not_use__ ClientDataSync,default auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n// Dynamically import DatabaseAdmin component to avoid loading it until needed\nconst DatabaseAdmin = (0,next_dynamic__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(()=>__webpack_require__.e(/*! import() */ \"_app-pages-browser_src_components_DatabaseAdmin_js\").then(__webpack_require__.bind(__webpack_require__, /*! @/components/DatabaseAdmin */ \"(app-pages-browser)/./src/components/DatabaseAdmin.js\")), {\n    loadableGenerated: {\n        modules: [\n            \"app/dashboard/DashboardClient.js -> \" + \"@/components/DatabaseAdmin\"\n        ]\n    },\n    loading: ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            children: \"Loading database tools...\"\n        }, void 0, false, {\n            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n            lineNumber: 18,\n            columnNumber: 18\n        }, undefined),\n    ssr: false\n});\n_c = DatabaseAdmin;\n// Helper function to check if user has entered onboarding data\nfunction checkForUserOnboardingData() {\n    try {\n        // Check localStorage for business info\n        const businessInfo = localStorage.getItem('businessInfo');\n        if (businessInfo) {\n            try {\n                const parsedInfo = JSON.parse(businessInfo);\n                if (parsedInfo.businessName || parsedInfo.businessType) {\n                    return true;\n                }\n            } catch (e) {\n            // Invalid JSON, ignore\n            }\n        }\n        // Check for business name in localStorage directly\n        const businessName = localStorage.getItem('businessName');\n        if (businessName) return true;\n        // Check cookies for business info\n        const cookies = document.cookie.split(';');\n        for (const cookie of cookies){\n            const [name, value] = cookie.trim().split('=');\n            if (name === 'businessName' && value) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n// Helper to get business name from user data\nfunction getUserBusinessName() {\n    try {\n        // Try cookies first\n        const getCookie = (name)=>{\n            const value = \"; \".concat(document.cookie);\n            const parts = value.split(\"; \".concat(name, \"=\"));\n            if (parts.length === 2) return parts.pop().split(';').shift();\n            return null;\n        };\n        const cookieName = getCookie('businessName') || getCookie('custom:businessname');\n        if (cookieName) return cookieName;\n        // Then try localStorage\n        if (typeof localStorage !== 'undefined') {\n            try {\n                // Try businessInfo object\n                const storedInfo = localStorage.getItem('businessInfo');\n                if (storedInfo) {\n                    const parsedInfo = JSON.parse(storedInfo);\n                    if (parsedInfo.businessName) return parsedInfo.businessName;\n                }\n                // Try direct key\n                const directName = localStorage.getItem('businessName');\n                if (directName) return directName;\n            } catch (e) {\n            // Ignore localStorage errors\n            }\n        }\n    } catch (e) {\n    // Ignore any errors in this helper\n    }\n    return null;\n}\n// Helper to get business type from user data\nfunction getUserBusinessType() {\n    try {\n        // Try to get from localStorage businessInfo\n        const businessInfo = localStorage.getItem('businessInfo');\n        if (businessInfo) {\n            try {\n                const parsedInfo = JSON.parse(businessInfo);\n                if (parsedInfo.businessType) return parsedInfo.businessType;\n            } catch (e) {\n            // Invalid JSON, continue to other methods\n            }\n        }\n        // Try localStorage direct key\n        return localStorage.getItem('businessType');\n    } catch (e) {\n        return null;\n    }\n}\n// Client data synchronization component\nfunction ClientDataSync() {\n    _s();\n    const [syncComplete, setSyncComplete] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"ClientDataSync.useEffect\": ()=>{\n            // Function to sync tenant IDs and other client data\n            const syncClientData = {\n                \"ClientDataSync.useEffect.syncClientData\": async ()=>{\n                    try {\n                        var _document_cookie_split_find, _document_cookie_split_find1;\n                        // Get tenant ID from localStorage or cookies\n                        const tenantId = localStorage.getItem('tenantId') || ((_document_cookie_split_find = document.cookie.split(';').find({\n                            \"ClientDataSync.useEffect.syncClientData\": (c)=>c.trim().startsWith('tenantId=')\n                        }[\"ClientDataSync.useEffect.syncClientData\"])) === null || _document_cookie_split_find === void 0 ? void 0 : _document_cookie_split_find.split('=')[1]) || ((_document_cookie_split_find1 = document.cookie.split(';').find({\n                            \"ClientDataSync.useEffect.syncClientData\": (c)=>c.trim().startsWith('businessid=')\n                        }[\"ClientDataSync.useEffect.syncClientData\"])) === null || _document_cookie_split_find1 === void 0 ? void 0 : _document_cookie_split_find1.split('=')[1]);\n                        // Check if tenant ID is valid\n                        if (tenantId) {\n                            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info('[ClientDataSync] Synchronizing tenant ID:', tenantId);\n                            // Make sure tenant ID is consistent in all storage locations\n                            localStorage.setItem('tenantId', tenantId);\n                            document.cookie = \"tenantId=\".concat(tenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                            document.cookie = \"businessid=\".concat(tenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                        }\n                        // Sync tenant IDs to prevent corruption\n                        syncTenantIDs();\n                        // Mark sync as complete\n                        setSyncComplete(true);\n                    } catch (error) {\n                        _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('[ClientDataSync] Error syncing client data:', error);\n                        // Continue despite errors\n                        setSyncComplete(true);\n                    }\n                }\n            }[\"ClientDataSync.useEffect.syncClientData\"];\n            // Run sync on component mount\n            syncClientData();\n        }\n    }[\"ClientDataSync.useEffect\"], []);\n    // This component doesn't render anything visible\n    return null;\n}\n_s(ClientDataSync, \"9d2rLY7Mk5hO34AeMfmIXUYzN/4=\");\n_c1 = ClientDataSync;\n// Sync tenant IDs in client to prevent corruption\nconst syncTenantIDs = ()=>{\n    try {\n        var _document_cookie_split_find, _document_cookie_split_find1;\n        // Get tenant IDs from different sources\n        const tenantIdCookie = (_document_cookie_split_find = document.cookie.split('; ').find((row)=>row.startsWith('tenantId='))) === null || _document_cookie_split_find === void 0 ? void 0 : _document_cookie_split_find.split('=')[1];\n        const businessIdCookie = (_document_cookie_split_find1 = document.cookie.split('; ').find((row)=>row.startsWith('businessid='))) === null || _document_cookie_split_find1 === void 0 ? void 0 : _document_cookie_split_find1.split('=')[1];\n        const localStorageTenantId = localStorage.getItem('tenantId');\n        console.log('[ClientDataSync] Checking tenant IDs:', {\n            tenantIdCookie,\n            businessIdCookie,\n            localStorageTenantId\n        });\n        // Check if any tenant ID is invalid (corrupted)\n        if (tenantIdCookie && !isValidUUID(tenantIdCookie)) {\n            console.warn('[ClientDataSync] Detected corrupted tenantId cookie:', tenantIdCookie);\n            // Try to use a valid ID from another source\n            const validId = isValidUUID(localStorageTenantId) ? localStorageTenantId : isValidUUID(businessIdCookie) ? businessIdCookie : null;\n            if (validId) {\n                console.log('[ClientDataSync] Using valid tenant ID to replace corrupted cookie:', validId);\n                document.cookie = \"tenantId=\".concat(validId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                document.cookie = \"businessid=\".concat(validId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n            } else {\n                // If no valid ID found, delete the corrupted cookie\n                console.warn('[ClientDataSync] No valid tenant ID found, clearing corrupted cookie');\n                document.cookie = 'tenantId=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';\n                document.cookie = 'businessid=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';\n                // Try to fetch a tenant from server if authenticated\n                fetchTenantFromServer();\n            }\n        }\n        // Ensure consistency between localStorage and cookies if we have a valid ID\n        if (localStorageTenantId && isValidUUID(localStorageTenantId)) {\n            if (!tenantIdCookie || tenantIdCookie !== localStorageTenantId) {\n                console.log('[ClientDataSync] Using local storage tenant ID for cookies:', localStorageTenantId);\n                document.cookie = \"tenantId=\".concat(localStorageTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                document.cookie = \"businessid=\".concat(localStorageTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n            }\n        } else if (tenantIdCookie && isValidUUID(tenantIdCookie) && (!localStorageTenantId || localStorageTenantId !== tenantIdCookie)) {\n            // If cookie has valid ID but localStorage doesn't, update localStorage\n            console.log('[ClientDataSync] Using cookie tenant ID for localStorage:', tenantIdCookie);\n            localStorage.setItem('tenantId', tenantIdCookie);\n        } else if (!localStorageTenantId && !tenantIdCookie && !businessIdCookie) {\n            // If no tenant ID is found, try to get one from the server\n            fetchTenantFromServer();\n        }\n    } catch (error) {\n        console.error('[ClientDataSync] Error syncing tenant IDs:', error);\n    }\n};\n// Function to fetch a tenant ID from the server\nconst fetchTenantFromServer = async ()=>{\n    try {\n        console.log('[ClientDataSync] Attempting to fetch tenant from server...');\n        // Call getOrCreate endpoint to get or create a tenant\n        const response = await fetch('/api/tenant/getOrCreate', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n        if (!response.ok) {\n            throw new Error(\"Server responded with status: \".concat(response.status));\n        }\n        const data = await response.json();\n        if (data.success && data.tenantId) {\n            console.log('[ClientDataSync] Successfully obtained tenant ID from server:', data.tenantId);\n            // Store the tenant ID in localStorage and cookies\n            localStorage.setItem('tenantId', data.tenantId);\n            document.cookie = \"tenantId=\".concat(data.tenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n            document.cookie = \"businessid=\".concat(data.tenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n            // Refresh the page to apply the new tenant ID\n            window.location.reload();\n        } else {\n            console.error('[ClientDataSync] Failed to obtain tenant ID from server:', data.message);\n        }\n    } catch (error) {\n        console.error('[ClientDataSync] Error fetching tenant from server:', error);\n    }\n};\nfunction DashboardClient(param) {\n    let { newAccount, plan } = param;\n    _s1();\n    const [isClient, setIsClient] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isReady, setIsReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isAuthenticated, setIsAuthenticated] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [userData, setUserData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_4__.useRouter)();\n    const [isVerifyingTenant, setIsVerifyingTenant] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [tenantVerified, setTenantVerified] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [setupStatus, setSetupStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('pending');\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    // Replace constant logging with first-render-only logging\n    const isFirstRender = react__WEBPACK_IMPORTED_MODULE_1___default().useRef(true);\n    if (isFirstRender.current) {\n        console.log('DashboardClient initial render with props:', {\n            newAccount,\n            plan\n        });\n        isFirstRender.current = false;\n    }\n    // Add searchParams\n    const searchParams = (0,next_navigation__WEBPACK_IMPORTED_MODULE_4__.useSearchParams)();\n    // Add notification context\n    const { notifySuccess, notifyError, notifyWarning } = (0,_context_NotificationContext__WEBPACK_IMPORTED_MODULE_8__.useNotification)();\n    // Dashboard loading component\n    const DashboardLoadingState = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex items-center justify-center min-h-screen\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                        lineNumber: 286,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-xl font-semibold mb-2\",\n                        children: \"Loading your dashboard...\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                        lineNumber: 287,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-500\",\n                        children: \"Please wait while we retrieve your data.\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                        lineNumber: 288,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                lineNumber: 285,\n                columnNumber: 7\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n            lineNumber: 284,\n            columnNumber: 5\n        }, this);\n    // Dashboard error component\n    const DashboardErrorState = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex items-center justify-center min-h-screen\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center p-6 bg-red-50 rounded-lg max-w-md\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        className: \"h-12 w-12 text-red-500 mx-auto mb-4\",\n                        fill: \"none\",\n                        viewBox: \"0 0 24 24\",\n                        stroke: \"currentColor\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                            strokeLinecap: \"round\",\n                            strokeLinejoin: \"round\",\n                            strokeWidth: 2,\n                            d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n                        }, void 0, false, {\n                            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                            lineNumber: 304,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                        lineNumber: 297,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-xl font-semibold mb-2\",\n                        children: \"Unable to load dashboard\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                        lineNumber: 306,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-700 mb-4\",\n                        children: error || \"There was a problem loading your data. Please try again later.\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                        lineNumber: 307,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>window.location.reload(),\n                        className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\",\n                        children: \"Retry\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                        lineNumber: 308,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                lineNumber: 296,\n                columnNumber: 7\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n            lineNumber: 295,\n            columnNumber: 5\n        }, this);\n    // Function to fix missing attributes if needed\n    async function ensureUserAttributesComplete(session, userData) {\n        try {\n            // First, validate we have a valid session and tokens\n            if (!session || !session.tokens || !session.tokens.accessToken || !session.tokens.idToken) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn('[DashboardClient] Missing session or tokens, cannot update attributes');\n                return {\n                    success: false,\n                    error: 'Missing authentication tokens'\n                };\n            }\n            // Validate we have user data\n            if (!userData) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn('[DashboardClient] No user data provided, cannot check attributes');\n                return {\n                    success: false,\n                    error: 'No user data provided'\n                };\n            }\n            // Check for missing attributes\n            const missingAttributes = [];\n            const requiredAttributes = [\n                'custom:businessid',\n                'custom:businessname',\n                'custom:businesstype',\n                'custom:acctstatus',\n                'custom:onboarding',\n                'custom:setupdone',\n                'custom:created_at',\n                'custom:updated_at'\n            ];\n            // Check which attributes are missing\n            for (const attr of requiredAttributes){\n                if (!userData[attr]) {\n                    missingAttributes.push(attr);\n                }\n            }\n            // If no missing attributes, return\n            if (missingAttributes.length === 0) {\n                return {\n                    success: true,\n                    message: 'All attributes present'\n                };\n            }\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info('[DashboardClient] Detected missing attributes:', missingAttributes);\n            // Create attributes to update\n            const attributesToUpdate = {};\n            const timestamp = new Date().toISOString();\n            // For each missing attribute, set a default value\n            missingAttributes.forEach((attr)=>{\n                switch(attr){\n                    case 'custom:businessid':\n                        // Try to generate a deterministic ID based on user ID if available\n                        if (userData['custom:businessid']) {\n                            attributesToUpdate[attr] = userData['custom:businessid'];\n                        } else if (userData.sub) {\n                            try {\n                                const { v5: uuidv5 } = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/commonjs-browser/index.js\");\n                                const TENANT_NAMESPACE = '9a551c44-4ade-4f89-b078-0af8be794c23';\n                                attributesToUpdate[attr] = uuidv5(userData.sub, TENANT_NAMESPACE);\n                            } catch (e) {\n                                // Fallback to random UUID only if absolutely necessary\n                                attributesToUpdate[attr] = crypto.randomUUID();\n                            }\n                        } else {\n                            // Last resort fallback\n                            attributesToUpdate[attr] = crypto.randomUUID();\n                        }\n                        break;\n                    case 'custom:businessname':\n                        // Try to get business name from cookies or localStorage\n                        const businessName = getBestBusinessName() || '';\n                        attributesToUpdate[attr] = userData['custom:businessname'] || businessName;\n                        break;\n                    case 'custom:businesstype':\n                        attributesToUpdate[attr] = userData['custom:businesstype'] || 'Other';\n                        break;\n                    case 'custom:acctstatus':\n                        attributesToUpdate[attr] = userData['custom:acctstatus'] || 'ACTIVE';\n                        break;\n                    case 'custom:onboarding':\n                        attributesToUpdate[attr] = userData['custom:onboarding'] || 'complete';\n                        break;\n                    case 'custom:setupdone':\n                        attributesToUpdate[attr] = userData['custom:setupdone'] || 'true';\n                        break;\n                    case 'custom:created_at':\n                        attributesToUpdate[attr] = userData['custom:created_at'] || timestamp;\n                        break;\n                    case 'custom:updated_at':\n                        attributesToUpdate[attr] = timestamp;\n                        break;\n                    default:\n                        break;\n                }\n            });\n            // Helper function to get business name from various sources\n            function getBestBusinessName() {\n                try {\n                    // Try cookies first\n                    const getCookie = (name)=>{\n                        const value = \"; \".concat(document.cookie);\n                        const parts = value.split(\"; \".concat(name, \"=\"));\n                        if (parts.length === 2) return parts.pop().split(';').shift();\n                        return null;\n                    };\n                    const cookieName = getCookie('businessName') || getCookie('custom:businessname');\n                    if (cookieName) return cookieName;\n                    // Then try localStorage\n                    if (typeof localStorage !== 'undefined') {\n                        try {\n                            // Try businessInfo object\n                            const storedInfo = localStorage.getItem('businessInfo');\n                            if (storedInfo) {\n                                const parsedInfo = JSON.parse(storedInfo);\n                                if (parsedInfo.businessName) return parsedInfo.businessName;\n                            }\n                            // Try direct key\n                            const directName = localStorage.getItem('businessName');\n                            if (directName) return directName;\n                        } catch (e) {\n                        // Ignore localStorage errors\n                        }\n                    }\n                } catch (e) {\n                // Ignore any errors in this helper\n                }\n                return null;\n            }\n            // Update the attributes using the API, with error handling for network issues\n            try {\n                const response = await fetch('/api/user/update-attributes', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': \"Bearer \".concat(session.tokens.accessToken.toString()),\n                        'X-Id-Token': session.tokens.idToken.toString()\n                    },\n                    body: JSON.stringify({\n                        attributes: attributesToUpdate,\n                        forceUpdate: true\n                    })\n                });\n                if (!response.ok) {\n                    const errorText = await response.text().catch(()=>'Unknown error');\n                    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn('[DashboardClient] API returned error:', {\n                        status: response.status,\n                        text: errorText\n                    });\n                    return {\n                        success: false,\n                        error: \"API error: \".concat(response.status, \" \").concat(errorText)\n                    };\n                }\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info('[DashboardClient] Fixed missing attributes:', attributesToUpdate);\n                return {\n                    success: true,\n                    message: 'Missing attributes fixed',\n                    updatedAttributes: attributesToUpdate\n                };\n            } catch (fetchError) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn('[DashboardClient] Network error updating attributes:', fetchError);\n                return {\n                    success: false,\n                    error: \"Network error: \".concat(fetchError.message)\n                };\n            }\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn('[DashboardClient] Error fixing missing attributes:', error);\n            return {\n                success: false,\n                error: error.message\n            };\n        }\n    }\n    // Generate a deterministic tenant ID from the user ID if needed\n    const generateDeterministicTenantId = (userId)=>{\n        try {\n            if (!userId) return null;\n            // Use UUID v5 algorithm for proper deterministic UUID generation\n            // This uses a SHA-1 hash (via subtle crypto) to ensure consistency\n            const encoder = new TextEncoder();\n            const data = encoder.encode(userId);\n            // UUID v5 namespace (using DNS namespace as base)\n            const NAMESPACE = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\n            // Convert namespace to bytes\n            const namespaceBytes = new Uint8Array(16);\n            NAMESPACE.replace(/-/g, '').match(/.{2}/g).map((hex, i)=>{\n                namespaceBytes[i] = parseInt(hex, 16);\n            });\n            // Combine namespace and name\n            const combinedBytes = new Uint8Array(16 + data.length);\n            combinedBytes.set(namespaceBytes);\n            combinedBytes.set(data, 16);\n            // Get hash of combined bytes\n            // In browsers supporting crypto.subtle:\n            if (typeof crypto !== 'undefined' && crypto.subtle) {\n                return crypto.subtle.digest('SHA-1', combinedBytes).then((buffer)=>{\n                    const hashArray = Array.from(new Uint8Array(buffer));\n                    // Format as UUID v5\n                    hashArray[6] = hashArray[6] & 0x0f | 0x50; // Set version to 5\n                    hashArray[8] = hashArray[8] & 0x3f | 0x80; // Set variant\n                    // Convert to hex and format as UUID\n                    const hex = hashArray.map((b)=>b.toString(16).padStart(2, '0')).join('');\n                    const uuid = \"\".concat(hex.slice(0, 8), \"-\").concat(hex.slice(8, 12), \"-\").concat(hex.slice(12, 16), \"-\").concat(hex.slice(16, 20), \"-\").concat(hex.slice(20, 32));\n                    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info('[DashboardClient] Generated deterministic UUID v5 tenant ID from user ID:', uuid);\n                    return uuid;\n                }).catch((e)=>{\n                    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('[DashboardClient] Error generating UUID v5 tenant ID:', e);\n                    // Fall back to simple hash method if subtle crypto fails\n                    return generateSimpleHashTenantId(userId);\n                });\n            } else {\n                // Fallback for environments without crypto.subtle\n                return generateSimpleHashTenantId(userId);\n            }\n        } catch (e) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('[DashboardClient] Error generating tenant ID:', e);\n            return null;\n        }\n    };\n    // Fallback method using simple hash for environments without crypto.subtle\n    const generateSimpleHashTenantId = (userId)=>{\n        const hash = Array.from(userId).reduce((acc, char)=>{\n            return (acc << 5) - acc + char.charCodeAt(0) | 0;\n        }, 0).toString(16).padStart(32, '0');\n        // Format as UUID-like string\n        const uuid = \"\".concat(hash.slice(0, 8), \"-\").concat(hash.slice(8, 12), \"-5\").concat(hash.slice(13, 16), \"-\").concat(hash.slice(16, 20), \"-\").concat(hash.slice(20, 32));\n        _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info('[DashboardClient] Generated fallback tenant ID from user ID:', uuid);\n        return uuid;\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"DashboardClient.useEffect\": ()=>{\n            const verifyCognitoState = {\n                \"DashboardClient.useEffect.verifyCognitoState\": async ()=>{\n                    setIsVerifyingTenant(true);\n                    try {\n                        // Always try to load from local storage first\n                        let userId = null;\n                        try {\n                            var _session_tokens_idToken, _session_tokens;\n                            // Check Cognito identity\n                            const session = await (0,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_10__.fetchAuthSession)();\n                            const identityToken = session === null || session === void 0 ? void 0 : (_session_tokens = session.tokens) === null || _session_tokens === void 0 ? void 0 : (_session_tokens_idToken = _session_tokens.idToken) === null || _session_tokens_idToken === void 0 ? void 0 : _session_tokens_idToken.toString();\n                            if (identityToken) {\n                                const idTokenPayload = session.tokens.idToken;\n                                userId = idTokenPayload.payload.sub;\n                                if (userId) {\n                                    // Store user ID in local storage\n                                    localStorage.setItem('userId', userId);\n                                    // Generate tenant ID if needed\n                                    const tenantId = localStorage.getItem('tenantId') || generateDeterministicTenantId(userId);\n                                    if (tenantId) {\n                                        localStorage.setItem('tenantId', tenantId);\n                                    }\n                                    setIsAuthenticated(true);\n                                    setTenantVerified(true);\n                                    setIsVerifyingTenant(false);\n                                    setSetupStatus('success');\n                                    return;\n                                }\n                            }\n                        } catch (e) {\n                            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('[DashboardClient] Error fetching Cognito session:', e);\n                        // Continue to fallback mechanisms\n                        }\n                        // If we couldn't get from Cognito, try localStorage\n                        userId = localStorage.getItem('userId');\n                        const tenantId = localStorage.getItem('tenantId');\n                        if (userId && tenantId) {\n                            setTenantVerified(true);\n                            setIsVerifyingTenant(false);\n                            setSetupStatus('success');\n                            return;\n                        }\n                        // If we get here, we failed to verify the tenant\n                        setTenantVerified(false);\n                        setIsVerifyingTenant(false);\n                        setSetupStatus('failed');\n                        setError('Unable to verify tenant ID. Please try refreshing the page or signing in again.');\n                    } catch (error) {\n                        _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('[DashboardClient] Error verifying tenant:', error);\n                        setTenantVerified(false);\n                        setIsVerifyingTenant(false);\n                        setSetupStatus('failed');\n                        setError('An unexpected error occurred. Please try again later.');\n                    }\n                }\n            }[\"DashboardClient.useEffect.verifyCognitoState\"];\n            verifyCognitoState();\n        }\n    }[\"DashboardClient.useEffect\"], []);\n    // Function to fix tenant schema issues in AWS RDS\n    const setupAwsRdsTables = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"DashboardClient.useCallback[setupAwsRdsTables]\": async (tenantId)=>{\n            if (!tenantId) {\n                console.error('[DashboardClient] Cannot set up tables: No tenant ID provided');\n                return {\n                    success: false,\n                    error: 'No tenant ID provided'\n                };\n            }\n            try {\n                console.log(\"[DashboardClient] Setting up AWS RDS tables for tenant: \".concat(tenantId));\n                // Create the schema first\n                const schemaName = \"tenant_\".concat(tenantId.replace(/-/g, '_'));\n                // Call our AWS RDS table creation endpoint\n                const response = await fetch(\"/api/db/create-aws-tables\");\n                if (response.ok) {\n                    const data = await response.json();\n                    console.log('[DashboardClient] AWS RDS table setup complete:', data);\n                    return {\n                        success: true,\n                        data\n                    };\n                } else {\n                    const errorData = await response.json();\n                    console.error('[DashboardClient] Failed to set up AWS RDS tables:', errorData);\n                    return {\n                        success: false,\n                        error: errorData\n                    };\n                }\n            } catch (error) {\n                console.error('[DashboardClient] Error setting up AWS RDS tables:', error.message);\n                return {\n                    success: false,\n                    error: error.message\n                };\n            }\n        }\n    }[\"DashboardClient.useCallback[setupAwsRdsTables]\"], []);\n    // Initialize database and ensure tables exist\n    const initializeDatabase = async ()=>{\n        try {\n            console.log('[DashboardClient] Initializing database connection to AWS RDS');\n            // Get tenant ID from localStorage or cookies\n            const localStorageTenantId = localStorage.getItem('tenantId');\n            const cookieTenantId = (()=>{\n                const value = \"; \".concat(document.cookie);\n                const parts = value.split(\"; tenantId=\");\n                if (parts.length === 2) return parts.pop().split(';').shift();\n                return null;\n            })();\n            const tenantId = localStorageTenantId || cookieTenantId;\n            if (!tenantId) {\n                console.warn('[DashboardClient] No tenant ID found for database initialization, skipping table setup');\n                return;\n            }\n            // Set up AWS RDS tables with the tenant ID\n            const result = await setupAwsRdsTables(tenantId);\n            if (result.success) {\n                console.log('[DashboardClient] AWS RDS tables set up successfully');\n            } else {\n                console.warn('[DashboardClient] AWS RDS table setup issues:', result.error);\n            }\n        } catch (error) {\n            console.error('[DashboardClient] Error initializing AWS RDS:', error);\n        }\n    };\n    // This ensures we're only rendering on the client\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"DashboardClient.useEffect\": ()=>{\n            setIsClient(true);\n            // Run database initialization immediately with AWS RDS\n            initializeDatabase();\n            // Ensure consistent tenant ID on initialization\n            const ensureConsistentTenantId = {\n                \"DashboardClient.useEffect.ensureConsistentTenantId\": async ()=>{\n                    try {\n                        // Check various sources\n                        const localStorageTenantId = localStorage.getItem('tenantId');\n                        const cookieTenantId = ({\n                            \"DashboardClient.useEffect.ensureConsistentTenantId.cookieTenantId\": ()=>{\n                                const value = \"; \".concat(document.cookie);\n                                const parts = value.split(\"; tenantId=\");\n                                if (parts.length === 2) return parts.pop().split(';').shift();\n                                return null;\n                            }\n                        })[\"DashboardClient.useEffect.ensureConsistentTenantId.cookieTenantId\"]();\n                        // If we have inconsistent IDs or none at all, fetch from the server\n                        if (!localStorageTenantId || !cookieTenantId || localStorageTenantId !== cookieTenantId) {\n                            console.log('[DashboardClient] Tenant ID inconsistency detected, fetching from server');\n                            try {\n                                // Request the tenant ID from the server based on the authenticated user\n                                const response = await fetch('/api/user/tenant', {\n                                    method: 'GET',\n                                    headers: {\n                                        'Content-Type': 'application/json'\n                                    }\n                                });\n                                if (response.ok) {\n                                    const data = await response.json();\n                                    if (data.tenantId) {\n                                        console.log('[DashboardClient] Retrieved tenant ID from server:', data.tenantId);\n                                        localStorage.setItem('tenantId', data.tenantId);\n                                        document.cookie = \"tenantId=\".concat(data.tenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                        // Set up AWS RDS tables for this tenant\n                                        await setupAwsRdsTables(data.tenantId);\n                                        // Also store the source for debugging\n                                        if (data.source) {\n                                            console.log('[DashboardClient] Tenant ID source:', data.source);\n                                        }\n                                    } else {\n                                        // If server doesn't have a tenant ID for this user, get from Cognito\n                                        try {\n                                            const userAttributes = await (0,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_11__.fetchUserAttributes)();\n                                            const cognitoTenantId = userAttributes['custom:businessid'];\n                                            if (cognitoTenantId) {\n                                                console.log('[DashboardClient] Using tenant ID from Cognito:', cognitoTenantId);\n                                                localStorage.setItem('tenantId', cognitoTenantId);\n                                                document.cookie = \"tenantId=\".concat(cognitoTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                                // Set up AWS RDS tables for this tenant\n                                                await setupAwsRdsTables(cognitoTenantId);\n                                                // Ensure tenant record exists in database and update server\n                                                try {\n                                                    // Also update the tenant API\n                                                    await fetch('/api/user/tenant', {\n                                                        method: 'POST',\n                                                        headers: {\n                                                            'Content-Type': 'application/json'\n                                                        },\n                                                        body: JSON.stringify({\n                                                            tenantId: cognitoTenantId\n                                                        })\n                                                    });\n                                                    console.log('[DashboardClient] Updated server with Cognito tenant ID');\n                                                } catch (updateError) {\n                                                    console.warn('[DashboardClient] Failed to update server with tenant ID:', updateError);\n                                                }\n                                            } else {\n                                                // ONLY CREATE NEW TENANT IF EXPLICITLY REQUESTED\n                                                // Check if we're in a new account flow that actually requires a new tenant\n                                                if (newAccount === true) {\n                                                    // Generate a deterministic UUID based on user ID if possible\n                                                    // This ensures the same user always gets the same tenant ID\n                                                    try {\n                                                        // Generate a deterministic UUID based on user sub\n                                                        const userId = userAttributes.sub;\n                                                        const { v5: uuidv5 } = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/commonjs-browser/index.js\");\n                                                        const TENANT_NAMESPACE = '9a551c44-4ade-4f89-b078-0af8be794c23';\n                                                        const deterministicTenantId = uuidv5(userId, TENANT_NAMESPACE);\n                                                        console.log('[DashboardClient] Generated deterministic tenant ID from user ID:', deterministicTenantId);\n                                                        localStorage.setItem('tenantId', deterministicTenantId);\n                                                        document.cookie = \"tenantId=\".concat(deterministicTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                                        // Use the schema manager to ensure tables and schema exist\n                                                        await ensureTenantSchema(deterministicTenantId, userAttributes);\n                                                    } catch (uuidError) {\n                                                        // If deterministic generation fails, fall back to random UUID as absolute last resort\n                                                        const newTenantId = crypto.randomUUID();\n                                                        console.warn('[DashboardClient] UUID error, generated random tenant ID as last resort:', newTenantId);\n                                                        localStorage.setItem('tenantId', newTenantId);\n                                                        document.cookie = \"tenantId=\".concat(newTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                                        // Use the schema manager to ensure tables and schema exist\n                                                        await ensureTenantSchema(newTenantId, userAttributes);\n                                                    }\n                                                    // Ensure tenant exists in database and update server\n                                                    try {\n                                                        // Get the final tenant ID (from either deterministicTenantId or newTenantId)\n                                                        const finalTenantId = localStorage.getItem('tenantId');\n                                                        // Initialize the database environment first\n                                                        try {\n                                                            const initResponse = await fetch('/api/tenant/init-db-env');\n                                                            if (initResponse.ok) {\n                                                                try {\n                                                                    const initData = await initResponse.json();\n                                                                    console.log('[DashboardClient] Database environment initialization:', initData.success ? 'successful' : 'failed', 'Table exists:', initData.tableExists);\n                                                                } catch (jsonError) {\n                                                                    console.error('[DashboardClient] Failed to parse init-db-env response:', jsonError);\n                                                                // Continue with the process despite parsing error\n                                                                }\n                                                            }\n                                                        } catch (initError) {\n                                                            console.warn('[DashboardClient] Error initializing database environment:', initError.message);\n                                                        // Continue anyway since ensure-db-record has its own initialization\n                                                        }\n                                                        // Now ensure the tenant record exists in the database\n                                                        const tenantResponse = await fetch('/api/tenant/ensure-db-record', {\n                                                            method: 'POST',\n                                                            headers: {\n                                                                'Content-Type': 'application/json'\n                                                            },\n                                                            body: JSON.stringify({\n                                                                tenantId: finalTenantId,\n                                                                userId: userAttributes.sub,\n                                                                email: userAttributes.email,\n                                                                businessName: userAttributes['custom:businessname'],\n                                                                forceCreate: true\n                                                            })\n                                                        });\n                                                        if (tenantResponse.ok) {\n                                                            try {\n                                                                const tenantData = await tenantResponse.json();\n                                                                console.log('[DashboardClient] Generated tenant ID saved to database:', tenantData);\n                                                            } catch (jsonError) {\n                                                                console.error('[DashboardClient] Failed to parse tenant response:', jsonError);\n                                                            // Continue despite parsing error\n                                                            }\n                                                        } else {\n                                                            try {\n                                                                const errorText = await tenantResponse.text();\n                                                                console.warn('[DashboardClient] Failed to save generated tenant ID to database:', errorText);\n                                                            } catch (textError) {\n                                                                console.warn('[DashboardClient] Failed to save generated tenant ID to database. Status:', tenantResponse.status);\n                                                            }\n                                                        }\n                                                        // Also update the tenant API\n                                                        await fetch('/api/user/tenant', {\n                                                            method: 'POST',\n                                                            headers: {\n                                                                'Content-Type': 'application/json'\n                                                            },\n                                                            body: JSON.stringify({\n                                                                tenantId: finalTenantId\n                                                            })\n                                                        });\n                                                        console.log('[DashboardClient] Updated server with generated tenant ID');\n                                                    } catch (updateError) {\n                                                        console.warn('[DashboardClient] Failed to update server with tenant ID:', updateError);\n                                                    }\n                                                } else {\n                                                    console.log('[DashboardClient] No tenant ID found, but new account flow not detected. Not creating a new tenant.');\n                                                    notifyWarning('Unable to determine your organization information. Please log out and log back in.');\n                                                }\n                                            }\n                                        } catch (cognitoError) {\n                                            console.error('[DashboardClient] Error fetching Cognito attributes:', cognitoError);\n                                        }\n                                    }\n                                } else {\n                                    // If API request fails, fall back to Cognito\n                                    console.warn('[DashboardClient] Tenant API request failed, falling back to Cognito');\n                                    try {\n                                        const userAttributes = await (0,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_11__.fetchUserAttributes)();\n                                        const cognitoTenantId = userAttributes['custom:businessid'];\n                                        if (cognitoTenantId) {\n                                            console.log('[DashboardClient] Using tenant ID from Cognito after API failure:', cognitoTenantId);\n                                            localStorage.setItem('tenantId', cognitoTenantId);\n                                            document.cookie = \"tenantId=\".concat(cognitoTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                        } else {\n                                            // Generate a deterministic UUID based on user ID if available\n                                            try {\n                                                const userId = userAttributes.sub;\n                                                if (userId) {\n                                                    const { v5: uuidv5 } = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/commonjs-browser/index.js\");\n                                                    const TENANT_NAMESPACE = '9a551c44-4ade-4f89-b078-0af8be794c23';\n                                                    const generatedTenantId = uuidv5(userId, TENANT_NAMESPACE);\n                                                    console.log('[DashboardClient] Generated deterministic tenant ID from user ID:', generatedTenantId);\n                                                    localStorage.setItem('tenantId', generatedTenantId);\n                                                    document.cookie = \"tenantId=\".concat(generatedTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                                } else {\n                                                    // Random UUID as absolute last resort\n                                                    const newTenantId = crypto.randomUUID();\n                                                    console.warn('[DashboardClient] No user ID available, using random UUID:', newTenantId);\n                                                    localStorage.setItem('tenantId', newTenantId);\n                                                    document.cookie = \"tenantId=\".concat(newTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                                }\n                                            } catch (uuidError) {\n                                                // If UUID generation fails, use simple random UUID\n                                                const newTenantId = crypto.randomUUID();\n                                                console.error('[DashboardClient] UUID generation error, using random UUID:', newTenantId);\n                                                localStorage.setItem('tenantId', newTenantId);\n                                                document.cookie = \"tenantId=\".concat(newTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                            }\n                                        }\n                                    } catch (cognitoError) {\n                                        console.error('[DashboardClient] Error fetching Cognito attributes after API failure:', cognitoError);\n                                        // Ultimate fallback - generate random UUID\n                                        const newTenantId = crypto.randomUUID();\n                                        console.warn('[DashboardClient] All tenant ID sources failed, using random UUID:', newTenantId);\n                                        localStorage.setItem('tenantId', newTenantId);\n                                        document.cookie = \"tenantId=\".concat(newTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                    }\n                                }\n                            } catch (fetchError) {\n                                console.error('[DashboardClient] Error fetching tenant ID from server:', fetchError);\n                            }\n                        }\n                    } catch (e) {\n                        // Log but don't throw errors\n                        console.error('[DashboardClient] Error ensuring consistent tenant ID:', e);\n                    }\n                }\n            }[\"DashboardClient.useEffect.ensureConsistentTenantId\"];\n            // Run the consistency check\n            ensureConsistentTenantId();\n            // First check if user is authenticated by fetching Cognito attributes\n            const checkOnboardingStatus = {\n                \"DashboardClient.useEffect.checkOnboardingStatus\": async ()=>{\n                    try {\n                        var _session_tokens;\n                        console.log('[DashboardClient] Starting authentication and onboarding status check');\n                        // First check if we have a valid auth session\n                        const session = await (0,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_10__.fetchAuthSession)();\n                        if (!(session === null || session === void 0 ? void 0 : (_session_tokens = session.tokens) === null || _session_tokens === void 0 ? void 0 : _session_tokens.accessToken)) {\n                            console.warn('[DashboardClient] No valid auth session found, will redirect to sign-in');\n                            // Add delay to see logs before redirect\n                            await new Promise({\n                                \"DashboardClient.useEffect.checkOnboardingStatus\": (resolve)=>setTimeout(resolve, 1000)\n                            }[\"DashboardClient.useEffect.checkOnboardingStatus\"]);\n                            router.push('/auth/signin');\n                            return;\n                        }\n                        // User has valid session, set authenticated\n                        setIsAuthenticated(true);\n                        // Get user attributes to check onboarding status\n                        try {\n                            var _userAttributes_customonboarding, _userAttributes_customsetupdone;\n                            const userAttributes = await (0,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_11__.fetchUserAttributes)();\n                            // Store user attributes in state\n                            setUserData(userAttributes);\n                            console.log('[DashboardClient] User attributes fetched:', {\n                                hasBusinessId: !!userAttributes['custom:businessid'],\n                                hasBusinessName: !!userAttributes['custom:businessname'],\n                                onboardingStatus: userAttributes['custom:onboarding'],\n                                setupDone: userAttributes['custom:setupdone']\n                            });\n                            // ENHANCED CHECK: If user has completed onboarding according to Cognito, we're good\n                            if (((_userAttributes_customonboarding = userAttributes['custom:onboarding']) === null || _userAttributes_customonboarding === void 0 ? void 0 : _userAttributes_customonboarding.toLowerCase()) === 'complete' || ((_userAttributes_customsetupdone = userAttributes['custom:setupdone']) === null || _userAttributes_customsetupdone === void 0 ? void 0 : _userAttributes_customsetupdone.toLowerCase()) === 'true') {\n                                console.log('[DashboardClient] User has completed onboarding, showing dashboard');\n                                // Check for tenant ID to ensure RLS works properly\n                                if (!userAttributes['custom:businessid']) {\n                                    console.warn('[DashboardClient] Missing tenant ID in Cognito, will generate one for RLS');\n                                    // Generate a deterministic UUID from user ID to ensure consistency\n                                    try {\n                                        const { v5: uuidv5 } = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/commonjs-browser/index.js\");\n                                        const TENANT_NAMESPACE = '9a551c44-4ade-4f89-b078-0af8be794c23';\n                                        const generatedTenantId = uuidv5(userAttributes.sub, TENANT_NAMESPACE);\n                                        // Add this to the attributes that need updating\n                                        userAttributes['custom:businessid'] = generatedTenantId;\n                                        localStorage.setItem('tenantId', generatedTenantId);\n                                        document.cookie = \"tenantId=\".concat(generatedTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                        console.log('[DashboardClient] Generated tenant ID for RLS:', generatedTenantId);\n                                    } catch (e) {\n                                        console.error('[DashboardClient] Error generating tenant ID:', e);\n                                    }\n                                }\n                                // Fix any missing attributes in the background\n                                ensureUserAttributesComplete(session, userAttributes).then({\n                                    \"DashboardClient.useEffect.checkOnboardingStatus\": (result)=>console.debug('[DashboardClient] Attribute check result:', result)\n                                }[\"DashboardClient.useEffect.checkOnboardingStatus\"]).catch({\n                                    \"DashboardClient.useEffect.checkOnboardingStatus\": (err)=>console.error('[DashboardClient] Background attribute check error:', err)\n                                }[\"DashboardClient.useEffect.checkOnboardingStatus\"]);\n                                setIsReady(true);\n                                return;\n                            }\n                        } catch (attrError) {\n                            console.warn('[DashboardClient] Error fetching user attributes, using cookies as fallback:', attrError);\n                            // Even if we can't get attributes, we can use cookies\n                            const getCookie = {\n                                \"DashboardClient.useEffect.checkOnboardingStatus.getCookie\": (name)=>{\n                                    const value = \"; \".concat(document.cookie);\n                                    const parts = value.split(\"; \".concat(name, \"=\"));\n                                    if (parts.length === 2) return parts.pop().split(';').shift();\n                                    return null;\n                                }\n                            }[\"DashboardClient.useEffect.checkOnboardingStatus.getCookie\"];\n                            // Check cookies for onboarding status\n                            const onboardingStatus = getCookie('onboardedStatus') || getCookie('onboardingStatus');\n                            const setupCompleted = getCookie('setupCompleted') || getCookie('setupDone');\n                            if (onboardingStatus === 'complete' || setupCompleted === 'true') {\n                                console.log('[DashboardClient] Cookies indicate onboarding is complete, showing dashboard');\n                                setIsReady(true);\n                                return;\n                            }\n                        }\n                        // Set isReady true even if we don't have attributes or cookies\n                        // The DashboardWrapper will handle further verification\n                        console.log('[DashboardClient] Proceeding to dashboard, DashboardWrapper will handle verification');\n                        setIsReady(true);\n                    } catch (error) {\n                        // Log error and redirect\n                        console.error('[DashboardClient] Error checking auth status:', error);\n                        router.push('/auth/signin?returnUrl=' + encodeURIComponent('/dashboard'));\n                    }\n                }\n            }[\"DashboardClient.useEffect.checkOnboardingStatus\"];\n            // Run the check but set a timeout to prevent infinite loading\n            checkOnboardingStatus();\n            // Set a timeout to ensure we don't get stuck in a loading state\n            const timeout = setTimeout({\n                \"DashboardClient.useEffect.timeout\": ()=>{\n                    if (!isReady) {\n                        console.log(' Dashboard loading timeout - forcing ready state');\n                        setIsReady(true);\n                    }\n                }\n            }[\"DashboardClient.useEffect.timeout\"], 5000);\n            return ({\n                \"DashboardClient.useEffect\": ()=>clearTimeout(timeout)\n            })[\"DashboardClient.useEffect\"];\n        }\n    }[\"DashboardClient.useEffect\"], [\n        router\n    ]);\n    // Function to refresh user data\n    const refreshUserData = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"DashboardClient.useCallback[refreshUserData]\": async ()=>{\n            if (!isAuthenticated) return;\n            try {\n                console.log('[DashboardClient] Refreshing user data');\n                const userAttributes = await (0,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_11__.fetchUserAttributes)();\n                setUserData(userAttributes);\n                return userAttributes;\n            } catch (error) {\n                console.error('[DashboardClient] Error refreshing user data:', error);\n                return null;\n            }\n        }\n    }[\"DashboardClient.useCallback[refreshUserData]\"], [\n        isAuthenticated\n    ]);\n    // Helper function to handle subscription success\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"DashboardClient.useEffect\": ()=>{\n            const handleSubscriptionSuccess = {\n                \"DashboardClient.useEffect.handleSubscriptionSuccess\": async ()=>{\n                    const subscriptionSuccess = searchParams.get('subscription_success');\n                    const sessionId = searchParams.get('session_id');\n                    if (subscriptionSuccess === 'true' && sessionId) {\n                        console.log(\"[Subscription] Processing successful subscription with session ID: \".concat(sessionId));\n                        try {\n                            // Call our session-success API to verify and process the subscription\n                            const response = await fetch('/api/checkout/session-success', {\n                                method: 'POST',\n                                headers: {\n                                    'Content-Type': 'application/json'\n                                },\n                                body: JSON.stringify({\n                                    session_id: sessionId\n                                })\n                            });\n                            if (response.ok) {\n                                const data = await response.json();\n                                console.log('[Subscription] Successfully processed checkout session:', data);\n                                notifySuccess('Subscription successfully upgraded!');\n                                // Refresh user data to get the updated subscription status\n                                await refreshUserData();\n                                // Clean the URL by removing query parameters\n                                const url = new URL(window.location.href);\n                                url.searchParams.delete('subscription_success');\n                                url.searchParams.delete('session_id');\n                                window.history.replaceState({}, document.title, url.toString());\n                            } else {\n                                const errorData = await response.json();\n                                console.error('[Subscription] Failed to process checkout session:', errorData);\n                                notifyError('Failed to verify subscription. Please contact support.');\n                            }\n                        } catch (error) {\n                            console.error('[Subscription] Error processing subscription:', error);\n                            notifyError('An error occurred while processing your subscription.');\n                        }\n                    }\n                }\n            }[\"DashboardClient.useEffect.handleSubscriptionSuccess\"];\n            // Only run if authenticated\n            if (isAuthenticated) {\n                handleSubscriptionSuccess();\n            }\n        }\n    }[\"DashboardClient.useEffect\"], [\n        searchParams,\n        isAuthenticated,\n        notifySuccess,\n        notifyError\n    ]);\n    // Update loading state based on data availability\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"DashboardClient.useEffect\": ()=>{\n            // Set loading to false only when we have real data\n            if (userData && Object.keys(userData).length > 0 && tenantVerified) {\n                setIsLoading(false);\n            }\n        }\n    }[\"DashboardClient.useEffect\"], [\n        userData,\n        tenantVerified\n    ]);\n    // Show loading state if still loading tenant or user data\n    if (isLoading || isVerifyingTenant || !tenantVerified) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(DashboardLoadingState, {}, void 0, false, {\n            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n            lineNumber: 1134,\n            columnNumber: 12\n        }, this);\n    }\n    // Show error state if there's an error\n    if (error || setupStatus === 'failed') {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(DashboardErrorState, {}, void 0, false, {\n            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n            lineNumber: 1139,\n            columnNumber: 12\n        }, this);\n    }\n    // Don't show the dashboard until we have actual userData\n    if (!userData || Object.keys(userData).length === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(DashboardLoadingState, {}, void 0, false, {\n            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n            lineNumber: 1144,\n            columnNumber: 12\n        }, this);\n    }\n    if (!isClient) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_DashboardWrapper__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n            newAccount: (userData === null || userData === void 0 ? void 0 : userData['custom:isNew']) === 'true' || newAccount === 'true',\n            plan: plan || (userData === null || userData === void 0 ? void 0 : userData['custom:plan'])\n        }, void 0, false, {\n            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n            lineNumber: 1148,\n            columnNumber: 12\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            (userData === null || userData === void 0 ? void 0 : userData['custom:isadmin']) === 'true' && isAuthenticated && searchParams.get('admin') === 'true' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"min-h-screen\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(DatabaseAdmin, {}, void 0, false, {\n                    fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                    lineNumber: 1159,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                lineNumber: 1158,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_DashboardWrapper__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                newAccount: (userData === null || userData === void 0 ? void 0 : userData['custom:isNew']) === 'true' || newAccount === 'true',\n                plan: plan || (userData === null || userData === void 0 ? void 0 : userData['custom:plan'])\n            }, void 0, false, {\n                fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                lineNumber: 1164,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true);\n}\n_s1(DashboardClient, \"4GYcS5eLiGC+EXuDUQWhbym/mQI=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_4__.useRouter,\n        next_navigation__WEBPACK_IMPORTED_MODULE_4__.useSearchParams,\n        _context_NotificationContext__WEBPACK_IMPORTED_MODULE_8__.useNotification\n    ];\n});\n_c2 = DashboardClient;\n/**\n * Ensure the tenant schema exists\n */ const ensureTenantSchema = async (tenantId, userAttributes)=>{\n    try {\n        // Call the tenant manager API\n        const tenantManagerResponse = await fetch('/api/tenant/tenant-manager', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                tenant_id: tenantId,\n                user_id: userAttributes.sub,\n                business_name: userAttributes['custom:businessname'],\n                forceCreate: true // Explicitly request tenant creation\n            })\n        });\n        if (tenantManagerResponse.ok) {\n            const schemaResult = await tenantManagerResponse.json();\n            console.log('[DashboardClient] Tenant manager result:', schemaResult);\n            if (schemaResult.success) {\n                return schemaResult;\n            } else {\n                console.error('[DashboardClient] Tenant creation failed:', schemaResult);\n                return null;\n            }\n        } else {\n            console.error('[DashboardClient] Tenant manager API failed:', await tenantManagerResponse.text());\n            return null;\n        }\n    } catch (error) {\n        console.error('[DashboardClient] Error in tenant setup:', error);\n        return null;\n    }\n};\n// Function to validate tenant ID\nconst isValidUUID = (id)=>{\n    if (!id) return false;\n    // Check if it's a valid UUID format\n    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n    return uuidRegex.test(id);\n};\nvar _c, _c1, _c2;\n$RefreshReg$(_c, \"DatabaseAdmin\");\n$RefreshReg$(_c1, \"ClientDataSync\");\n$RefreshReg$(_c2, \"DashboardClient\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvZGFzaGJvYXJkL0Rhc2hib2FyZENsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFeUQ7QUFDakI7QUFDVTtBQUNXO0FBQ1k7QUFDQztBQUN2QztBQUNUO0FBQ2lDO0FBQ0s7QUFDbkI7QUFDVDtBQUVwQyw4RUFBOEU7QUFDOUUsTUFBTWtCLGdCQUFnQlAsd0RBQU9BLENBQUMsSUFBTSwwT0FBb0M7Ozs7OztJQUN0RVEsU0FBUyxrQkFBTSw4REFBQ0M7c0JBQUk7Ozs7OztJQUNwQkMsS0FBSzs7S0FGREg7QUFLTiwrREFBK0Q7QUFDL0QsU0FBU0k7SUFDUCxJQUFJO1FBQ0YsdUNBQXVDO1FBQ3ZDLE1BQU1DLGVBQWVDLGFBQWFDLE9BQU8sQ0FBQztRQUMxQyxJQUFJRixjQUFjO1lBQ2hCLElBQUk7Z0JBQ0YsTUFBTUcsYUFBYUMsS0FBS0MsS0FBSyxDQUFDTDtnQkFDOUIsSUFBSUcsV0FBV0csWUFBWSxJQUFJSCxXQUFXSSxZQUFZLEVBQUU7b0JBQ3RELE9BQU87Z0JBQ1Q7WUFDRixFQUFFLE9BQU9DLEdBQUc7WUFDVix1QkFBdUI7WUFDekI7UUFDRjtRQUVBLG1EQUFtRDtRQUNuRCxNQUFNRixlQUFlTCxhQUFhQyxPQUFPLENBQUM7UUFDMUMsSUFBSUksY0FBYyxPQUFPO1FBRXpCLGtDQUFrQztRQUNsQyxNQUFNRyxVQUFVQyxTQUFTQyxNQUFNLENBQUNDLEtBQUssQ0FBQztRQUN0QyxLQUFLLE1BQU1ELFVBQVVGLFFBQVM7WUFDNUIsTUFBTSxDQUFDSSxNQUFNQyxNQUFNLEdBQUdILE9BQU9JLElBQUksR0FBR0gsS0FBSyxDQUFDO1lBQzFDLElBQUlDLFNBQVMsa0JBQWtCQyxPQUFPO2dCQUNwQyxPQUFPO1lBQ1Q7UUFDRjtRQUVBLE9BQU87SUFDVCxFQUFFLE9BQU9OLEdBQUc7UUFDVixPQUFPO0lBQ1Q7QUFDRjtBQUVBLDZDQUE2QztBQUM3QyxTQUFTUTtJQUNQLElBQUk7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LDREQUFlQTtRQUdrQlEseUVBQWVBOzs7TUF2Qi9DdUU7QUFtNUJ4Qjs7Q0FFQyxHQUNELE1BQU0rSCxxQkFBcUIsT0FBTy9KLFVBQVUySjtJQUMxQyxJQUFJO1FBQ0YsOEJBQThCO1FBQzlCLE1BQU1tRCx3QkFBd0IsTUFBTTNMLE1BQU0sOEJBQThCO1lBQ3RFQyxRQUFRO1lBQ1JDLFNBQVM7Z0JBQUUsZ0JBQWdCO1lBQW1CO1lBQzlDK0UsTUFBTTlILEtBQUsrSCxTQUFTLENBQUM7Z0JBQ25CMEcsV0FBVy9NO2dCQUNYZ04sU0FBU3JELGVBQWVoRSxHQUFHO2dCQUMzQnNILGVBQWV0RCxjQUFjLENBQUMsc0JBQXNCO2dCQUNwRGUsYUFBYSxLQUFLLHFDQUFxQztZQUN6RDtRQUNGO1FBRUEsSUFBSW9DLHNCQUFzQnhMLEVBQUUsRUFBRTtZQUM1QixNQUFNNEwsZUFBZSxNQUFNSixzQkFBc0JwTCxJQUFJO1lBQ3JEZCxRQUFRQyxHQUFHLENBQUMsNENBQTRDcU07WUFFeEQsSUFBSUEsYUFBYXZMLE9BQU8sRUFBRTtnQkFDeEIsT0FBT3VMO1lBQ1QsT0FBTztnQkFDTHRNLFFBQVFMLEtBQUssQ0FBQyw2Q0FBNkMyTTtnQkFDM0QsT0FBTztZQUNUO1FBQ0YsT0FBTztZQUNMdE0sUUFBUUwsS0FBSyxDQUFDLGdEQUFnRCxNQUFNdU0sc0JBQXNCckcsSUFBSTtZQUM5RixPQUFPO1FBQ1Q7SUFDRixFQUFFLE9BQU9sRyxPQUFPO1FBQ2RLLFFBQVFMLEtBQUssQ0FBQyw0Q0FBNENBO1FBQzFELE9BQU87SUFDVDtBQUNGO0FBRUEsaUNBQWlDO0FBQ2pDLE1BQU1PLGNBQWMsQ0FBQ3FNO0lBQ25CLElBQUksQ0FBQ0EsSUFBSSxPQUFPO0lBQ2hCLG9DQUFvQztJQUNwQyxNQUFNQyxZQUFZO0lBQ2xCLE9BQU9BLFVBQVVDLElBQUksQ0FBQ0Y7QUFDeEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9rdW9sZGVuZy9wcm9qZWN0eC9mcm9udGVuZC9weWZhY3Rvcl9uZXh0L3NyYy9hcHAvZGFzaGJvYXJkL0Rhc2hib2FyZENsaWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQC91dGlscy9sb2dnZXInO1xuaW1wb3J0IERhc2hib2FyZFdyYXBwZXIgZnJvbSAnLi9EYXNoYm9hcmRXcmFwcGVyJztcbmltcG9ydCB7IHVzZVJvdXRlciwgdXNlU2VhcmNoUGFyYW1zIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJztcbmltcG9ydCB7IENPT0tJRV9OQU1FUywgT05CT0FSRElOR19TVEFUVVMgfSBmcm9tICdAL2NvbnN0YW50cy9vbmJvYXJkaW5nJztcbmltcG9ydCB7IGZldGNoQXV0aFNlc3Npb24sIGZldGNoVXNlckF0dHJpYnV0ZXMgfSBmcm9tICdAYXdzLWFtcGxpZnkvYXV0aCc7XG5pbXBvcnQgZHluYW1pYyBmcm9tICduZXh0L2R5bmFtaWMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBEYXNoYm9hcmRMb2FkZXIgZnJvbSAnQC9jb21wb25lbnRzL0Rhc2hib2FyZExvYWRlcic7XG5pbXBvcnQgeyB1c2VOb3RpZmljYXRpb24gfSBmcm9tICdAL2NvbnRleHQvTm90aWZpY2F0aW9uQ29udGV4dCc7XG5pbXBvcnQgeyB1c2VTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoL3JlYWN0JztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuXG4vLyBEeW5hbWljYWxseSBpbXBvcnQgRGF0YWJhc2VBZG1pbiBjb21wb25lbnQgdG8gYXZvaWQgbG9hZGluZyBpdCB1bnRpbCBuZWVkZWRcbmNvbnN0IERhdGFiYXNlQWRtaW4gPSBkeW5hbWljKCgpID0+IGltcG9ydCgnQC9jb21wb25lbnRzL0RhdGFiYXNlQWRtaW4nKSwge1xuICBsb2FkaW5nOiAoKSA9PiA8ZGl2PkxvYWRpbmcgZGF0YWJhc2UgdG9vbHMuLi48L2Rpdj4sXG4gIHNzcjogZmFsc2Vcbn0pO1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY2hlY2sgaWYgdXNlciBoYXMgZW50ZXJlZCBvbmJvYXJkaW5nIGRhdGFcbmZ1bmN0aW9uIGNoZWNrRm9yVXNlck9uYm9hcmRpbmdEYXRhKCkge1xuICB0cnkge1xuICAgIC8vIENoZWNrIGxvY2FsU3RvcmFnZSBmb3IgYnVzaW5lc3MgaW5mb1xuICAgIGNvbnN0IGJ1c2luZXNzSW5mbyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdidXNpbmVzc0luZm8nKTtcbiAgICBpZiAoYnVzaW5lc3NJbmZvKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXJzZWRJbmZvID0gSlNPTi5wYXJzZShidXNpbmVzc0luZm8pO1xuICAgICAgICBpZiAocGFyc2VkSW5mby5idXNpbmVzc05hbWUgfHwgcGFyc2VkSW5mby5idXNpbmVzc1R5cGUpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJbnZhbGlkIEpTT04sIGlnbm9yZVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3IgYnVzaW5lc3MgbmFtZSBpbiBsb2NhbFN0b3JhZ2UgZGlyZWN0bHlcbiAgICBjb25zdCBidXNpbmVzc05hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYnVzaW5lc3NOYW1lJyk7XG4gICAgaWYgKGJ1c2luZXNzTmFtZSkgcmV0dXJuIHRydWU7XG4gICAgXG4gICAgLy8gQ2hlY2sgY29va2llcyBmb3IgYnVzaW5lc3MgaW5mb1xuICAgIGNvbnN0IGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcbiAgICBmb3IgKGNvbnN0IGNvb2tpZSBvZiBjb29raWVzKSB7XG4gICAgICBjb25zdCBbbmFtZSwgdmFsdWVdID0gY29va2llLnRyaW0oKS5zcGxpdCgnPScpO1xuICAgICAgaWYgKG5hbWUgPT09ICdidXNpbmVzc05hbWUnICYmIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gSGVscGVyIHRvIGdldCBidXNpbmVzcyBuYW1lIGZyb20gdXNlciBkYXRhXG5mdW5jdGlvbiBnZXRVc2VyQnVzaW5lc3NOYW1lKCkge1xuICB0cnkge1xuICAgIC8vIFRyeSBjb29raWVzIGZpcnN0XG4gICAgY29uc3QgZ2V0Q29va2llID0gKG5hbWUpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gYDsgJHtkb2N1bWVudC5jb29raWV9YDtcbiAgICAgIGNvbnN0IHBhcnRzID0gdmFsdWUuc3BsaXQoYDsgJHtuYW1lfT1gKTtcbiAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDIpIHJldHVybiBwYXJ0cy5wb3AoKS5zcGxpdCgnOycpLnNoaWZ0KCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGNvb2tpZU5hbWUgPSBnZXRDb29raWUoJ2J1c2luZXNzTmFtZScpIHx8IGdldENvb2tpZSgnY3VzdG9tOmJ1c2luZXNzbmFtZScpO1xuICAgIGlmIChjb29raWVOYW1lKSByZXR1cm4gY29va2llTmFtZTtcbiAgICBcbiAgICAvLyBUaGVuIHRyeSBsb2NhbFN0b3JhZ2VcbiAgICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRyeSBidXNpbmVzc0luZm8gb2JqZWN0XG4gICAgICAgIGNvbnN0IHN0b3JlZEluZm8gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYnVzaW5lc3NJbmZvJyk7XG4gICAgICAgIGlmIChzdG9yZWRJbmZvKSB7XG4gICAgICAgICAgY29uc3QgcGFyc2VkSW5mbyA9IEpTT04ucGFyc2Uoc3RvcmVkSW5mbyk7XG4gICAgICAgICAgaWYgKHBhcnNlZEluZm8uYnVzaW5lc3NOYW1lKSByZXR1cm4gcGFyc2VkSW5mby5idXNpbmVzc05hbWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFRyeSBkaXJlY3Qga2V5XG4gICAgICAgIGNvbnN0IGRpcmVjdE5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYnVzaW5lc3NOYW1lJyk7XG4gICAgICAgIGlmIChkaXJlY3ROYW1lKSByZXR1cm4gZGlyZWN0TmFtZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWdub3JlIGxvY2FsU3RvcmFnZSBlcnJvcnNcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBJZ25vcmUgYW55IGVycm9ycyBpbiB0aGlzIGhlbHBlclxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vLyBIZWxwZXIgdG8gZ2V0IGJ1c2luZXNzIHR5cGUgZnJvbSB1c2VyIGRhdGFcbmZ1bmN0aW9uIGdldFVzZXJCdXNpbmVzc1R5cGUoKSB7XG4gIHRyeSB7XG4gICAgLy8gVHJ5IHRvIGdldCBmcm9tIGxvY2FsU3RvcmFnZSBidXNpbmVzc0luZm9cbiAgICBjb25zdCBidXNpbmVzc0luZm8gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYnVzaW5lc3NJbmZvJyk7XG4gICAgaWYgKGJ1c2luZXNzSW5mbykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGFyc2VkSW5mbyA9IEpTT04ucGFyc2UoYnVzaW5lc3NJbmZvKTtcbiAgICAgICAgaWYgKHBhcnNlZEluZm8uYnVzaW5lc3NUeXBlKSByZXR1cm4gcGFyc2VkSW5mby5idXNpbmVzc1R5cGU7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIEludmFsaWQgSlNPTiwgY29udGludWUgdG8gb3RoZXIgbWV0aG9kc1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBUcnkgbG9jYWxTdG9yYWdlIGRpcmVjdCBrZXlcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2J1c2luZXNzVHlwZScpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLy8gQ2xpZW50IGRhdGEgc3luY2hyb25pemF0aW9uIGNvbXBvbmVudFxuZXhwb3J0IGZ1bmN0aW9uIENsaWVudERhdGFTeW5jKCkge1xuICBjb25zdCBbc3luY0NvbXBsZXRlLCBzZXRTeW5jQ29tcGxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gRnVuY3Rpb24gdG8gc3luYyB0ZW5hbnQgSURzIGFuZCBvdGhlciBjbGllbnQgZGF0YVxuICAgIGNvbnN0IHN5bmNDbGllbnREYXRhID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gR2V0IHRlbmFudCBJRCBmcm9tIGxvY2FsU3RvcmFnZSBvciBjb29raWVzXG4gICAgICAgIGNvbnN0IHRlbmFudElkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RlbmFudElkJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKS5maW5kKGMgPT4gYy50cmltKCkuc3RhcnRzV2l0aCgndGVuYW50SWQ9JykpPy5zcGxpdCgnPScpWzFdIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKS5maW5kKGMgPT4gYy50cmltKCkuc3RhcnRzV2l0aCgnYnVzaW5lc3NpZD0nKSk/LnNwbGl0KCc9JylbMV07XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiB0ZW5hbnQgSUQgaXMgdmFsaWRcbiAgICAgICAgaWYgKHRlbmFudElkKSB7XG4gICAgICAgICAgbG9nZ2VyLmluZm8oJ1tDbGllbnREYXRhU3luY10gU3luY2hyb25pemluZyB0ZW5hbnQgSUQ6JywgdGVuYW50SWQpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0ZW5hbnQgSUQgaXMgY29uc2lzdGVudCBpbiBhbGwgc3RvcmFnZSBsb2NhdGlvbnNcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGVuYW50SWQnLCB0ZW5hbnRJZCk7XG4gICAgICAgICAgZG9jdW1lbnQuY29va2llID0gYHRlbmFudElkPSR7dGVuYW50SWR9OyBwYXRoPS87IG1heC1hZ2U9JHs2MCo2MCoyNCozMH07IHNhbWVzaXRlPWxheGA7XG4gICAgICAgICAgZG9jdW1lbnQuY29va2llID0gYGJ1c2luZXNzaWQ9JHt0ZW5hbnRJZH07IHBhdGg9LzsgbWF4LWFnZT0kezYwKjYwKjI0KjMwfTsgc2FtZXNpdGU9bGF4YDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU3luYyB0ZW5hbnQgSURzIHRvIHByZXZlbnQgY29ycnVwdGlvblxuICAgICAgICBzeW5jVGVuYW50SURzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBNYXJrIHN5bmMgYXMgY29tcGxldGVcbiAgICAgICAgc2V0U3luY0NvbXBsZXRlKHRydWUpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdbQ2xpZW50RGF0YVN5bmNdIEVycm9yIHN5bmNpbmcgY2xpZW50IGRhdGE6JywgZXJyb3IpO1xuICAgICAgICAvLyBDb250aW51ZSBkZXNwaXRlIGVycm9yc1xuICAgICAgICBzZXRTeW5jQ29tcGxldGUodHJ1ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICAvLyBSdW4gc3luYyBvbiBjb21wb25lbnQgbW91bnRcbiAgICBzeW5jQ2xpZW50RGF0YSgpO1xuICB9LCBbXSk7XG4gIFxuICAvLyBUaGlzIGNvbXBvbmVudCBkb2Vzbid0IHJlbmRlciBhbnl0aGluZyB2aXNpYmxlXG4gIHJldHVybiBudWxsO1xufVxuXG4vLyBTeW5jIHRlbmFudCBJRHMgaW4gY2xpZW50IHRvIHByZXZlbnQgY29ycnVwdGlvblxuY29uc3Qgc3luY1RlbmFudElEcyA9ICgpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgdGVuYW50IElEcyBmcm9tIGRpZmZlcmVudCBzb3VyY2VzXG4gICAgY29uc3QgdGVuYW50SWRDb29raWUgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsgJylcbiAgICAgIC5maW5kKHJvdyA9PiByb3cuc3RhcnRzV2l0aCgndGVuYW50SWQ9JykpXG4gICAgICA/LnNwbGl0KCc9JylbMV07XG4gICAgXG4gICAgY29uc3QgYnVzaW5lc3NJZENvb2tpZSA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKVxuICAgICAgLmZpbmQocm93ID0+IHJvdy5zdGFydHNXaXRoKCdidXNpbmVzc2lkPScpKVxuICAgICAgPy5zcGxpdCgnPScpWzFdO1xuICAgIFxuICAgIGNvbnN0IGxvY2FsU3RvcmFnZVRlbmFudElkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RlbmFudElkJyk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1tDbGllbnREYXRhU3luY10gQ2hlY2tpbmcgdGVuYW50IElEczonLCB7XG4gICAgICB0ZW5hbnRJZENvb2tpZSxcbiAgICAgIGJ1c2luZXNzSWRDb29raWUsXG4gICAgICBsb2NhbFN0b3JhZ2VUZW5hbnRJZFxuICAgIH0pO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIGFueSB0ZW5hbnQgSUQgaXMgaW52YWxpZCAoY29ycnVwdGVkKVxuICAgIGlmICh0ZW5hbnRJZENvb2tpZSAmJiAhaXNWYWxpZFVVSUQodGVuYW50SWRDb29raWUpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1tDbGllbnREYXRhU3luY10gRGV0ZWN0ZWQgY29ycnVwdGVkIHRlbmFudElkIGNvb2tpZTonLCB0ZW5hbnRJZENvb2tpZSk7XG4gICAgICBcbiAgICAgIC8vIFRyeSB0byB1c2UgYSB2YWxpZCBJRCBmcm9tIGFub3RoZXIgc291cmNlXG4gICAgICBjb25zdCB2YWxpZElkID0gaXNWYWxpZFVVSUQobG9jYWxTdG9yYWdlVGVuYW50SWQpIFxuICAgICAgICA/IGxvY2FsU3RvcmFnZVRlbmFudElkIFxuICAgICAgICA6IChpc1ZhbGlkVVVJRChidXNpbmVzc0lkQ29va2llKSA/IGJ1c2luZXNzSWRDb29raWUgOiBudWxsKTtcbiAgICAgIFxuICAgICAgaWYgKHZhbGlkSWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tDbGllbnREYXRhU3luY10gVXNpbmcgdmFsaWQgdGVuYW50IElEIHRvIHJlcGxhY2UgY29ycnVwdGVkIGNvb2tpZTonLCB2YWxpZElkKTtcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gYHRlbmFudElkPSR7dmFsaWRJZH07IHBhdGg9LzsgbWF4LWFnZT0kezYwKjYwKjI0KjMwfTsgc2FtZXNpdGU9bGF4YDtcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gYGJ1c2luZXNzaWQ9JHt2YWxpZElkfTsgcGF0aD0vOyBtYXgtYWdlPSR7NjAqNjAqMjQqMzB9OyBzYW1lc2l0ZT1sYXhgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgbm8gdmFsaWQgSUQgZm91bmQsIGRlbGV0ZSB0aGUgY29ycnVwdGVkIGNvb2tpZVxuICAgICAgICBjb25zb2xlLndhcm4oJ1tDbGllbnREYXRhU3luY10gTm8gdmFsaWQgdGVuYW50IElEIGZvdW5kLCBjbGVhcmluZyBjb3JydXB0ZWQgY29va2llJyk7XG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICd0ZW5hbnRJZD07IHBhdGg9LzsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVCc7XG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICdidXNpbmVzc2lkPTsgcGF0aD0vOyBleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UJztcbiAgICAgICAgXG4gICAgICAgIC8vIFRyeSB0byBmZXRjaCBhIHRlbmFudCBmcm9tIHNlcnZlciBpZiBhdXRoZW50aWNhdGVkXG4gICAgICAgIGZldGNoVGVuYW50RnJvbVNlcnZlcigpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBFbnN1cmUgY29uc2lzdGVuY3kgYmV0d2VlbiBsb2NhbFN0b3JhZ2UgYW5kIGNvb2tpZXMgaWYgd2UgaGF2ZSBhIHZhbGlkIElEXG4gICAgaWYgKGxvY2FsU3RvcmFnZVRlbmFudElkICYmIGlzVmFsaWRVVUlEKGxvY2FsU3RvcmFnZVRlbmFudElkKSkge1xuICAgICAgaWYgKCF0ZW5hbnRJZENvb2tpZSB8fCB0ZW5hbnRJZENvb2tpZSAhPT0gbG9jYWxTdG9yYWdlVGVuYW50SWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tDbGllbnREYXRhU3luY10gVXNpbmcgbG9jYWwgc3RvcmFnZSB0ZW5hbnQgSUQgZm9yIGNvb2tpZXM6JywgbG9jYWxTdG9yYWdlVGVuYW50SWQpO1xuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgdGVuYW50SWQ9JHtsb2NhbFN0b3JhZ2VUZW5hbnRJZH07IHBhdGg9LzsgbWF4LWFnZT0kezYwKjYwKjI0KjMwfTsgc2FtZXNpdGU9bGF4YDtcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gYGJ1c2luZXNzaWQ9JHtsb2NhbFN0b3JhZ2VUZW5hbnRJZH07IHBhdGg9LzsgbWF4LWFnZT0kezYwKjYwKjI0KjMwfTsgc2FtZXNpdGU9bGF4YDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRlbmFudElkQ29va2llICYmIGlzVmFsaWRVVUlEKHRlbmFudElkQ29va2llKSAmJiAoIWxvY2FsU3RvcmFnZVRlbmFudElkIHx8IGxvY2FsU3RvcmFnZVRlbmFudElkICE9PSB0ZW5hbnRJZENvb2tpZSkpIHtcbiAgICAgIC8vIElmIGNvb2tpZSBoYXMgdmFsaWQgSUQgYnV0IGxvY2FsU3RvcmFnZSBkb2Vzbid0LCB1cGRhdGUgbG9jYWxTdG9yYWdlXG4gICAgICBjb25zb2xlLmxvZygnW0NsaWVudERhdGFTeW5jXSBVc2luZyBjb29raWUgdGVuYW50IElEIGZvciBsb2NhbFN0b3JhZ2U6JywgdGVuYW50SWRDb29raWUpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RlbmFudElkJywgdGVuYW50SWRDb29raWUpO1xuICAgIH0gZWxzZSBpZiAoIWxvY2FsU3RvcmFnZVRlbmFudElkICYmICF0ZW5hbnRJZENvb2tpZSAmJiAhYnVzaW5lc3NJZENvb2tpZSkge1xuICAgICAgLy8gSWYgbm8gdGVuYW50IElEIGlzIGZvdW5kLCB0cnkgdG8gZ2V0IG9uZSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgIGZldGNoVGVuYW50RnJvbVNlcnZlcigpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbQ2xpZW50RGF0YVN5bmNdIEVycm9yIHN5bmNpbmcgdGVuYW50IElEczonLCBlcnJvcik7XG4gIH1cbn07XG5cbi8vIEZ1bmN0aW9uIHRvIGZldGNoIGEgdGVuYW50IElEIGZyb20gdGhlIHNlcnZlclxuY29uc3QgZmV0Y2hUZW5hbnRGcm9tU2VydmVyID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdbQ2xpZW50RGF0YVN5bmNdIEF0dGVtcHRpbmcgdG8gZmV0Y2ggdGVuYW50IGZyb20gc2VydmVyLi4uJyk7XG4gICAgXG4gICAgLy8gQ2FsbCBnZXRPckNyZWF0ZSBlbmRwb2ludCB0byBnZXQgb3IgY3JlYXRlIGEgdGVuYW50XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS90ZW5hbnQvZ2V0T3JDcmVhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBcbiAgICBpZiAoZGF0YS5zdWNjZXNzICYmIGRhdGEudGVuYW50SWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2xpZW50RGF0YVN5bmNdIFN1Y2Nlc3NmdWxseSBvYnRhaW5lZCB0ZW5hbnQgSUQgZnJvbSBzZXJ2ZXI6JywgZGF0YS50ZW5hbnRJZCk7XG4gICAgICBcbiAgICAgIC8vIFN0b3JlIHRoZSB0ZW5hbnQgSUQgaW4gbG9jYWxTdG9yYWdlIGFuZCBjb29raWVzXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGVuYW50SWQnLCBkYXRhLnRlbmFudElkKTtcbiAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGB0ZW5hbnRJZD0ke2RhdGEudGVuYW50SWR9OyBwYXRoPS87IG1heC1hZ2U9JHs2MCo2MCoyNCozMH07IHNhbWVzaXRlPWxheGA7XG4gICAgICBkb2N1bWVudC5jb29raWUgPSBgYnVzaW5lc3NpZD0ke2RhdGEudGVuYW50SWR9OyBwYXRoPS87IG1heC1hZ2U9JHs2MCo2MCoyNCozMH07IHNhbWVzaXRlPWxheGA7XG4gICAgICBcbiAgICAgIC8vIFJlZnJlc2ggdGhlIHBhZ2UgdG8gYXBwbHkgdGhlIG5ldyB0ZW5hbnQgSURcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignW0NsaWVudERhdGFTeW5jXSBGYWlsZWQgdG8gb2J0YWluIHRlbmFudCBJRCBmcm9tIHNlcnZlcjonLCBkYXRhLm1lc3NhZ2UpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbQ2xpZW50RGF0YVN5bmNdIEVycm9yIGZldGNoaW5nIHRlbmFudCBmcm9tIHNlcnZlcjonLCBlcnJvcik7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERhc2hib2FyZENsaWVudCh7IG5ld0FjY291bnQsIHBsYW4gfSkge1xuICBjb25zdCBbaXNDbGllbnQsIHNldElzQ2xpZW50XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzUmVhZHksIHNldElzUmVhZHldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNBdXRoZW50aWNhdGVkLCBzZXRJc0F1dGhlbnRpY2F0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdXNlckRhdGEsIHNldFVzZXJEYXRhXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgW2lzVmVyaWZ5aW5nVGVuYW50LCBzZXRJc1ZlcmlmeWluZ1RlbmFudF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3RlbmFudFZlcmlmaWVkLCBzZXRUZW5hbnRWZXJpZmllZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzZXR1cFN0YXR1cywgc2V0U2V0dXBTdGF0dXNdID0gdXNlU3RhdGUoJ3BlbmRpbmcnKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBcbiAgLy8gUmVwbGFjZSBjb25zdGFudCBsb2dnaW5nIHdpdGggZmlyc3QtcmVuZGVyLW9ubHkgbG9nZ2luZ1xuICBjb25zdCBpc0ZpcnN0UmVuZGVyID0gUmVhY3QudXNlUmVmKHRydWUpO1xuICBpZiAoaXNGaXJzdFJlbmRlci5jdXJyZW50KSB7XG4gICAgY29uc29sZS5sb2coJ0Rhc2hib2FyZENsaWVudCBpbml0aWFsIHJlbmRlciB3aXRoIHByb3BzOicsIHsgbmV3QWNjb3VudCwgcGxhbiB9KTtcbiAgICBpc0ZpcnN0UmVuZGVyLmN1cnJlbnQgPSBmYWxzZTtcbiAgfVxuICBcbiAgLy8gQWRkIHNlYXJjaFBhcmFtc1xuICBjb25zdCBzZWFyY2hQYXJhbXMgPSB1c2VTZWFyY2hQYXJhbXMoKTtcbiAgXG4gIC8vIEFkZCBub3RpZmljYXRpb24gY29udGV4dFxuICBjb25zdCB7IG5vdGlmeVN1Y2Nlc3MsIG5vdGlmeUVycm9yLCBub3RpZnlXYXJuaW5nIH0gPSB1c2VOb3RpZmljYXRpb24oKTtcbiAgXG4gIC8vIERhc2hib2FyZCBsb2FkaW5nIGNvbXBvbmVudFxuICBjb25zdCBEYXNoYm9hcmRMb2FkaW5nU3RhdGUgPSAoKSA9PiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBtaW4taC1zY3JlZW5cIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtMTIgdy0xMiBib3JkZXItdC0yIGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNTAwIG14LWF1dG8gbWItNFwiPjwvZGl2PlxuICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkIG1iLTJcIj5Mb2FkaW5nIHlvdXIgZGFzaGJvYXJkLi4uPC9oMj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMFwiPlBsZWFzZSB3YWl0IHdoaWxlIHdlIHJldHJpZXZlIHlvdXIgZGF0YS48L3A+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcblxuICAvLyBEYXNoYm9hcmQgZXJyb3IgY29tcG9uZW50XG4gIGNvbnN0IERhc2hib2FyZEVycm9yU3RhdGUgPSAoKSA9PiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBtaW4taC1zY3JlZW5cIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgcC02IGJnLXJlZC01MCByb3VuZGVkLWxnIG1heC13LW1kXCI+XG4gICAgICAgIDxzdmcgXG4gICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIFxuICAgICAgICAgIGNsYXNzTmFtZT1cImgtMTIgdy0xMiB0ZXh0LXJlZC01MDAgbXgtYXV0byBtYi00XCIgXG4gICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgXG4gICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0xMiA5djJtMCA0aC4wMW0tNi45MzggNGgxMy44NTZjMS41NCAwIDIuNTAyLTEuNjY3IDEuNzMyLTNMMTMuNzMyIDRjLS43Ny0xLjMzMy0yLjY5NC0xLjMzMy0zLjQ2NCAwTDMuMzQgMTZjLS43NyAxLjMzMy4xOTIgMyAxLjczMiAzelwiIC8+XG4gICAgICAgIDwvc3ZnPlxuICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkIG1iLTJcIj5VbmFibGUgdG8gbG9hZCBkYXNoYm9hcmQ8L2gyPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNzAwIG1iLTRcIj57ZXJyb3IgfHwgXCJUaGVyZSB3YXMgYSBwcm9ibGVtIGxvYWRpbmcgeW91ciBkYXRhLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwifTwvcD5cbiAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCl9IFxuICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbWQgaG92ZXI6YmctYmx1ZS03MDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICA+XG4gICAgICAgICAgUmV0cnlcbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbiAgXG4gIC8vIEZ1bmN0aW9uIHRvIGZpeCBtaXNzaW5nIGF0dHJpYnV0ZXMgaWYgbmVlZGVkXG4gIGFzeW5jIGZ1bmN0aW9uIGVuc3VyZVVzZXJBdHRyaWJ1dGVzQ29tcGxldGUoc2Vzc2lvbiwgdXNlckRhdGEpIHtcbiAgICB0cnkge1xuICAgICAgLy8gRmlyc3QsIHZhbGlkYXRlIHdlIGhhdmUgYSB2YWxpZCBzZXNzaW9uIGFuZCB0b2tlbnNcbiAgICAgIGlmICghc2Vzc2lvbiB8fCAhc2Vzc2lvbi50b2tlbnMgfHwgIXNlc3Npb24udG9rZW5zLmFjY2Vzc1Rva2VuIHx8ICFzZXNzaW9uLnRva2Vucy5pZFRva2VuKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBNaXNzaW5nIHNlc3Npb24gb3IgdG9rZW5zLCBjYW5ub3QgdXBkYXRlIGF0dHJpYnV0ZXMnKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ01pc3NpbmcgYXV0aGVudGljYXRpb24gdG9rZW5zJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSB3ZSBoYXZlIHVzZXIgZGF0YVxuICAgICAgaWYgKCF1c2VyRGF0YSkge1xuICAgICAgICBsb2dnZXIud2FybignW0Rhc2hib2FyZENsaWVudF0gTm8gdXNlciBkYXRhIHByb3ZpZGVkLCBjYW5ub3QgY2hlY2sgYXR0cmlidXRlcycpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnTm8gdXNlciBkYXRhIHByb3ZpZGVkJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBmb3IgbWlzc2luZyBhdHRyaWJ1dGVzXG4gICAgICBjb25zdCBtaXNzaW5nQXR0cmlidXRlcyA9IFtdO1xuICAgICAgY29uc3QgcmVxdWlyZWRBdHRyaWJ1dGVzID0gW1xuICAgICAgICAnY3VzdG9tOmJ1c2luZXNzaWQnLFxuICAgICAgICAnY3VzdG9tOmJ1c2luZXNzbmFtZScsXG4gICAgICAgICdjdXN0b206YnVzaW5lc3N0eXBlJyxcbiAgICAgICAgJ2N1c3RvbTphY2N0c3RhdHVzJyxcbiAgICAgICAgJ2N1c3RvbTpvbmJvYXJkaW5nJyxcbiAgICAgICAgJ2N1c3RvbTpzZXR1cGRvbmUnLFxuICAgICAgICAnY3VzdG9tOmNyZWF0ZWRfYXQnLFxuICAgICAgICAnY3VzdG9tOnVwZGF0ZWRfYXQnXG4gICAgICBdO1xuICAgICAgXG4gICAgICAvLyBDaGVjayB3aGljaCBhdHRyaWJ1dGVzIGFyZSBtaXNzaW5nXG4gICAgICBmb3IgKGNvbnN0IGF0dHIgb2YgcmVxdWlyZWRBdHRyaWJ1dGVzKSB7XG4gICAgICAgIGlmICghdXNlckRhdGFbYXR0cl0pIHtcbiAgICAgICAgICBtaXNzaW5nQXR0cmlidXRlcy5wdXNoKGF0dHIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIElmIG5vIG1pc3NpbmcgYXR0cmlidXRlcywgcmV0dXJuXG4gICAgICBpZiAobWlzc2luZ0F0dHJpYnV0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAnQWxsIGF0dHJpYnV0ZXMgcHJlc2VudCdcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oJ1tEYXNoYm9hcmRDbGllbnRdIERldGVjdGVkIG1pc3NpbmcgYXR0cmlidXRlczonLCBtaXNzaW5nQXR0cmlidXRlcyk7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBhdHRyaWJ1dGVzIHRvIHVwZGF0ZVxuICAgICAgY29uc3QgYXR0cmlidXRlc1RvVXBkYXRlID0ge307XG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBcbiAgICAgIC8vIEZvciBlYWNoIG1pc3NpbmcgYXR0cmlidXRlLCBzZXQgYSBkZWZhdWx0IHZhbHVlXG4gICAgICBtaXNzaW5nQXR0cmlidXRlcy5mb3JFYWNoKGF0dHIgPT4ge1xuICAgICAgICBzd2l0Y2ggKGF0dHIpIHtcbiAgICAgICAgICBjYXNlICdjdXN0b206YnVzaW5lc3NpZCc6XG4gICAgICAgICAgICAvLyBUcnkgdG8gZ2VuZXJhdGUgYSBkZXRlcm1pbmlzdGljIElEIGJhc2VkIG9uIHVzZXIgSUQgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICBpZiAodXNlckRhdGFbJ2N1c3RvbTpidXNpbmVzc2lkJ10pIHtcbiAgICAgICAgICAgICAgYXR0cmlidXRlc1RvVXBkYXRlW2F0dHJdID0gdXNlckRhdGFbJ2N1c3RvbTpidXNpbmVzc2lkJ107XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJEYXRhLnN1Yikge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdjU6IHV1aWR2NSB9ID0gcmVxdWlyZSgndXVpZCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IFRFTkFOVF9OQU1FU1BBQ0UgPSAnOWE1NTFjNDQtNGFkZS00Zjg5LWIwNzgtMGFmOGJlNzk0YzIzJztcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzVG9VcGRhdGVbYXR0cl0gPSB1dWlkdjUodXNlckRhdGEuc3ViLCBURU5BTlRfTkFNRVNQQUNFKTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIHJhbmRvbSBVVUlEIG9ubHkgaWYgYWJzb2x1dGVseSBuZWNlc3NhcnlcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzVG9VcGRhdGVbYXR0cl0gPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBMYXN0IHJlc29ydCBmYWxsYmFja1xuICAgICAgICAgICAgICBhdHRyaWJ1dGVzVG9VcGRhdGVbYXR0cl0gPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnY3VzdG9tOmJ1c2luZXNzbmFtZSc6XG4gICAgICAgICAgICAvLyBUcnkgdG8gZ2V0IGJ1c2luZXNzIG5hbWUgZnJvbSBjb29raWVzIG9yIGxvY2FsU3RvcmFnZVxuICAgICAgICAgICAgY29uc3QgYnVzaW5lc3NOYW1lID0gZ2V0QmVzdEJ1c2luZXNzTmFtZSgpIHx8ICcnO1xuICAgICAgICAgICAgYXR0cmlidXRlc1RvVXBkYXRlW2F0dHJdID0gdXNlckRhdGFbJ2N1c3RvbTpidXNpbmVzc25hbWUnXSB8fCBidXNpbmVzc05hbWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjdXN0b206YnVzaW5lc3N0eXBlJzpcbiAgICAgICAgICAgIGF0dHJpYnV0ZXNUb1VwZGF0ZVthdHRyXSA9IHVzZXJEYXRhWydjdXN0b206YnVzaW5lc3N0eXBlJ10gfHwgJ090aGVyJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2N1c3RvbTphY2N0c3RhdHVzJzpcbiAgICAgICAgICAgIGF0dHJpYnV0ZXNUb1VwZGF0ZVthdHRyXSA9IHVzZXJEYXRhWydjdXN0b206YWNjdHN0YXR1cyddIHx8ICdBQ1RJVkUnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnY3VzdG9tOm9uYm9hcmRpbmcnOlxuICAgICAgICAgICAgYXR0cmlidXRlc1RvVXBkYXRlW2F0dHJdID0gdXNlckRhdGFbJ2N1c3RvbTpvbmJvYXJkaW5nJ10gfHwgJ2NvbXBsZXRlJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2N1c3RvbTpzZXR1cGRvbmUnOlxuICAgICAgICAgICAgYXR0cmlidXRlc1RvVXBkYXRlW2F0dHJdID0gdXNlckRhdGFbJ2N1c3RvbTpzZXR1cGRvbmUnXSB8fCAndHJ1ZSc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjdXN0b206Y3JlYXRlZF9hdCc6XG4gICAgICAgICAgICBhdHRyaWJ1dGVzVG9VcGRhdGVbYXR0cl0gPSB1c2VyRGF0YVsnY3VzdG9tOmNyZWF0ZWRfYXQnXSB8fCB0aW1lc3RhbXA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjdXN0b206dXBkYXRlZF9hdCc6XG4gICAgICAgICAgICBhdHRyaWJ1dGVzVG9VcGRhdGVbYXR0cl0gPSB0aW1lc3RhbXA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGJ1c2luZXNzIG5hbWUgZnJvbSB2YXJpb3VzIHNvdXJjZXNcbiAgICAgIGZ1bmN0aW9uIGdldEJlc3RCdXNpbmVzc05hbWUoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVHJ5IGNvb2tpZXMgZmlyc3RcbiAgICAgICAgICBjb25zdCBnZXRDb29raWUgPSAobmFtZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBgOyAke2RvY3VtZW50LmNvb2tpZX1gO1xuICAgICAgICAgICAgY29uc3QgcGFydHMgPSB2YWx1ZS5zcGxpdChgOyAke25hbWV9PWApO1xuICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgcmV0dXJuIHBhcnRzLnBvcCgpLnNwbGl0KCc7Jykuc2hpZnQoKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgY29va2llTmFtZSA9IGdldENvb2tpZSgnYnVzaW5lc3NOYW1lJykgfHwgZ2V0Q29va2llKCdjdXN0b206YnVzaW5lc3NuYW1lJyk7XG4gICAgICAgICAgaWYgKGNvb2tpZU5hbWUpIHJldHVybiBjb29raWVOYW1lO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFRoZW4gdHJ5IGxvY2FsU3RvcmFnZVxuICAgICAgICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgLy8gVHJ5IGJ1c2luZXNzSW5mbyBvYmplY3RcbiAgICAgICAgICAgICAgY29uc3Qgc3RvcmVkSW5mbyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdidXNpbmVzc0luZm8nKTtcbiAgICAgICAgICAgICAgaWYgKHN0b3JlZEluZm8pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRJbmZvID0gSlNPTi5wYXJzZShzdG9yZWRJbmZvKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkSW5mby5idXNpbmVzc05hbWUpIHJldHVybiBwYXJzZWRJbmZvLmJ1c2luZXNzTmFtZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gVHJ5IGRpcmVjdCBrZXlcbiAgICAgICAgICAgICAgY29uc3QgZGlyZWN0TmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdidXNpbmVzc05hbWUnKTtcbiAgICAgICAgICAgICAgaWYgKGRpcmVjdE5hbWUpIHJldHVybiBkaXJlY3ROYW1lO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAvLyBJZ25vcmUgbG9jYWxTdG9yYWdlIGVycm9yc1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIElnbm9yZSBhbnkgZXJyb3JzIGluIHRoaXMgaGVscGVyXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgYXR0cmlidXRlcyB1c2luZyB0aGUgQVBJLCB3aXRoIGVycm9yIGhhbmRsaW5nIGZvciBuZXR3b3JrIGlzc3Vlc1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS91c2VyL3VwZGF0ZS1hdHRyaWJ1dGVzJywge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtzZXNzaW9uLnRva2Vucy5hY2Nlc3NUb2tlbi50b1N0cmluZygpfWAsXG4gICAgICAgICAgICAnWC1JZC1Ub2tlbic6IHNlc3Npb24udG9rZW5zLmlkVG9rZW4udG9TdHJpbmcoKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgYXR0cmlidXRlczogYXR0cmlidXRlc1RvVXBkYXRlLFxuICAgICAgICAgICAgZm9yY2VVcGRhdGU6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkuY2F0Y2goKCkgPT4gJ1Vua25vd24gZXJyb3InKTtcbiAgICAgICAgICBsb2dnZXIud2FybignW0Rhc2hib2FyZENsaWVudF0gQVBJIHJldHVybmVkIGVycm9yOicsIHsgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsIHRleHQ6IGVycm9yVGV4dCB9KTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogYEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7ZXJyb3JUZXh0fWBcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBsb2dnZXIuaW5mbygnW0Rhc2hib2FyZENsaWVudF0gRml4ZWQgbWlzc2luZyBhdHRyaWJ1dGVzOicsIGF0dHJpYnV0ZXNUb1VwZGF0ZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAnTWlzc2luZyBhdHRyaWJ1dGVzIGZpeGVkJyxcbiAgICAgICAgICB1cGRhdGVkQXR0cmlidXRlczogYXR0cmlidXRlc1RvVXBkYXRlXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChmZXRjaEVycm9yKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBOZXR3b3JrIGVycm9yIHVwZGF0aW5nIGF0dHJpYnV0ZXM6JywgZmV0Y2hFcnJvcik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICAgIGVycm9yOiBgTmV0d29yayBlcnJvcjogJHtmZXRjaEVycm9yLm1lc3NhZ2V9YFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIud2FybignW0Rhc2hib2FyZENsaWVudF0gRXJyb3IgZml4aW5nIG1pc3NpbmcgYXR0cmlidXRlczonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gR2VuZXJhdGUgYSBkZXRlcm1pbmlzdGljIHRlbmFudCBJRCBmcm9tIHRoZSB1c2VyIElEIGlmIG5lZWRlZFxuICBjb25zdCBnZW5lcmF0ZURldGVybWluaXN0aWNUZW5hbnRJZCA9ICh1c2VySWQpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF1c2VySWQpIHJldHVybiBudWxsO1xuICAgICAgXG4gICAgICAvLyBVc2UgVVVJRCB2NSBhbGdvcml0aG0gZm9yIHByb3BlciBkZXRlcm1pbmlzdGljIFVVSUQgZ2VuZXJhdGlvblxuICAgICAgLy8gVGhpcyB1c2VzIGEgU0hBLTEgaGFzaCAodmlhIHN1YnRsZSBjcnlwdG8pIHRvIGVuc3VyZSBjb25zaXN0ZW5jeVxuICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgY29uc3QgZGF0YSA9IGVuY29kZXIuZW5jb2RlKHVzZXJJZCk7XG4gICAgICBcbiAgICAgIC8vIFVVSUQgdjUgbmFtZXNwYWNlICh1c2luZyBETlMgbmFtZXNwYWNlIGFzIGJhc2UpXG4gICAgICBjb25zdCBOQU1FU1BBQ0UgPSAnNmJhN2I4MTAtOWRhZC0xMWQxLTgwYjQtMDBjMDRmZDQzMGM4JztcbiAgICAgIFxuICAgICAgLy8gQ29udmVydCBuYW1lc3BhY2UgdG8gYnl0ZXNcbiAgICAgIGNvbnN0IG5hbWVzcGFjZUJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoMTYpO1xuICAgICAgTkFNRVNQQUNFLnJlcGxhY2UoLy0vZywgJycpLm1hdGNoKC8uezJ9L2cpLm1hcCgoaGV4LCBpKSA9PiB7XG4gICAgICAgIG5hbWVzcGFjZUJ5dGVzW2ldID0gcGFyc2VJbnQoaGV4LCAxNik7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQ29tYmluZSBuYW1lc3BhY2UgYW5kIG5hbWVcbiAgICAgIGNvbnN0IGNvbWJpbmVkQnl0ZXMgPSBuZXcgVWludDhBcnJheSgxNiArIGRhdGEubGVuZ3RoKTtcbiAgICAgIGNvbWJpbmVkQnl0ZXMuc2V0KG5hbWVzcGFjZUJ5dGVzKTtcbiAgICAgIGNvbWJpbmVkQnl0ZXMuc2V0KGRhdGEsIDE2KTtcbiAgICAgIFxuICAgICAgLy8gR2V0IGhhc2ggb2YgY29tYmluZWQgYnl0ZXNcbiAgICAgIC8vIEluIGJyb3dzZXJzIHN1cHBvcnRpbmcgY3J5cHRvLnN1YnRsZTpcbiAgICAgIGlmICh0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uc3VidGxlKSB7XG4gICAgICAgIHJldHVybiBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTEnLCBjb21iaW5lZEJ5dGVzKS50aGVuKGJ1ZmZlciA9PiB7XG4gICAgICAgICAgY29uc3QgaGFzaEFycmF5ID0gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShidWZmZXIpKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGb3JtYXQgYXMgVVVJRCB2NVxuICAgICAgICAgIGhhc2hBcnJheVs2XSA9IChoYXNoQXJyYXlbNl0gJiAweDBmKSB8IDB4NTA7IC8vIFNldCB2ZXJzaW9uIHRvIDVcbiAgICAgICAgICBoYXNoQXJyYXlbOF0gPSAoaGFzaEFycmF5WzhdICYgMHgzZikgfCAweDgwOyAvLyBTZXQgdmFyaWFudFxuICAgICAgICAgIFxuICAgICAgICAgIC8vIENvbnZlcnQgdG8gaGV4IGFuZCBmb3JtYXQgYXMgVVVJRFxuICAgICAgICAgIGNvbnN0IGhleCA9IGhhc2hBcnJheS5tYXAoYiA9PiBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpKS5qb2luKCcnKTtcbiAgICAgICAgICBjb25zdCB1dWlkID0gYCR7aGV4LnNsaWNlKDAsIDgpfS0ke2hleC5zbGljZSg4LCAxMil9LSR7aGV4LnNsaWNlKDEyLCAxNil9LSR7aGV4LnNsaWNlKDE2LCAyMCl9LSR7aGV4LnNsaWNlKDIwLCAzMil9YDtcbiAgICAgICAgICBcbiAgICAgICAgICBsb2dnZXIuaW5mbygnW0Rhc2hib2FyZENsaWVudF0gR2VuZXJhdGVkIGRldGVybWluaXN0aWMgVVVJRCB2NSB0ZW5hbnQgSUQgZnJvbSB1c2VyIElEOicsIHV1aWQpO1xuICAgICAgICAgIHJldHVybiB1dWlkO1xuICAgICAgICB9KS5jYXRjaChlID0+IHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIEVycm9yIGdlbmVyYXRpbmcgVVVJRCB2NSB0ZW5hbnQgSUQ6JywgZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmFsbCBiYWNrIHRvIHNpbXBsZSBoYXNoIG1ldGhvZCBpZiBzdWJ0bGUgY3J5cHRvIGZhaWxzXG4gICAgICAgICAgcmV0dXJuIGdlbmVyYXRlU2ltcGxlSGFzaFRlbmFudElkKHVzZXJJZCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmFsbGJhY2sgZm9yIGVudmlyb25tZW50cyB3aXRob3V0IGNyeXB0by5zdWJ0bGVcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRlU2ltcGxlSGFzaFRlbmFudElkKHVzZXJJZCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nZ2VyLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBFcnJvciBnZW5lcmF0aW5nIHRlbmFudCBJRDonLCBlKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8vIEZhbGxiYWNrIG1ldGhvZCB1c2luZyBzaW1wbGUgaGFzaCBmb3IgZW52aXJvbm1lbnRzIHdpdGhvdXQgY3J5cHRvLnN1YnRsZVxuICBjb25zdCBnZW5lcmF0ZVNpbXBsZUhhc2hUZW5hbnRJZCA9ICh1c2VySWQpID0+IHtcbiAgICBjb25zdCBoYXNoID0gQXJyYXkuZnJvbSh1c2VySWQpLnJlZHVjZSgoYWNjLCBjaGFyKSA9PiB7XG4gICAgICByZXR1cm4gKChhY2MgPDwgNSkgLSBhY2MpICsgY2hhci5jaGFyQ29kZUF0KDApIHwgMDtcbiAgICB9LCAwKS50b1N0cmluZygxNikucGFkU3RhcnQoMzIsICcwJyk7XG4gICAgXG4gICAgLy8gRm9ybWF0IGFzIFVVSUQtbGlrZSBzdHJpbmdcbiAgICBjb25zdCB1dWlkID0gYCR7aGFzaC5zbGljZSgwLCA4KX0tJHtoYXNoLnNsaWNlKDgsIDEyKX0tNSR7aGFzaC5zbGljZSgxMywgMTYpfS0ke2hhc2guc2xpY2UoMTYsIDIwKX0tJHtoYXNoLnNsaWNlKDIwLCAzMil9YDtcbiAgICBsb2dnZXIuaW5mbygnW0Rhc2hib2FyZENsaWVudF0gR2VuZXJhdGVkIGZhbGxiYWNrIHRlbmFudCBJRCBmcm9tIHVzZXIgSUQ6JywgdXVpZCk7XG4gICAgXG4gICAgcmV0dXJuIHV1aWQ7XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB2ZXJpZnlDb2duaXRvU3RhdGUgPSBhc3luYyAoKSA9PiB7XG4gICAgICBzZXRJc1ZlcmlmeWluZ1RlbmFudCh0cnVlKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQWx3YXlzIHRyeSB0byBsb2FkIGZyb20gbG9jYWwgc3RvcmFnZSBmaXJzdFxuICAgICAgICBsZXQgdXNlcklkID0gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gQ2hlY2sgQ29nbml0byBpZGVudGl0eVxuICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBmZXRjaEF1dGhTZXNzaW9uKCk7XG4gICAgICAgICAgY29uc3QgaWRlbnRpdHlUb2tlbiA9IHNlc3Npb24/LnRva2Vucz8uaWRUb2tlbj8udG9TdHJpbmcoKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaWRlbnRpdHlUb2tlbikge1xuICAgICAgICAgICAgY29uc3QgaWRUb2tlblBheWxvYWQgPSBzZXNzaW9uLnRva2Vucy5pZFRva2VuO1xuICAgICAgICAgICAgdXNlcklkID0gaWRUb2tlblBheWxvYWQucGF5bG9hZC5zdWI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh1c2VySWQpIHtcbiAgICAgICAgICAgICAgLy8gU3RvcmUgdXNlciBJRCBpbiBsb2NhbCBzdG9yYWdlXG4gICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySWQnLCB1c2VySWQpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgdGVuYW50IElEIGlmIG5lZWRlZFxuICAgICAgICAgICAgICBjb25zdCB0ZW5hbnRJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0ZW5hbnRJZCcpIHx8IGdlbmVyYXRlRGV0ZXJtaW5pc3RpY1RlbmFudElkKHVzZXJJZCk7XG4gICAgICAgICAgICAgIGlmICh0ZW5hbnRJZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZW5hbnRJZCcsIHRlbmFudElkKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgc2V0SXNBdXRoZW50aWNhdGVkKHRydWUpO1xuICAgICAgICAgICAgICBzZXRUZW5hbnRWZXJpZmllZCh0cnVlKTtcbiAgICAgICAgICAgICAgc2V0SXNWZXJpZnlpbmdUZW5hbnQoZmFsc2UpO1xuICAgICAgICAgICAgICBzZXRTZXR1cFN0YXR1cygnc3VjY2VzcycpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBFcnJvciBmZXRjaGluZyBDb2duaXRvIHNlc3Npb246JywgZSk7XG4gICAgICAgICAgLy8gQ29udGludWUgdG8gZmFsbGJhY2sgbWVjaGFuaXNtc1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiB3ZSBjb3VsZG4ndCBnZXQgZnJvbSBDb2duaXRvLCB0cnkgbG9jYWxTdG9yYWdlXG4gICAgICAgIHVzZXJJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKTtcbiAgICAgICAgY29uc3QgdGVuYW50SWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGVuYW50SWQnKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh1c2VySWQgJiYgdGVuYW50SWQpIHtcbiAgICAgICAgICBzZXRUZW5hbnRWZXJpZmllZCh0cnVlKTtcbiAgICAgICAgICBzZXRJc1ZlcmlmeWluZ1RlbmFudChmYWxzZSk7XG4gICAgICAgICAgc2V0U2V0dXBTdGF0dXMoJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIElmIHdlIGdldCBoZXJlLCB3ZSBmYWlsZWQgdG8gdmVyaWZ5IHRoZSB0ZW5hbnRcbiAgICAgICAgc2V0VGVuYW50VmVyaWZpZWQoZmFsc2UpO1xuICAgICAgICBzZXRJc1ZlcmlmeWluZ1RlbmFudChmYWxzZSk7XG4gICAgICAgIHNldFNldHVwU3RhdHVzKCdmYWlsZWQnKTtcbiAgICAgICAgc2V0RXJyb3IoJ1VuYWJsZSB0byB2ZXJpZnkgdGVuYW50IElELiBQbGVhc2UgdHJ5IHJlZnJlc2hpbmcgdGhlIHBhZ2Ugb3Igc2lnbmluZyBpbiBhZ2Fpbi4nKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcignW0Rhc2hib2FyZENsaWVudF0gRXJyb3IgdmVyaWZ5aW5nIHRlbmFudDonLCBlcnJvcik7XG4gICAgICAgIHNldFRlbmFudFZlcmlmaWVkKGZhbHNlKTtcbiAgICAgICAgc2V0SXNWZXJpZnlpbmdUZW5hbnQoZmFsc2UpO1xuICAgICAgICBzZXRTZXR1cFN0YXR1cygnZmFpbGVkJyk7XG4gICAgICAgIHNldEVycm9yKCdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdmVyaWZ5Q29nbml0b1N0YXRlKCk7XG4gIH0sIFtdKTtcbiAgXG4gIC8vIEZ1bmN0aW9uIHRvIGZpeCB0ZW5hbnQgc2NoZW1hIGlzc3VlcyBpbiBBV1MgUkRTXG4gIGNvbnN0IHNldHVwQXdzUmRzVGFibGVzID0gdXNlQ2FsbGJhY2soYXN5bmMgKHRlbmFudElkKSA9PiB7XG4gICAgaWYgKCF0ZW5hbnRJZCkge1xuICAgICAgY29uc29sZS5lcnJvcignW0Rhc2hib2FyZENsaWVudF0gQ2Fubm90IHNldCB1cCB0YWJsZXM6IE5vIHRlbmFudCBJRCBwcm92aWRlZCcpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTm8gdGVuYW50IElEIHByb3ZpZGVkJyB9O1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coYFtEYXNoYm9hcmRDbGllbnRdIFNldHRpbmcgdXAgQVdTIFJEUyB0YWJsZXMgZm9yIHRlbmFudDogJHt0ZW5hbnRJZH1gKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHRoZSBzY2hlbWEgZmlyc3RcbiAgICAgIGNvbnN0IHNjaGVtYU5hbWUgPSBgdGVuYW50XyR7dGVuYW50SWQucmVwbGFjZSgvLS9nLCAnXycpfWA7XG4gICAgICBcbiAgICAgIC8vIENhbGwgb3VyIEFXUyBSRFMgdGFibGUgY3JlYXRpb24gZW5kcG9pbnRcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvZGIvY3JlYXRlLWF3cy10YWJsZXNgKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBBV1MgUkRTIHRhYmxlIHNldHVwIGNvbXBsZXRlOicsIGRhdGEpO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIEZhaWxlZCB0byBzZXQgdXAgQVdTIFJEUyB0YWJsZXM6JywgZXJyb3JEYXRhKTtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvckRhdGEgfTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0Rhc2hib2FyZENsaWVudF0gRXJyb3Igc2V0dGluZyB1cCBBV1MgUkRTIHRhYmxlczonLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIC8vIEluaXRpYWxpemUgZGF0YWJhc2UgYW5kIGVuc3VyZSB0YWJsZXMgZXhpc3RcbiAgY29uc3QgaW5pdGlhbGl6ZURhdGFiYXNlID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnW0Rhc2hib2FyZENsaWVudF0gSW5pdGlhbGl6aW5nIGRhdGFiYXNlIGNvbm5lY3Rpb24gdG8gQVdTIFJEUycpO1xuICAgICAgXG4gICAgICAvLyBHZXQgdGVuYW50IElEIGZyb20gbG9jYWxTdG9yYWdlIG9yIGNvb2tpZXNcbiAgICAgIGNvbnN0IGxvY2FsU3RvcmFnZVRlbmFudElkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RlbmFudElkJyk7XG4gICAgICBjb25zdCBjb29raWVUZW5hbnRJZCA9ICgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gYDsgJHtkb2N1bWVudC5jb29raWV9YDtcbiAgICAgICAgY29uc3QgcGFydHMgPSB2YWx1ZS5zcGxpdChgOyB0ZW5hbnRJZD1gKTtcbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgcmV0dXJuIHBhcnRzLnBvcCgpLnNwbGl0KCc7Jykuc2hpZnQoKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9KSgpO1xuICAgICAgXG4gICAgICBjb25zdCB0ZW5hbnRJZCA9IGxvY2FsU3RvcmFnZVRlbmFudElkIHx8IGNvb2tpZVRlbmFudElkO1xuICAgICAgXG4gICAgICBpZiAoIXRlbmFudElkKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignW0Rhc2hib2FyZENsaWVudF0gTm8gdGVuYW50IElEIGZvdW5kIGZvciBkYXRhYmFzZSBpbml0aWFsaXphdGlvbiwgc2tpcHBpbmcgdGFibGUgc2V0dXAnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTZXQgdXAgQVdTIFJEUyB0YWJsZXMgd2l0aCB0aGUgdGVuYW50IElEXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXR1cEF3c1Jkc1RhYmxlcyh0ZW5hbnRJZCk7XG4gICAgICBcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBjb25zb2xlLmxvZygnW0Rhc2hib2FyZENsaWVudF0gQVdTIFJEUyB0YWJsZXMgc2V0IHVwIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBBV1MgUkRTIHRhYmxlIHNldHVwIGlzc3VlczonLCByZXN1bHQuZXJyb3IpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBFcnJvciBpbml0aWFsaXppbmcgQVdTIFJEUzonLCBlcnJvcik7XG4gICAgfVxuICB9O1xuICBcbiAgLy8gVGhpcyBlbnN1cmVzIHdlJ3JlIG9ubHkgcmVuZGVyaW5nIG9uIHRoZSBjbGllbnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRJc0NsaWVudCh0cnVlKTtcbiAgICBcbiAgICAvLyBSdW4gZGF0YWJhc2UgaW5pdGlhbGl6YXRpb24gaW1tZWRpYXRlbHkgd2l0aCBBV1MgUkRTXG4gICAgaW5pdGlhbGl6ZURhdGFiYXNlKCk7XG4gICAgXG4gICAgLy8gRW5zdXJlIGNvbnNpc3RlbnQgdGVuYW50IElEIG9uIGluaXRpYWxpemF0aW9uXG4gICAgY29uc3QgZW5zdXJlQ29uc2lzdGVudFRlbmFudElkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ2hlY2sgdmFyaW91cyBzb3VyY2VzXG4gICAgICAgIGNvbnN0IGxvY2FsU3RvcmFnZVRlbmFudElkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RlbmFudElkJyk7XG4gICAgICAgIGNvbnN0IGNvb2tpZVRlbmFudElkID0gKCgpID0+IHtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGA7ICR7ZG9jdW1lbnQuY29va2llfWA7XG4gICAgICAgICAgY29uc3QgcGFydHMgPSB2YWx1ZS5zcGxpdChgOyB0ZW5hbnRJZD1gKTtcbiAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAyKSByZXR1cm4gcGFydHMucG9wKCkuc3BsaXQoJzsnKS5zaGlmdCgpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBpbmNvbnNpc3RlbnQgSURzIG9yIG5vbmUgYXQgYWxsLCBmZXRjaCBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2VUZW5hbnRJZCB8fCAhY29va2llVGVuYW50SWQgfHwgbG9jYWxTdG9yYWdlVGVuYW50SWQgIT09IGNvb2tpZVRlbmFudElkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIFRlbmFudCBJRCBpbmNvbnNpc3RlbmN5IGRldGVjdGVkLCBmZXRjaGluZyBmcm9tIHNlcnZlcicpO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBSZXF1ZXN0IHRoZSB0ZW5hbnQgSUQgZnJvbSB0aGUgc2VydmVyIGJhc2VkIG9uIHRoZSBhdXRoZW50aWNhdGVkIHVzZXJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvdXNlci90ZW5hbnQnLCB7XG4gICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgaWYgKGRhdGEudGVuYW50SWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0Rhc2hib2FyZENsaWVudF0gUmV0cmlldmVkIHRlbmFudCBJRCBmcm9tIHNlcnZlcjonLCBkYXRhLnRlbmFudElkKTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGVuYW50SWQnLCBkYXRhLnRlbmFudElkKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgdGVuYW50SWQ9JHtkYXRhLnRlbmFudElkfTsgcGF0aD0vOyBtYXgtYWdlPSR7NjAqNjAqMjQqMzB9OyBzYW1lc2l0ZT1sYXhgO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNldCB1cCBBV1MgUkRTIHRhYmxlcyBmb3IgdGhpcyB0ZW5hbnRcbiAgICAgICAgICAgICAgICBhd2FpdCBzZXR1cEF3c1Jkc1RhYmxlcyhkYXRhLnRlbmFudElkKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBbHNvIHN0b3JlIHRoZSBzb3VyY2UgZm9yIGRlYnVnZ2luZ1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLnNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIFRlbmFudCBJRCBzb3VyY2U6JywgZGF0YS5zb3VyY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBzZXJ2ZXIgZG9lc24ndCBoYXZlIGEgdGVuYW50IElEIGZvciB0aGlzIHVzZXIsIGdldCBmcm9tIENvZ25pdG9cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgdXNlckF0dHJpYnV0ZXMgPSBhd2FpdCBmZXRjaFVzZXJBdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjb2duaXRvVGVuYW50SWQgPSB1c2VyQXR0cmlidXRlc1snY3VzdG9tOmJ1c2luZXNzaWQnXTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKGNvZ25pdG9UZW5hbnRJZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0Rhc2hib2FyZENsaWVudF0gVXNpbmcgdGVuYW50IElEIGZyb20gQ29nbml0bzonLCBjb2duaXRvVGVuYW50SWQpO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGVuYW50SWQnLCBjb2duaXRvVGVuYW50SWQpO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgdGVuYW50SWQ9JHtjb2duaXRvVGVuYW50SWR9OyBwYXRoPS87IG1heC1hZ2U9JHs2MCo2MCoyNCozMH07IHNhbWVzaXRlPWxheGA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdXAgQVdTIFJEUyB0YWJsZXMgZm9yIHRoaXMgdGVuYW50XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNldHVwQXdzUmRzVGFibGVzKGNvZ25pdG9UZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdGVuYW50IHJlY29yZCBleGlzdHMgaW4gZGF0YWJhc2UgYW5kIHVwZGF0ZSBzZXJ2ZXJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBBbHNvIHVwZGF0ZSB0aGUgdGVuYW50IEFQSVxuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCcvYXBpL3VzZXIvdGVuYW50Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHRlbmFudElkOiBjb2duaXRvVGVuYW50SWQgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0Rhc2hib2FyZENsaWVudF0gVXBkYXRlZCBzZXJ2ZXIgd2l0aCBDb2duaXRvIHRlbmFudCBJRCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh1cGRhdGVFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignW0Rhc2hib2FyZENsaWVudF0gRmFpbGVkIHRvIHVwZGF0ZSBzZXJ2ZXIgd2l0aCB0ZW5hbnQgSUQ6JywgdXBkYXRlRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBPTkxZIENSRUFURSBORVcgVEVOQU5UIElGIEVYUExJQ0lUTFkgUkVRVUVTVEVEXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIGluIGEgbmV3IGFjY291bnQgZmxvdyB0aGF0IGFjdHVhbGx5IHJlcXVpcmVzIGEgbmV3IHRlbmFudFxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3QWNjb3VudCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgZGV0ZXJtaW5pc3RpYyBVVUlEIGJhc2VkIG9uIHVzZXIgSUQgaWYgcG9zc2libGVcbiAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhlIHNhbWUgdXNlciBhbHdheXMgZ2V0cyB0aGUgc2FtZSB0ZW5hbnQgSURcbiAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBkZXRlcm1pbmlzdGljIFVVSUQgYmFzZWQgb24gdXNlciBzdWJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IHVzZXJBdHRyaWJ1dGVzLnN1YjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdjU6IHV1aWR2NSB9ID0gcmVxdWlyZSgndXVpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgVEVOQU5UX05BTUVTUEFDRSA9ICc5YTU1MWM0NC00YWRlLTRmODktYjA3OC0wYWY4YmU3OTRjMjMnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGV0ZXJtaW5pc3RpY1RlbmFudElkID0gdXVpZHY1KHVzZXJJZCwgVEVOQU5UX05BTUVTUEFDRSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBHZW5lcmF0ZWQgZGV0ZXJtaW5pc3RpYyB0ZW5hbnQgSUQgZnJvbSB1c2VyIElEOicsIGRldGVybWluaXN0aWNUZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGVuYW50SWQnLCBkZXRlcm1pbmlzdGljVGVuYW50SWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gYHRlbmFudElkPSR7ZGV0ZXJtaW5pc3RpY1RlbmFudElkfTsgcGF0aD0vOyBtYXgtYWdlPSR7NjAqNjAqMjQqMzB9OyBzYW1lc2l0ZT1sYXhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIHNjaGVtYSBtYW5hZ2VyIHRvIGVuc3VyZSB0YWJsZXMgYW5kIHNjaGVtYSBleGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZW5zdXJlVGVuYW50U2NoZW1hKGRldGVybWluaXN0aWNUZW5hbnRJZCwgdXNlckF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHV1aWRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgZGV0ZXJtaW5pc3RpYyBnZW5lcmF0aW9uIGZhaWxzLCBmYWxsIGJhY2sgdG8gcmFuZG9tIFVVSUQgYXMgYWJzb2x1dGUgbGFzdCByZXNvcnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RlbmFudElkID0gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignW0Rhc2hib2FyZENsaWVudF0gVVVJRCBlcnJvciwgZ2VuZXJhdGVkIHJhbmRvbSB0ZW5hbnQgSUQgYXMgbGFzdCByZXNvcnQ6JywgbmV3VGVuYW50SWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RlbmFudElkJywgbmV3VGVuYW50SWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gYHRlbmFudElkPSR7bmV3VGVuYW50SWR9OyBwYXRoPS87IG1heC1hZ2U9JHs2MCo2MCoyNCozMH07IHNhbWVzaXRlPWxheGA7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgc2NoZW1hIG1hbmFnZXIgdG8gZW5zdXJlIHRhYmxlcyBhbmQgc2NoZW1hIGV4aXN0XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBlbnN1cmVUZW5hbnRTY2hlbWEobmV3VGVuYW50SWQsIHVzZXJBdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgLy8gRW5zdXJlIHRlbmFudCBleGlzdHMgaW4gZGF0YWJhc2UgYW5kIHVwZGF0ZSBzZXJ2ZXJcbiAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBmaW5hbCB0ZW5hbnQgSUQgKGZyb20gZWl0aGVyIGRldGVybWluaXN0aWNUZW5hbnRJZCBvciBuZXdUZW5hbnRJZClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsVGVuYW50SWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGVuYW50SWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgZGF0YWJhc2UgZW52aXJvbm1lbnQgZmlyc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluaXRSZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3RlbmFudC9pbml0LWRiLWVudicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5pdFJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluaXREYXRhID0gYXdhaXQgaW5pdFJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBEYXRhYmFzZSBlbnZpcm9ubWVudCBpbml0aWFsaXphdGlvbjonLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdERhdGEuc3VjY2VzcyA/ICdzdWNjZXNzZnVsJyA6ICdmYWlsZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVGFibGUgZXhpc3RzOicsIGluaXREYXRhLnRhYmxlRXhpc3RzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChqc29uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIEZhaWxlZCB0byBwYXJzZSBpbml0LWRiLWVudiByZXNwb25zZTonLCBqc29uRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29udGludWUgd2l0aCB0aGUgcHJvY2VzcyBkZXNwaXRlIHBhcnNpbmcgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGluaXRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tEYXNoYm9hcmRDbGllbnRdIEVycm9yIGluaXRpYWxpemluZyBkYXRhYmFzZSBlbnZpcm9ubWVudDonLCBpbml0RXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIGFueXdheSBzaW5jZSBlbnN1cmUtZGItcmVjb3JkIGhhcyBpdHMgb3duIGluaXRpYWxpemF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdyBlbnN1cmUgdGhlIHRlbmFudCByZWNvcmQgZXhpc3RzIGluIHRoZSBkYXRhYmFzZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVuYW50UmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS90ZW5hbnQvZW5zdXJlLWRiLXJlY29yZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbmFudElkOiBmaW5hbFRlbmFudElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogdXNlckF0dHJpYnV0ZXMuc3ViLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyQXR0cmlidXRlcy5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXNpbmVzc05hbWU6IHVzZXJBdHRyaWJ1dGVzWydjdXN0b206YnVzaW5lc3NuYW1lJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2VDcmVhdGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVuYW50UmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW5hbnREYXRhID0gYXdhaXQgdGVuYW50UmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBHZW5lcmF0ZWQgdGVuYW50IElEIHNhdmVkIHRvIGRhdGFiYXNlOicsIHRlbmFudERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChqc29uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBGYWlsZWQgdG8gcGFyc2UgdGVuYW50IHJlc3BvbnNlOicsIGpzb25FcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29udGludWUgZGVzcGl0ZSBwYXJzaW5nIGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgdGVuYW50UmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignW0Rhc2hib2FyZENsaWVudF0gRmFpbGVkIHRvIHNhdmUgZ2VuZXJhdGVkIHRlbmFudCBJRCB0byBkYXRhYmFzZTonLCBlcnJvclRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh0ZXh0RXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tEYXNoYm9hcmRDbGllbnRdIEZhaWxlZCB0byBzYXZlIGdlbmVyYXRlZCB0ZW5hbnQgSUQgdG8gZGF0YWJhc2UuIFN0YXR1czonLCB0ZW5hbnRSZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsc28gdXBkYXRlIHRoZSB0ZW5hbnQgQVBJXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnL2FwaS91c2VyL3RlbmFudCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdGVuYW50SWQ6IGZpbmFsVGVuYW50SWQgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIFVwZGF0ZWQgc2VydmVyIHdpdGggZ2VuZXJhdGVkIHRlbmFudCBJRCcpO1xuICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHVwZGF0ZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tEYXNoYm9hcmRDbGllbnRdIEZhaWxlZCB0byB1cGRhdGUgc2VydmVyIHdpdGggdGVuYW50IElEOicsIHVwZGF0ZUVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIE5vIHRlbmFudCBJRCBmb3VuZCwgYnV0IG5ldyBhY2NvdW50IGZsb3cgbm90IGRldGVjdGVkLiBOb3QgY3JlYXRpbmcgYSBuZXcgdGVuYW50LicpO1xuICAgICAgICAgICAgICAgICAgICAgIG5vdGlmeVdhcm5pbmcoJ1VuYWJsZSB0byBkZXRlcm1pbmUgeW91ciBvcmdhbml6YXRpb24gaW5mb3JtYXRpb24uIFBsZWFzZSBsb2cgb3V0IGFuZCBsb2cgYmFjayBpbi4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGNvZ25pdG9FcnJvcikge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0Rhc2hib2FyZENsaWVudF0gRXJyb3IgZmV0Y2hpbmcgQ29nbml0byBhdHRyaWJ1dGVzOicsIGNvZ25pdG9FcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBJZiBBUEkgcmVxdWVzdCBmYWlscywgZmFsbCBiYWNrIHRvIENvZ25pdG9cbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBUZW5hbnQgQVBJIHJlcXVlc3QgZmFpbGVkLCBmYWxsaW5nIGJhY2sgdG8gQ29nbml0bycpO1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJBdHRyaWJ1dGVzID0gYXdhaXQgZmV0Y2hVc2VyQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvZ25pdG9UZW5hbnRJZCA9IHVzZXJBdHRyaWJ1dGVzWydjdXN0b206YnVzaW5lc3NpZCddO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChjb2duaXRvVGVuYW50SWQpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBVc2luZyB0ZW5hbnQgSUQgZnJvbSBDb2duaXRvIGFmdGVyIEFQSSBmYWlsdXJlOicsIGNvZ25pdG9UZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGVuYW50SWQnLCBjb2duaXRvVGVuYW50SWQpO1xuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gYHRlbmFudElkPSR7Y29nbml0b1RlbmFudElkfTsgcGF0aD0vOyBtYXgtYWdlPSR7NjAqNjAqMjQqMzB9OyBzYW1lc2l0ZT1sYXhgO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIGRldGVybWluaXN0aWMgVVVJRCBiYXNlZCBvbiB1c2VyIElEIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlcklkID0gdXNlckF0dHJpYnV0ZXMuc3ViO1xuICAgICAgICAgICAgICAgICAgICBpZiAodXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB2NTogdXVpZHY1IH0gPSByZXF1aXJlKCd1dWlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgVEVOQU5UX05BTUVTUEFDRSA9ICc5YTU1MWM0NC00YWRlLTRmODktYjA3OC0wYWY4YmU3OTRjMjMnO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRlZFRlbmFudElkID0gdXVpZHY1KHVzZXJJZCwgVEVOQU5UX05BTUVTUEFDRSk7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIEdlbmVyYXRlZCBkZXRlcm1pbmlzdGljIHRlbmFudCBJRCBmcm9tIHVzZXIgSUQ6JywgZ2VuZXJhdGVkVGVuYW50SWQpO1xuICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZW5hbnRJZCcsIGdlbmVyYXRlZFRlbmFudElkKTtcbiAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgdGVuYW50SWQ9JHtnZW5lcmF0ZWRUZW5hbnRJZH07IHBhdGg9LzsgbWF4LWFnZT0kezYwKjYwKjI0KjMwfTsgc2FtZXNpdGU9bGF4YDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBSYW5kb20gVVVJRCBhcyBhYnNvbHV0ZSBsYXN0IHJlc29ydFxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RlbmFudElkID0gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tEYXNoYm9hcmRDbGllbnRdIE5vIHVzZXIgSUQgYXZhaWxhYmxlLCB1c2luZyByYW5kb20gVVVJRDonLCBuZXdUZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RlbmFudElkJywgbmV3VGVuYW50SWQpO1xuICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGB0ZW5hbnRJZD0ke25ld1RlbmFudElkfTsgcGF0aD0vOyBtYXgtYWdlPSR7NjAqNjAqMjQqMzB9OyBzYW1lc2l0ZT1sYXhgO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoICh1dWlkRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgVVVJRCBnZW5lcmF0aW9uIGZhaWxzLCB1c2Ugc2ltcGxlIHJhbmRvbSBVVUlEXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RlbmFudElkID0gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0Rhc2hib2FyZENsaWVudF0gVVVJRCBnZW5lcmF0aW9uIGVycm9yLCB1c2luZyByYW5kb20gVVVJRDonLCBuZXdUZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZW5hbnRJZCcsIG5ld1RlbmFudElkKTtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gYHRlbmFudElkPSR7bmV3VGVuYW50SWR9OyBwYXRoPS87IG1heC1hZ2U9JHs2MCo2MCoyNCozMH07IHNhbWVzaXRlPWxheGA7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChjb2duaXRvRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBFcnJvciBmZXRjaGluZyBDb2duaXRvIGF0dHJpYnV0ZXMgYWZ0ZXIgQVBJIGZhaWx1cmU6JywgY29nbml0b0Vycm9yKTtcbiAgICAgICAgICAgICAgICAvLyBVbHRpbWF0ZSBmYWxsYmFjayAtIGdlbmVyYXRlIHJhbmRvbSBVVUlEXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGVuYW50SWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignW0Rhc2hib2FyZENsaWVudF0gQWxsIHRlbmFudCBJRCBzb3VyY2VzIGZhaWxlZCwgdXNpbmcgcmFuZG9tIFVVSUQ6JywgbmV3VGVuYW50SWQpO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZW5hbnRJZCcsIG5ld1RlbmFudElkKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgdGVuYW50SWQ9JHtuZXdUZW5hbnRJZH07IHBhdGg9LzsgbWF4LWFnZT0kezYwKjYwKjI0KjMwfTsgc2FtZXNpdGU9bGF4YDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGZldGNoRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIEVycm9yIGZldGNoaW5nIHRlbmFudCBJRCBmcm9tIHNlcnZlcjonLCBmZXRjaEVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gTG9nIGJ1dCBkb24ndCB0aHJvdyBlcnJvcnNcbiAgICAgICAgY29uc29sZS5lcnJvcignW0Rhc2hib2FyZENsaWVudF0gRXJyb3IgZW5zdXJpbmcgY29uc2lzdGVudCB0ZW5hbnQgSUQ6JywgZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICAvLyBSdW4gdGhlIGNvbnNpc3RlbmN5IGNoZWNrXG4gICAgZW5zdXJlQ29uc2lzdGVudFRlbmFudElkKCk7XG4gICAgXG4gICAgLy8gRmlyc3QgY2hlY2sgaWYgdXNlciBpcyBhdXRoZW50aWNhdGVkIGJ5IGZldGNoaW5nIENvZ25pdG8gYXR0cmlidXRlc1xuICAgIGNvbnN0IGNoZWNrT25ib2FyZGluZ1N0YXR1cyA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBTdGFydGluZyBhdXRoZW50aWNhdGlvbiBhbmQgb25ib2FyZGluZyBzdGF0dXMgY2hlY2snKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHdlIGhhdmUgYSB2YWxpZCBhdXRoIHNlc3Npb25cbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGZldGNoQXV0aFNlc3Npb24oKTtcbiAgICAgICAgaWYgKCFzZXNzaW9uPy50b2tlbnM/LmFjY2Vzc1Rva2VuKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBObyB2YWxpZCBhdXRoIHNlc3Npb24gZm91bmQsIHdpbGwgcmVkaXJlY3QgdG8gc2lnbi1pbicpO1xuICAgICAgICAgIC8vIEFkZCBkZWxheSB0byBzZWUgbG9ncyBiZWZvcmUgcmVkaXJlY3RcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpO1xuICAgICAgICAgIHJvdXRlci5wdXNoKCcvYXV0aC9zaWduaW4nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFVzZXIgaGFzIHZhbGlkIHNlc3Npb24sIHNldCBhdXRoZW50aWNhdGVkXG4gICAgICAgIHNldElzQXV0aGVudGljYXRlZCh0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCB1c2VyIGF0dHJpYnV0ZXMgdG8gY2hlY2sgb25ib2FyZGluZyBzdGF0dXNcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB1c2VyQXR0cmlidXRlcyA9IGF3YWl0IGZldGNoVXNlckF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTdG9yZSB1c2VyIGF0dHJpYnV0ZXMgaW4gc3RhdGVcbiAgICAgICAgICBzZXRVc2VyRGF0YSh1c2VyQXR0cmlidXRlcyk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIFVzZXIgYXR0cmlidXRlcyBmZXRjaGVkOicsIHtcbiAgICAgICAgICAgIGhhc0J1c2luZXNzSWQ6ICEhdXNlckF0dHJpYnV0ZXNbJ2N1c3RvbTpidXNpbmVzc2lkJ10sXG4gICAgICAgICAgICBoYXNCdXNpbmVzc05hbWU6ICEhdXNlckF0dHJpYnV0ZXNbJ2N1c3RvbTpidXNpbmVzc25hbWUnXSxcbiAgICAgICAgICAgIG9uYm9hcmRpbmdTdGF0dXM6IHVzZXJBdHRyaWJ1dGVzWydjdXN0b206b25ib2FyZGluZyddLFxuICAgICAgICAgICAgc2V0dXBEb25lOiB1c2VyQXR0cmlidXRlc1snY3VzdG9tOnNldHVwZG9uZSddXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRU5IQU5DRUQgQ0hFQ0s6IElmIHVzZXIgaGFzIGNvbXBsZXRlZCBvbmJvYXJkaW5nIGFjY29yZGluZyB0byBDb2duaXRvLCB3ZSdyZSBnb29kXG4gICAgICAgICAgaWYgKHVzZXJBdHRyaWJ1dGVzWydjdXN0b206b25ib2FyZGluZyddPy50b0xvd2VyQ2FzZSgpID09PSAnY29tcGxldGUnIHx8IFxuICAgICAgICAgICAgICB1c2VyQXR0cmlidXRlc1snY3VzdG9tOnNldHVwZG9uZSddPy50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBVc2VyIGhhcyBjb21wbGV0ZWQgb25ib2FyZGluZywgc2hvd2luZyBkYXNoYm9hcmQnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHRlbmFudCBJRCB0byBlbnN1cmUgUkxTIHdvcmtzIHByb3Blcmx5XG4gICAgICAgICAgICBpZiAoIXVzZXJBdHRyaWJ1dGVzWydjdXN0b206YnVzaW5lc3NpZCddKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybignW0Rhc2hib2FyZENsaWVudF0gTWlzc2luZyB0ZW5hbnQgSUQgaW4gQ29nbml0bywgd2lsbCBnZW5lcmF0ZSBvbmUgZm9yIFJMUycpO1xuICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIGRldGVybWluaXN0aWMgVVVJRCBmcm9tIHVzZXIgSUQgdG8gZW5zdXJlIGNvbnNpc3RlbmN5XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB2NTogdXVpZHY1IH0gPSByZXF1aXJlKCd1dWlkJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgVEVOQU5UX05BTUVTUEFDRSA9ICc5YTU1MWM0NC00YWRlLTRmODktYjA3OC0wYWY4YmU3OTRjMjMnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRlZFRlbmFudElkID0gdXVpZHY1KHVzZXJBdHRyaWJ1dGVzLnN1YiwgVEVOQU5UX05BTUVTUEFDRSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoaXMgdG8gdGhlIGF0dHJpYnV0ZXMgdGhhdCBuZWVkIHVwZGF0aW5nXG4gICAgICAgICAgICAgICAgdXNlckF0dHJpYnV0ZXNbJ2N1c3RvbTpidXNpbmVzc2lkJ10gPSBnZW5lcmF0ZWRUZW5hbnRJZDtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGVuYW50SWQnLCBnZW5lcmF0ZWRUZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gYHRlbmFudElkPSR7Z2VuZXJhdGVkVGVuYW50SWR9OyBwYXRoPS87IG1heC1hZ2U9JHs2MCo2MCoyNCozMH07IHNhbWVzaXRlPWxheGA7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIEdlbmVyYXRlZCB0ZW5hbnQgSUQgZm9yIFJMUzonLCBnZW5lcmF0ZWRUZW5hbnRJZCk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBFcnJvciBnZW5lcmF0aW5nIHRlbmFudCBJRDonLCBlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGaXggYW55IG1pc3NpbmcgYXR0cmlidXRlcyBpbiB0aGUgYmFja2dyb3VuZFxuICAgICAgICAgICAgZW5zdXJlVXNlckF0dHJpYnV0ZXNDb21wbGV0ZShzZXNzaW9uLCB1c2VyQXR0cmlidXRlcylcbiAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IGNvbnNvbGUuZGVidWcoJ1tEYXNoYm9hcmRDbGllbnRdIEF0dHJpYnV0ZSBjaGVjayByZXN1bHQ6JywgcmVzdWx0KSlcbiAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBCYWNrZ3JvdW5kIGF0dHJpYnV0ZSBjaGVjayBlcnJvcjonLCBlcnIpKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICBzZXRJc1JlYWR5KHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoYXR0ckVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBFcnJvciBmZXRjaGluZyB1c2VyIGF0dHJpYnV0ZXMsIHVzaW5nIGNvb2tpZXMgYXMgZmFsbGJhY2s6JywgYXR0ckVycm9yKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBFdmVuIGlmIHdlIGNhbid0IGdldCBhdHRyaWJ1dGVzLCB3ZSBjYW4gdXNlIGNvb2tpZXNcbiAgICAgICAgICBjb25zdCBnZXRDb29raWUgPSAobmFtZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBgOyAke2RvY3VtZW50LmNvb2tpZX1gO1xuICAgICAgICAgICAgY29uc3QgcGFydHMgPSB2YWx1ZS5zcGxpdChgOyAke25hbWV9PWApO1xuICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgcmV0dXJuIHBhcnRzLnBvcCgpLnNwbGl0KCc7Jykuc2hpZnQoKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgY29va2llcyBmb3Igb25ib2FyZGluZyBzdGF0dXNcbiAgICAgICAgICBjb25zdCBvbmJvYXJkaW5nU3RhdHVzID0gZ2V0Q29va2llKCdvbmJvYXJkZWRTdGF0dXMnKSB8fCBnZXRDb29raWUoJ29uYm9hcmRpbmdTdGF0dXMnKTtcbiAgICAgICAgICBjb25zdCBzZXR1cENvbXBsZXRlZCA9IGdldENvb2tpZSgnc2V0dXBDb21wbGV0ZWQnKSB8fCBnZXRDb29raWUoJ3NldHVwRG9uZScpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChvbmJvYXJkaW5nU3RhdHVzID09PSAnY29tcGxldGUnIHx8IHNldHVwQ29tcGxldGVkID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBDb29raWVzIGluZGljYXRlIG9uYm9hcmRpbmcgaXMgY29tcGxldGUsIHNob3dpbmcgZGFzaGJvYXJkJyk7XG4gICAgICAgICAgICBzZXRJc1JlYWR5KHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2V0IGlzUmVhZHkgdHJ1ZSBldmVuIGlmIHdlIGRvbid0IGhhdmUgYXR0cmlidXRlcyBvciBjb29raWVzXG4gICAgICAgIC8vIFRoZSBEYXNoYm9hcmRXcmFwcGVyIHdpbGwgaGFuZGxlIGZ1cnRoZXIgdmVyaWZpY2F0aW9uXG4gICAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBQcm9jZWVkaW5nIHRvIGRhc2hib2FyZCwgRGFzaGJvYXJkV3JhcHBlciB3aWxsIGhhbmRsZSB2ZXJpZmljYXRpb24nKTtcbiAgICAgICAgc2V0SXNSZWFkeSh0cnVlKTtcbiAgICAgICAgXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBMb2cgZXJyb3IgYW5kIHJlZGlyZWN0XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIEVycm9yIGNoZWNraW5nIGF1dGggc3RhdHVzOicsIGVycm9yKTtcbiAgICAgICAgcm91dGVyLnB1c2goJy9hdXRoL3NpZ25pbj9yZXR1cm5Vcmw9JyArIGVuY29kZVVSSUNvbXBvbmVudCgnL2Rhc2hib2FyZCcpKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8vIFJ1biB0aGUgY2hlY2sgYnV0IHNldCBhIHRpbWVvdXQgdG8gcHJldmVudCBpbmZpbml0ZSBsb2FkaW5nXG4gICAgY2hlY2tPbmJvYXJkaW5nU3RhdHVzKCk7XG4gICAgXG4gICAgLy8gU2V0IGEgdGltZW91dCB0byBlbnN1cmUgd2UgZG9uJ3QgZ2V0IHN0dWNrIGluIGEgbG9hZGluZyBzdGF0ZVxuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghaXNSZWFkeSkge1xuICAgICAgICBjb25zb2xlLmxvZygn4pqg77iPIERhc2hib2FyZCBsb2FkaW5nIHRpbWVvdXQgLSBmb3JjaW5nIHJlYWR5IHN0YXRlJyk7XG4gICAgICAgIHNldElzUmVhZHkodHJ1ZSk7XG4gICAgICB9XG4gICAgfSwgNTAwMCk7XG4gICAgXG4gICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgfSwgW3JvdXRlcl0pO1xuICBcbiAgLy8gRnVuY3Rpb24gdG8gcmVmcmVzaCB1c2VyIGRhdGFcbiAgY29uc3QgcmVmcmVzaFVzZXJEYXRhID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghaXNBdXRoZW50aWNhdGVkKSByZXR1cm47XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBSZWZyZXNoaW5nIHVzZXIgZGF0YScpO1xuICAgICAgY29uc3QgdXNlckF0dHJpYnV0ZXMgPSBhd2FpdCBmZXRjaFVzZXJBdHRyaWJ1dGVzKCk7XG4gICAgICBzZXRVc2VyRGF0YSh1c2VyQXR0cmlidXRlcyk7XG4gICAgICByZXR1cm4gdXNlckF0dHJpYnV0ZXM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIEVycm9yIHJlZnJlc2hpbmcgdXNlciBkYXRhOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwgW2lzQXV0aGVudGljYXRlZF0pO1xuICBcbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGhhbmRsZSBzdWJzY3JpcHRpb24gc3VjY2Vzc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZVN1YnNjcmlwdGlvblN1Y2Nlc3MgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdWJzY3JpcHRpb25TdWNjZXNzID0gc2VhcmNoUGFyYW1zLmdldCgnc3Vic2NyaXB0aW9uX3N1Y2Nlc3MnKTtcbiAgICAgIGNvbnN0IHNlc3Npb25JZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ3Nlc3Npb25faWQnKTtcbiAgICAgIFxuICAgICAgaWYgKHN1YnNjcmlwdGlvblN1Y2Nlc3MgPT09ICd0cnVlJyAmJiBzZXNzaW9uSWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coYFtTdWJzY3JpcHRpb25dIFByb2Nlc3Npbmcgc3VjY2Vzc2Z1bCBzdWJzY3JpcHRpb24gd2l0aCBzZXNzaW9uIElEOiAke3Nlc3Npb25JZH1gKTtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gQ2FsbCBvdXIgc2Vzc2lvbi1zdWNjZXNzIEFQSSB0byB2ZXJpZnkgYW5kIHByb2Nlc3MgdGhlIHN1YnNjcmlwdGlvblxuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvY2hlY2tvdXQvc2Vzc2lvbi1zdWNjZXNzJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uSWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTdWJzY3JpcHRpb25dIFN1Y2Nlc3NmdWxseSBwcm9jZXNzZWQgY2hlY2tvdXQgc2Vzc2lvbjonLCBkYXRhKTtcbiAgICAgICAgICAgIG5vdGlmeVN1Y2Nlc3MoJ1N1YnNjcmlwdGlvbiBzdWNjZXNzZnVsbHkgdXBncmFkZWQhJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlZnJlc2ggdXNlciBkYXRhIHRvIGdldCB0aGUgdXBkYXRlZCBzdWJzY3JpcHRpb24gc3RhdHVzXG4gICAgICAgICAgICBhd2FpdCByZWZyZXNoVXNlckRhdGEoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2xlYW4gdGhlIFVSTCBieSByZW1vdmluZyBxdWVyeSBwYXJhbWV0ZXJzXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCdzdWJzY3JpcHRpb25fc3VjY2VzcycpO1xuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5kZWxldGUoJ3Nlc3Npb25faWQnKTtcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgZG9jdW1lbnQudGl0bGUsIHVybC50b1N0cmluZygpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1N1YnNjcmlwdGlvbl0gRmFpbGVkIHRvIHByb2Nlc3MgY2hlY2tvdXQgc2Vzc2lvbjonLCBlcnJvckRhdGEpO1xuICAgICAgICAgICAgbm90aWZ5RXJyb3IoJ0ZhaWxlZCB0byB2ZXJpZnkgc3Vic2NyaXB0aW9uLiBQbGVhc2UgY29udGFjdCBzdXBwb3J0LicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdbU3Vic2NyaXB0aW9uXSBFcnJvciBwcm9jZXNzaW5nIHN1YnNjcmlwdGlvbjonLCBlcnJvcik7XG4gICAgICAgICAgbm90aWZ5RXJyb3IoJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIHByb2Nlc3NpbmcgeW91ciBzdWJzY3JpcHRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8vIE9ubHkgcnVuIGlmIGF1dGhlbnRpY2F0ZWRcbiAgICBpZiAoaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICBoYW5kbGVTdWJzY3JpcHRpb25TdWNjZXNzKCk7XG4gICAgfVxuICB9LCBbc2VhcmNoUGFyYW1zLCBpc0F1dGhlbnRpY2F0ZWQsIG5vdGlmeVN1Y2Nlc3MsIG5vdGlmeUVycm9yXSk7XG4gIFxuICAvLyBVcGRhdGUgbG9hZGluZyBzdGF0ZSBiYXNlZCBvbiBkYXRhIGF2YWlsYWJpbGl0eVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFNldCBsb2FkaW5nIHRvIGZhbHNlIG9ubHkgd2hlbiB3ZSBoYXZlIHJlYWwgZGF0YVxuICAgIGlmICh1c2VyRGF0YSAmJiBPYmplY3Qua2V5cyh1c2VyRGF0YSkubGVuZ3RoID4gMCAmJiB0ZW5hbnRWZXJpZmllZCkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFt1c2VyRGF0YSwgdGVuYW50VmVyaWZpZWRdKTtcbiAgXG4gIC8vIFNob3cgbG9hZGluZyBzdGF0ZSBpZiBzdGlsbCBsb2FkaW5nIHRlbmFudCBvciB1c2VyIGRhdGFcbiAgaWYgKGlzTG9hZGluZyB8fCBpc1ZlcmlmeWluZ1RlbmFudCB8fCAhdGVuYW50VmVyaWZpZWQpIHtcbiAgICByZXR1cm4gPERhc2hib2FyZExvYWRpbmdTdGF0ZSAvPjtcbiAgfVxuXG4gIC8vIFNob3cgZXJyb3Igc3RhdGUgaWYgdGhlcmUncyBhbiBlcnJvclxuICBpZiAoZXJyb3IgfHwgc2V0dXBTdGF0dXMgPT09ICdmYWlsZWQnKSB7XG4gICAgcmV0dXJuIDxEYXNoYm9hcmRFcnJvclN0YXRlIC8+O1xuICB9XG5cbiAgLy8gRG9uJ3Qgc2hvdyB0aGUgZGFzaGJvYXJkIHVudGlsIHdlIGhhdmUgYWN0dWFsIHVzZXJEYXRhXG4gIGlmICghdXNlckRhdGEgfHwgT2JqZWN0LmtleXModXNlckRhdGEpLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiA8RGFzaGJvYXJkTG9hZGluZ1N0YXRlIC8+O1xuICB9XG5cbiAgaWYgKCFpc0NsaWVudCkge1xuICAgIHJldHVybiA8RGFzaGJvYXJkV3JhcHBlciBcbiAgICAgIG5ld0FjY291bnQ9e3VzZXJEYXRhPy5bJ2N1c3RvbTppc05ldyddID09PSAndHJ1ZScgfHwgbmV3QWNjb3VudCA9PT0gJ3RydWUnfVxuICAgICAgcGxhbj17cGxhbiB8fCB1c2VyRGF0YT8uWydjdXN0b206cGxhbiddfVxuICAgIC8+O1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgey8qIEFkbWluIHBhbmVsIGZvciBhZG1pbiB1c2VycyAqL31cbiAgICAgIHt1c2VyRGF0YT8uWydjdXN0b206aXNhZG1pbiddID09PSAndHJ1ZScgJiYgaXNBdXRoZW50aWNhdGVkICYmIHNlYXJjaFBhcmFtcy5nZXQoJ2FkbWluJykgPT09ICd0cnVlJyAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuXCI+XG4gICAgICAgICAgPERhdGFiYXNlQWRtaW4gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgICAgXG4gICAgICB7LyogQWx3YXlzIHJlbmRlciBEYXNoYm9hcmRXcmFwcGVyICovfVxuICAgICAgPERhc2hib2FyZFdyYXBwZXIgXG4gICAgICAgIG5ld0FjY291bnQ9e3VzZXJEYXRhPy5bJ2N1c3RvbTppc05ldyddID09PSAndHJ1ZScgfHwgbmV3QWNjb3VudCA9PT0gJ3RydWUnfVxuICAgICAgICBwbGFuPXtwbGFuIHx8IHVzZXJEYXRhPy5bJ2N1c3RvbTpwbGFuJ119XG4gICAgICAvPlxuICAgIDwvPlxuICApO1xufVxuXG4vKipcbiAqIEVuc3VyZSB0aGUgdGVuYW50IHNjaGVtYSBleGlzdHNcbiAqL1xuY29uc3QgZW5zdXJlVGVuYW50U2NoZW1hID0gYXN5bmMgKHRlbmFudElkLCB1c2VyQXR0cmlidXRlcykgPT4ge1xuICB0cnkge1xuICAgIC8vIENhbGwgdGhlIHRlbmFudCBtYW5hZ2VyIEFQSVxuICAgIGNvbnN0IHRlbmFudE1hbmFnZXJSZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3RlbmFudC90ZW5hbnQtbWFuYWdlcicsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICB0ZW5hbnRfaWQ6IHRlbmFudElkLFxuICAgICAgICB1c2VyX2lkOiB1c2VyQXR0cmlidXRlcy5zdWIsXG4gICAgICAgIGJ1c2luZXNzX25hbWU6IHVzZXJBdHRyaWJ1dGVzWydjdXN0b206YnVzaW5lc3NuYW1lJ10sXG4gICAgICAgIGZvcmNlQ3JlYXRlOiB0cnVlIC8vIEV4cGxpY2l0bHkgcmVxdWVzdCB0ZW5hbnQgY3JlYXRpb25cbiAgICAgIH0pXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHRlbmFudE1hbmFnZXJSZXNwb25zZS5vaykge1xuICAgICAgY29uc3Qgc2NoZW1hUmVzdWx0ID0gYXdhaXQgdGVuYW50TWFuYWdlclJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBUZW5hbnQgbWFuYWdlciByZXN1bHQ6Jywgc2NoZW1hUmVzdWx0KTtcbiAgICAgIFxuICAgICAgaWYgKHNjaGVtYVJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiBzY2hlbWFSZXN1bHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBUZW5hbnQgY3JlYXRpb24gZmFpbGVkOicsIHNjaGVtYVJlc3VsdCk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBUZW5hbnQgbWFuYWdlciBBUEkgZmFpbGVkOicsIGF3YWl0IHRlbmFudE1hbmFnZXJSZXNwb25zZS50ZXh0KCkpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIEVycm9yIGluIHRlbmFudCBzZXR1cDonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbi8vIEZ1bmN0aW9uIHRvIHZhbGlkYXRlIHRlbmFudCBJRFxuY29uc3QgaXNWYWxpZFVVSUQgPSAoaWQpID0+IHtcbiAgaWYgKCFpZCkgcmV0dXJuIGZhbHNlO1xuICAvLyBDaGVjayBpZiBpdCdzIGEgdmFsaWQgVVVJRCBmb3JtYXRcbiAgY29uc3QgdXVpZFJlZ2V4ID0gL15bMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXsxMn0kL2k7XG4gIHJldHVybiB1dWlkUmVnZXgudGVzdChpZCk7XG59OyAiXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsImxvZ2dlciIsIkRhc2hib2FyZFdyYXBwZXIiLCJ1c2VSb3V0ZXIiLCJ1c2VTZWFyY2hQYXJhbXMiLCJDT09LSUVfTkFNRVMiLCJPTkJPQVJESU5HX1NUQVRVUyIsImZldGNoQXV0aFNlc3Npb24iLCJmZXRjaFVzZXJBdHRyaWJ1dGVzIiwiZHluYW1pYyIsIlJlYWN0IiwiRGFzaGJvYXJkTG9hZGVyIiwidXNlTm90aWZpY2F0aW9uIiwidXNlU2Vzc2lvbiIsInY0IiwidXVpZHY0IiwiRGF0YWJhc2VBZG1pbiIsImxvYWRpbmciLCJkaXYiLCJzc3IiLCJjaGVja0ZvclVzZXJPbmJvYXJkaW5nRGF0YSIsImJ1c2luZXNzSW5mbyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJwYXJzZWRJbmZvIiwiSlNPTiIsInBhcnNlIiwiYnVzaW5lc3NOYW1lIiwiYnVzaW5lc3NUeXBlIiwiZSIsImNvb2tpZXMiLCJkb2N1bWVudCIsImNvb2tpZSIsInNwbGl0IiwibmFtZSIsInZhbHVlIiwidHJpbSIsImdldFVzZXJCdXNpbmVzc05hbWUiLCJnZXRDb29raWUiLCJwYXJ0cyIsImxlbmd0aCIsInBvcCIsInNoaWZ0IiwiY29va2llTmFtZSIsInN0b3JlZEluZm8iLCJkaXJlY3ROYW1lIiwiZ2V0VXNlckJ1c2luZXNzVHlwZSIsIkNsaWVudERhdGFTeW5jIiwic3luY0NvbXBsZXRlIiwic2V0U3luY0NvbXBsZXRlIiwic3luY0NsaWVudERhdGEiLCJ0ZW5hbnRJZCIsImZpbmQiLCJjIiwic3RhcnRzV2l0aCIsImluZm8iLCJzZXRJdGVtIiwic3luY1RlbmFudElEcyIsImVycm9yIiwidGVuYW50SWRDb29raWUiLCJyb3ciLCJidXNpbmVzc0lkQ29va2llIiwibG9jYWxTdG9yYWdlVGVuYW50SWQiLCJjb25zb2xlIiwibG9nIiwiaXNWYWxpZFVVSUQiLCJ3YXJuIiwidmFsaWRJZCIsImZldGNoVGVuYW50RnJvbVNlcnZlciIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwib2siLCJFcnJvciIsInN0YXR1cyIsImRhdGEiLCJqc29uIiwic3VjY2VzcyIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwibWVzc2FnZSIsIkRhc2hib2FyZENsaWVudCIsIm5ld0FjY291bnQiLCJwbGFuIiwiaXNDbGllbnQiLCJzZXRJc0NsaWVudCIsImlzUmVhZHkiLCJzZXRJc1JlYWR5IiwiaXNBdXRoZW50aWNhdGVkIiwic2V0SXNBdXRoZW50aWNhdGVkIiwidXNlckRhdGEiLCJzZXRVc2VyRGF0YSIsInJvdXRlciIsImlzVmVyaWZ5aW5nVGVuYW50Iiwic2V0SXNWZXJpZnlpbmdUZW5hbnQiLCJ0ZW5hbnRWZXJpZmllZCIsInNldFRlbmFudFZlcmlmaWVkIiwic2V0dXBTdGF0dXMiLCJzZXRTZXR1cFN0YXR1cyIsInNldEVycm9yIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwiaXNGaXJzdFJlbmRlciIsInVzZVJlZiIsImN1cnJlbnQiLCJzZWFyY2hQYXJhbXMiLCJub3RpZnlTdWNjZXNzIiwibm90aWZ5RXJyb3IiLCJub3RpZnlXYXJuaW5nIiwiRGFzaGJvYXJkTG9hZGluZ1N0YXRlIiwiY2xhc3NOYW1lIiwiaDIiLCJwIiwiRGFzaGJvYXJkRXJyb3JTdGF0ZSIsInN2ZyIsInhtbG5zIiwiZmlsbCIsInZpZXdCb3giLCJzdHJva2UiLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwiYnV0dG9uIiwib25DbGljayIsImVuc3VyZVVzZXJBdHRyaWJ1dGVzQ29tcGxldGUiLCJzZXNzaW9uIiwidG9rZW5zIiwiYWNjZXNzVG9rZW4iLCJpZFRva2VuIiwibWlzc2luZ0F0dHJpYnV0ZXMiLCJyZXF1aXJlZEF0dHJpYnV0ZXMiLCJhdHRyIiwicHVzaCIsImF0dHJpYnV0ZXNUb1VwZGF0ZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImZvckVhY2giLCJzdWIiLCJ2NSIsInV1aWR2NSIsInJlcXVpcmUiLCJURU5BTlRfTkFNRVNQQUNFIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsImdldEJlc3RCdXNpbmVzc05hbWUiLCJ0b1N0cmluZyIsImJvZHkiLCJzdHJpbmdpZnkiLCJhdHRyaWJ1dGVzIiwiZm9yY2VVcGRhdGUiLCJlcnJvclRleHQiLCJ0ZXh0IiwiY2F0Y2giLCJ1cGRhdGVkQXR0cmlidXRlcyIsImZldGNoRXJyb3IiLCJnZW5lcmF0ZURldGVybWluaXN0aWNUZW5hbnRJZCIsInVzZXJJZCIsImVuY29kZXIiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsIk5BTUVTUEFDRSIsIm5hbWVzcGFjZUJ5dGVzIiwiVWludDhBcnJheSIsInJlcGxhY2UiLCJtYXRjaCIsIm1hcCIsImhleCIsImkiLCJwYXJzZUludCIsImNvbWJpbmVkQnl0ZXMiLCJzZXQiLCJzdWJ0bGUiLCJkaWdlc3QiLCJ0aGVuIiwiYnVmZmVyIiwiaGFzaEFycmF5IiwiQXJyYXkiLCJmcm9tIiwiYiIsInBhZFN0YXJ0Iiwiam9pbiIsInV1aWQiLCJzbGljZSIsImdlbmVyYXRlU2ltcGxlSGFzaFRlbmFudElkIiwiaGFzaCIsInJlZHVjZSIsImFjYyIsImNoYXIiLCJjaGFyQ29kZUF0IiwidmVyaWZ5Q29nbml0b1N0YXRlIiwiaWRlbnRpdHlUb2tlbiIsImlkVG9rZW5QYXlsb2FkIiwicGF5bG9hZCIsInNldHVwQXdzUmRzVGFibGVzIiwic2NoZW1hTmFtZSIsImVycm9yRGF0YSIsImluaXRpYWxpemVEYXRhYmFzZSIsImNvb2tpZVRlbmFudElkIiwicmVzdWx0IiwiZW5zdXJlQ29uc2lzdGVudFRlbmFudElkIiwic291cmNlIiwidXNlckF0dHJpYnV0ZXMiLCJjb2duaXRvVGVuYW50SWQiLCJ1cGRhdGVFcnJvciIsImRldGVybWluaXN0aWNUZW5hbnRJZCIsImVuc3VyZVRlbmFudFNjaGVtYSIsInV1aWRFcnJvciIsIm5ld1RlbmFudElkIiwiZmluYWxUZW5hbnRJZCIsImluaXRSZXNwb25zZSIsImluaXREYXRhIiwidGFibGVFeGlzdHMiLCJqc29uRXJyb3IiLCJpbml0RXJyb3IiLCJ0ZW5hbnRSZXNwb25zZSIsImVtYWlsIiwiZm9yY2VDcmVhdGUiLCJ0ZW5hbnREYXRhIiwidGV4dEVycm9yIiwiY29nbml0b0Vycm9yIiwiZ2VuZXJhdGVkVGVuYW50SWQiLCJjaGVja09uYm9hcmRpbmdTdGF0dXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJoYXNCdXNpbmVzc0lkIiwiaGFzQnVzaW5lc3NOYW1lIiwib25ib2FyZGluZ1N0YXR1cyIsInNldHVwRG9uZSIsInRvTG93ZXJDYXNlIiwiZGVidWciLCJlcnIiLCJhdHRyRXJyb3IiLCJzZXR1cENvbXBsZXRlZCIsImVuY29kZVVSSUNvbXBvbmVudCIsInRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJyZWZyZXNoVXNlckRhdGEiLCJoYW5kbGVTdWJzY3JpcHRpb25TdWNjZXNzIiwic3Vic2NyaXB0aW9uU3VjY2VzcyIsImdldCIsInNlc3Npb25JZCIsInNlc3Npb25faWQiLCJ1cmwiLCJVUkwiLCJocmVmIiwiZGVsZXRlIiwiaGlzdG9yeSIsInJlcGxhY2VTdGF0ZSIsInRpdGxlIiwiT2JqZWN0Iiwia2V5cyIsInRlbmFudE1hbmFnZXJSZXNwb25zZSIsInRlbmFudF9pZCIsInVzZXJfaWQiLCJidXNpbmVzc19uYW1lIiwic2NoZW1hUmVzdWx0IiwiaWQiLCJ1dWlkUmVnZXgiLCJ0ZXN0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/dashboard/DashboardClient.js\n"));

/***/ })

});