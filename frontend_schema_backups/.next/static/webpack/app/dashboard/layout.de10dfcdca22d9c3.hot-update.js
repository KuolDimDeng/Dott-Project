"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/dashboard/layout",{

/***/ "(app-pages-browser)/./src/app/dashboard/DashboardClient.js":
/*!**********************************************!*\
  !*** ./src/app/dashboard/DashboardClient.js ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClientDataSync: () => (/* binding */ ClientDataSync),\n/* harmony export */   \"default\": () => (/* binding */ DashboardClient)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/logger */ \"(app-pages-browser)/./src/utils/logger.js\");\n/* harmony import */ var _DashboardWrapper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DashboardWrapper */ \"(app-pages-browser)/./src/app/dashboard/DashboardWrapper.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _constants_onboarding__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/constants/onboarding */ \"(app-pages-browser)/./src/constants/onboarding.js\");\n/* harmony import */ var _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/auth */ \"(app-pages-browser)/../../node_modules/.pnpm/@aws-amplify+core@6.11.1/node_modules/@aws-amplify/core/dist/esm/singleton/apis/fetchAuthSession.mjs\");\n/* harmony import */ var _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @aws-amplify/auth */ \"(app-pages-browser)/../../node_modules/.pnpm/@aws-amplify+auth@6.12.1_@aws-amplify+core@6.11.1/node_modules/@aws-amplify/auth/dist/esm/providers/cognito/apis/fetchUserAttributes.mjs\");\n/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dynamic */ \"(app-pages-browser)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/api/app-dynamic.js\");\n/* harmony import */ var _components_DashboardLoader__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/DashboardLoader */ \"(app-pages-browser)/./src/components/DashboardLoader.js\");\n/* harmony import */ var _context_NotificationContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/context/NotificationContext */ \"(app-pages-browser)/./src/context/NotificationContext.js\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next-auth/react */ \"(app-pages-browser)/../../node_modules/.pnpm/next-auth@4.24.11_next@15.2.2_react-dom@18.3.1_react@18.3.1/node_modules/next-auth/react/index.js\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_9__);\n/* __next_internal_client_entry_do_not_use__ ClientDataSync,default auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n// Dynamically import DatabaseAdmin component to avoid loading it until needed\nconst DatabaseAdmin = (0,next_dynamic__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(()=>__webpack_require__.e(/*! import() */ \"_app-pages-browser_src_components_DatabaseAdmin_js\").then(__webpack_require__.bind(__webpack_require__, /*! @/components/DatabaseAdmin */ \"(app-pages-browser)/./src/components/DatabaseAdmin.js\")), {\n    loadableGenerated: {\n        modules: [\n            \"app/dashboard/DashboardClient.js -> \" + \"@/components/DatabaseAdmin\"\n        ]\n    },\n    loading: ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            children: \"Loading database tools...\"\n        }, void 0, false, {\n            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n            lineNumber: 18,\n            columnNumber: 18\n        }, undefined),\n    ssr: false\n});\n_c = DatabaseAdmin;\n// Helper function to check if user has entered onboarding data\nfunction checkForUserOnboardingData() {\n    try {\n        // Check localStorage for business info\n        const businessInfo = localStorage.getItem('businessInfo');\n        if (businessInfo) {\n            try {\n                const parsedInfo = JSON.parse(businessInfo);\n                if (parsedInfo.businessName || parsedInfo.businessType) {\n                    return true;\n                }\n            } catch (e) {\n            // Invalid JSON, ignore\n            }\n        }\n        // Check for business name in localStorage directly\n        const businessName = localStorage.getItem('businessName');\n        if (businessName) return true;\n        // Check cookies for business info\n        const cookies = document.cookie.split(';');\n        for (const cookie of cookies){\n            const [name, value] = cookie.trim().split('=');\n            if (name === 'businessName' && value) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n// Helper to get business name from user data\nfunction getUserBusinessName() {\n    try {\n        // Try cookies first\n        const getCookie = (name)=>{\n            const value = \"; \".concat(document.cookie);\n            const parts = value.split(\"; \".concat(name, \"=\"));\n            if (parts.length === 2) return parts.pop().split(';').shift();\n            return null;\n        };\n        const cookieName = getCookie('businessName') || getCookie('custom:businessname');\n        if (cookieName) return cookieName;\n        // Then try localStorage\n        if (typeof localStorage !== 'undefined') {\n            try {\n                // Try businessInfo object\n                const storedInfo = localStorage.getItem('businessInfo');\n                if (storedInfo) {\n                    const parsedInfo = JSON.parse(storedInfo);\n                    if (parsedInfo.businessName) return parsedInfo.businessName;\n                }\n                // Try direct key\n                const directName = localStorage.getItem('businessName');\n                if (directName) return directName;\n            } catch (e) {\n            // Ignore localStorage errors\n            }\n        }\n    } catch (e) {\n    // Ignore any errors in this helper\n    }\n    return null;\n}\n// Helper to get business type from user data\nfunction getUserBusinessType() {\n    try {\n        // Try to get from localStorage businessInfo\n        const businessInfo = localStorage.getItem('businessInfo');\n        if (businessInfo) {\n            try {\n                const parsedInfo = JSON.parse(businessInfo);\n                if (parsedInfo.businessType) return parsedInfo.businessType;\n            } catch (e) {\n            // Invalid JSON, continue to other methods\n            }\n        }\n        // Try localStorage direct key\n        return localStorage.getItem('businessType');\n    } catch (e) {\n        return null;\n    }\n}\n// Client data synchronization component\nfunction ClientDataSync() {\n    _s();\n    const [syncComplete, setSyncComplete] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"ClientDataSync.useEffect\": ()=>{\n            // Function to sync tenant IDs and other client data\n            const syncClientData = {\n                \"ClientDataSync.useEffect.syncClientData\": async ()=>{\n                    try {\n                        var _document_cookie_split_find, _document_cookie_split_find1;\n                        // Get tenant ID from localStorage or cookies\n                        const tenantId = localStorage.getItem('tenantId') || ((_document_cookie_split_find = document.cookie.split(';').find({\n                            \"ClientDataSync.useEffect.syncClientData\": (c)=>c.trim().startsWith('tenantId=')\n                        }[\"ClientDataSync.useEffect.syncClientData\"])) === null || _document_cookie_split_find === void 0 ? void 0 : _document_cookie_split_find.split('=')[1]) || ((_document_cookie_split_find1 = document.cookie.split(';').find({\n                            \"ClientDataSync.useEffect.syncClientData\": (c)=>c.trim().startsWith('businessid=')\n                        }[\"ClientDataSync.useEffect.syncClientData\"])) === null || _document_cookie_split_find1 === void 0 ? void 0 : _document_cookie_split_find1.split('=')[1]);\n                        // Check if tenant ID is valid\n                        if (tenantId) {\n                            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info('[ClientDataSync] Synchronizing tenant ID:', tenantId);\n                            // Make sure tenant ID is consistent in all storage locations\n                            localStorage.setItem('tenantId', tenantId);\n                            document.cookie = \"tenantId=\".concat(tenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                            document.cookie = \"businessid=\".concat(tenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                        }\n                        // Sync tenant IDs to prevent corruption\n                        syncTenantIDs();\n                        // Mark sync as complete\n                        setSyncComplete(true);\n                    } catch (error) {\n                        _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('[ClientDataSync] Error syncing client data:', error);\n                        // Continue despite errors\n                        setSyncComplete(true);\n                    }\n                }\n            }[\"ClientDataSync.useEffect.syncClientData\"];\n            // Run sync on component mount\n            syncClientData();\n        }\n    }[\"ClientDataSync.useEffect\"], []);\n    // This component doesn't render anything visible\n    return null;\n}\n_s(ClientDataSync, \"9d2rLY7Mk5hO34AeMfmIXUYzN/4=\");\n_c1 = ClientDataSync;\n// Sync tenant IDs in client to prevent corruption\nconst syncTenantIDs = ()=>{\n    try {\n        var _document_cookie_split_find, _document_cookie_split_find1;\n        // Get tenant IDs from different sources\n        const tenantIdCookie = (_document_cookie_split_find = document.cookie.split('; ').find((row)=>row.startsWith('tenantId='))) === null || _document_cookie_split_find === void 0 ? void 0 : _document_cookie_split_find.split('=')[1];\n        const businessIdCookie = (_document_cookie_split_find1 = document.cookie.split('; ').find((row)=>row.startsWith('businessid='))) === null || _document_cookie_split_find1 === void 0 ? void 0 : _document_cookie_split_find1.split('=')[1];\n        const localStorageTenantId = localStorage.getItem('tenantId');\n        console.log('[ClientDataSync] Checking tenant IDs:', {\n            tenantIdCookie,\n            businessIdCookie,\n            localStorageTenantId\n        });\n        // Check if any tenant ID is invalid (corrupted)\n        if (tenantIdCookie && !isValidUUID(tenantIdCookie)) {\n            console.warn('[ClientDataSync] Detected corrupted tenantId cookie:', tenantIdCookie);\n            // Try to use a valid ID from another source\n            const validId = isValidUUID(localStorageTenantId) ? localStorageTenantId : isValidUUID(businessIdCookie) ? businessIdCookie : null;\n            if (validId) {\n                console.log('[ClientDataSync] Using valid tenant ID to replace corrupted cookie:', validId);\n                document.cookie = \"tenantId=\".concat(validId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                document.cookie = \"businessid=\".concat(validId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n            } else {\n                // If no valid ID found, delete the corrupted cookie\n                console.warn('[ClientDataSync] No valid tenant ID found, clearing corrupted cookie');\n                document.cookie = 'tenantId=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';\n                document.cookie = 'businessid=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';\n                // Try to fetch a tenant from server if authenticated\n                fetchTenantFromServer();\n            }\n        }\n        // Ensure consistency between localStorage and cookies if we have a valid ID\n        if (localStorageTenantId && isValidUUID(localStorageTenantId)) {\n            if (!tenantIdCookie || tenantIdCookie !== localStorageTenantId) {\n                console.log('[ClientDataSync] Using local storage tenant ID for cookies:', localStorageTenantId);\n                document.cookie = \"tenantId=\".concat(localStorageTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                document.cookie = \"businessid=\".concat(localStorageTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n            }\n        } else if (tenantIdCookie && isValidUUID(tenantIdCookie) && (!localStorageTenantId || localStorageTenantId !== tenantIdCookie)) {\n            // If cookie has valid ID but localStorage doesn't, update localStorage\n            console.log('[ClientDataSync] Using cookie tenant ID for localStorage:', tenantIdCookie);\n            localStorage.setItem('tenantId', tenantIdCookie);\n        } else if (!localStorageTenantId && !tenantIdCookie && !businessIdCookie) {\n            // If no tenant ID is found, try to get one from the server\n            fetchTenantFromServer();\n        }\n    } catch (error) {\n        console.error('[ClientDataSync] Error syncing tenant IDs:', error);\n    }\n};\n// Function to fetch a tenant ID from the server\nconst fetchTenantFromServer = async ()=>{\n    try {\n        console.log('[ClientDataSync] Attempting to fetch tenant from server...');\n        // Call getOrCreate endpoint to get or create a tenant\n        const response = await fetch('/api/tenant/getOrCreate', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n        if (!response.ok) {\n            throw new Error(\"Server responded with status: \".concat(response.status));\n        }\n        const data = await response.json();\n        if (data.success && data.tenantId) {\n            console.log('[ClientDataSync] Successfully obtained tenant ID from server:', data.tenantId);\n            // Store the tenant ID in localStorage and cookies\n            localStorage.setItem('tenantId', data.tenantId);\n            document.cookie = \"tenantId=\".concat(data.tenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n            document.cookie = \"businessid=\".concat(data.tenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n            // Refresh the page to apply the new tenant ID\n            window.location.reload();\n        } else {\n            console.error('[ClientDataSync] Failed to obtain tenant ID from server:', data.message);\n        }\n    } catch (error) {\n        console.error('[ClientDataSync] Error fetching tenant from server:', error);\n    }\n};\nfunction DashboardClient(param) {\n    let { newAccount, plan } = param;\n    _s1();\n    const [isClient, setIsClient] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isReady, setIsReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isAuthenticated, setIsAuthenticated] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [userData, setUserData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_4__.useRouter)();\n    const [isVerifyingTenant, setIsVerifyingTenant] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [tenantVerified, setTenantVerified] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [setupStatus, setSetupStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('pending');\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    // Replace constant logging with first-render-only logging\n    const isFirstRender = react__WEBPACK_IMPORTED_MODULE_1___default().useRef(true);\n    if (isFirstRender.current) {\n        console.log('DashboardClient initial render with props:', {\n            newAccount,\n            plan\n        });\n        isFirstRender.current = false;\n    }\n    // Add searchParams\n    const searchParams = (0,next_navigation__WEBPACK_IMPORTED_MODULE_4__.useSearchParams)();\n    // Add notification context\n    const { notifySuccess, notifyError, notifyWarning } = (0,_context_NotificationContext__WEBPACK_IMPORTED_MODULE_8__.useNotification)();\n    // Dashboard loading component\n    const DashboardLoadingState = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex items-center justify-center min-h-screen\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                        lineNumber: 286,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-xl font-semibold mb-2\",\n                        children: \"Loading your dashboard...\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                        lineNumber: 287,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-500\",\n                        children: \"Please wait while we retrieve your data.\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                        lineNumber: 288,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                lineNumber: 285,\n                columnNumber: 7\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n            lineNumber: 284,\n            columnNumber: 5\n        }, this);\n    // Dashboard error component\n    const DashboardErrorState = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex items-center justify-center min-h-screen\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center p-6 bg-red-50 rounded-lg max-w-md\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        className: \"h-12 w-12 text-red-500 mx-auto mb-4\",\n                        fill: \"none\",\n                        viewBox: \"0 0 24 24\",\n                        stroke: \"currentColor\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                            strokeLinecap: \"round\",\n                            strokeLinejoin: \"round\",\n                            strokeWidth: 2,\n                            d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n                        }, void 0, false, {\n                            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                            lineNumber: 304,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                        lineNumber: 297,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-xl font-semibold mb-2\",\n                        children: \"Unable to load dashboard\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                        lineNumber: 306,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-700 mb-4\",\n                        children: error || \"There was a problem loading your data. Please try again later.\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                        lineNumber: 307,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>window.location.reload(),\n                        className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\",\n                        children: \"Retry\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                        lineNumber: 308,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                lineNumber: 296,\n                columnNumber: 7\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n            lineNumber: 295,\n            columnNumber: 5\n        }, this);\n    // Function to fix missing attributes if needed\n    async function ensureUserAttributesComplete(session, userData) {\n        try {\n            // First, validate we have a valid session and tokens\n            if (!session || !session.tokens || !session.tokens.accessToken || !session.tokens.idToken) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn('[DashboardClient] Missing session or tokens, cannot update attributes');\n                return {\n                    success: false,\n                    error: 'Missing authentication tokens'\n                };\n            }\n            // Validate we have user data\n            if (!userData) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn('[DashboardClient] No user data provided, cannot check attributes');\n                return {\n                    success: false,\n                    error: 'No user data provided'\n                };\n            }\n            // Check for missing attributes\n            const missingAttributes = [];\n            const requiredAttributes = [\n                'custom:businessid',\n                'custom:businessname',\n                'custom:businesstype',\n                'custom:acctstatus',\n                'custom:onboarding',\n                'custom:setupdone',\n                'custom:created_at',\n                'custom:updated_at'\n            ];\n            // Check which attributes are missing\n            for (const attr of requiredAttributes){\n                if (!userData[attr]) {\n                    missingAttributes.push(attr);\n                }\n            }\n            // If no missing attributes, return\n            if (missingAttributes.length === 0) {\n                return {\n                    success: true,\n                    message: 'All attributes present'\n                };\n            }\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info('[DashboardClient] Detected missing attributes:', missingAttributes);\n            // Create attributes to update\n            const attributesToUpdate = {};\n            const timestamp = new Date().toISOString();\n            // For each missing attribute, set a default value\n            missingAttributes.forEach((attr)=>{\n                switch(attr){\n                    case 'custom:businessid':\n                        // Try to generate a deterministic ID based on user ID if available\n                        if (userData['custom:businessid']) {\n                            attributesToUpdate[attr] = userData['custom:businessid'];\n                        } else if (userData.sub) {\n                            try {\n                                const { v5: uuidv5 } = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/commonjs-browser/index.js\");\n                                const TENANT_NAMESPACE = '9a551c44-4ade-4f89-b078-0af8be794c23';\n                                attributesToUpdate[attr] = uuidv5(userData.sub, TENANT_NAMESPACE);\n                            } catch (e) {\n                                // Fallback to random UUID only if absolutely necessary\n                                attributesToUpdate[attr] = crypto.randomUUID();\n                            }\n                        } else {\n                            // Last resort fallback\n                            attributesToUpdate[attr] = crypto.randomUUID();\n                        }\n                        break;\n                    case 'custom:businessname':\n                        // Try to get business name from cookies or localStorage\n                        const businessName = getBestBusinessName() || '';\n                        attributesToUpdate[attr] = userData['custom:businessname'] || businessName;\n                        break;\n                    case 'custom:businesstype':\n                        attributesToUpdate[attr] = userData['custom:businesstype'] || 'Other';\n                        break;\n                    case 'custom:acctstatus':\n                        attributesToUpdate[attr] = userData['custom:acctstatus'] || 'ACTIVE';\n                        break;\n                    case 'custom:onboarding':\n                        attributesToUpdate[attr] = userData['custom:onboarding'] || 'complete';\n                        break;\n                    case 'custom:setupdone':\n                        attributesToUpdate[attr] = userData['custom:setupdone'] || 'true';\n                        break;\n                    case 'custom:created_at':\n                        attributesToUpdate[attr] = userData['custom:created_at'] || timestamp;\n                        break;\n                    case 'custom:updated_at':\n                        attributesToUpdate[attr] = timestamp;\n                        break;\n                    default:\n                        break;\n                }\n            });\n            // Helper function to get business name from various sources\n            function getBestBusinessName() {\n                try {\n                    // Try cookies first\n                    const getCookie = (name)=>{\n                        const value = \"; \".concat(document.cookie);\n                        const parts = value.split(\"; \".concat(name, \"=\"));\n                        if (parts.length === 2) return parts.pop().split(';').shift();\n                        return null;\n                    };\n                    const cookieName = getCookie('businessName') || getCookie('custom:businessname');\n                    if (cookieName) return cookieName;\n                    // Then try localStorage\n                    if (typeof localStorage !== 'undefined') {\n                        try {\n                            // Try businessInfo object\n                            const storedInfo = localStorage.getItem('businessInfo');\n                            if (storedInfo) {\n                                const parsedInfo = JSON.parse(storedInfo);\n                                if (parsedInfo.businessName) return parsedInfo.businessName;\n                            }\n                            // Try direct key\n                            const directName = localStorage.getItem('businessName');\n                            if (directName) return directName;\n                        } catch (e) {\n                        // Ignore localStorage errors\n                        }\n                    }\n                } catch (e) {\n                // Ignore any errors in this helper\n                }\n                return null;\n            }\n            // Update the attributes using the API, with error handling for network issues\n            try {\n                const response = await fetch('/api/user/update-attributes', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': \"Bearer \".concat(session.tokens.accessToken.toString()),\n                        'X-Id-Token': session.tokens.idToken.toString()\n                    },\n                    body: JSON.stringify({\n                        attributes: attributesToUpdate,\n                        forceUpdate: true\n                    })\n                });\n                if (!response.ok) {\n                    const errorText = await response.text().catch(()=>'Unknown error');\n                    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn('[DashboardClient] API returned error:', {\n                        status: response.status,\n                        text: errorText\n                    });\n                    return {\n                        success: false,\n                        error: \"API error: \".concat(response.status, \" \").concat(errorText)\n                    };\n                }\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info('[DashboardClient] Fixed missing attributes:', attributesToUpdate);\n                return {\n                    success: true,\n                    message: 'Missing attributes fixed',\n                    updatedAttributes: attributesToUpdate\n                };\n            } catch (fetchError) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn('[DashboardClient] Network error updating attributes:', fetchError);\n                return {\n                    success: false,\n                    error: \"Network error: \".concat(fetchError.message)\n                };\n            }\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn('[DashboardClient] Error fixing missing attributes:', error);\n            return {\n                success: false,\n                error: error.message\n            };\n        }\n    }\n    // Generate a deterministic tenant ID from the user ID if needed\n    const generateDeterministicTenantId = (userId)=>{\n        try {\n            if (!userId) return null;\n            // Use UUID v5 algorithm for proper deterministic UUID generation\n            // This uses a SHA-1 hash (via subtle crypto) to ensure consistency\n            const encoder = new TextEncoder();\n            const data = encoder.encode(userId);\n            // UUID v5 namespace (using DNS namespace as base)\n            const NAMESPACE = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\n            // Convert namespace to bytes\n            const namespaceBytes = new Uint8Array(16);\n            NAMESPACE.replace(/-/g, '').match(/.{2}/g).map((hex, i)=>{\n                namespaceBytes[i] = parseInt(hex, 16);\n            });\n            // Combine namespace and name\n            const combinedBytes = new Uint8Array(16 + data.length);\n            combinedBytes.set(namespaceBytes);\n            combinedBytes.set(data, 16);\n            // Get hash of combined bytes\n            // In browsers supporting crypto.subtle:\n            if (typeof crypto !== 'undefined' && crypto.subtle) {\n                return crypto.subtle.digest('SHA-1', combinedBytes).then((buffer)=>{\n                    const hashArray = Array.from(new Uint8Array(buffer));\n                    // Format as UUID v5\n                    hashArray[6] = hashArray[6] & 0x0f | 0x50; // Set version to 5\n                    hashArray[8] = hashArray[8] & 0x3f | 0x80; // Set variant\n                    // Convert to hex and format as UUID\n                    const hex = hashArray.map((b)=>b.toString(16).padStart(2, '0')).join('');\n                    const uuid = \"\".concat(hex.slice(0, 8), \"-\").concat(hex.slice(8, 12), \"-\").concat(hex.slice(12, 16), \"-\").concat(hex.slice(16, 20), \"-\").concat(hex.slice(20, 32));\n                    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info('[DashboardClient] Generated deterministic UUID v5 tenant ID from user ID:', uuid);\n                    return uuid;\n                }).catch((e)=>{\n                    _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('[DashboardClient] Error generating UUID v5 tenant ID:', e);\n                    // Fall back to simple hash method if subtle crypto fails\n                    return generateSimpleHashTenantId(userId);\n                });\n            } else {\n                // Fallback for environments without crypto.subtle\n                return generateSimpleHashTenantId(userId);\n            }\n        } catch (e) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('[DashboardClient] Error generating tenant ID:', e);\n            return null;\n        }\n    };\n    // Fallback method using simple hash for environments without crypto.subtle\n    const generateSimpleHashTenantId = (userId)=>{\n        const hash = Array.from(userId).reduce((acc, char)=>{\n            return (acc << 5) - acc + char.charCodeAt(0) | 0;\n        }, 0).toString(16).padStart(32, '0');\n        // Format as UUID-like string\n        const uuid = \"\".concat(hash.slice(0, 8), \"-\").concat(hash.slice(8, 12), \"-5\").concat(hash.slice(13, 16), \"-\").concat(hash.slice(16, 20), \"-\").concat(hash.slice(20, 32));\n        _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info('[DashboardClient] Generated fallback tenant ID from user ID:', uuid);\n        return uuid;\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"DashboardClient.useEffect\": ()=>{\n            const verifyCognitoState = {\n                \"DashboardClient.useEffect.verifyCognitoState\": async ()=>{\n                    setIsVerifyingTenant(true);\n                    try {\n                        // Always try to load from local storage first\n                        let userId = null;\n                        try {\n                            var _session_tokens_idToken, _session_tokens;\n                            // Check Cognito identity\n                            const session = await (0,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_10__.fetchAuthSession)();\n                            const identityToken = session === null || session === void 0 ? void 0 : (_session_tokens = session.tokens) === null || _session_tokens === void 0 ? void 0 : (_session_tokens_idToken = _session_tokens.idToken) === null || _session_tokens_idToken === void 0 ? void 0 : _session_tokens_idToken.toString();\n                            if (identityToken) {\n                                const idTokenPayload = session.tokens.idToken;\n                                userId = idTokenPayload.payload.sub;\n                                if (userId) {\n                                    // Store user ID in local storage\n                                    localStorage.setItem('userId', userId);\n                                    // Generate tenant ID if needed\n                                    const tenantId = localStorage.getItem('tenantId') || generateDeterministicTenantId(userId);\n                                    if (tenantId) {\n                                        localStorage.setItem('tenantId', tenantId);\n                                    }\n                                    setIsAuthenticated(true);\n                                    setTenantVerified(true);\n                                    setIsVerifyingTenant(false);\n                                    setSetupStatus('success');\n                                    return;\n                                }\n                            }\n                        } catch (e) {\n                            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('[DashboardClient] Error fetching Cognito session:', e);\n                        // Continue to fallback mechanisms\n                        }\n                        // If we couldn't get from Cognito, try localStorage\n                        userId = localStorage.getItem('userId');\n                        const tenantId = localStorage.getItem('tenantId');\n                        if (userId && tenantId) {\n                            setTenantVerified(true);\n                            setIsVerifyingTenant(false);\n                            setSetupStatus('success');\n                            return;\n                        }\n                        // If we get here, we failed to verify the tenant\n                        setTenantVerified(false);\n                        setIsVerifyingTenant(false);\n                        setSetupStatus('failed');\n                        setError('Unable to verify tenant ID. Please try refreshing the page or signing in again.');\n                    } catch (error) {\n                        _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('[DashboardClient] Error verifying tenant:', error);\n                        setTenantVerified(false);\n                        setIsVerifyingTenant(false);\n                        setSetupStatus('failed');\n                        setError('An unexpected error occurred. Please try again later.');\n                    }\n                }\n            }[\"DashboardClient.useEffect.verifyCognitoState\"];\n            verifyCognitoState();\n        }\n    }[\"DashboardClient.useEffect\"], []);\n    // Function to fix tenant schema issues in AWS RDS\n    const setupAwsRdsTables = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"DashboardClient.useCallback[setupAwsRdsTables]\": async (tenantId)=>{\n            if (!tenantId) {\n                console.error('[DashboardClient] Cannot set up tables: No tenant ID provided');\n                return {\n                    success: false,\n                    error: 'No tenant ID provided'\n                };\n            }\n            try {\n                console.log(\"[DashboardClient] Setting up AWS RDS tables for tenant: \".concat(tenantId));\n                // Create the schema first\n                const schemaName = \"tenant_\".concat(tenantId.replace(/-/g, '_'));\n                // Call our AWS RDS table creation endpoint\n                const response = await fetch(\"/api/db/create-aws-tables\");\n                if (response.ok) {\n                    const data = await response.json();\n                    console.log('[DashboardClient] AWS RDS table setup complete:', data);\n                    return {\n                        success: true,\n                        data\n                    };\n                } else {\n                    const errorData = await response.json();\n                    console.error('[DashboardClient] Failed to set up AWS RDS tables:', errorData);\n                    return {\n                        success: false,\n                        error: errorData\n                    };\n                }\n            } catch (error) {\n                console.error('[DashboardClient] Error setting up AWS RDS tables:', error.message);\n                return {\n                    success: false,\n                    error: error.message\n                };\n            }\n        }\n    }[\"DashboardClient.useCallback[setupAwsRdsTables]\"], []);\n    // Initialize database and ensure tables exist\n    const initializeDatabase = async ()=>{\n        try {\n            console.log('[DashboardClient] Initializing database connection to AWS RDS');\n            // Get tenant ID from localStorage or cookies\n            const localStorageTenantId = localStorage.getItem('tenantId');\n            const cookieTenantId = (()=>{\n                const value = \"; \".concat(document.cookie);\n                const parts = value.split(\"; tenantId=\");\n                if (parts.length === 2) return parts.pop().split(';').shift();\n                return null;\n            })();\n            const tenantId = localStorageTenantId || cookieTenantId;\n            if (!tenantId) {\n                console.warn('[DashboardClient] No tenant ID found for database initialization, skipping table setup');\n                return;\n            }\n            // Set up AWS RDS tables with the tenant ID\n            const result = await setupAwsRdsTables(tenantId);\n            if (result.success) {\n                console.log('[DashboardClient] AWS RDS tables set up successfully');\n            } else {\n                console.warn('[DashboardClient] AWS RDS table setup issues:', result.error);\n            }\n        } catch (error) {\n            console.error('[DashboardClient] Error initializing AWS RDS:', error);\n        }\n    };\n    // This ensures we're only rendering on the client\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"DashboardClient.useEffect\": ()=>{\n            setIsClient(true);\n            // Run database initialization immediately with AWS RDS\n            initializeDatabase();\n            // Ensure consistent tenant ID on initialization\n            const ensureConsistentTenantId = {\n                \"DashboardClient.useEffect.ensureConsistentTenantId\": async ()=>{\n                    try {\n                        // Check various sources\n                        const localStorageTenantId = localStorage.getItem('tenantId');\n                        const cookieTenantId = ({\n                            \"DashboardClient.useEffect.ensureConsistentTenantId.cookieTenantId\": ()=>{\n                                const value = \"; \".concat(document.cookie);\n                                const parts = value.split(\"; tenantId=\");\n                                if (parts.length === 2) return parts.pop().split(';').shift();\n                                return null;\n                            }\n                        })[\"DashboardClient.useEffect.ensureConsistentTenantId.cookieTenantId\"]();\n                        // If we have inconsistent IDs or none at all, fetch from the server\n                        if (!localStorageTenantId || !cookieTenantId || localStorageTenantId !== cookieTenantId) {\n                            console.log('[DashboardClient] Tenant ID inconsistency detected, fetching from server');\n                            try {\n                                // Request the tenant ID from the server based on the authenticated user\n                                const response = await fetch('/api/user/tenant', {\n                                    method: 'GET',\n                                    headers: {\n                                        'Content-Type': 'application/json'\n                                    }\n                                });\n                                if (response.ok) {\n                                    const data = await response.json();\n                                    if (data.tenantId) {\n                                        console.log('[DashboardClient] Retrieved tenant ID from server:', data.tenantId);\n                                        localStorage.setItem('tenantId', data.tenantId);\n                                        document.cookie = \"tenantId=\".concat(data.tenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                        // Set up AWS RDS tables for this tenant\n                                        await setupAwsRdsTables(data.tenantId);\n                                        // Also store the source for debugging\n                                        if (data.source) {\n                                            console.log('[DashboardClient] Tenant ID source:', data.source);\n                                        }\n                                    } else {\n                                        // If server doesn't have a tenant ID for this user, get from Cognito\n                                        try {\n                                            const userAttributes = await (0,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_11__.fetchUserAttributes)();\n                                            const cognitoTenantId = userAttributes['custom:businessid'];\n                                            if (cognitoTenantId) {\n                                                console.log('[DashboardClient] Using tenant ID from Cognito:', cognitoTenantId);\n                                                localStorage.setItem('tenantId', cognitoTenantId);\n                                                document.cookie = \"tenantId=\".concat(cognitoTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                                // Set up AWS RDS tables for this tenant\n                                                await setupAwsRdsTables(cognitoTenantId);\n                                                // Ensure tenant record exists in database and update server\n                                                try {\n                                                    // Also update the tenant API\n                                                    await fetch('/api/user/tenant', {\n                                                        method: 'POST',\n                                                        headers: {\n                                                            'Content-Type': 'application/json'\n                                                        },\n                                                        body: JSON.stringify({\n                                                            tenantId: cognitoTenantId\n                                                        })\n                                                    });\n                                                    console.log('[DashboardClient] Updated server with Cognito tenant ID');\n                                                } catch (updateError) {\n                                                    console.warn('[DashboardClient] Failed to update server with tenant ID:', updateError);\n                                                }\n                                            } else {\n                                                // ONLY CREATE NEW TENANT IF EXPLICITLY REQUESTED\n                                                // Check if we're in a new account flow that actually requires a new tenant\n                                                if (newAccount === true) {\n                                                    // Generate a deterministic UUID based on user ID if possible\n                                                    // This ensures the same user always gets the same tenant ID\n                                                    try {\n                                                        // Generate a deterministic UUID based on user sub\n                                                        const userId = userAttributes.sub;\n                                                        const { v5: uuidv5 } = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/commonjs-browser/index.js\");\n                                                        const TENANT_NAMESPACE = '9a551c44-4ade-4f89-b078-0af8be794c23';\n                                                        const deterministicTenantId = uuidv5(userId, TENANT_NAMESPACE);\n                                                        console.log('[DashboardClient] Generated deterministic tenant ID from user ID:', deterministicTenantId);\n                                                        localStorage.setItem('tenantId', deterministicTenantId);\n                                                        document.cookie = \"tenantId=\".concat(deterministicTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                                        // Use the schema manager to ensure tables and schema exist\n                                                        await ensureTenantSchema(deterministicTenantId, userAttributes);\n                                                    } catch (uuidError) {\n                                                        // If deterministic generation fails, fall back to random UUID as absolute last resort\n                                                        const newTenantId = crypto.randomUUID();\n                                                        console.warn('[DashboardClient] UUID error, generated random tenant ID as last resort:', newTenantId);\n                                                        localStorage.setItem('tenantId', newTenantId);\n                                                        document.cookie = \"tenantId=\".concat(newTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                                        // Use the schema manager to ensure tables and schema exist\n                                                        await ensureTenantSchema(newTenantId, userAttributes);\n                                                    }\n                                                    // Ensure tenant exists in database and update server\n                                                    try {\n                                                        // Get the final tenant ID (from either deterministicTenantId or newTenantId)\n                                                        const finalTenantId = localStorage.getItem('tenantId');\n                                                        // Initialize the database environment first\n                                                        try {\n                                                            const initResponse = await fetch('/api/tenant/init-db-env');\n                                                            if (initResponse.ok) {\n                                                                try {\n                                                                    const initData = await initResponse.json();\n                                                                    console.log('[DashboardClient] Database environment initialization:', initData.success ? 'successful' : 'failed', 'Table exists:', initData.tableExists);\n                                                                } catch (jsonError) {\n                                                                    console.error('[DashboardClient] Failed to parse init-db-env response:', jsonError);\n                                                                // Continue with the process despite parsing error\n                                                                }\n                                                            }\n                                                        } catch (initError) {\n                                                            console.warn('[DashboardClient] Error initializing database environment:', initError.message);\n                                                        // Continue anyway since ensure-db-record has its own initialization\n                                                        }\n                                                        // Now ensure the tenant record exists in the database\n                                                        const tenantResponse = await fetch('/api/tenant/ensure-db-record', {\n                                                            method: 'POST',\n                                                            headers: {\n                                                                'Content-Type': 'application/json'\n                                                            },\n                                                            body: JSON.stringify({\n                                                                tenantId: finalTenantId,\n                                                                userId: userAttributes.sub,\n                                                                email: userAttributes.email,\n                                                                businessName: userAttributes['custom:businessname'],\n                                                                forceCreate: true\n                                                            })\n                                                        });\n                                                        if (tenantResponse.ok) {\n                                                            try {\n                                                                const tenantData = await tenantResponse.json();\n                                                                console.log('[DashboardClient] Generated tenant ID saved to database:', tenantData);\n                                                            } catch (jsonError) {\n                                                                console.error('[DashboardClient] Failed to parse tenant response:', jsonError);\n                                                            // Continue despite parsing error\n                                                            }\n                                                        } else {\n                                                            try {\n                                                                const errorText = await tenantResponse.text();\n                                                                console.warn('[DashboardClient] Failed to save generated tenant ID to database:', errorText);\n                                                            } catch (textError) {\n                                                                console.warn('[DashboardClient] Failed to save generated tenant ID to database. Status:', tenantResponse.status);\n                                                            }\n                                                        }\n                                                        // Also update the tenant API\n                                                        await fetch('/api/user/tenant', {\n                                                            method: 'POST',\n                                                            headers: {\n                                                                'Content-Type': 'application/json'\n                                                            },\n                                                            body: JSON.stringify({\n                                                                tenantId: finalTenantId\n                                                            })\n                                                        });\n                                                        console.log('[DashboardClient] Updated server with generated tenant ID');\n                                                    } catch (updateError) {\n                                                        console.warn('[DashboardClient] Failed to update server with tenant ID:', updateError);\n                                                    }\n                                                } else {\n                                                    console.log('[DashboardClient] No tenant ID found, but new account flow not detected. Not creating a new tenant.');\n                                                    notifyWarning('Unable to determine your organization information. Please log out and log back in.');\n                                                }\n                                            }\n                                        } catch (cognitoError) {\n                                            console.error('[DashboardClient] Error fetching Cognito attributes:', cognitoError);\n                                        }\n                                    }\n                                } else {\n                                    // If API request fails, fall back to Cognito\n                                    console.warn('[DashboardClient] Tenant API request failed, falling back to Cognito');\n                                    try {\n                                        const userAttributes = await (0,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_11__.fetchUserAttributes)();\n                                        const cognitoTenantId = userAttributes['custom:businessid'];\n                                        if (cognitoTenantId) {\n                                            console.log('[DashboardClient] Using tenant ID from Cognito after API failure:', cognitoTenantId);\n                                            localStorage.setItem('tenantId', cognitoTenantId);\n                                            document.cookie = \"tenantId=\".concat(cognitoTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                        } else {\n                                            // Generate a deterministic UUID based on user ID if available\n                                            try {\n                                                const userId = userAttributes.sub;\n                                                if (userId) {\n                                                    const { v5: uuidv5 } = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/commonjs-browser/index.js\");\n                                                    const TENANT_NAMESPACE = '9a551c44-4ade-4f89-b078-0af8be794c23';\n                                                    const generatedTenantId = uuidv5(userId, TENANT_NAMESPACE);\n                                                    console.log('[DashboardClient] Generated deterministic tenant ID from user ID:', generatedTenantId);\n                                                    localStorage.setItem('tenantId', generatedTenantId);\n                                                    document.cookie = \"tenantId=\".concat(generatedTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                                } else {\n                                                    // Random UUID as absolute last resort\n                                                    const newTenantId = crypto.randomUUID();\n                                                    console.warn('[DashboardClient] No user ID available, using random UUID:', newTenantId);\n                                                    localStorage.setItem('tenantId', newTenantId);\n                                                    document.cookie = \"tenantId=\".concat(newTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                                }\n                                            } catch (uuidError) {\n                                                // If UUID generation fails, use simple random UUID\n                                                const newTenantId = crypto.randomUUID();\n                                                console.error('[DashboardClient] UUID generation error, using random UUID:', newTenantId);\n                                                localStorage.setItem('tenantId', newTenantId);\n                                                document.cookie = \"tenantId=\".concat(newTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                            }\n                                        }\n                                    } catch (cognitoError) {\n                                        console.error('[DashboardClient] Error fetching Cognito attributes after API failure:', cognitoError);\n                                        // Ultimate fallback - generate random UUID\n                                        const newTenantId = crypto.randomUUID();\n                                        console.warn('[DashboardClient] All tenant ID sources failed, using random UUID:', newTenantId);\n                                        localStorage.setItem('tenantId', newTenantId);\n                                        document.cookie = \"tenantId=\".concat(newTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                    }\n                                }\n                            } catch (fetchError) {\n                                console.error('[DashboardClient] Error fetching tenant ID from server:', fetchError);\n                            }\n                        }\n                    } catch (e) {\n                        // Log but don't throw errors\n                        console.error('[DashboardClient] Error ensuring consistent tenant ID:', e);\n                    }\n                }\n            }[\"DashboardClient.useEffect.ensureConsistentTenantId\"];\n            // Run the consistency check\n            ensureConsistentTenantId();\n            // First check if user is authenticated by fetching Cognito attributes\n            const checkOnboardingStatus = {\n                \"DashboardClient.useEffect.checkOnboardingStatus\": async ()=>{\n                    try {\n                        var _session_tokens;\n                        console.log('[DashboardClient] Starting authentication and onboarding status check');\n                        // First check if we have a valid auth session\n                        const session = await (0,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_10__.fetchAuthSession)();\n                        if (!(session === null || session === void 0 ? void 0 : (_session_tokens = session.tokens) === null || _session_tokens === void 0 ? void 0 : _session_tokens.accessToken)) {\n                            console.warn('[DashboardClient] No valid auth session found, will redirect to sign-in');\n                            // Add delay to see logs before redirect\n                            await new Promise({\n                                \"DashboardClient.useEffect.checkOnboardingStatus\": (resolve)=>setTimeout(resolve, 1000)\n                            }[\"DashboardClient.useEffect.checkOnboardingStatus\"]);\n                            router.push('/auth/signin');\n                            return;\n                        }\n                        // User has valid session, set authenticated\n                        setIsAuthenticated(true);\n                        // Get user attributes to check onboarding status\n                        try {\n                            var _userAttributes_customonboarding, _userAttributes_customsetupdone;\n                            const userAttributes = await (0,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_11__.fetchUserAttributes)();\n                            // Store user attributes in state\n                            setUserData(userAttributes);\n                            console.log('[DashboardClient] User attributes fetched:', {\n                                hasBusinessId: !!userAttributes['custom:businessid'],\n                                hasBusinessName: !!userAttributes['custom:businessname'],\n                                onboardingStatus: userAttributes['custom:onboarding'],\n                                setupDone: userAttributes['custom:setupdone']\n                            });\n                            // ENHANCED CHECK: If user has completed onboarding according to Cognito, we're good\n                            if (((_userAttributes_customonboarding = userAttributes['custom:onboarding']) === null || _userAttributes_customonboarding === void 0 ? void 0 : _userAttributes_customonboarding.toLowerCase()) === 'complete' || ((_userAttributes_customsetupdone = userAttributes['custom:setupdone']) === null || _userAttributes_customsetupdone === void 0 ? void 0 : _userAttributes_customsetupdone.toLowerCase()) === 'true') {\n                                console.log('[DashboardClient] User has completed onboarding, showing dashboard');\n                                // Check for tenant ID to ensure RLS works properly\n                                if (!userAttributes['custom:businessid']) {\n                                    console.warn('[DashboardClient] Missing tenant ID in Cognito, will generate one for RLS');\n                                    // Generate a deterministic UUID from user ID to ensure consistency\n                                    try {\n                                        const { v5: uuidv5 } = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/commonjs-browser/index.js\");\n                                        const TENANT_NAMESPACE = '9a551c44-4ade-4f89-b078-0af8be794c23';\n                                        const generatedTenantId = uuidv5(userAttributes.sub, TENANT_NAMESPACE);\n                                        // Add this to the attributes that need updating\n                                        userAttributes['custom:businessid'] = generatedTenantId;\n                                        localStorage.setItem('tenantId', generatedTenantId);\n                                        document.cookie = \"tenantId=\".concat(generatedTenantId, \"; path=/; max-age=\").concat(60 * 60 * 24 * 30, \"; samesite=lax\");\n                                        console.log('[DashboardClient] Generated tenant ID for RLS:', generatedTenantId);\n                                    } catch (e) {\n                                        console.error('[DashboardClient] Error generating tenant ID:', e);\n                                    }\n                                }\n                                // Fix any missing attributes in the background\n                                ensureUserAttributesComplete(session, userAttributes).then({\n                                    \"DashboardClient.useEffect.checkOnboardingStatus\": (result)=>console.debug('[DashboardClient] Attribute check result:', result)\n                                }[\"DashboardClient.useEffect.checkOnboardingStatus\"]).catch({\n                                    \"DashboardClient.useEffect.checkOnboardingStatus\": (err)=>console.error('[DashboardClient] Background attribute check error:', err)\n                                }[\"DashboardClient.useEffect.checkOnboardingStatus\"]);\n                                setIsReady(true);\n                                return;\n                            }\n                        } catch (attrError) {\n                            console.warn('[DashboardClient] Error fetching user attributes, using cookies as fallback:', attrError);\n                            // Even if we can't get attributes, we can use cookies\n                            const getCookie = {\n                                \"DashboardClient.useEffect.checkOnboardingStatus.getCookie\": (name)=>{\n                                    const value = \"; \".concat(document.cookie);\n                                    const parts = value.split(\"; \".concat(name, \"=\"));\n                                    if (parts.length === 2) return parts.pop().split(';').shift();\n                                    return null;\n                                }\n                            }[\"DashboardClient.useEffect.checkOnboardingStatus.getCookie\"];\n                            // Check cookies for onboarding status\n                            const onboardingStatus = getCookie('onboardedStatus') || getCookie('onboardingStatus');\n                            const setupCompleted = getCookie('setupCompleted') || getCookie('setupDone');\n                            if (onboardingStatus === 'complete' || setupCompleted === 'true') {\n                                console.log('[DashboardClient] Cookies indicate onboarding is complete, showing dashboard');\n                                setIsReady(true);\n                                return;\n                            }\n                        }\n                        // Set isReady true even if we don't have attributes or cookies\n                        // The DashboardWrapper will handle further verification\n                        console.log('[DashboardClient] Proceeding to dashboard, DashboardWrapper will handle verification');\n                        setIsReady(true);\n                    } catch (error) {\n                        // Log error and redirect\n                        console.error('[DashboardClient] Error checking auth status:', error);\n                        router.push('/auth/signin?returnUrl=' + encodeURIComponent('/dashboard'));\n                    }\n                }\n            }[\"DashboardClient.useEffect.checkOnboardingStatus\"];\n            // Run the check but set a timeout to prevent infinite loading\n            checkOnboardingStatus();\n            // Set a timeout to ensure we don't get stuck in a loading state\n            const timeout = setTimeout({\n                \"DashboardClient.useEffect.timeout\": ()=>{\n                    if (!isReady) {\n                        console.log(' Dashboard loading timeout - forcing ready state');\n                        setIsReady(true);\n                    }\n                }\n            }[\"DashboardClient.useEffect.timeout\"], 5000);\n            return ({\n                \"DashboardClient.useEffect\": ()=>clearTimeout(timeout)\n            })[\"DashboardClient.useEffect\"];\n        }\n    }[\"DashboardClient.useEffect\"], [\n        router\n    ]);\n    // Function to refresh user data\n    const refreshUserData = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"DashboardClient.useCallback[refreshUserData]\": async ()=>{\n            if (!isAuthenticated) return;\n            try {\n                console.log('[DashboardClient] Refreshing user data');\n                const userAttributes = await (0,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_11__.fetchUserAttributes)();\n                setUserData(userAttributes);\n                return userAttributes;\n            } catch (error) {\n                console.error('[DashboardClient] Error refreshing user data:', error);\n                return null;\n            }\n        }\n    }[\"DashboardClient.useCallback[refreshUserData]\"], [\n        isAuthenticated\n    ]);\n    // Helper function to handle subscription success\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"DashboardClient.useEffect\": ()=>{\n            const handleSubscriptionSuccess = {\n                \"DashboardClient.useEffect.handleSubscriptionSuccess\": async ()=>{\n                    const subscriptionSuccess = searchParams.get('subscription_success');\n                    const sessionId = searchParams.get('session_id');\n                    if (subscriptionSuccess === 'true' && sessionId) {\n                        console.log(\"[Subscription] Processing successful subscription with session ID: \".concat(sessionId));\n                        try {\n                            // Call our session-success API to verify and process the subscription\n                            const response = await fetch('/api/checkout/session-success', {\n                                method: 'POST',\n                                headers: {\n                                    'Content-Type': 'application/json'\n                                },\n                                body: JSON.stringify({\n                                    session_id: sessionId\n                                })\n                            });\n                            if (response.ok) {\n                                const data = await response.json();\n                                console.log('[Subscription] Successfully processed checkout session:', data);\n                                notifySuccess('Subscription successfully upgraded!');\n                                // Refresh user data to get the updated subscription status\n                                await refreshUserData();\n                                // Clean the URL by removing query parameters\n                                const url = new URL(window.location.href);\n                                url.searchParams.delete('subscription_success');\n                                url.searchParams.delete('session_id');\n                                window.history.replaceState({}, document.title, url.toString());\n                            } else {\n                                const errorData = await response.json();\n                                console.error('[Subscription] Failed to process checkout session:', errorData);\n                                notifyError('Failed to verify subscription. Please contact support.');\n                            }\n                        } catch (error) {\n                            console.error('[Subscription] Error processing subscription:', error);\n                            notifyError('An error occurred while processing your subscription.');\n                        }\n                    }\n                }\n            }[\"DashboardClient.useEffect.handleSubscriptionSuccess\"];\n            // Only run if authenticated\n            if (isAuthenticated) {\n                handleSubscriptionSuccess();\n            }\n        }\n    }[\"DashboardClient.useEffect\"], [\n        searchParams,\n        isAuthenticated,\n        notifySuccess,\n        notifyError\n    ]);\n    // Update loading state based on data availability\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"DashboardClient.useEffect\": ()=>{\n            // Set loading to false only when we have real data\n            if (userData && Object.keys(userData).length > 0 && tenantVerified) {\n                setIsLoading(false);\n            }\n        }\n    }[\"DashboardClient.useEffect\"], [\n        userData,\n        tenantVerified\n    ]);\n    // Show loading state if still loading tenant or user data\n    if (isLoading || isVerifyingTenant || !tenantVerified) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(DashboardLoadingState, {}, void 0, false, {\n            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n            lineNumber: 1134,\n            columnNumber: 12\n        }, this);\n    }\n    // Show error state if there's an error\n    if (error || setupStatus === 'failed') {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(DashboardErrorState, {}, void 0, false, {\n            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n            lineNumber: 1139,\n            columnNumber: 12\n        }, this);\n    }\n    // Don't show the dashboard until we have actual userData\n    if (!userData || Object.keys(userData).length === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(DashboardLoadingState, {}, void 0, false, {\n            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n            lineNumber: 1144,\n            columnNumber: 12\n        }, this);\n    }\n    if (!isClient) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_DashboardWrapper__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n            newAccount: (userData === null || userData === void 0 ? void 0 : userData['custom:isNew']) === 'true' || newAccount === 'true',\n            plan: plan || (userData === null || userData === void 0 ? void 0 : userData['custom:plan'])\n        }, void 0, false, {\n            fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n            lineNumber: 1148,\n            columnNumber: 12\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            (userData === null || userData === void 0 ? void 0 : userData['custom:isadmin']) === 'true' && isAuthenticated && searchParams.get('admin') === 'true' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"min-h-screen\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(DatabaseAdmin, {}, void 0, false, {\n                    fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                    lineNumber: 1159,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                lineNumber: 1158,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_DashboardWrapper__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                newAccount: (userData === null || userData === void 0 ? void 0 : userData['custom:isNew']) === 'true' || newAccount === 'true',\n                plan: plan || (userData === null || userData === void 0 ? void 0 : userData['custom:plan'])\n            }, void 0, false, {\n                fileName: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/dashboard/DashboardClient.js\",\n                lineNumber: 1164,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true);\n}\n_s1(DashboardClient, \"4GYcS5eLiGC+EXuDUQWhbym/mQI=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_4__.useRouter,\n        next_navigation__WEBPACK_IMPORTED_MODULE_4__.useSearchParams,\n        _context_NotificationContext__WEBPACK_IMPORTED_MODULE_8__.useNotification\n    ];\n});\n_c2 = DashboardClient;\n/**\n * Ensure the tenant schema exists\n */ const ensureTenantSchema = async (tenantId, userAttributes)=>{\n    try {\n        // Call the schema manager API\n        const schemaManagerResponse = await fetch('/api/tenant/schema-manager', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                tenantId: tenantId,\n                userId: userAttributes.sub,\n                businessName: userAttributes['custom:businessname'],\n                forceCreate: true // Explicitly request tenant creation\n            })\n        });\n        if (schemaManagerResponse.ok) {\n            const schemaResult = await schemaManagerResponse.json();\n            console.log('[DashboardClient] Schema manager result:', schemaResult);\n            // Also update the user API\n            await fetch('/api/user/tenant', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    tenantId: tenantId\n                })\n            });\n            console.log('[DashboardClient] Updated server with tenant ID');\n            return schemaResult;\n        } else {\n            console.error('[DashboardClient] Schema manager API failed:', await schemaManagerResponse.text());\n            return null;\n        }\n    } catch (error) {\n        console.error('[DashboardClient] Error ensuring tenant schema:', error);\n        return null;\n    }\n};\n// Function to validate tenant ID\nconst isValidUUID = (id)=>{\n    if (!id) return false;\n    // Check if it's a valid UUID format\n    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n    return uuidRegex.test(id);\n};\nvar _c, _c1, _c2;\n$RefreshReg$(_c, \"DatabaseAdmin\");\n$RefreshReg$(_c1, \"ClientDataSync\");\n$RefreshReg$(_c2, \"DashboardClient\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvZGFzaGJvYXJkL0Rhc2hib2FyZENsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFeUQ7QUFDakI7QUFDVTtBQUNXO0FBQ1k7QUFDQztBQUN2QztBQUNUO0FBQ2lDO0FBQ0s7QUFDbkI7QUFDVDtBQUVwQyw4RUFBOEU7QUFDOUUsTUFBTWtCLGdCQUFnQlAsd0RBQU9BLENBQUMsSUFBTSwwT0FBb0M7Ozs7OztJQUN0RVEsU0FBUyxrQkFBTSw4REFBQ0M7c0JBQUk7Ozs7OztJQUNwQkMsS0FBSzs7S0FGREg7QUFLTiwrREFBK0Q7QUFDL0QsU0FBU0k7SUFDUCxJQUFJO1FBQ0YsdUNBQXVDO1FBQ3ZDLE1BQU1DLGVBQWVDLGFBQWFDLE9BQU8sQ0FBQztRQUMxQyxJQUFJRixjQUFjO1lBQ2hCLElBQUk7Z0JBQ0YsTUFBTUcsYUFBYUMsS0FBS0MsS0FBSyxDQUFDTDtnQkFDOUIsSUFBSUcsV0FBV0csWUFBWSxJQUFJSCxXQUFXSSxZQUFZLEVBQUU7b0JBQ3RELE9BQU87Z0JBQ1Q7WUFDRixFQUFFLE9BQU9DLEdBQUc7WUFDVix1QkFBdUI7WUFDekI7UUFDRjtRQUVBLG1EQUFtRDtRQUNuRCxNQUFNRixlQUFlTCxhQUFhQyxPQUFPLENBQUM7UUFDMUMsSUFBSUksY0FBYyxPQUFPO1FBRXpCLGtDQUFrQztRQUNsQyxNQUFNRyxVQUFVQyxTQUFTQyxNQUFNLENBQUNDLEtBQUssQ0FBQztRQUN0QyxLQUFLLE1BQU1ELFVBQVVGLFFBQVM7WUFDNUIsTUFBTSxDQUFDSSxNQUFNQyxNQUFNLEdBQUdILE9BQU9JLElBQUksR0FBR0gsS0FBSyxDQUFDO1lBQzFDLElBQUlDLFNBQVMsa0JBQWtCQyxPQUFPO2dCQUNwQyxPQUFPO1lBQ1Q7UUFDRjtRQUVBLE9BQU87SUFDVCxFQUFFLE9BQU9OLEdBQUc7UUFDVixPQUFPO0lBQ1Q7QUFDRjtBQUVBLDZDQUE2QztBQUM3QyxTQUFTUTtJQUNQLElBQUk7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L2t1b2xkZW5nL3Byb2plY3R4L2Zyb250ZW5kL3B5ZmFjdG9yX25leHQvc3JjL2FwcC9kYXNoYm9hcmQvRGFzaGJvYXJkQ2xpZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL3V0aWxzL2xvZ2dlcic7XG5pbXBvcnQgRGFzaGJvYXJkV3JhcHBlciBmcm9tICcuL0Rhc2hib2FyZFdyYXBwZXInO1xuaW1wb3J0IHsgdXNlUm91dGVyLCB1c2VTZWFyY2hQYXJhbXMgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuaW1wb3J0IHsgQ09PS0lFX05BTUVTLCBPTkJPQVJESU5HX1NUQVRVUyB9IGZyb20gJ0AvY29uc3RhbnRzL29uYm9hcmRpbmcnO1xuaW1wb3J0IHsgZmV0Y2hBdXRoU2Vzc2lvbiwgZmV0Y2hVc2VyQXR0cmlidXRlcyB9IGZyb20gJ0Bhd3MtYW1wbGlmeS9hdXRoJztcbmltcG9ydCBkeW5hbWljIGZyb20gJ25leHQvZHluYW1pYyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IERhc2hib2FyZExvYWRlciBmcm9tICdAL2NvbXBvbmVudHMvRGFzaGJvYXJkTG9hZGVyJztcbmltcG9ydCB7IHVzZU5vdGlmaWNhdGlvbiB9IGZyb20gJ0AvY29udGV4dC9Ob3RpZmljYXRpb25Db250ZXh0JztcbmltcG9ydCB7IHVzZVNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgvcmVhY3QnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5cbi8vIER5bmFtaWNhbGx5IGltcG9ydCBEYXRhYmFzZUFkbWluIGNvbXBvbmVudCB0byBhdm9pZCBsb2FkaW5nIGl0IHVudGlsIG5lZWRlZFxuY29uc3QgRGF0YWJhc2VBZG1pbiA9IGR5bmFtaWMoKCkgPT4gaW1wb3J0KCdAL2NvbXBvbmVudHMvRGF0YWJhc2VBZG1pbicpLCB7XG4gIGxvYWRpbmc6ICgpID0+IDxkaXY+TG9hZGluZyBkYXRhYmFzZSB0b29scy4uLjwvZGl2PixcbiAgc3NyOiBmYWxzZVxufSk7XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjaGVjayBpZiB1c2VyIGhhcyBlbnRlcmVkIG9uYm9hcmRpbmcgZGF0YVxuZnVuY3Rpb24gY2hlY2tGb3JVc2VyT25ib2FyZGluZ0RhdGEoKSB7XG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgbG9jYWxTdG9yYWdlIGZvciBidXNpbmVzcyBpbmZvXG4gICAgY29uc3QgYnVzaW5lc3NJbmZvID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2J1c2luZXNzSW5mbycpO1xuICAgIGlmIChidXNpbmVzc0luZm8pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZEluZm8gPSBKU09OLnBhcnNlKGJ1c2luZXNzSW5mbyk7XG4gICAgICAgIGlmIChwYXJzZWRJbmZvLmJ1c2luZXNzTmFtZSB8fCBwYXJzZWRJbmZvLmJ1c2luZXNzVHlwZSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIEludmFsaWQgSlNPTiwgaWdub3JlXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBidXNpbmVzcyBuYW1lIGluIGxvY2FsU3RvcmFnZSBkaXJlY3RseVxuICAgIGNvbnN0IGJ1c2luZXNzTmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdidXNpbmVzc05hbWUnKTtcbiAgICBpZiAoYnVzaW5lc3NOYW1lKSByZXR1cm4gdHJ1ZTtcbiAgICBcbiAgICAvLyBDaGVjayBjb29raWVzIGZvciBidXNpbmVzcyBpbmZvXG4gICAgY29uc3QgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpO1xuICAgIGZvciAoY29uc3QgY29va2llIG9mIGNvb2tpZXMpIHtcbiAgICAgIGNvbnN0IFtuYW1lLCB2YWx1ZV0gPSBjb29raWUudHJpbSgpLnNwbGl0KCc9Jyk7XG4gICAgICBpZiAobmFtZSA9PT0gJ2J1c2luZXNzTmFtZScgJiYgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyBIZWxwZXIgdG8gZ2V0IGJ1c2luZXNzIG5hbWUgZnJvbSB1c2VyIGRhdGFcbmZ1bmN0aW9uIGdldFVzZXJCdXNpbmVzc05hbWUoKSB7XG4gIHRyeSB7XG4gICAgLy8gVHJ5IGNvb2tpZXMgZmlyc3RcbiAgICBjb25zdCBnZXRDb29raWUgPSAobmFtZSkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBgOyAke2RvY3VtZW50LmNvb2tpZX1gO1xuICAgICAgY29uc3QgcGFydHMgPSB2YWx1ZS5zcGxpdChgOyAke25hbWV9PWApO1xuICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgcmV0dXJuIHBhcnRzLnBvcCgpLnNwbGl0KCc7Jykuc2hpZnQoKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgXG4gICAgY29uc3QgY29va2llTmFtZSA9IGdldENvb2tpZSgnYnVzaW5lc3NOYW1lJykgfHwgZ2V0Q29va2llKCdjdXN0b206YnVzaW5lc3NuYW1lJyk7XG4gICAgaWYgKGNvb2tpZU5hbWUpIHJldHVybiBjb29raWVOYW1lO1xuICAgIFxuICAgIC8vIFRoZW4gdHJ5IGxvY2FsU3RvcmFnZVxuICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVHJ5IGJ1c2luZXNzSW5mbyBvYmplY3RcbiAgICAgICAgY29uc3Qgc3RvcmVkSW5mbyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdidXNpbmVzc0luZm8nKTtcbiAgICAgICAgaWYgKHN0b3JlZEluZm8pIHtcbiAgICAgICAgICBjb25zdCBwYXJzZWRJbmZvID0gSlNPTi5wYXJzZShzdG9yZWRJbmZvKTtcbiAgICAgICAgICBpZiAocGFyc2VkSW5mby5idXNpbmVzc05hbWUpIHJldHVybiBwYXJzZWRJbmZvLmJ1c2luZXNzTmFtZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVHJ5IGRpcmVjdCBrZXlcbiAgICAgICAgY29uc3QgZGlyZWN0TmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdidXNpbmVzc05hbWUnKTtcbiAgICAgICAgaWYgKGRpcmVjdE5hbWUpIHJldHVybiBkaXJlY3ROYW1lO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZ25vcmUgbG9jYWxTdG9yYWdlIGVycm9yc1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIElnbm9yZSBhbnkgZXJyb3JzIGluIHRoaXMgaGVscGVyXG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8vIEhlbHBlciB0byBnZXQgYnVzaW5lc3MgdHlwZSBmcm9tIHVzZXIgZGF0YVxuZnVuY3Rpb24gZ2V0VXNlckJ1c2luZXNzVHlwZSgpIHtcbiAgdHJ5IHtcbiAgICAvLyBUcnkgdG8gZ2V0IGZyb20gbG9jYWxTdG9yYWdlIGJ1c2luZXNzSW5mb1xuICAgIGNvbnN0IGJ1c2luZXNzSW5mbyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdidXNpbmVzc0luZm8nKTtcbiAgICBpZiAoYnVzaW5lc3NJbmZvKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXJzZWRJbmZvID0gSlNPTi5wYXJzZShidXNpbmVzc0luZm8pO1xuICAgICAgICBpZiAocGFyc2VkSW5mby5idXNpbmVzc1R5cGUpIHJldHVybiBwYXJzZWRJbmZvLmJ1c2luZXNzVHlwZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSW52YWxpZCBKU09OLCBjb250aW51ZSB0byBvdGhlciBtZXRob2RzXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFRyeSBsb2NhbFN0b3JhZ2UgZGlyZWN0IGtleVxuICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYnVzaW5lc3NUeXBlJyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vLyBDbGllbnQgZGF0YSBzeW5jaHJvbml6YXRpb24gY29tcG9uZW50XG5leHBvcnQgZnVuY3Rpb24gQ2xpZW50RGF0YVN5bmMoKSB7XG4gIGNvbnN0IFtzeW5jQ29tcGxldGUsIHNldFN5bmNDb21wbGV0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBGdW5jdGlvbiB0byBzeW5jIHRlbmFudCBJRHMgYW5kIG90aGVyIGNsaWVudCBkYXRhXG4gICAgY29uc3Qgc3luY0NsaWVudERhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBHZXQgdGVuYW50IElEIGZyb20gbG9jYWxTdG9yYWdlIG9yIGNvb2tpZXNcbiAgICAgICAgY29uc3QgdGVuYW50SWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGVuYW50SWQnKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpLmZpbmQoYyA9PiBjLnRyaW0oKS5zdGFydHNXaXRoKCd0ZW5hbnRJZD0nKSk/LnNwbGl0KCc9JylbMV0gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpLmZpbmQoYyA9PiBjLnRyaW0oKS5zdGFydHNXaXRoKCdidXNpbmVzc2lkPScpKT8uc3BsaXQoJz0nKVsxXTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIHRlbmFudCBJRCBpcyB2YWxpZFxuICAgICAgICBpZiAodGVuYW50SWQpIHtcbiAgICAgICAgICBsb2dnZXIuaW5mbygnW0NsaWVudERhdGFTeW5jXSBTeW5jaHJvbml6aW5nIHRlbmFudCBJRDonLCB0ZW5hbnRJZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHRlbmFudCBJRCBpcyBjb25zaXN0ZW50IGluIGFsbCBzdG9yYWdlIGxvY2F0aW9uc1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZW5hbnRJZCcsIHRlbmFudElkKTtcbiAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgdGVuYW50SWQ9JHt0ZW5hbnRJZH07IHBhdGg9LzsgbWF4LWFnZT0kezYwKjYwKjI0KjMwfTsgc2FtZXNpdGU9bGF4YDtcbiAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgYnVzaW5lc3NpZD0ke3RlbmFudElkfTsgcGF0aD0vOyBtYXgtYWdlPSR7NjAqNjAqMjQqMzB9OyBzYW1lc2l0ZT1sYXhgO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTeW5jIHRlbmFudCBJRHMgdG8gcHJldmVudCBjb3JydXB0aW9uXG4gICAgICAgIHN5bmNUZW5hbnRJRHMoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1hcmsgc3luYyBhcyBjb21wbGV0ZVxuICAgICAgICBzZXRTeW5jQ29tcGxldGUodHJ1ZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoJ1tDbGllbnREYXRhU3luY10gRXJyb3Igc3luY2luZyBjbGllbnQgZGF0YTonLCBlcnJvcik7XG4gICAgICAgIC8vIENvbnRpbnVlIGRlc3BpdGUgZXJyb3JzXG4gICAgICAgIHNldFN5bmNDb21wbGV0ZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8vIFJ1biBzeW5jIG9uIGNvbXBvbmVudCBtb3VudFxuICAgIHN5bmNDbGllbnREYXRhKCk7XG4gIH0sIFtdKTtcbiAgXG4gIC8vIFRoaXMgY29tcG9uZW50IGRvZXNuJ3QgcmVuZGVyIGFueXRoaW5nIHZpc2libGVcbiAgcmV0dXJuIG51bGw7XG59XG5cbi8vIFN5bmMgdGVuYW50IElEcyBpbiBjbGllbnQgdG8gcHJldmVudCBjb3JydXB0aW9uXG5jb25zdCBzeW5jVGVuYW50SURzID0gKCkgPT4ge1xuICB0cnkge1xuICAgIC8vIEdldCB0ZW5hbnQgSURzIGZyb20gZGlmZmVyZW50IHNvdXJjZXNcbiAgICBjb25zdCB0ZW5hbnRJZENvb2tpZSA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKVxuICAgICAgLmZpbmQocm93ID0+IHJvdy5zdGFydHNXaXRoKCd0ZW5hbnRJZD0nKSlcbiAgICAgID8uc3BsaXQoJz0nKVsxXTtcbiAgICBcbiAgICBjb25zdCBidXNpbmVzc0lkQ29va2llID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7ICcpXG4gICAgICAuZmluZChyb3cgPT4gcm93LnN0YXJ0c1dpdGgoJ2J1c2luZXNzaWQ9JykpXG4gICAgICA/LnNwbGl0KCc9JylbMV07XG4gICAgXG4gICAgY29uc3QgbG9jYWxTdG9yYWdlVGVuYW50SWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGVuYW50SWQnKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnW0NsaWVudERhdGFTeW5jXSBDaGVja2luZyB0ZW5hbnQgSURzOicsIHtcbiAgICAgIHRlbmFudElkQ29va2llLFxuICAgICAgYnVzaW5lc3NJZENvb2tpZSxcbiAgICAgIGxvY2FsU3RvcmFnZVRlbmFudElkXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgYW55IHRlbmFudCBJRCBpcyBpbnZhbGlkIChjb3JydXB0ZWQpXG4gICAgaWYgKHRlbmFudElkQ29va2llICYmICFpc1ZhbGlkVVVJRCh0ZW5hbnRJZENvb2tpZSkpIHtcbiAgICAgIGNvbnNvbGUud2FybignW0NsaWVudERhdGFTeW5jXSBEZXRlY3RlZCBjb3JydXB0ZWQgdGVuYW50SWQgY29va2llOicsIHRlbmFudElkQ29va2llKTtcbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIHVzZSBhIHZhbGlkIElEIGZyb20gYW5vdGhlciBzb3VyY2VcbiAgICAgIGNvbnN0IHZhbGlkSWQgPSBpc1ZhbGlkVVVJRChsb2NhbFN0b3JhZ2VUZW5hbnRJZCkgXG4gICAgICAgID8gbG9jYWxTdG9yYWdlVGVuYW50SWQgXG4gICAgICAgIDogKGlzVmFsaWRVVUlEKGJ1c2luZXNzSWRDb29raWUpID8gYnVzaW5lc3NJZENvb2tpZSA6IG51bGwpO1xuICAgICAgXG4gICAgICBpZiAodmFsaWRJZCkge1xuICAgICAgICBjb25zb2xlLmxvZygnW0NsaWVudERhdGFTeW5jXSBVc2luZyB2YWxpZCB0ZW5hbnQgSUQgdG8gcmVwbGFjZSBjb3JydXB0ZWQgY29va2llOicsIHZhbGlkSWQpO1xuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgdGVuYW50SWQ9JHt2YWxpZElkfTsgcGF0aD0vOyBtYXgtYWdlPSR7NjAqNjAqMjQqMzB9OyBzYW1lc2l0ZT1sYXhgO1xuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgYnVzaW5lc3NpZD0ke3ZhbGlkSWR9OyBwYXRoPS87IG1heC1hZ2U9JHs2MCo2MCoyNCozMH07IHNhbWVzaXRlPWxheGA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiBubyB2YWxpZCBJRCBmb3VuZCwgZGVsZXRlIHRoZSBjb3JydXB0ZWQgY29va2llXG4gICAgICAgIGNvbnNvbGUud2FybignW0NsaWVudERhdGFTeW5jXSBObyB2YWxpZCB0ZW5hbnQgSUQgZm91bmQsIGNsZWFyaW5nIGNvcnJ1cHRlZCBjb29raWUnKTtcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gJ3RlbmFudElkPTsgcGF0aD0vOyBleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UJztcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gJ2J1c2luZXNzaWQ9OyBwYXRoPS87IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVQnO1xuICAgICAgICBcbiAgICAgICAgLy8gVHJ5IHRvIGZldGNoIGEgdGVuYW50IGZyb20gc2VydmVyIGlmIGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgZmV0Y2hUZW5hbnRGcm9tU2VydmVyKCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEVuc3VyZSBjb25zaXN0ZW5jeSBiZXR3ZWVuIGxvY2FsU3RvcmFnZSBhbmQgY29va2llcyBpZiB3ZSBoYXZlIGEgdmFsaWQgSURcbiAgICBpZiAobG9jYWxTdG9yYWdlVGVuYW50SWQgJiYgaXNWYWxpZFVVSUQobG9jYWxTdG9yYWdlVGVuYW50SWQpKSB7XG4gICAgICBpZiAoIXRlbmFudElkQ29va2llIHx8IHRlbmFudElkQ29va2llICE9PSBsb2NhbFN0b3JhZ2VUZW5hbnRJZCkge1xuICAgICAgICBjb25zb2xlLmxvZygnW0NsaWVudERhdGFTeW5jXSBVc2luZyBsb2NhbCBzdG9yYWdlIHRlbmFudCBJRCBmb3IgY29va2llczonLCBsb2NhbFN0b3JhZ2VUZW5hbnRJZCk7XG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGB0ZW5hbnRJZD0ke2xvY2FsU3RvcmFnZVRlbmFudElkfTsgcGF0aD0vOyBtYXgtYWdlPSR7NjAqNjAqMjQqMzB9OyBzYW1lc2l0ZT1sYXhgO1xuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgYnVzaW5lc3NpZD0ke2xvY2FsU3RvcmFnZVRlbmFudElkfTsgcGF0aD0vOyBtYXgtYWdlPSR7NjAqNjAqMjQqMzB9OyBzYW1lc2l0ZT1sYXhgO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGVuYW50SWRDb29raWUgJiYgaXNWYWxpZFVVSUQodGVuYW50SWRDb29raWUpICYmICghbG9jYWxTdG9yYWdlVGVuYW50SWQgfHwgbG9jYWxTdG9yYWdlVGVuYW50SWQgIT09IHRlbmFudElkQ29va2llKSkge1xuICAgICAgLy8gSWYgY29va2llIGhhcyB2YWxpZCBJRCBidXQgbG9jYWxTdG9yYWdlIGRvZXNuJ3QsIHVwZGF0ZSBsb2NhbFN0b3JhZ2VcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2xpZW50RGF0YVN5bmNdIFVzaW5nIGNvb2tpZSB0ZW5hbnQgSUQgZm9yIGxvY2FsU3RvcmFnZTonLCB0ZW5hbnRJZENvb2tpZSk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGVuYW50SWQnLCB0ZW5hbnRJZENvb2tpZSk7XG4gICAgfSBlbHNlIGlmICghbG9jYWxTdG9yYWdlVGVuYW50SWQgJiYgIXRlbmFudElkQ29va2llICYmICFidXNpbmVzc0lkQ29va2llKSB7XG4gICAgICAvLyBJZiBubyB0ZW5hbnQgSUQgaXMgZm91bmQsIHRyeSB0byBnZXQgb25lIGZyb20gdGhlIHNlcnZlclxuICAgICAgZmV0Y2hUZW5hbnRGcm9tU2VydmVyKCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tDbGllbnREYXRhU3luY10gRXJyb3Igc3luY2luZyB0ZW5hbnQgSURzOicsIGVycm9yKTtcbiAgfVxufTtcblxuLy8gRnVuY3Rpb24gdG8gZmV0Y2ggYSB0ZW5hbnQgSUQgZnJvbSB0aGUgc2VydmVyXG5jb25zdCBmZXRjaFRlbmFudEZyb21TZXJ2ZXIgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ1tDbGllbnREYXRhU3luY10gQXR0ZW1wdGluZyB0byBmZXRjaCB0ZW5hbnQgZnJvbSBzZXJ2ZXIuLi4nKTtcbiAgICBcbiAgICAvLyBDYWxsIGdldE9yQ3JlYXRlIGVuZHBvaW50IHRvIGdldCBvciBjcmVhdGUgYSB0ZW5hbnRcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3RlbmFudC9nZXRPckNyZWF0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICB9KTtcbiAgICBcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFNlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIFxuICAgIGlmIChkYXRhLnN1Y2Nlc3MgJiYgZGF0YS50ZW5hbnRJZCkge1xuICAgICAgY29uc29sZS5sb2coJ1tDbGllbnREYXRhU3luY10gU3VjY2Vzc2Z1bGx5IG9idGFpbmVkIHRlbmFudCBJRCBmcm9tIHNlcnZlcjonLCBkYXRhLnRlbmFudElkKTtcbiAgICAgIFxuICAgICAgLy8gU3RvcmUgdGhlIHRlbmFudCBJRCBpbiBsb2NhbFN0b3JhZ2UgYW5kIGNvb2tpZXNcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZW5hbnRJZCcsIGRhdGEudGVuYW50SWQpO1xuICAgICAgZG9jdW1lbnQuY29va2llID0gYHRlbmFudElkPSR7ZGF0YS50ZW5hbnRJZH07IHBhdGg9LzsgbWF4LWFnZT0kezYwKjYwKjI0KjMwfTsgc2FtZXNpdGU9bGF4YDtcbiAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGBidXNpbmVzc2lkPSR7ZGF0YS50ZW5hbnRJZH07IHBhdGg9LzsgbWF4LWFnZT0kezYwKjYwKjI0KjMwfTsgc2FtZXNpdGU9bGF4YDtcbiAgICAgIFxuICAgICAgLy8gUmVmcmVzaCB0aGUgcGFnZSB0byBhcHBseSB0aGUgbmV3IHRlbmFudCBJRFxuICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQ2xpZW50RGF0YVN5bmNdIEZhaWxlZCB0byBvYnRhaW4gdGVuYW50IElEIGZyb20gc2VydmVyOicsIGRhdGEubWVzc2FnZSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tDbGllbnREYXRhU3luY10gRXJyb3IgZmV0Y2hpbmcgdGVuYW50IGZyb20gc2VydmVyOicsIGVycm9yKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRGFzaGJvYXJkQ2xpZW50KHsgbmV3QWNjb3VudCwgcGxhbiB9KSB7XG4gIGNvbnN0IFtpc0NsaWVudCwgc2V0SXNDbGllbnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNSZWFkeSwgc2V0SXNSZWFkeV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc0F1dGhlbnRpY2F0ZWQsIHNldElzQXV0aGVudGljYXRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFt1c2VyRGF0YSwgc2V0VXNlckRhdGFdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuICBjb25zdCBbaXNWZXJpZnlpbmdUZW5hbnQsIHNldElzVmVyaWZ5aW5nVGVuYW50XSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbdGVuYW50VmVyaWZpZWQsIHNldFRlbmFudFZlcmlmaWVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NldHVwU3RhdHVzLCBzZXRTZXR1cFN0YXR1c10gPSB1c2VTdGF0ZSgncGVuZGluZycpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIFxuICAvLyBSZXBsYWNlIGNvbnN0YW50IGxvZ2dpbmcgd2l0aCBmaXJzdC1yZW5kZXItb25seSBsb2dnaW5nXG4gIGNvbnN0IGlzRmlyc3RSZW5kZXIgPSBSZWFjdC51c2VSZWYodHJ1ZSk7XG4gIGlmIChpc0ZpcnN0UmVuZGVyLmN1cnJlbnQpIHtcbiAgICBjb25zb2xlLmxvZygnRGFzaGJvYXJkQ2xpZW50IGluaXRpYWwgcmVuZGVyIHdpdGggcHJvcHM6JywgeyBuZXdBY2NvdW50LCBwbGFuIH0pO1xuICAgIGlzRmlyc3RSZW5kZXIuY3VycmVudCA9IGZhbHNlO1xuICB9XG4gIFxuICAvLyBBZGQgc2VhcmNoUGFyYW1zXG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHVzZVNlYXJjaFBhcmFtcygpO1xuICBcbiAgLy8gQWRkIG5vdGlmaWNhdGlvbiBjb250ZXh0XG4gIGNvbnN0IHsgbm90aWZ5U3VjY2Vzcywgbm90aWZ5RXJyb3IsIG5vdGlmeVdhcm5pbmcgfSA9IHVzZU5vdGlmaWNhdGlvbigpO1xuICBcbiAgLy8gRGFzaGJvYXJkIGxvYWRpbmcgY29tcG9uZW50XG4gIGNvbnN0IERhc2hib2FyZExvYWRpbmdTdGF0ZSA9ICgpID0+IChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1pbi1oLXNjcmVlblwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC0xMiB3LTEyIGJvcmRlci10LTIgYm9yZGVyLWItMiBib3JkZXItYmx1ZS01MDAgbXgtYXV0byBtYi00XCI+PC9kaXY+XG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItMlwiPkxvYWRpbmcgeW91ciBkYXNoYm9hcmQuLi48L2gyPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwXCI+UGxlYXNlIHdhaXQgd2hpbGUgd2UgcmV0cmlldmUgeW91ciBkYXRhLjwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xuXG4gIC8vIERhc2hib2FyZCBlcnJvciBjb21wb25lbnRcbiAgY29uc3QgRGFzaGJvYXJkRXJyb3JTdGF0ZSA9ICgpID0+IChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1pbi1oLXNjcmVlblwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBwLTYgYmctcmVkLTUwIHJvdW5kZWQtbGcgbWF4LXctbWRcIj5cbiAgICAgICAgPHN2ZyBcbiAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgXG4gICAgICAgICAgY2xhc3NOYW1lPVwiaC0xMiB3LTEyIHRleHQtcmVkLTUwMCBteC1hdXRvIG1iLTRcIiBcbiAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIlxuICAgICAgICA+XG4gICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTEyIDl2Mm0wIDRoLjAxbS02LjkzOCA0aDEzLjg1NmMxLjU0IDAgMi41MDItMS42NjcgMS43MzItM0wxMy43MzIgNGMtLjc3LTEuMzMzLTIuNjk0LTEuMzMzLTMuNDY0IDBMMy4zNCAxNmMtLjc3IDEuMzMzLjE5MiAzIDEuNzMyIDN6XCIgLz5cbiAgICAgICAgPC9zdmc+XG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItMlwiPlVuYWJsZSB0byBsb2FkIGRhc2hib2FyZDwvaDI+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS03MDAgbWItNFwiPntlcnJvciB8fCBcIlRoZXJlIHdhcyBhIHByb2JsZW0gbG9hZGluZyB5b3VyIGRhdGEuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCJ9PC9wPlxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKX0gXG4gICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZC1tZCBob3ZlcjpiZy1ibHVlLTcwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgID5cbiAgICAgICAgICBSZXRyeVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xuICBcbiAgLy8gRnVuY3Rpb24gdG8gZml4IG1pc3NpbmcgYXR0cmlidXRlcyBpZiBuZWVkZWRcbiAgYXN5bmMgZnVuY3Rpb24gZW5zdXJlVXNlckF0dHJpYnV0ZXNDb21wbGV0ZShzZXNzaW9uLCB1c2VyRGF0YSkge1xuICAgIHRyeSB7XG4gICAgICAvLyBGaXJzdCwgdmFsaWRhdGUgd2UgaGF2ZSBhIHZhbGlkIHNlc3Npb24gYW5kIHRva2Vuc1xuICAgICAgaWYgKCFzZXNzaW9uIHx8ICFzZXNzaW9uLnRva2VucyB8fCAhc2Vzc2lvbi50b2tlbnMuYWNjZXNzVG9rZW4gfHwgIXNlc3Npb24udG9rZW5zLmlkVG9rZW4pIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ1tEYXNoYm9hcmRDbGllbnRdIE1pc3Npbmcgc2Vzc2lvbiBvciB0b2tlbnMsIGNhbm5vdCB1cGRhdGUgYXR0cmlidXRlcycpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnTWlzc2luZyBhdXRoZW50aWNhdGlvbiB0b2tlbnMnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIHdlIGhhdmUgdXNlciBkYXRhXG4gICAgICBpZiAoIXVzZXJEYXRhKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBObyB1c2VyIGRhdGEgcHJvdmlkZWQsIGNhbm5vdCBjaGVjayBhdHRyaWJ1dGVzJyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdObyB1c2VyIGRhdGEgcHJvdmlkZWQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGZvciBtaXNzaW5nIGF0dHJpYnV0ZXNcbiAgICAgIGNvbnN0IG1pc3NpbmdBdHRyaWJ1dGVzID0gW107XG4gICAgICBjb25zdCByZXF1aXJlZEF0dHJpYnV0ZXMgPSBbXG4gICAgICAgICdjdXN0b206YnVzaW5lc3NpZCcsXG4gICAgICAgICdjdXN0b206YnVzaW5lc3NuYW1lJyxcbiAgICAgICAgJ2N1c3RvbTpidXNpbmVzc3R5cGUnLFxuICAgICAgICAnY3VzdG9tOmFjY3RzdGF0dXMnLFxuICAgICAgICAnY3VzdG9tOm9uYm9hcmRpbmcnLFxuICAgICAgICAnY3VzdG9tOnNldHVwZG9uZScsXG4gICAgICAgICdjdXN0b206Y3JlYXRlZF9hdCcsXG4gICAgICAgICdjdXN0b206dXBkYXRlZF9hdCdcbiAgICAgIF07XG4gICAgICBcbiAgICAgIC8vIENoZWNrIHdoaWNoIGF0dHJpYnV0ZXMgYXJlIG1pc3NpbmdcbiAgICAgIGZvciAoY29uc3QgYXR0ciBvZiByZXF1aXJlZEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgaWYgKCF1c2VyRGF0YVthdHRyXSkge1xuICAgICAgICAgIG1pc3NpbmdBdHRyaWJ1dGVzLnB1c2goYXR0cik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSWYgbm8gbWlzc2luZyBhdHRyaWJ1dGVzLCByZXR1cm5cbiAgICAgIGlmIChtaXNzaW5nQXR0cmlidXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdBbGwgYXR0cmlidXRlcyBwcmVzZW50J1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbygnW0Rhc2hib2FyZENsaWVudF0gRGV0ZWN0ZWQgbWlzc2luZyBhdHRyaWJ1dGVzOicsIG1pc3NpbmdBdHRyaWJ1dGVzKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGF0dHJpYnV0ZXMgdG8gdXBkYXRlXG4gICAgICBjb25zdCBhdHRyaWJ1dGVzVG9VcGRhdGUgPSB7fTtcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgIFxuICAgICAgLy8gRm9yIGVhY2ggbWlzc2luZyBhdHRyaWJ1dGUsIHNldCBhIGRlZmF1bHQgdmFsdWVcbiAgICAgIG1pc3NpbmdBdHRyaWJ1dGVzLmZvckVhY2goYXR0ciA9PiB7XG4gICAgICAgIHN3aXRjaCAoYXR0cikge1xuICAgICAgICAgIGNhc2UgJ2N1c3RvbTpidXNpbmVzc2lkJzpcbiAgICAgICAgICAgIC8vIFRyeSB0byBnZW5lcmF0ZSBhIGRldGVybWluaXN0aWMgSUQgYmFzZWQgb24gdXNlciBJRCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgIGlmICh1c2VyRGF0YVsnY3VzdG9tOmJ1c2luZXNzaWQnXSkge1xuICAgICAgICAgICAgICBhdHRyaWJ1dGVzVG9VcGRhdGVbYXR0cl0gPSB1c2VyRGF0YVsnY3VzdG9tOmJ1c2luZXNzaWQnXTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckRhdGEuc3ViKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB2NTogdXVpZHY1IH0gPSByZXF1aXJlKCd1dWlkJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgVEVOQU5UX05BTUVTUEFDRSA9ICc5YTU1MWM0NC00YWRlLTRmODktYjA3OC0wYWY4YmU3OTRjMjMnO1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNUb1VwZGF0ZVthdHRyXSA9IHV1aWR2NSh1c2VyRGF0YS5zdWIsIFRFTkFOVF9OQU1FU1BBQ0UpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gcmFuZG9tIFVVSUQgb25seSBpZiBhYnNvbHV0ZWx5IG5lY2Vzc2FyeVxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNUb1VwZGF0ZVthdHRyXSA9IGNyeXB0by5yYW5kb21VVUlEKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIExhc3QgcmVzb3J0IGZhbGxiYWNrXG4gICAgICAgICAgICAgIGF0dHJpYnV0ZXNUb1VwZGF0ZVthdHRyXSA9IGNyeXB0by5yYW5kb21VVUlEKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjdXN0b206YnVzaW5lc3NuYW1lJzpcbiAgICAgICAgICAgIC8vIFRyeSB0byBnZXQgYnVzaW5lc3MgbmFtZSBmcm9tIGNvb2tpZXMgb3IgbG9jYWxTdG9yYWdlXG4gICAgICAgICAgICBjb25zdCBidXNpbmVzc05hbWUgPSBnZXRCZXN0QnVzaW5lc3NOYW1lKCkgfHwgJyc7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzVG9VcGRhdGVbYXR0cl0gPSB1c2VyRGF0YVsnY3VzdG9tOmJ1c2luZXNzbmFtZSddIHx8IGJ1c2luZXNzTmFtZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2N1c3RvbTpidXNpbmVzc3R5cGUnOlxuICAgICAgICAgICAgYXR0cmlidXRlc1RvVXBkYXRlW2F0dHJdID0gdXNlckRhdGFbJ2N1c3RvbTpidXNpbmVzc3R5cGUnXSB8fCAnT3RoZXInO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnY3VzdG9tOmFjY3RzdGF0dXMnOlxuICAgICAgICAgICAgYXR0cmlidXRlc1RvVXBkYXRlW2F0dHJdID0gdXNlckRhdGFbJ2N1c3RvbTphY2N0c3RhdHVzJ10gfHwgJ0FDVElWRSc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjdXN0b206b25ib2FyZGluZyc6XG4gICAgICAgICAgICBhdHRyaWJ1dGVzVG9VcGRhdGVbYXR0cl0gPSB1c2VyRGF0YVsnY3VzdG9tOm9uYm9hcmRpbmcnXSB8fCAnY29tcGxldGUnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnY3VzdG9tOnNldHVwZG9uZSc6XG4gICAgICAgICAgICBhdHRyaWJ1dGVzVG9VcGRhdGVbYXR0cl0gPSB1c2VyRGF0YVsnY3VzdG9tOnNldHVwZG9uZSddIHx8ICd0cnVlJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2N1c3RvbTpjcmVhdGVkX2F0JzpcbiAgICAgICAgICAgIGF0dHJpYnV0ZXNUb1VwZGF0ZVthdHRyXSA9IHVzZXJEYXRhWydjdXN0b206Y3JlYXRlZF9hdCddIHx8IHRpbWVzdGFtcDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2N1c3RvbTp1cGRhdGVkX2F0JzpcbiAgICAgICAgICAgIGF0dHJpYnV0ZXNUb1VwZGF0ZVthdHRyXSA9IHRpbWVzdGFtcDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgYnVzaW5lc3MgbmFtZSBmcm9tIHZhcmlvdXMgc291cmNlc1xuICAgICAgZnVuY3Rpb24gZ2V0QmVzdEJ1c2luZXNzTmFtZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUcnkgY29va2llcyBmaXJzdFxuICAgICAgICAgIGNvbnN0IGdldENvb2tpZSA9IChuYW1lKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGA7ICR7ZG9jdW1lbnQuY29va2llfWA7XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHZhbHVlLnNwbGl0KGA7ICR7bmFtZX09YCk7XG4gICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAyKSByZXR1cm4gcGFydHMucG9wKCkuc3BsaXQoJzsnKS5zaGlmdCgpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBjb29raWVOYW1lID0gZ2V0Q29va2llKCdidXNpbmVzc05hbWUnKSB8fCBnZXRDb29raWUoJ2N1c3RvbTpidXNpbmVzc25hbWUnKTtcbiAgICAgICAgICBpZiAoY29va2llTmFtZSkgcmV0dXJuIGNvb2tpZU5hbWU7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVGhlbiB0cnkgbG9jYWxTdG9yYWdlXG4gICAgICAgICAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAvLyBUcnkgYnVzaW5lc3NJbmZvIG9iamVjdFxuICAgICAgICAgICAgICBjb25zdCBzdG9yZWRJbmZvID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2J1c2luZXNzSW5mbycpO1xuICAgICAgICAgICAgICBpZiAoc3RvcmVkSW5mbykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEluZm8gPSBKU09OLnBhcnNlKHN0b3JlZEluZm8pO1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZWRJbmZvLmJ1c2luZXNzTmFtZSkgcmV0dXJuIHBhcnNlZEluZm8uYnVzaW5lc3NOYW1lO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBUcnkgZGlyZWN0IGtleVxuICAgICAgICAgICAgICBjb25zdCBkaXJlY3ROYW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2J1c2luZXNzTmFtZScpO1xuICAgICAgICAgICAgICBpZiAoZGlyZWN0TmFtZSkgcmV0dXJuIGRpcmVjdE5hbWU7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIC8vIElnbm9yZSBsb2NhbFN0b3JhZ2UgZXJyb3JzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gSWdub3JlIGFueSBlcnJvcnMgaW4gdGhpcyBoZWxwZXJcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHRoZSBhdHRyaWJ1dGVzIHVzaW5nIHRoZSBBUEksIHdpdGggZXJyb3IgaGFuZGxpbmcgZm9yIG5ldHdvcmsgaXNzdWVzXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3VzZXIvdXBkYXRlLWF0dHJpYnV0ZXMnLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Nlc3Npb24udG9rZW5zLmFjY2Vzc1Rva2VuLnRvU3RyaW5nKCl9YCxcbiAgICAgICAgICAgICdYLUlkLVRva2VuJzogc2Vzc2lvbi50b2tlbnMuaWRUb2tlbi50b1N0cmluZygpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzVG9VcGRhdGUsXG4gICAgICAgICAgICBmb3JjZVVwZGF0ZTogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICAgIGxvZ2dlci53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBBUEkgcmV0dXJuZWQgZXJyb3I6JywgeyBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cywgdGV4dDogZXJyb3JUZXh0IH0pO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtlcnJvclRleHR9YFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxvZ2dlci5pbmZvKCdbRGFzaGJvYXJkQ2xpZW50XSBGaXhlZCBtaXNzaW5nIGF0dHJpYnV0ZXM6JywgYXR0cmlidXRlc1RvVXBkYXRlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdNaXNzaW5nIGF0dHJpYnV0ZXMgZml4ZWQnLFxuICAgICAgICAgIHVwZGF0ZWRBdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzVG9VcGRhdGVcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGZldGNoRXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ1tEYXNoYm9hcmRDbGllbnRdIE5ldHdvcmsgZXJyb3IgdXBkYXRpbmcgYXR0cmlidXRlczonLCBmZXRjaEVycm9yKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgICAgZXJyb3I6IGBOZXR3b3JrIGVycm9yOiAke2ZldGNoRXJyb3IubWVzc2FnZX1gXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBFcnJvciBmaXhpbmcgbWlzc2luZyBhdHRyaWJ1dGVzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBHZW5lcmF0ZSBhIGRldGVybWluaXN0aWMgdGVuYW50IElEIGZyb20gdGhlIHVzZXIgSUQgaWYgbmVlZGVkXG4gIGNvbnN0IGdlbmVyYXRlRGV0ZXJtaW5pc3RpY1RlbmFudElkID0gKHVzZXJJZCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXVzZXJJZCkgcmV0dXJuIG51bGw7XG4gICAgICBcbiAgICAgIC8vIFVzZSBVVUlEIHY1IGFsZ29yaXRobSBmb3IgcHJvcGVyIGRldGVybWluaXN0aWMgVVVJRCBnZW5lcmF0aW9uXG4gICAgICAvLyBUaGlzIHVzZXMgYSBTSEEtMSBoYXNoICh2aWEgc3VidGxlIGNyeXB0bykgdG8gZW5zdXJlIGNvbnNpc3RlbmN5XG4gICAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgICBjb25zdCBkYXRhID0gZW5jb2Rlci5lbmNvZGUodXNlcklkKTtcbiAgICAgIFxuICAgICAgLy8gVVVJRCB2NSBuYW1lc3BhY2UgKHVzaW5nIEROUyBuYW1lc3BhY2UgYXMgYmFzZSlcbiAgICAgIGNvbnN0IE5BTUVTUEFDRSA9ICc2YmE3YjgxMC05ZGFkLTExZDEtODBiNC0wMGMwNGZkNDMwYzgnO1xuICAgICAgXG4gICAgICAvLyBDb252ZXJ0IG5hbWVzcGFjZSB0byBieXRlc1xuICAgICAgY29uc3QgbmFtZXNwYWNlQnl0ZXMgPSBuZXcgVWludDhBcnJheSgxNik7XG4gICAgICBOQU1FU1BBQ0UucmVwbGFjZSgvLS9nLCAnJykubWF0Y2goLy57Mn0vZykubWFwKChoZXgsIGkpID0+IHtcbiAgICAgICAgbmFtZXNwYWNlQnl0ZXNbaV0gPSBwYXJzZUludChoZXgsIDE2KTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBDb21iaW5lIG5hbWVzcGFjZSBhbmQgbmFtZVxuICAgICAgY29uc3QgY29tYmluZWRCeXRlcyA9IG5ldyBVaW50OEFycmF5KDE2ICsgZGF0YS5sZW5ndGgpO1xuICAgICAgY29tYmluZWRCeXRlcy5zZXQobmFtZXNwYWNlQnl0ZXMpO1xuICAgICAgY29tYmluZWRCeXRlcy5zZXQoZGF0YSwgMTYpO1xuICAgICAgXG4gICAgICAvLyBHZXQgaGFzaCBvZiBjb21iaW5lZCBieXRlc1xuICAgICAgLy8gSW4gYnJvd3NlcnMgc3VwcG9ydGluZyBjcnlwdG8uc3VidGxlOlxuICAgICAgaWYgKHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5zdWJ0bGUpIHtcbiAgICAgICAgcmV0dXJuIGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMScsIGNvbWJpbmVkQnl0ZXMpLnRoZW4oYnVmZmVyID0+IHtcbiAgICAgICAgICBjb25zdCBoYXNoQXJyYXkgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGJ1ZmZlcikpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZvcm1hdCBhcyBVVUlEIHY1XG4gICAgICAgICAgaGFzaEFycmF5WzZdID0gKGhhc2hBcnJheVs2XSAmIDB4MGYpIHwgMHg1MDsgLy8gU2V0IHZlcnNpb24gdG8gNVxuICAgICAgICAgIGhhc2hBcnJheVs4XSA9IChoYXNoQXJyYXlbOF0gJiAweDNmKSB8IDB4ODA7IC8vIFNldCB2YXJpYW50XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ29udmVydCB0byBoZXggYW5kIGZvcm1hdCBhcyBVVUlEXG4gICAgICAgICAgY29uc3QgaGV4ID0gaGFzaEFycmF5Lm1hcChiID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpO1xuICAgICAgICAgIGNvbnN0IHV1aWQgPSBgJHtoZXguc2xpY2UoMCwgOCl9LSR7aGV4LnNsaWNlKDgsIDEyKX0tJHtoZXguc2xpY2UoMTIsIDE2KX0tJHtoZXguc2xpY2UoMTYsIDIwKX0tJHtoZXguc2xpY2UoMjAsIDMyKX1gO1xuICAgICAgICAgIFxuICAgICAgICAgIGxvZ2dlci5pbmZvKCdbRGFzaGJvYXJkQ2xpZW50XSBHZW5lcmF0ZWQgZGV0ZXJtaW5pc3RpYyBVVUlEIHY1IHRlbmFudCBJRCBmcm9tIHVzZXIgSUQ6JywgdXVpZCk7XG4gICAgICAgICAgcmV0dXJuIHV1aWQ7XG4gICAgICAgIH0pLmNhdGNoKGUgPT4ge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcignW0Rhc2hib2FyZENsaWVudF0gRXJyb3IgZ2VuZXJhdGluZyBVVUlEIHY1IHRlbmFudCBJRDonLCBlKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGYWxsIGJhY2sgdG8gc2ltcGxlIGhhc2ggbWV0aG9kIGlmIHN1YnRsZSBjcnlwdG8gZmFpbHNcbiAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVTaW1wbGVIYXNoVGVuYW50SWQodXNlcklkKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGYWxsYmFjayBmb3IgZW52aXJvbm1lbnRzIHdpdGhvdXQgY3J5cHRvLnN1YnRsZVxuICAgICAgICByZXR1cm4gZ2VuZXJhdGVTaW1wbGVIYXNoVGVuYW50SWQodXNlcklkKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIEVycm9yIGdlbmVyYXRpbmcgdGVuYW50IElEOicsIGUpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xuICBcbiAgLy8gRmFsbGJhY2sgbWV0aG9kIHVzaW5nIHNpbXBsZSBoYXNoIGZvciBlbnZpcm9ubWVudHMgd2l0aG91dCBjcnlwdG8uc3VidGxlXG4gIGNvbnN0IGdlbmVyYXRlU2ltcGxlSGFzaFRlbmFudElkID0gKHVzZXJJZCkgPT4ge1xuICAgIGNvbnN0IGhhc2ggPSBBcnJheS5mcm9tKHVzZXJJZCkucmVkdWNlKChhY2MsIGNoYXIpID0+IHtcbiAgICAgIHJldHVybiAoKGFjYyA8PCA1KSAtIGFjYykgKyBjaGFyLmNoYXJDb2RlQXQoMCkgfCAwO1xuICAgIH0sIDApLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgzMiwgJzAnKTtcbiAgICBcbiAgICAvLyBGb3JtYXQgYXMgVVVJRC1saWtlIHN0cmluZ1xuICAgIGNvbnN0IHV1aWQgPSBgJHtoYXNoLnNsaWNlKDAsIDgpfS0ke2hhc2guc2xpY2UoOCwgMTIpfS01JHtoYXNoLnNsaWNlKDEzLCAxNil9LSR7aGFzaC5zbGljZSgxNiwgMjApfS0ke2hhc2guc2xpY2UoMjAsIDMyKX1gO1xuICAgIGxvZ2dlci5pbmZvKCdbRGFzaGJvYXJkQ2xpZW50XSBHZW5lcmF0ZWQgZmFsbGJhY2sgdGVuYW50IElEIGZyb20gdXNlciBJRDonLCB1dWlkKTtcbiAgICBcbiAgICByZXR1cm4gdXVpZDtcbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHZlcmlmeUNvZ25pdG9TdGF0ZSA9IGFzeW5jICgpID0+IHtcbiAgICAgIHNldElzVmVyaWZ5aW5nVGVuYW50KHRydWUpO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICAvLyBBbHdheXMgdHJ5IHRvIGxvYWQgZnJvbSBsb2NhbCBzdG9yYWdlIGZpcnN0XG4gICAgICAgIGxldCB1c2VySWQgPSBudWxsO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBDaGVjayBDb2duaXRvIGlkZW50aXR5XG4gICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGZldGNoQXV0aFNlc3Npb24oKTtcbiAgICAgICAgICBjb25zdCBpZGVudGl0eVRva2VuID0gc2Vzc2lvbj8udG9rZW5zPy5pZFRva2VuPy50b1N0cmluZygpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChpZGVudGl0eVRva2VuKSB7XG4gICAgICAgICAgICBjb25zdCBpZFRva2VuUGF5bG9hZCA9IHNlc3Npb24udG9rZW5zLmlkVG9rZW47XG4gICAgICAgICAgICB1c2VySWQgPSBpZFRva2VuUGF5bG9hZC5wYXlsb2FkLnN1YjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHVzZXJJZCkge1xuICAgICAgICAgICAgICAvLyBTdG9yZSB1c2VyIElEIGluIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJZCcsIHVzZXJJZCk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSB0ZW5hbnQgSUQgaWYgbmVlZGVkXG4gICAgICAgICAgICAgIGNvbnN0IHRlbmFudElkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RlbmFudElkJykgfHwgZ2VuZXJhdGVEZXRlcm1pbmlzdGljVGVuYW50SWQodXNlcklkKTtcbiAgICAgICAgICAgICAgaWYgKHRlbmFudElkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RlbmFudElkJywgdGVuYW50SWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBzZXRJc0F1dGhlbnRpY2F0ZWQodHJ1ZSk7XG4gICAgICAgICAgICAgIHNldFRlbmFudFZlcmlmaWVkKHRydWUpO1xuICAgICAgICAgICAgICBzZXRJc1ZlcmlmeWluZ1RlbmFudChmYWxzZSk7XG4gICAgICAgICAgICAgIHNldFNldHVwU3RhdHVzKCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIEVycm9yIGZldGNoaW5nIENvZ25pdG8gc2Vzc2lvbjonLCBlKTtcbiAgICAgICAgICAvLyBDb250aW51ZSB0byBmYWxsYmFjayBtZWNoYW5pc21zXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIElmIHdlIGNvdWxkbid0IGdldCBmcm9tIENvZ25pdG8sIHRyeSBsb2NhbFN0b3JhZ2VcbiAgICAgICAgdXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpO1xuICAgICAgICBjb25zdCB0ZW5hbnRJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0ZW5hbnRJZCcpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHVzZXJJZCAmJiB0ZW5hbnRJZCkge1xuICAgICAgICAgIHNldFRlbmFudFZlcmlmaWVkKHRydWUpO1xuICAgICAgICAgIHNldElzVmVyaWZ5aW5nVGVuYW50KGZhbHNlKTtcbiAgICAgICAgICBzZXRTZXR1cFN0YXR1cygnc3VjY2VzcycpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSWYgd2UgZ2V0IGhlcmUsIHdlIGZhaWxlZCB0byB2ZXJpZnkgdGhlIHRlbmFudFxuICAgICAgICBzZXRUZW5hbnRWZXJpZmllZChmYWxzZSk7XG4gICAgICAgIHNldElzVmVyaWZ5aW5nVGVuYW50KGZhbHNlKTtcbiAgICAgICAgc2V0U2V0dXBTdGF0dXMoJ2ZhaWxlZCcpO1xuICAgICAgICBzZXRFcnJvcignVW5hYmxlIHRvIHZlcmlmeSB0ZW5hbnQgSUQuIFBsZWFzZSB0cnkgcmVmcmVzaGluZyB0aGUgcGFnZSBvciBzaWduaW5nIGluIGFnYWluLicpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBFcnJvciB2ZXJpZnlpbmcgdGVuYW50OicsIGVycm9yKTtcbiAgICAgICAgc2V0VGVuYW50VmVyaWZpZWQoZmFsc2UpO1xuICAgICAgICBzZXRJc1ZlcmlmeWluZ1RlbmFudChmYWxzZSk7XG4gICAgICAgIHNldFNldHVwU3RhdHVzKCdmYWlsZWQnKTtcbiAgICAgICAgc2V0RXJyb3IoJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICB2ZXJpZnlDb2duaXRvU3RhdGUoKTtcbiAgfSwgW10pO1xuICBcbiAgLy8gRnVuY3Rpb24gdG8gZml4IHRlbmFudCBzY2hlbWEgaXNzdWVzIGluIEFXUyBSRFNcbiAgY29uc3Qgc2V0dXBBd3NSZHNUYWJsZXMgPSB1c2VDYWxsYmFjayhhc3luYyAodGVuYW50SWQpID0+IHtcbiAgICBpZiAoIXRlbmFudElkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBDYW5ub3Qgc2V0IHVwIHRhYmxlczogTm8gdGVuYW50IElEIHByb3ZpZGVkJyk7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdObyB0ZW5hbnQgSUQgcHJvdmlkZWQnIH07XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhgW0Rhc2hib2FyZENsaWVudF0gU2V0dGluZyB1cCBBV1MgUkRTIHRhYmxlcyBmb3IgdGVuYW50OiAke3RlbmFudElkfWApO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgdGhlIHNjaGVtYSBmaXJzdFxuICAgICAgY29uc3Qgc2NoZW1hTmFtZSA9IGB0ZW5hbnRfJHt0ZW5hbnRJZC5yZXBsYWNlKC8tL2csICdfJyl9YDtcbiAgICAgIFxuICAgICAgLy8gQ2FsbCBvdXIgQVdTIFJEUyB0YWJsZSBjcmVhdGlvbiBlbmRwb2ludFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9kYi9jcmVhdGUtYXdzLXRhYmxlc2ApO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIEFXUyBSRFMgdGFibGUgc2V0dXAgY29tcGxldGU6JywgZGF0YSk7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGEgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0Rhc2hib2FyZENsaWVudF0gRmFpbGVkIHRvIHNldCB1cCBBV1MgUkRTIHRhYmxlczonLCBlcnJvckRhdGEpO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yRGF0YSB9O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBFcnJvciBzZXR0aW5nIHVwIEFXUyBSRFMgdGFibGVzOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZSBhbmQgZW5zdXJlIHRhYmxlcyBleGlzdFxuICBjb25zdCBpbml0aWFsaXplRGF0YWJhc2UgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBJbml0aWFsaXppbmcgZGF0YWJhc2UgY29ubmVjdGlvbiB0byBBV1MgUkRTJyk7XG4gICAgICBcbiAgICAgIC8vIEdldCB0ZW5hbnQgSUQgZnJvbSBsb2NhbFN0b3JhZ2Ugb3IgY29va2llc1xuICAgICAgY29uc3QgbG9jYWxTdG9yYWdlVGVuYW50SWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGVuYW50SWQnKTtcbiAgICAgIGNvbnN0IGNvb2tpZVRlbmFudElkID0gKCgpID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBgOyAke2RvY3VtZW50LmNvb2tpZX1gO1xuICAgICAgICBjb25zdCBwYXJ0cyA9IHZhbHVlLnNwbGl0KGA7IHRlbmFudElkPWApO1xuICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAyKSByZXR1cm4gcGFydHMucG9wKCkuc3BsaXQoJzsnKS5zaGlmdCgpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0pKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHRlbmFudElkID0gbG9jYWxTdG9yYWdlVGVuYW50SWQgfHwgY29va2llVGVuYW50SWQ7XG4gICAgICBcbiAgICAgIGlmICghdGVuYW50SWQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBObyB0ZW5hbnQgSUQgZm91bmQgZm9yIGRhdGFiYXNlIGluaXRpYWxpemF0aW9uLCBza2lwcGluZyB0YWJsZSBzZXR1cCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNldCB1cCBBV1MgUkRTIHRhYmxlcyB3aXRoIHRoZSB0ZW5hbnQgSURcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNldHVwQXdzUmRzVGFibGVzKHRlbmFudElkKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBBV1MgUkRTIHRhYmxlcyBzZXQgdXAgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1tEYXNoYm9hcmRDbGllbnRdIEFXUyBSRFMgdGFibGUgc2V0dXAgaXNzdWVzOicsIHJlc3VsdC5lcnJvcik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIEVycm9yIGluaXRpYWxpemluZyBBV1MgUkRTOicsIGVycm9yKTtcbiAgICB9XG4gIH07XG4gIFxuICAvLyBUaGlzIGVuc3VyZXMgd2UncmUgb25seSByZW5kZXJpbmcgb24gdGhlIGNsaWVudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldElzQ2xpZW50KHRydWUpO1xuICAgIFxuICAgIC8vIFJ1biBkYXRhYmFzZSBpbml0aWFsaXphdGlvbiBpbW1lZGlhdGVseSB3aXRoIEFXUyBSRFNcbiAgICBpbml0aWFsaXplRGF0YWJhc2UoKTtcbiAgICBcbiAgICAvLyBFbnN1cmUgY29uc2lzdGVudCB0ZW5hbnQgSUQgb24gaW5pdGlhbGl6YXRpb25cbiAgICBjb25zdCBlbnN1cmVDb25zaXN0ZW50VGVuYW50SWQgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBDaGVjayB2YXJpb3VzIHNvdXJjZXNcbiAgICAgICAgY29uc3QgbG9jYWxTdG9yYWdlVGVuYW50SWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGVuYW50SWQnKTtcbiAgICAgICAgY29uc3QgY29va2llVGVuYW50SWQgPSAoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gYDsgJHtkb2N1bWVudC5jb29raWV9YDtcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IHZhbHVlLnNwbGl0KGA7IHRlbmFudElkPWApO1xuICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDIpIHJldHVybiBwYXJ0cy5wb3AoKS5zcGxpdCgnOycpLnNoaWZ0KCk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBJZiB3ZSBoYXZlIGluY29uc2lzdGVudCBJRHMgb3Igbm9uZSBhdCBhbGwsIGZldGNoIGZyb20gdGhlIHNlcnZlclxuICAgICAgICBpZiAoIWxvY2FsU3RvcmFnZVRlbmFudElkIHx8ICFjb29raWVUZW5hbnRJZCB8fCBsb2NhbFN0b3JhZ2VUZW5hbnRJZCAhPT0gY29va2llVGVuYW50SWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW0Rhc2hib2FyZENsaWVudF0gVGVuYW50IElEIGluY29uc2lzdGVuY3kgZGV0ZWN0ZWQsIGZldGNoaW5nIGZyb20gc2VydmVyJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFJlcXVlc3QgdGhlIHRlbmFudCBJRCBmcm9tIHRoZSBzZXJ2ZXIgYmFzZWQgb24gdGhlIGF1dGhlbnRpY2F0ZWQgdXNlclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS91c2VyL3RlbmFudCcsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICBpZiAoZGF0YS50ZW5hbnRJZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBSZXRyaWV2ZWQgdGVuYW50IElEIGZyb20gc2VydmVyOicsIGRhdGEudGVuYW50SWQpO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZW5hbnRJZCcsIGRhdGEudGVuYW50SWQpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGB0ZW5hbnRJZD0ke2RhdGEudGVuYW50SWR9OyBwYXRoPS87IG1heC1hZ2U9JHs2MCo2MCoyNCozMH07IHNhbWVzaXRlPWxheGA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2V0IHVwIEFXUyBSRFMgdGFibGVzIGZvciB0aGlzIHRlbmFudFxuICAgICAgICAgICAgICAgIGF3YWl0IHNldHVwQXdzUmRzVGFibGVzKGRhdGEudGVuYW50SWQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFsc28gc3RvcmUgdGhlIHNvdXJjZSBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0Rhc2hib2FyZENsaWVudF0gVGVuYW50IElEIHNvdXJjZTonLCBkYXRhLnNvdXJjZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIElmIHNlcnZlciBkb2Vzbid0IGhhdmUgYSB0ZW5hbnQgSUQgZm9yIHRoaXMgdXNlciwgZ2V0IGZyb20gQ29nbml0b1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB1c2VyQXR0cmlidXRlcyA9IGF3YWl0IGZldGNoVXNlckF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvZ25pdG9UZW5hbnRJZCA9IHVzZXJBdHRyaWJ1dGVzWydjdXN0b206YnVzaW5lc3NpZCddO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBpZiAoY29nbml0b1RlbmFudElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBVc2luZyB0ZW5hbnQgSUQgZnJvbSBDb2duaXRvOicsIGNvZ25pdG9UZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZW5hbnRJZCcsIGNvZ25pdG9UZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGB0ZW5hbnRJZD0ke2NvZ25pdG9UZW5hbnRJZH07IHBhdGg9LzsgbWF4LWFnZT0kezYwKjYwKjI0KjMwfTsgc2FtZXNpdGU9bGF4YDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCB1cCBBV1MgUkRTIHRhYmxlcyBmb3IgdGhpcyB0ZW5hbnRcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2V0dXBBd3NSZHNUYWJsZXMoY29nbml0b1RlbmFudElkKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB0ZW5hbnQgcmVjb3JkIGV4aXN0cyBpbiBkYXRhYmFzZSBhbmQgdXBkYXRlIHNlcnZlclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIEFsc28gdXBkYXRlIHRoZSB0ZW5hbnQgQVBJXG4gICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJy9hcGkvdXNlci90ZW5hbnQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdGVuYW50SWQ6IGNvZ25pdG9UZW5hbnRJZCB9KVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbRGFzaGJvYXJkQ2xpZW50XSBVcGRhdGVkIHNlcnZlciB3aXRoIENvZ25pdG8gdGVuYW50IElEJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHVwZGF0ZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBGYWlsZWQgdG8gdXBkYXRlIHNlcnZlciB3aXRoIHRlbmFudCBJRDonLCB1cGRhdGVFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9OTFkgQ1JFQVRFIE5FVyBURU5BTlQgSUYgRVhQTElDSVRMWSBSRVFVRVNURURcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgaW4gYSBuZXcgYWNjb3VudCBmbG93IHRoYXQgYWN0dWFsbHkgcmVxdWlyZXMgYSBuZXcgdGVuYW50XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdBY2NvdW50ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBkZXRlcm1pbmlzdGljIFVVSUQgYmFzZWQgb24gdXNlciBJRCBpZiBwb3NzaWJsZVxuICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgc2FtZSB1c2VyIGFsd2F5cyBnZXRzIHRoZSBzYW1lIHRlbmFudCBJRFxuICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIGRldGVybWluaXN0aWMgVVVJRCBiYXNlZCBvbiB1c2VyIHN1YlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlcklkID0gdXNlckF0dHJpYnV0ZXMuc3ViO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB2NTogdXVpZHY1IH0gPSByZXF1aXJlKCd1dWlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBURU5BTlRfTkFNRVNQQUNFID0gJzlhNTUxYzQ0LTRhZGUtNGY4OS1iMDc4LTBhZjhiZTc5NGMyMyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXRlcm1pbmlzdGljVGVuYW50SWQgPSB1dWlkdjUodXNlcklkLCBURU5BTlRfTkFNRVNQQUNFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIEdlbmVyYXRlZCBkZXRlcm1pbmlzdGljIHRlbmFudCBJRCBmcm9tIHVzZXIgSUQ6JywgZGV0ZXJtaW5pc3RpY1RlbmFudElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZW5hbnRJZCcsIGRldGVybWluaXN0aWNUZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgdGVuYW50SWQ9JHtkZXRlcm1pbmlzdGljVGVuYW50SWR9OyBwYXRoPS87IG1heC1hZ2U9JHs2MCo2MCoyNCozMH07IHNhbWVzaXRlPWxheGA7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgc2NoZW1hIG1hbmFnZXIgdG8gZW5zdXJlIHRhYmxlcyBhbmQgc2NoZW1hIGV4aXN0XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBlbnN1cmVUZW5hbnRTY2hlbWEoZGV0ZXJtaW5pc3RpY1RlbmFudElkLCB1c2VyQXR0cmlidXRlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodXVpZEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBkZXRlcm1pbmlzdGljIGdlbmVyYXRpb24gZmFpbHMsIGZhbGwgYmFjayB0byByYW5kb20gVVVJRCBhcyBhYnNvbHV0ZSBsYXN0IHJlc29ydFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VGVuYW50SWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBVVUlEIGVycm9yLCBnZW5lcmF0ZWQgcmFuZG9tIHRlbmFudCBJRCBhcyBsYXN0IHJlc29ydDonLCBuZXdUZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGVuYW50SWQnLCBuZXdUZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgdGVuYW50SWQ9JHtuZXdUZW5hbnRJZH07IHBhdGg9LzsgbWF4LWFnZT0kezYwKjYwKjI0KjMwfTsgc2FtZXNpdGU9bGF4YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBzY2hlbWEgbWFuYWdlciB0byBlbnN1cmUgdGFibGVzIGFuZCBzY2hlbWEgZXhpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGVuc3VyZVRlbmFudFNjaGVtYShuZXdUZW5hbnRJZCwgdXNlckF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdGVuYW50IGV4aXN0cyBpbiBkYXRhYmFzZSBhbmQgdXBkYXRlIHNlcnZlclxuICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGZpbmFsIHRlbmFudCBJRCAoZnJvbSBlaXRoZXIgZGV0ZXJtaW5pc3RpY1RlbmFudElkIG9yIG5ld1RlbmFudElkKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmluYWxUZW5hbnRJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0ZW5hbnRJZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBkYXRhYmFzZSBlbnZpcm9ubWVudCBmaXJzdFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5pdFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvdGVuYW50L2luaXQtZGItZW52Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbml0UmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5pdERhdGEgPSBhd2FpdCBpbml0UmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIERhdGFiYXNlIGVudmlyb25tZW50IGluaXRpYWxpemF0aW9uOicsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0RGF0YS5zdWNjZXNzID8gJ3N1Y2Nlc3NmdWwnIDogJ2ZhaWxlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdUYWJsZSBleGlzdHM6JywgaW5pdERhdGEudGFibGVFeGlzdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGpzb25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0Rhc2hib2FyZENsaWVudF0gRmFpbGVkIHRvIHBhcnNlIGluaXQtZGItZW52IHJlc3BvbnNlOicsIGpzb25FcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb250aW51ZSB3aXRoIHRoZSBwcm9jZXNzIGRlc3BpdGUgcGFyc2luZyBlcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoaW5pdEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignW0Rhc2hib2FyZENsaWVudF0gRXJyb3IgaW5pdGlhbGl6aW5nIGRhdGFiYXNlIGVudmlyb25tZW50OicsIGluaXRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29udGludWUgYW55d2F5IHNpbmNlIGVuc3VyZS1kYi1yZWNvcmQgaGFzIGl0cyBvd24gaW5pdGlhbGl6YXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm93IGVuc3VyZSB0aGUgdGVuYW50IHJlY29yZCBleGlzdHMgaW4gdGhlIGRhdGFiYXNlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW5hbnRSZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3RlbmFudC9lbnN1cmUtZGItcmVjb3JkJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVuYW50SWQ6IGZpbmFsVGVuYW50SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VyQXR0cmlidXRlcy5zdWIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXJBdHRyaWJ1dGVzLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1c2luZXNzTmFtZTogdXNlckF0dHJpYnV0ZXNbJ2N1c3RvbTpidXNpbmVzc25hbWUnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JjZUNyZWF0ZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW5hbnRSZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbmFudERhdGEgPSBhd2FpdCB0ZW5hbnRSZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIEdlbmVyYXRlZCB0ZW5hbnQgSUQgc2F2ZWQgdG8gZGF0YWJhc2U6JywgdGVuYW50RGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGpzb25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIEZhaWxlZCB0byBwYXJzZSB0ZW5hbnQgcmVzcG9uc2U6JywganNvbkVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb250aW51ZSBkZXNwaXRlIHBhcnNpbmcgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCB0ZW5hbnRSZXNwb25zZS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBGYWlsZWQgdG8gc2F2ZSBnZW5lcmF0ZWQgdGVuYW50IElEIHRvIGRhdGFiYXNlOicsIGVycm9yVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHRleHRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignW0Rhc2hib2FyZENsaWVudF0gRmFpbGVkIHRvIHNhdmUgZ2VuZXJhdGVkIHRlbmFudCBJRCB0byBkYXRhYmFzZS4gU3RhdHVzOicsIHRlbmFudFJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxzbyB1cGRhdGUgdGhlIHRlbmFudCBBUElcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCcvYXBpL3VzZXIvdGVuYW50Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB0ZW5hbnRJZDogZmluYWxUZW5hbnRJZCB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0Rhc2hib2FyZENsaWVudF0gVXBkYXRlZCBzZXJ2ZXIgd2l0aCBnZW5lcmF0ZWQgdGVuYW50IElEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodXBkYXRlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignW0Rhc2hib2FyZENsaWVudF0gRmFpbGVkIHRvIHVwZGF0ZSBzZXJ2ZXIgd2l0aCB0ZW5hbnQgSUQ6JywgdXBkYXRlRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0Rhc2hib2FyZENsaWVudF0gTm8gdGVuYW50IElEIGZvdW5kLCBidXQgbmV3IGFjY291bnQgZmxvdyBub3QgZGV0ZWN0ZWQuIE5vdCBjcmVhdGluZyBhIG5ldyB0ZW5hbnQuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgbm90aWZ5V2FybmluZygnVW5hYmxlIHRvIGRldGVybWluZSB5b3VyIG9yZ2FuaXphdGlvbiBpbmZvcm1hdGlvbi4gUGxlYXNlIGxvZyBvdXQgYW5kIGxvZyBiYWNrIGluLicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoY29nbml0b0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBFcnJvciBmZXRjaGluZyBDb2duaXRvIGF0dHJpYnV0ZXM6JywgY29nbml0b0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIElmIEFQSSByZXF1ZXN0IGZhaWxzLCBmYWxsIGJhY2sgdG8gQ29nbml0b1xuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tEYXNoYm9hcmRDbGllbnRdIFRlbmFudCBBUEkgcmVxdWVzdCBmYWlsZWQsIGZhbGxpbmcgYmFjayB0byBDb2duaXRvJyk7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlckF0dHJpYnV0ZXMgPSBhd2FpdCBmZXRjaFVzZXJBdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29nbml0b1RlbmFudElkID0gdXNlckF0dHJpYnV0ZXNbJ2N1c3RvbTpidXNpbmVzc2lkJ107XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGNvZ25pdG9UZW5hbnRJZCkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIFVzaW5nIHRlbmFudCBJRCBmcm9tIENvZ25pdG8gYWZ0ZXIgQVBJIGZhaWx1cmU6JywgY29nbml0b1RlbmFudElkKTtcbiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZW5hbnRJZCcsIGNvZ25pdG9UZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgdGVuYW50SWQ9JHtjb2duaXRvVGVuYW50SWR9OyBwYXRoPS87IG1heC1hZ2U9JHs2MCo2MCoyNCozMH07IHNhbWVzaXRlPWxheGA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgZGV0ZXJtaW5pc3RpYyBVVUlEIGJhc2VkIG9uIHVzZXIgSUQgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VySWQgPSB1c2VyQXR0cmlidXRlcy5zdWI7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHY1OiB1dWlkdjUgfSA9IHJlcXVpcmUoJ3V1aWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBURU5BTlRfTkFNRVNQQUNFID0gJzlhNTUxYzQ0LTRhZGUtNGY4OS1iMDc4LTBhZjhiZTc5NGMyMyc7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGVkVGVuYW50SWQgPSB1dWlkdjUodXNlcklkLCBURU5BTlRfTkFNRVNQQUNFKTtcbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0Rhc2hib2FyZENsaWVudF0gR2VuZXJhdGVkIGRldGVybWluaXN0aWMgdGVuYW50IElEIGZyb20gdXNlciBJRDonLCBnZW5lcmF0ZWRUZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RlbmFudElkJywgZ2VuZXJhdGVkVGVuYW50SWQpO1xuICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGB0ZW5hbnRJZD0ke2dlbmVyYXRlZFRlbmFudElkfTsgcGF0aD0vOyBtYXgtYWdlPSR7NjAqNjAqMjQqMzB9OyBzYW1lc2l0ZT1sYXhgO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFJhbmRvbSBVVUlEIGFzIGFic29sdXRlIGxhc3QgcmVzb3J0XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VGVuYW50SWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignW0Rhc2hib2FyZENsaWVudF0gTm8gdXNlciBJRCBhdmFpbGFibGUsIHVzaW5nIHJhbmRvbSBVVUlEOicsIG5ld1RlbmFudElkKTtcbiAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGVuYW50SWQnLCBuZXdUZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gYHRlbmFudElkPSR7bmV3VGVuYW50SWR9OyBwYXRoPS87IG1heC1hZ2U9JHs2MCo2MCoyNCozMH07IHNhbWVzaXRlPWxheGA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHV1aWRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBVVUlEIGdlbmVyYXRpb24gZmFpbHMsIHVzZSBzaW1wbGUgcmFuZG9tIFVVSURcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VGVuYW50SWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBVVUlEIGdlbmVyYXRpb24gZXJyb3IsIHVzaW5nIHJhbmRvbSBVVUlEOicsIG5ld1RlbmFudElkKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RlbmFudElkJywgbmV3VGVuYW50SWQpO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgdGVuYW50SWQ9JHtuZXdUZW5hbnRJZH07IHBhdGg9LzsgbWF4LWFnZT0kezYwKjYwKjI0KjMwfTsgc2FtZXNpdGU9bGF4YDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGNvZ25pdG9FcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIEVycm9yIGZldGNoaW5nIENvZ25pdG8gYXR0cmlidXRlcyBhZnRlciBBUEkgZmFpbHVyZTonLCBjb2duaXRvRXJyb3IpO1xuICAgICAgICAgICAgICAgIC8vIFVsdGltYXRlIGZhbGxiYWNrIC0gZ2VuZXJhdGUgcmFuZG9tIFVVSURcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUZW5hbnRJZCA9IGNyeXB0by5yYW5kb21VVUlEKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBBbGwgdGVuYW50IElEIHNvdXJjZXMgZmFpbGVkLCB1c2luZyByYW5kb20gVVVJRDonLCBuZXdUZW5hbnRJZCk7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RlbmFudElkJywgbmV3VGVuYW50SWQpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGB0ZW5hbnRJZD0ke25ld1RlbmFudElkfTsgcGF0aD0vOyBtYXgtYWdlPSR7NjAqNjAqMjQqMzB9OyBzYW1lc2l0ZT1sYXhgO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZmV0Y2hFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0Rhc2hib2FyZENsaWVudF0gRXJyb3IgZmV0Y2hpbmcgdGVuYW50IElEIGZyb20gc2VydmVyOicsIGZldGNoRXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBMb2cgYnV0IGRvbid0IHRocm93IGVycm9yc1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbRGFzaGJvYXJkQ2xpZW50XSBFcnJvciBlbnN1cmluZyBjb25zaXN0ZW50IHRlbmFudCBJRDonLCBlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8vIFJ1biB0aGUgY29uc2lzdGVuY3kgY2hlY2tcbiAgICBlbnN1cmVDb25zaXN0ZW50VGVuYW50SWQoKTtcbiAgICBcbiAgICAvLyBGaXJzdCBjaGVjayBpZiB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQgYnkgZmV0Y2hpbmcgQ29nbml0byBhdHRyaWJ1dGVzXG4gICAgY29uc3QgY2hlY2tPbmJvYXJkaW5nU3RhdHVzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIFN0YXJ0aW5nIGF1dGhlbnRpY2F0aW9uIGFuZCBvbmJvYXJkaW5nIHN0YXR1cyBjaGVjaycpO1xuICAgICAgICBcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgd2UgaGF2ZSBhIHZhbGlkIGF1dGggc2Vzc2lvblxuICAgICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZmV0Y2hBdXRoU2Vzc2lvbigpO1xuICAgICAgICBpZiAoIXNlc3Npb24/LnRva2Vucz8uYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1tEYXNoYm9hcmRDbGllbnRdIE5vIHZhbGlkIGF1dGggc2Vzc2lvbiBmb3VuZCwgd2lsbCByZWRpcmVjdCB0byBzaWduLWluJyk7XG4gICAgICAgICAgLy8gQWRkIGRlbGF5IHRvIHNlZSBsb2dzIGJlZm9yZSByZWRpcmVjdFxuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7XG4gICAgICAgICAgcm91dGVyLnB1c2goJy9hdXRoL3NpZ25pbicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVXNlciBoYXMgdmFsaWQgc2Vzc2lvbiwgc2V0IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgc2V0SXNBdXRoZW50aWNhdGVkKHRydWUpO1xuICAgICAgICBcbiAgICAgICAgLy8gR2V0IHVzZXIgYXR0cmlidXRlcyB0byBjaGVjayBvbmJvYXJkaW5nIHN0YXR1c1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHVzZXJBdHRyaWJ1dGVzID0gYXdhaXQgZmV0Y2hVc2VyQXR0cmlidXRlcygpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFN0b3JlIHVzZXIgYXR0cmlidXRlcyBpbiBzdGF0ZVxuICAgICAgICAgIHNldFVzZXJEYXRhKHVzZXJBdHRyaWJ1dGVzKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZygnW0Rhc2hib2FyZENsaWVudF0gVXNlciBhdHRyaWJ1dGVzIGZldGNoZWQ6Jywge1xuICAgICAgICAgICAgaGFzQnVzaW5lc3NJZDogISF1c2VyQXR0cmlidXRlc1snY3VzdG9tOmJ1c2luZXNzaWQnXSxcbiAgICAgICAgICAgIGhhc0J1c2luZXNzTmFtZTogISF1c2VyQXR0cmlidXRlc1snY3VzdG9tOmJ1c2luZXNzbmFtZSddLFxuICAgICAgICAgICAgb25ib2FyZGluZ1N0YXR1czogdXNlckF0dHJpYnV0ZXNbJ2N1c3RvbTpvbmJvYXJkaW5nJ10sXG4gICAgICAgICAgICBzZXR1cERvbmU6IHVzZXJBdHRyaWJ1dGVzWydjdXN0b206c2V0dXBkb25lJ11cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBFTkhBTkNFRCBDSEVDSzogSWYgdXNlciBoYXMgY29tcGxldGVkIG9uYm9hcmRpbmcgYWNjb3JkaW5nIHRvIENvZ25pdG8sIHdlJ3JlIGdvb2RcbiAgICAgICAgICBpZiAodXNlckF0dHJpYnV0ZXNbJ2N1c3RvbTpvbmJvYXJkaW5nJ10/LnRvTG93ZXJDYXNlKCkgPT09ICdjb21wbGV0ZScgfHwgXG4gICAgICAgICAgICAgIHVzZXJBdHRyaWJ1dGVzWydjdXN0b206c2V0dXBkb25lJ10/LnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIFVzZXIgaGFzIGNvbXBsZXRlZCBvbmJvYXJkaW5nLCBzaG93aW5nIGRhc2hib2FyZCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdGVuYW50IElEIHRvIGVuc3VyZSBSTFMgd29ya3MgcHJvcGVybHlcbiAgICAgICAgICAgIGlmICghdXNlckF0dHJpYnV0ZXNbJ2N1c3RvbTpidXNpbmVzc2lkJ10pIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbRGFzaGJvYXJkQ2xpZW50XSBNaXNzaW5nIHRlbmFudCBJRCBpbiBDb2duaXRvLCB3aWxsIGdlbmVyYXRlIG9uZSBmb3IgUkxTJyk7XG4gICAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgZGV0ZXJtaW5pc3RpYyBVVUlEIGZyb20gdXNlciBJRCB0byBlbnN1cmUgY29uc2lzdGVuY3lcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHY1OiB1dWlkdjUgfSA9IHJlcXVpcmUoJ3V1aWQnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBURU5BTlRfTkFNRVNQQUNFID0gJzlhNTUxYzQ0LTRhZGUtNGY4OS1iMDc4LTBhZjhiZTc5NGMyMyc7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGVkVGVuYW50SWQgPSB1dWlkdjUodXNlckF0dHJpYnV0ZXMuc3ViLCBURU5BTlRfTkFNRVNQQUNFKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhpcyB0byB0aGUgYXR0cmlidXRlcyB0aGF0IG5lZWQgdXBkYXRpbmdcbiAgICAgICAgICAgICAgICB1c2VyQXR0cmlidXRlc1snY3VzdG9tOmJ1c2luZXNzaWQnXSA9IGdlbmVyYXRlZFRlbmFudElkO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZW5hbnRJZCcsIGdlbmVyYXRlZFRlbmFudElkKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgdGVuYW50SWQ9JHtnZW5lcmF0ZWRUZW5hbnRJZH07IHBhdGg9LzsgbWF4LWFnZT0kezYwKjYwKjI0KjMwfTsgc2FtZXNpdGU9bGF4YDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0Rhc2hib2FyZENsaWVudF0gR2VuZXJhdGVkIHRlbmFudCBJRCBmb3IgUkxTOicsIGdlbmVyYXRlZFRlbmFudElkKTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIEVycm9yIGdlbmVyYXRpbmcgdGVuYW50IElEOicsIGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZpeCBhbnkgbWlzc2luZyBhdHRyaWJ1dGVzIGluIHRoZSBiYWNrZ3JvdW5kXG4gICAgICAgICAgICBlbnN1cmVVc2VyQXR0cmlidXRlc0NvbXBsZXRlKHNlc3Npb24sIHVzZXJBdHRyaWJ1dGVzKVxuICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gY29uc29sZS5kZWJ1ZygnW0Rhc2hib2FyZENsaWVudF0gQXR0cmlidXRlIGNoZWNrIHJlc3VsdDonLCByZXN1bHQpKVxuICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIEJhY2tncm91bmQgYXR0cmlidXRlIGNoZWNrIGVycm9yOicsIGVycikpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgIHNldElzUmVhZHkodHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChhdHRyRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1tEYXNoYm9hcmRDbGllbnRdIEVycm9yIGZldGNoaW5nIHVzZXIgYXR0cmlidXRlcywgdXNpbmcgY29va2llcyBhcyBmYWxsYmFjazonLCBhdHRyRXJyb3IpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEV2ZW4gaWYgd2UgY2FuJ3QgZ2V0IGF0dHJpYnV0ZXMsIHdlIGNhbiB1c2UgY29va2llc1xuICAgICAgICAgIGNvbnN0IGdldENvb2tpZSA9IChuYW1lKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGA7ICR7ZG9jdW1lbnQuY29va2llfWA7XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHZhbHVlLnNwbGl0KGA7ICR7bmFtZX09YCk7XG4gICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAyKSByZXR1cm4gcGFydHMucG9wKCkuc3BsaXQoJzsnKS5zaGlmdCgpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDaGVjayBjb29raWVzIGZvciBvbmJvYXJkaW5nIHN0YXR1c1xuICAgICAgICAgIGNvbnN0IG9uYm9hcmRpbmdTdGF0dXMgPSBnZXRDb29raWUoJ29uYm9hcmRlZFN0YXR1cycpIHx8IGdldENvb2tpZSgnb25ib2FyZGluZ1N0YXR1cycpO1xuICAgICAgICAgIGNvbnN0IHNldHVwQ29tcGxldGVkID0gZ2V0Q29va2llKCdzZXR1cENvbXBsZXRlZCcpIHx8IGdldENvb2tpZSgnc2V0dXBEb25lJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKG9uYm9hcmRpbmdTdGF0dXMgPT09ICdjb21wbGV0ZScgfHwgc2V0dXBDb21wbGV0ZWQgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIENvb2tpZXMgaW5kaWNhdGUgb25ib2FyZGluZyBpcyBjb21wbGV0ZSwgc2hvd2luZyBkYXNoYm9hcmQnKTtcbiAgICAgICAgICAgIHNldElzUmVhZHkodHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgaXNSZWFkeSB0cnVlIGV2ZW4gaWYgd2UgZG9uJ3QgaGF2ZSBhdHRyaWJ1dGVzIG9yIGNvb2tpZXNcbiAgICAgICAgLy8gVGhlIERhc2hib2FyZFdyYXBwZXIgd2lsbCBoYW5kbGUgZnVydGhlciB2ZXJpZmljYXRpb25cbiAgICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIFByb2NlZWRpbmcgdG8gZGFzaGJvYXJkLCBEYXNoYm9hcmRXcmFwcGVyIHdpbGwgaGFuZGxlIHZlcmlmaWNhdGlvbicpO1xuICAgICAgICBzZXRJc1JlYWR5KHRydWUpO1xuICAgICAgICBcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIExvZyBlcnJvciBhbmQgcmVkaXJlY3RcbiAgICAgICAgY29uc29sZS5lcnJvcignW0Rhc2hib2FyZENsaWVudF0gRXJyb3IgY2hlY2tpbmcgYXV0aCBzdGF0dXM6JywgZXJyb3IpO1xuICAgICAgICByb3V0ZXIucHVzaCgnL2F1dGgvc2lnbmluP3JldHVyblVybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KCcvZGFzaGJvYXJkJykpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgLy8gUnVuIHRoZSBjaGVjayBidXQgc2V0IGEgdGltZW91dCB0byBwcmV2ZW50IGluZmluaXRlIGxvYWRpbmdcbiAgICBjaGVja09uYm9hcmRpbmdTdGF0dXMoKTtcbiAgICBcbiAgICAvLyBTZXQgYSB0aW1lb3V0IHRvIGVuc3VyZSB3ZSBkb24ndCBnZXQgc3R1Y2sgaW4gYSBsb2FkaW5nIHN0YXRlXG4gICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKCFpc1JlYWR5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gRGFzaGJvYXJkIGxvYWRpbmcgdGltZW91dCAtIGZvcmNpbmcgcmVhZHkgc3RhdGUnKTtcbiAgICAgICAgc2V0SXNSZWFkeSh0cnVlKTtcbiAgICAgIH1cbiAgICB9LCA1MDAwKTtcbiAgICBcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICB9LCBbcm91dGVyXSk7XG4gIFxuICAvLyBGdW5jdGlvbiB0byByZWZyZXNoIHVzZXIgZGF0YVxuICBjb25zdCByZWZyZXNoVXNlckRhdGEgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFpc0F1dGhlbnRpY2F0ZWQpIHJldHVybjtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIFJlZnJlc2hpbmcgdXNlciBkYXRhJyk7XG4gICAgICBjb25zdCB1c2VyQXR0cmlidXRlcyA9IGF3YWl0IGZldGNoVXNlckF0dHJpYnV0ZXMoKTtcbiAgICAgIHNldFVzZXJEYXRhKHVzZXJBdHRyaWJ1dGVzKTtcbiAgICAgIHJldHVybiB1c2VyQXR0cmlidXRlcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0Rhc2hib2FyZENsaWVudF0gRXJyb3IgcmVmcmVzaGluZyB1c2VyIGRhdGE6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9LCBbaXNBdXRoZW50aWNhdGVkXSk7XG4gIFxuICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gaGFuZGxlIHN1YnNjcmlwdGlvbiBzdWNjZXNzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlU3Vic2NyaXB0aW9uU3VjY2VzcyA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN1YnNjcmlwdGlvblN1Y2Nlc3MgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzdWJzY3JpcHRpb25fc3VjY2VzcycpO1xuICAgICAgY29uc3Qgc2Vzc2lvbklkID0gc2VhcmNoUGFyYW1zLmdldCgnc2Vzc2lvbl9pZCcpO1xuICAgICAgXG4gICAgICBpZiAoc3Vic2NyaXB0aW9uU3VjY2VzcyA9PT0gJ3RydWUnICYmIHNlc3Npb25JZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgW1N1YnNjcmlwdGlvbl0gUHJvY2Vzc2luZyBzdWNjZXNzZnVsIHN1YnNjcmlwdGlvbiB3aXRoIHNlc3Npb24gSUQ6ICR7c2Vzc2lvbklkfWApO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBDYWxsIG91ciBzZXNzaW9uLXN1Y2Nlc3MgQVBJIHRvIHZlcmlmeSBhbmQgcHJvY2VzcyB0aGUgc3Vic2NyaXB0aW9uXG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9jaGVja291dC9zZXNzaW9uLXN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIHNlc3Npb25faWQ6IHNlc3Npb25JZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1N1YnNjcmlwdGlvbl0gU3VjY2Vzc2Z1bGx5IHByb2Nlc3NlZCBjaGVja291dCBzZXNzaW9uOicsIGRhdGEpO1xuICAgICAgICAgICAgbm90aWZ5U3VjY2VzcygnU3Vic2NyaXB0aW9uIHN1Y2Nlc3NmdWxseSB1cGdyYWRlZCEnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVmcmVzaCB1c2VyIGRhdGEgdG8gZ2V0IHRoZSB1cGRhdGVkIHN1YnNjcmlwdGlvbiBzdGF0dXNcbiAgICAgICAgICAgIGF3YWl0IHJlZnJlc2hVc2VyRGF0YSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDbGVhbiB0aGUgVVJMIGJ5IHJlbW92aW5nIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5kZWxldGUoJ3N1YnNjcmlwdGlvbl9zdWNjZXNzJyk7XG4gICAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLmRlbGV0ZSgnc2Vzc2lvbl9pZCcpO1xuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBkb2N1bWVudC50aXRsZSwgdXJsLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbU3Vic2NyaXB0aW9uXSBGYWlsZWQgdG8gcHJvY2VzcyBjaGVja291dCBzZXNzaW9uOicsIGVycm9yRGF0YSk7XG4gICAgICAgICAgICBub3RpZnlFcnJvcignRmFpbGVkIHRvIHZlcmlmeSBzdWJzY3JpcHRpb24uIFBsZWFzZSBjb250YWN0IHN1cHBvcnQuJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTdWJzY3JpcHRpb25dIEVycm9yIHByb2Nlc3Npbmcgc3Vic2NyaXB0aW9uOicsIGVycm9yKTtcbiAgICAgICAgICBub3RpZnlFcnJvcignQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcHJvY2Vzc2luZyB5b3VyIHN1YnNjcmlwdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgLy8gT25seSBydW4gaWYgYXV0aGVudGljYXRlZFxuICAgIGlmIChpc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIGhhbmRsZVN1YnNjcmlwdGlvblN1Y2Nlc3MoKTtcbiAgICB9XG4gIH0sIFtzZWFyY2hQYXJhbXMsIGlzQXV0aGVudGljYXRlZCwgbm90aWZ5U3VjY2Vzcywgbm90aWZ5RXJyb3JdKTtcbiAgXG4gIC8vIFVwZGF0ZSBsb2FkaW5nIHN0YXRlIGJhc2VkIG9uIGRhdGEgYXZhaWxhYmlsaXR5XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gU2V0IGxvYWRpbmcgdG8gZmFsc2Ugb25seSB3aGVuIHdlIGhhdmUgcmVhbCBkYXRhXG4gICAgaWYgKHVzZXJEYXRhICYmIE9iamVjdC5rZXlzKHVzZXJEYXRhKS5sZW5ndGggPiAwICYmIHRlbmFudFZlcmlmaWVkKSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3VzZXJEYXRhLCB0ZW5hbnRWZXJpZmllZF0pO1xuICBcbiAgLy8gU2hvdyBsb2FkaW5nIHN0YXRlIGlmIHN0aWxsIGxvYWRpbmcgdGVuYW50IG9yIHVzZXIgZGF0YVxuICBpZiAoaXNMb2FkaW5nIHx8IGlzVmVyaWZ5aW5nVGVuYW50IHx8ICF0ZW5hbnRWZXJpZmllZCkge1xuICAgIHJldHVybiA8RGFzaGJvYXJkTG9hZGluZ1N0YXRlIC8+O1xuICB9XG5cbiAgLy8gU2hvdyBlcnJvciBzdGF0ZSBpZiB0aGVyZSdzIGFuIGVycm9yXG4gIGlmIChlcnJvciB8fCBzZXR1cFN0YXR1cyA9PT0gJ2ZhaWxlZCcpIHtcbiAgICByZXR1cm4gPERhc2hib2FyZEVycm9yU3RhdGUgLz47XG4gIH1cblxuICAvLyBEb24ndCBzaG93IHRoZSBkYXNoYm9hcmQgdW50aWwgd2UgaGF2ZSBhY3R1YWwgdXNlckRhdGFcbiAgaWYgKCF1c2VyRGF0YSB8fCBPYmplY3Qua2V5cyh1c2VyRGF0YSkubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIDxEYXNoYm9hcmRMb2FkaW5nU3RhdGUgLz47XG4gIH1cblxuICBpZiAoIWlzQ2xpZW50KSB7XG4gICAgcmV0dXJuIDxEYXNoYm9hcmRXcmFwcGVyIFxuICAgICAgbmV3QWNjb3VudD17dXNlckRhdGE/LlsnY3VzdG9tOmlzTmV3J10gPT09ICd0cnVlJyB8fCBuZXdBY2NvdW50ID09PSAndHJ1ZSd9XG4gICAgICBwbGFuPXtwbGFuIHx8IHVzZXJEYXRhPy5bJ2N1c3RvbTpwbGFuJ119XG4gICAgLz47XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7LyogQWRtaW4gcGFuZWwgZm9yIGFkbWluIHVzZXJzICovfVxuICAgICAge3VzZXJEYXRhPy5bJ2N1c3RvbTppc2FkbWluJ10gPT09ICd0cnVlJyAmJiBpc0F1dGhlbnRpY2F0ZWQgJiYgc2VhcmNoUGFyYW1zLmdldCgnYWRtaW4nKSA9PT0gJ3RydWUnICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW5cIj5cbiAgICAgICAgICA8RGF0YWJhc2VBZG1pbiAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICBcbiAgICAgIHsvKiBBbHdheXMgcmVuZGVyIERhc2hib2FyZFdyYXBwZXIgKi99XG4gICAgICA8RGFzaGJvYXJkV3JhcHBlciBcbiAgICAgICAgbmV3QWNjb3VudD17dXNlckRhdGE/LlsnY3VzdG9tOmlzTmV3J10gPT09ICd0cnVlJyB8fCBuZXdBY2NvdW50ID09PSAndHJ1ZSd9XG4gICAgICAgIHBsYW49e3BsYW4gfHwgdXNlckRhdGE/LlsnY3VzdG9tOnBsYW4nXX1cbiAgICAgIC8+XG4gICAgPC8+XG4gICk7XG59XG5cbi8qKlxuICogRW5zdXJlIHRoZSB0ZW5hbnQgc2NoZW1hIGV4aXN0c1xuICovXG5jb25zdCBlbnN1cmVUZW5hbnRTY2hlbWEgPSBhc3luYyAodGVuYW50SWQsIHVzZXJBdHRyaWJ1dGVzKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gQ2FsbCB0aGUgc2NoZW1hIG1hbmFnZXIgQVBJXG4gICAgY29uc3Qgc2NoZW1hTWFuYWdlclJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvdGVuYW50L3NjaGVtYS1tYW5hZ2VyJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgIHRlbmFudElkOiB0ZW5hbnRJZCxcbiAgICAgICAgdXNlcklkOiB1c2VyQXR0cmlidXRlcy5zdWIsXG4gICAgICAgIGJ1c2luZXNzTmFtZTogdXNlckF0dHJpYnV0ZXNbJ2N1c3RvbTpidXNpbmVzc25hbWUnXSxcbiAgICAgICAgZm9yY2VDcmVhdGU6IHRydWUgLy8gRXhwbGljaXRseSByZXF1ZXN0IHRlbmFudCBjcmVhdGlvblxuICAgICAgfSlcbiAgICB9KTtcbiAgICBcbiAgICBpZiAoc2NoZW1hTWFuYWdlclJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBzY2hlbWFSZXN1bHQgPSBhd2FpdCBzY2hlbWFNYW5hZ2VyUmVzcG9uc2UuanNvbigpO1xuICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIFNjaGVtYSBtYW5hZ2VyIHJlc3VsdDonLCBzY2hlbWFSZXN1bHQpO1xuICAgICAgXG4gICAgICAvLyBBbHNvIHVwZGF0ZSB0aGUgdXNlciBBUElcbiAgICAgIGF3YWl0IGZldGNoKCcvYXBpL3VzZXIvdGVuYW50Jywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB0ZW5hbnRJZDogdGVuYW50SWQgfSlcbiAgICAgIH0pO1xuICAgICAgY29uc29sZS5sb2coJ1tEYXNoYm9hcmRDbGllbnRdIFVwZGF0ZWQgc2VydmVyIHdpdGggdGVuYW50IElEJyk7XG4gICAgICBcbiAgICAgIHJldHVybiBzY2hlbWFSZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEYXNoYm9hcmRDbGllbnRdIFNjaGVtYSBtYW5hZ2VyIEFQSSBmYWlsZWQ6JywgYXdhaXQgc2NoZW1hTWFuYWdlclJlc3BvbnNlLnRleHQoKSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0Rhc2hib2FyZENsaWVudF0gRXJyb3IgZW5zdXJpbmcgdGVuYW50IHNjaGVtYTonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbi8vIEZ1bmN0aW9uIHRvIHZhbGlkYXRlIHRlbmFudCBJRFxuY29uc3QgaXNWYWxpZFVVSUQgPSAoaWQpID0+IHtcbiAgaWYgKCFpZCkgcmV0dXJuIGZhbHNlO1xuICAvLyBDaGVjayBpZiBpdCdzIGEgdmFsaWQgVVVJRCBmb3JtYXRcbiAgY29uc3QgdXVpZFJlZ2V4ID0gL15bMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXsxMn0kL2k7XG4gIHJldHVybiB1dWlkUmVnZXgudGVzdChpZCk7XG59OyAiXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsImxvZ2dlciIsIkRhc2hib2FyZFdyYXBwZXIiLCJ1c2VSb3V0ZXIiLCJ1c2VTZWFyY2hQYXJhbXMiLCJDT09LSUVfTkFNRVMiLCJPTkJPQVJESU5HX1NUQVRVUyIsImZldGNoQXV0aFNlc3Npb24iLCJmZXRjaFVzZXJBdHRyaWJ1dGVzIiwiZHluYW1pYyIsIlJlYWN0IiwiRGFzaGJvYXJkTG9hZGVyIiwidXNlTm90aWZpY2F0aW9uIiwidXNlU2Vzc2lvbiIsInY0IiwidXVpZHY0IiwiRGF0YWJhc2VBZG1pbiIsImxvYWRpbmciLCJkaXYiLCJzc3IiLCJjaGVja0ZvclVzZXJPbmJvYXJkaW5nRGF0YSIsImJ1c2luZXNzSW5mbyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJwYXJzZWRJbmZvIiwiSlNPTiIsInBhcnNlIiwiYnVzaW5lc3NOYW1lIiwiYnVzaW5lc3NUeXBlIiwiZSIsImNvb2tpZXMiLCJkb2N1bWVudCIsImNvb2tpZSIsInNwbGl0IiwibmFtZSIsInZhbHVlIiwidHJpbSIsImdldFVzZXJCdXNpbmVzc05hbWUiLCJnZXRDb29raWUiLCJwYXJ0cyIsImxlbmd0aCIsInBvcCIsInNoaWZ0IiwiY29va2llTmFtZSIsInN0b3JlZEluZm8iLCJkaXJlY3ROYW1lIiwiZ2V0VXNlckJ1c2luZXNzVHlwZSIsIkNsaWVudERhdGFTeW5jIiwic3luY0NvbXBsZXRlIiwic2V0U3luY0NvbXBsZXRlIiwic3luY0NsaWVudERhdGEiLCJ0ZW5hbnRJZCIsImZpbmQiLCJjIiwic3RhcnRzV2l0aCIsImluZm8iLCJzZXRJdGVtIiwic3luY1RlbmFudElEcyIsImVycm9yIiwidGVuYW50SWRDb29raWUiLCJyb3ciLCJidXNpbmVzc0lkQ29va2llIiwibG9jYWxTdG9yYWdlVGVuYW50SWQiLCJjb25zb2xlIiwibG9nIiwiaXNWYWxpZFVVSUQiLCJ3YXJuIiwidmFsaWRJZCIsImZldGNoVGVuYW50RnJvbVNlcnZlciIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwib2siLCJFcnJvciIsInN0YXR1cyIsImRhdGEiLCJqc29uIiwic3VjY2VzcyIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwibWVzc2FnZSIsIkRhc2hib2FyZENsaWVudCIsIm5ld0FjY291bnQiLCJwbGFuIiwiaXNDbGllbnQiLCJzZXRJc0NsaWVudCIsImlzUmVhZHkiLCJzZXRJc1JlYWR5IiwiaXNBdXRoZW50aWNhdGVkIiwic2V0SXNBdXRoZW50aWNhdGVkIiwidXNlckRhdGEiLCJzZXRVc2VyRGF0YSIsInJvdXRlciIsImlzVmVyaWZ5aW5nVGVuYW50Iiwic2V0SXNWZXJpZnlpbmdUZW5hbnQiLCJ0ZW5hbnRWZXJpZmllZCIsInNldFRlbmFudFZlcmlmaWVkIiwic2V0dXBTdGF0dXMiLCJzZXRTZXR1cFN0YXR1cyIsInNldEVycm9yIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwiaXNGaXJzdFJlbmRlciIsInVzZVJlZiIsImN1cnJlbnQiLCJzZWFyY2hQYXJhbXMiLCJub3RpZnlTdWNjZXNzIiwibm90aWZ5RXJyb3IiLCJub3RpZnlXYXJuaW5nIiwiRGFzaGJvYXJkTG9hZGluZ1N0YXRlIiwiY2xhc3NOYW1lIiwiaDIiLCJwIiwiRGFzaGJvYXJkRXJyb3JTdGF0ZSIsInN2ZyIsInhtbG5zIiwiZmlsbCIsInZpZXdCb3giLCJzdHJva2UiLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwiYnV0dG9uIiwib25DbGljayIsImVuc3VyZVVzZXJBdHRyaWJ1dGVzQ29tcGxldGUiLCJzZXNzaW9uIiwidG9rZW5zIiwiYWNjZXNzVG9rZW4iLCJpZFRva2VuIiwibWlzc2luZ0F0dHJpYnV0ZXMiLCJyZXF1aXJlZEF0dHJpYnV0ZXMiLCJhdHRyIiwicHVzaCIsImF0dHJpYnV0ZXNUb1VwZGF0ZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImZvckVhY2giLCJzdWIiLCJ2NSIsInV1aWR2NSIsInJlcXVpcmUiLCJURU5BTlRfTkFNRVNQQUNFIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsImdldEJlc3RCdXNpbmVzc05hbWUiLCJ0b1N0cmluZyIsImJvZHkiLCJzdHJpbmdpZnkiLCJhdHRyaWJ1dGVzIiwiZm9yY2VVcGRhdGUiLCJlcnJvclRleHQiLCJ0ZXh0IiwiY2F0Y2giLCJ1cGRhdGVkQXR0cmlidXRlcyIsImZldGNoRXJyb3IiLCJnZW5lcmF0ZURldGVybWluaXN0aWNUZW5hbnRJZCIsInVzZXJJZCIsImVuY29kZXIiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsIk5BTUVTUEFDRSIsIm5hbWVzcGFjZUJ5dGVzIiwiVWludDhBcnJheSIsInJlcGxhY2UiLCJtYXRjaCIsIm1hcCIsImhleCIsImkiLCJwYXJzZUludCIsImNvbWJpbmVkQnl0ZXMiLCJzZXQiLCJzdWJ0bGUiLCJkaWdlc3QiLCJ0aGVuIiwiYnVmZmVyIiwiaGFzaEFycmF5IiwiQXJyYXkiLCJmcm9tIiwiYiIsInBhZFN0YXJ0Iiwiam9pbiIsInV1aWQiLCJzbGljZSIsImdlbmVyYXRlU2ltcGxlSGFzaFRlbmFudElkIiwiaGFzaCIsInJlZHVjZSIsImFjYyIsImNoYXIiLCJjaGFyQ29kZUF0IiwidmVyaWZ5Q29nbml0b1N0YXRlIiwiaWRlbnRpdHlUb2tlbiIsImlkVG9rZW5QYXlsb2FkIiwicGF5bG9hZCIsInNldHVwQXdzUmRzVGFibGVzIiwic2NoZW1hTmFtZSIsImVycm9yRGF0YSIsImluaXRpYWxpemVEYXRhYmFzZSIsImNvb2tpZVRlbmFudElkIiwicmVzdWx0IiwiZW5zdXJlQ29uc2lzdGVudFRlbmFudElkIiwic291cmNlIiwidXNlckF0dHJpYnV0ZXMiLCJjb2duaXRvVGVuYW50SWQiLCJ1cGRhdGVFcnJvciIsImRldGVybWluaXN0aWNUZW5hbnRJZCIsImVuc3VyZVRlbmFudFNjaGVtYSIsInV1aWRFcnJvciIsIm5ld1RlbmFudElkIiwiZmluYWxUZW5hbnRJZCIsImluaXRSZXNwb25zZSIsImluaXREYXRhIiwidGFibGVFeGlzdHMiLCJqc29uRXJyb3IiLCJpbml0RXJyb3IiLCJ0ZW5hbnRSZXNwb25zZSIsImVtYWlsIiwiZm9yY2VDcmVhdGUiLCJ0ZW5hbnREYXRhIiwidGV4dEVycm9yIiwiY29nbml0b0Vycm9yIiwiZ2VuZXJhdGVkVGVuYW50SWQiLCJjaGVja09uYm9hcmRpbmdTdGF0dXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJoYXNCdXNpbmVzc0lkIiwiaGFzQnVzaW5lc3NOYW1lIiwib25ib2FyZGluZ1N0YXR1cyIsInNldHVwRG9uZSIsInRvTG93ZXJDYXNlIiwiZGVidWciLCJlcnIiLCJhdHRyRXJyb3IiLCJzZXR1cENvbXBsZXRlZCIsImVuY29kZVVSSUNvbXBvbmVudCIsInRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJyZWZyZXNoVXNlckRhdGEiLCJoYW5kbGVTdWJzY3JpcHRpb25TdWNjZXNzIiwic3Vic2NyaXB0aW9uU3VjY2VzcyIsImdldCIsInNlc3Npb25JZCIsInNlc3Npb25faWQiLCJ1cmwiLCJVUkwiLCJocmVmIiwiZGVsZXRlIiwiaGlzdG9yeSIsInJlcGxhY2VTdGF0ZSIsInRpdGxlIiwiT2JqZWN0Iiwia2V5cyIsInNjaGVtYU1hbmFnZXJSZXNwb25zZSIsInNjaGVtYVJlc3VsdCIsImlkIiwidXVpZFJlZ2V4IiwidGVzdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/dashboard/DashboardClient.js\n"));

/***/ })

});