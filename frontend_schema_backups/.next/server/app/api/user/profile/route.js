/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/user/profile/route";
exports.ids = ["app/api/user/profile/route"];
exports.modules = {

/***/ "(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fuser%2Fprofile%2Froute&page=%2Fapi%2Fuser%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fprofile%2Froute.js&appDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fuser%2Fprofile%2Froute&page=%2Fapi%2Fuser%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fprofile%2Froute.js&appDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_kuoldeng_projectx_frontend_pyfactor_next_src_app_api_user_profile_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/user/profile/route.js */ \"(rsc)/./src/app/api/user/profile/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/user/profile/route\",\n        pathname: \"/api/user/profile\",\n        filename: \"route\",\n        bundlePath: \"app/api/user/profile/route\"\n    },\n    resolvedPagePath: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/api/user/profile/route.js\",\n    nextConfigOutput,\n    userland: _Users_kuoldeng_projectx_frontend_pyfactor_next_src_app_api_user_profile_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTUuMi4yX0BiYWJlbCtjb3JlQDcuMjYuMTBfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjEvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyL2luZGV4LmpzP25hbWU9YXBwJTJGYXBpJTJGdXNlciUyRnByb2ZpbGUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVzZXIlMkZwcm9maWxlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdXNlciUyRnByb2ZpbGUlMkZyb3V0ZS5qcyZhcHBEaXI9JTJGVXNlcnMlMkZrdW9sZGVuZyUyRnByb2plY3R4JTJGZnJvbnRlbmQlMkZweWZhY3Rvcl9uZXh0JTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmt1b2xkZW5nJTJGcHJvamVjdHglMkZmcm9udGVuZCUyRnB5ZmFjdG9yX25leHQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2lDO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMva3VvbGRlbmcvcHJvamVjdHgvZnJvbnRlbmQvcHlmYWN0b3JfbmV4dC9zcmMvYXBwL2FwaS91c2VyL3Byb2ZpbGUvcm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VzZXIvcHJvZmlsZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VzZXIvcHJvZmlsZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdXNlci9wcm9maWxlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2t1b2xkZW5nL3Byb2plY3R4L2Zyb250ZW5kL3B5ZmFjdG9yX25leHQvc3JjL2FwcC9hcGkvdXNlci9wcm9maWxlL3JvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fuser%2Fprofile%2Froute&page=%2Fapi%2Fuser%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fprofile%2Froute.js&appDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*******************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*******************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/user/profile/route.js":
/*!*******************************************!*\
  !*** ./src/app/api/user/profile/route.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _utils_serverLogger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/serverLogger */ \"(rsc)/./src/utils/serverLogger.js\");\n/* harmony import */ var _utils_getServerUser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/getServerUser */ \"(rsc)/./src/utils/getServerUser.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/headers */ \"(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _middleware_dev_tenant_middleware__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/middleware/dev-tenant-middleware */ \"(rsc)/./src/middleware/dev-tenant-middleware.js\");\n\n\n\n\n\n\n/**\n * API endpoint to fetch user profile data\n * \n * Optimized for RLS architecture to quickly return user information\n * without unnecessary database queries.\n */ async function GET(req) {\n    try {\n        // Extract the email and tenantId from query params\n        const { searchParams } = new URL(req.url);\n        const email = searchParams.get('email');\n        const tenantId = searchParams.get('tenantId');\n        // Extract tenant ID from headers\n        const headerTenantId = req.headers.get('x-tenant-id');\n        // Extract tenant ID from cookies\n        const cookieHeader = req.headers.get('cookie');\n        // Helper to extract cookies\n        const getCookieValue = (cookieHeader, name)=>{\n            if (!cookieHeader) return null;\n            const match = cookieHeader.match(new RegExp(`${name}=([^;]+)`));\n            return match ? decodeURIComponent(match[1]) : null;\n        };\n        const cookieTenantId = getCookieValue(cookieHeader, 'tenantId');\n        // Extract Cognito ID from cookies which serves as tenant ID\n        const cognitoUserMatch = cookieHeader?.match(/CognitoIdentityServiceProvider\\.[^.]+\\.LastAuthUser=([^;]+)/);\n        const cognitoUserId = cognitoUserMatch ? cognitoUserMatch[1] : null;\n        // Use tenant ID from multiple sources, prioritizing query params, headers, then cookies\n        const effectiveTenantId = tenantId || headerTenantId || cookieTenantId || cognitoUserId;\n        if (effectiveTenantId) {\n            console.log(`[API] Using dynamically retrieved tenant ID: ${effectiveTenantId}`);\n        } else {\n            console.log('[API] No tenant ID found, will attempt to retrieve from user authentication');\n        }\n        // Try to get user from server-side authentication\n        const serverUser = await (0,_utils_getServerUser__WEBPACK_IMPORTED_MODULE_2__.getServerUser)(req);\n        if (serverUser) {\n            _utils_serverLogger__WEBPACK_IMPORTED_MODULE_1__.logger.info('[API] Retrieved authenticated user from server:', {\n                email: serverUser.email,\n                userId: serverUser.sub,\n                tenantId: effectiveTenantId || serverUser.sub // Use user ID as tenant ID if none provided\n            });\n            // Return authenticated user information\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                profile: {\n                    id: serverUser.sub || serverUser.username,\n                    email: serverUser.email,\n                    name: serverUser.name || `${serverUser.given_name || ''} ${serverUser.family_name || ''}`.trim(),\n                    firstName: serverUser.given_name || serverUser.first_name,\n                    lastName: serverUser.family_name || serverUser.last_name,\n                    fullName: serverUser.name || `${serverUser.given_name || ''} ${serverUser.family_name || ''}`.trim(),\n                    tenantId: effectiveTenantId || serverUser.sub,\n                    role: serverUser['custom:role'] || 'user',\n                    onboardingStatus: serverUser['custom:onboarding'] || 'incomplete',\n                    setupComplete: serverUser['custom:setupdone'] === 'true',\n                    businessName: serverUser['custom:businessname'],\n                    businessType: serverUser['custom:businesstype'],\n                    subscription_type: serverUser['custom:subplan'] || 'free',\n                    preferences: {\n                        theme: 'light',\n                        notificationsEnabled: true\n                    }\n                }\n            });\n        }\n        // Extract email from cookies as fallback\n        let authUser = null;\n        let businessName = null;\n        let businessType = null;\n        let firstName = null;\n        let lastName = null;\n        if (cookieHeader) {\n            authUser = getCookieValue(cookieHeader, 'authUser');\n            businessName = getCookieValue(cookieHeader, 'businessName');\n            businessType = getCookieValue(cookieHeader, 'businessType');\n            firstName = getCookieValue(cookieHeader, 'firstName') || getCookieValue(cookieHeader, 'given_name') || getCookieValue(cookieHeader, 'first_name');\n            lastName = getCookieValue(cookieHeader, 'lastName') || getCookieValue(cookieHeader, 'family_name') || getCookieValue(cookieHeader, 'last_name');\n        }\n        // Use the email from the query params or cookies\n        const userEmail = email || authUser;\n        if (!userEmail || !effectiveTenantId) {\n            // Check if this is a dashboard request\n            const requestUrl = req.url || '';\n            const referer = req.headers.get('referer') || '';\n            const isDashboardRequest = referer.includes('/dashboard') || requestUrl.includes('dashboard=true') || req.headers.get('X-Dashboard-Route') === 'true';\n            if (isDashboardRequest) {\n                // For dashboard, use available data and create fallback profile\n                const fallbackTenantId = effectiveTenantId || cognitoUserId || (0,_middleware_dev_tenant_middleware__WEBPACK_IMPORTED_MODULE_4__.getDefaultTenantId)();\n                const fallbackEmail = userEmail || \"user@example.com\";\n                _utils_serverLogger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`[API] Creating fallback profile for dashboard: ${fallbackTenantId}`);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    profile: {\n                        id: fallbackTenantId,\n                        email: fallbackEmail,\n                        tenantId: fallbackTenantId,\n                        role: 'user',\n                        firstName: firstName || '',\n                        lastName: lastName || '',\n                        name: firstName && lastName ? `${firstName} ${lastName}` : firstName || fallbackEmail,\n                        fullName: firstName && lastName ? `${firstName} ${lastName}` : firstName || '',\n                        businessName: businessName || getCookieValue(cookieHeader, 'businessid') || '',\n                        businessType: businessType || '',\n                        onboardingStatus: getCookieValue(cookieHeader, 'onboardingStatus') || 'complete',\n                        setupComplete: getCookieValue(cookieHeader, 'setupCompleted') === 'true',\n                        subscription_type: getCookieValue(cookieHeader, 'selectedPlan') || 'free',\n                        preferences: {\n                            theme: 'light',\n                            notificationsEnabled: true\n                        },\n                        fallback: true\n                    }\n                });\n            }\n            // If we don't have user email or tenant ID and not a dashboard request, return error\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'No authenticated user found',\n                message: 'Please sign in to access your profile'\n            }, {\n                status: 401\n            });\n        }\n        _utils_serverLogger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`[API] Creating profile with email: ${userEmail} and tenant ID: ${effectiveTenantId}`);\n        // Return profile data with the tenant ID\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            profile: {\n                id: effectiveTenantId,\n                email: userEmail,\n                tenantId: effectiveTenantId,\n                role: 'user',\n                firstName: firstName || '',\n                lastName: lastName || '',\n                name: firstName && lastName ? `${firstName} ${lastName}` : firstName || userEmail,\n                fullName: firstName && lastName ? `${firstName} ${lastName}` : firstName || '',\n                businessName: businessName || '',\n                businessType: businessType || '',\n                onboardingStatus: 'incomplete',\n                setupComplete: false,\n                subscription_type: 'free',\n                preferences: {\n                    theme: 'light',\n                    notificationsEnabled: true\n                }\n            }\n        });\n    } catch (error) {\n        console.error('[API] User profile GET error:', error.message);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Failed to fetch user profile',\n            message: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * POST handler for updating user profile\n */ async function POST(request) {\n    console.log('[API] User profile POST request received');\n    try {\n        // First authenticate the user\n        const serverUser = await (0,_utils_getServerUser__WEBPACK_IMPORTED_MODULE_2__.getServerUser)(request);\n        if (!serverUser) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Authentication required',\n                message: 'You must be signed in to update your profile'\n            }, {\n                status: 401\n            });\n        }\n        // Get request body\n        const profileData = await request.json();\n        console.debug('[API] User profile POST data:', profileData);\n        // Extract the tenantId from the request\n        const tenantId = profileData.tenantId || serverUser.sub;\n        // Return the updated profile (in production this would save to database)\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            id: serverUser.sub,\n            email: serverUser.email,\n            ...profileData,\n            tenantId: tenantId,\n            updated_at: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error('[API] User profile POST error:', error.message);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Failed to update user profile',\n            message: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU1DLE9BQU87UUFDN0QsT0FBT2hFLHFEQUFZQSxDQUFDaUMsSUFBSSxDQUFDO1lBQ3ZCOEIsT0FBTztZQUNQQyxTQUFTRCxNQUFNQyxPQUFPO1FBQ3hCLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ25CO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9rdW9sZGVuZy9wcm9qZWN0eC9mcm9udGVuZC9weWZhY3Rvcl9uZXh0L3NyYy9hcHAvYXBpL3VzZXIvcHJvZmlsZS9yb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL3V0aWxzL3NlcnZlckxvZ2dlcic7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJVc2VyIH0gZnJvbSAnQC91dGlscy9nZXRTZXJ2ZXJVc2VyJztcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdFRlbmFudElkIH0gZnJvbSAnQC9taWRkbGV3YXJlL2Rldi10ZW5hbnQtbWlkZGxld2FyZSc7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcblxuLyoqXG4gKiBBUEkgZW5kcG9pbnQgdG8gZmV0Y2ggdXNlciBwcm9maWxlIGRhdGFcbiAqIFxuICogT3B0aW1pemVkIGZvciBSTFMgYXJjaGl0ZWN0dXJlIHRvIHF1aWNrbHkgcmV0dXJuIHVzZXIgaW5mb3JtYXRpb25cbiAqIHdpdGhvdXQgdW5uZWNlc3NhcnkgZGF0YWJhc2UgcXVlcmllcy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXEpIHtcbiAgdHJ5IHtcbiAgICAvLyBFeHRyYWN0IHRoZSBlbWFpbCBhbmQgdGVuYW50SWQgZnJvbSBxdWVyeSBwYXJhbXNcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXEudXJsKTtcbiAgICBjb25zdCBlbWFpbCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2VtYWlsJyk7XG4gICAgY29uc3QgdGVuYW50SWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCd0ZW5hbnRJZCcpO1xuICAgIFxuICAgIC8vIEV4dHJhY3QgdGVuYW50IElEIGZyb20gaGVhZGVyc1xuICAgIGNvbnN0IGhlYWRlclRlbmFudElkID0gcmVxLmhlYWRlcnMuZ2V0KCd4LXRlbmFudC1pZCcpO1xuICAgIFxuICAgIC8vIEV4dHJhY3QgdGVuYW50IElEIGZyb20gY29va2llc1xuICAgIGNvbnN0IGNvb2tpZUhlYWRlciA9IHJlcS5oZWFkZXJzLmdldCgnY29va2llJyk7XG4gICAgXG4gICAgLy8gSGVscGVyIHRvIGV4dHJhY3QgY29va2llc1xuICAgIGNvbnN0IGdldENvb2tpZVZhbHVlID0gKGNvb2tpZUhlYWRlciwgbmFtZSkgPT4ge1xuICAgICAgaWYgKCFjb29raWVIZWFkZXIpIHJldHVybiBudWxsO1xuICAgICAgY29uc3QgbWF0Y2ggPSBjb29raWVIZWFkZXIubWF0Y2gobmV3IFJlZ0V4cChgJHtuYW1lfT0oW147XSspYCkpO1xuICAgICAgcmV0dXJuIG1hdGNoID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzFdKSA6IG51bGw7XG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBjb29raWVUZW5hbnRJZCA9IGdldENvb2tpZVZhbHVlKGNvb2tpZUhlYWRlciwgJ3RlbmFudElkJyk7XG4gICAgXG4gICAgLy8gRXh0cmFjdCBDb2duaXRvIElEIGZyb20gY29va2llcyB3aGljaCBzZXJ2ZXMgYXMgdGVuYW50IElEXG4gICAgY29uc3QgY29nbml0b1VzZXJNYXRjaCA9IGNvb2tpZUhlYWRlcj8ubWF0Y2goL0NvZ25pdG9JZGVudGl0eVNlcnZpY2VQcm92aWRlclxcLlteLl0rXFwuTGFzdEF1dGhVc2VyPShbXjtdKykvKTtcbiAgICBjb25zdCBjb2duaXRvVXNlcklkID0gY29nbml0b1VzZXJNYXRjaCA/IGNvZ25pdG9Vc2VyTWF0Y2hbMV0gOiBudWxsO1xuICAgIFxuICAgIC8vIFVzZSB0ZW5hbnQgSUQgZnJvbSBtdWx0aXBsZSBzb3VyY2VzLCBwcmlvcml0aXppbmcgcXVlcnkgcGFyYW1zLCBoZWFkZXJzLCB0aGVuIGNvb2tpZXNcbiAgICBjb25zdCBlZmZlY3RpdmVUZW5hbnRJZCA9IHRlbmFudElkIHx8IGhlYWRlclRlbmFudElkIHx8IGNvb2tpZVRlbmFudElkIHx8IGNvZ25pdG9Vc2VySWQ7XG4gICAgXG4gICAgaWYgKGVmZmVjdGl2ZVRlbmFudElkKSB7XG4gICAgICBjb25zb2xlLmxvZyhgW0FQSV0gVXNpbmcgZHluYW1pY2FsbHkgcmV0cmlldmVkIHRlbmFudCBJRDogJHtlZmZlY3RpdmVUZW5hbnRJZH1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ1tBUEldIE5vIHRlbmFudCBJRCBmb3VuZCwgd2lsbCBhdHRlbXB0IHRvIHJldHJpZXZlIGZyb20gdXNlciBhdXRoZW50aWNhdGlvbicpO1xuICAgIH1cbiAgICBcbiAgICAvLyBUcnkgdG8gZ2V0IHVzZXIgZnJvbSBzZXJ2ZXItc2lkZSBhdXRoZW50aWNhdGlvblxuICAgIGNvbnN0IHNlcnZlclVzZXIgPSBhd2FpdCBnZXRTZXJ2ZXJVc2VyKHJlcSk7XG4gICAgaWYgKHNlcnZlclVzZXIpIHtcbiAgICAgIGxvZ2dlci5pbmZvKCdbQVBJXSBSZXRyaWV2ZWQgYXV0aGVudGljYXRlZCB1c2VyIGZyb20gc2VydmVyOicsIHtcbiAgICAgICAgZW1haWw6IHNlcnZlclVzZXIuZW1haWwsXG4gICAgICAgIHVzZXJJZDogc2VydmVyVXNlci5zdWIsXG4gICAgICAgIHRlbmFudElkOiBlZmZlY3RpdmVUZW5hbnRJZCB8fCBzZXJ2ZXJVc2VyLnN1YiAvLyBVc2UgdXNlciBJRCBhcyB0ZW5hbnQgSUQgaWYgbm9uZSBwcm92aWRlZFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFJldHVybiBhdXRoZW50aWNhdGVkIHVzZXIgaW5mb3JtYXRpb25cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHByb2ZpbGU6IHtcbiAgICAgICAgICBpZDogc2VydmVyVXNlci5zdWIgfHwgc2VydmVyVXNlci51c2VybmFtZSxcbiAgICAgICAgICBlbWFpbDogc2VydmVyVXNlci5lbWFpbCxcbiAgICAgICAgICBuYW1lOiBzZXJ2ZXJVc2VyLm5hbWUgfHwgYCR7c2VydmVyVXNlci5naXZlbl9uYW1lIHx8ICcnfSAke3NlcnZlclVzZXIuZmFtaWx5X25hbWUgfHwgJyd9YC50cmltKCksXG4gICAgICAgICAgZmlyc3ROYW1lOiBzZXJ2ZXJVc2VyLmdpdmVuX25hbWUgfHwgc2VydmVyVXNlci5maXJzdF9uYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiBzZXJ2ZXJVc2VyLmZhbWlseV9uYW1lIHx8IHNlcnZlclVzZXIubGFzdF9uYW1lLFxuICAgICAgICAgIGZ1bGxOYW1lOiBzZXJ2ZXJVc2VyLm5hbWUgfHwgYCR7c2VydmVyVXNlci5naXZlbl9uYW1lIHx8ICcnfSAke3NlcnZlclVzZXIuZmFtaWx5X25hbWUgfHwgJyd9YC50cmltKCksXG4gICAgICAgICAgdGVuYW50SWQ6IGVmZmVjdGl2ZVRlbmFudElkIHx8IHNlcnZlclVzZXIuc3ViLFxuICAgICAgICAgIHJvbGU6IHNlcnZlclVzZXJbJ2N1c3RvbTpyb2xlJ10gfHwgJ3VzZXInLFxuICAgICAgICAgIG9uYm9hcmRpbmdTdGF0dXM6IHNlcnZlclVzZXJbJ2N1c3RvbTpvbmJvYXJkaW5nJ10gfHwgJ2luY29tcGxldGUnLFxuICAgICAgICAgIHNldHVwQ29tcGxldGU6IHNlcnZlclVzZXJbJ2N1c3RvbTpzZXR1cGRvbmUnXSA9PT0gJ3RydWUnLFxuICAgICAgICAgIGJ1c2luZXNzTmFtZTogc2VydmVyVXNlclsnY3VzdG9tOmJ1c2luZXNzbmFtZSddLFxuICAgICAgICAgIGJ1c2luZXNzVHlwZTogc2VydmVyVXNlclsnY3VzdG9tOmJ1c2luZXNzdHlwZSddLFxuICAgICAgICAgIHN1YnNjcmlwdGlvbl90eXBlOiBzZXJ2ZXJVc2VyWydjdXN0b206c3VicGxhbiddIHx8ICdmcmVlJyxcbiAgICAgICAgICBwcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgdGhlbWU6ICdsaWdodCcsXG4gICAgICAgICAgICBub3RpZmljYXRpb25zRW5hYmxlZDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEV4dHJhY3QgZW1haWwgZnJvbSBjb29raWVzIGFzIGZhbGxiYWNrXG4gICAgbGV0IGF1dGhVc2VyID0gbnVsbDtcbiAgICBsZXQgYnVzaW5lc3NOYW1lID0gbnVsbDtcbiAgICBsZXQgYnVzaW5lc3NUeXBlID0gbnVsbDtcbiAgICBsZXQgZmlyc3ROYW1lID0gbnVsbDtcbiAgICBsZXQgbGFzdE5hbWUgPSBudWxsO1xuICAgIFxuICAgIGlmIChjb29raWVIZWFkZXIpIHtcbiAgICAgIGF1dGhVc2VyID0gZ2V0Q29va2llVmFsdWUoY29va2llSGVhZGVyLCAnYXV0aFVzZXInKTtcbiAgICAgIGJ1c2luZXNzTmFtZSA9IGdldENvb2tpZVZhbHVlKGNvb2tpZUhlYWRlciwgJ2J1c2luZXNzTmFtZScpO1xuICAgICAgYnVzaW5lc3NUeXBlID0gZ2V0Q29va2llVmFsdWUoY29va2llSGVhZGVyLCAnYnVzaW5lc3NUeXBlJyk7XG4gICAgICBmaXJzdE5hbWUgPSBnZXRDb29raWVWYWx1ZShjb29raWVIZWFkZXIsICdmaXJzdE5hbWUnKSB8fCBcbiAgICAgICAgICAgICAgICAgZ2V0Q29va2llVmFsdWUoY29va2llSGVhZGVyLCAnZ2l2ZW5fbmFtZScpIHx8IFxuICAgICAgICAgICAgICAgICBnZXRDb29raWVWYWx1ZShjb29raWVIZWFkZXIsICdmaXJzdF9uYW1lJyk7XG4gICAgICBsYXN0TmFtZSA9IGdldENvb2tpZVZhbHVlKGNvb2tpZUhlYWRlciwgJ2xhc3ROYW1lJykgfHwgXG4gICAgICAgICAgICAgICBnZXRDb29raWVWYWx1ZShjb29raWVIZWFkZXIsICdmYW1pbHlfbmFtZScpIHx8IFxuICAgICAgICAgICAgICAgZ2V0Q29va2llVmFsdWUoY29va2llSGVhZGVyLCAnbGFzdF9uYW1lJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIFVzZSB0aGUgZW1haWwgZnJvbSB0aGUgcXVlcnkgcGFyYW1zIG9yIGNvb2tpZXNcbiAgICBjb25zdCB1c2VyRW1haWwgPSBlbWFpbCB8fCBhdXRoVXNlcjtcbiAgICBcbiAgICBpZiAoIXVzZXJFbWFpbCB8fCAhZWZmZWN0aXZlVGVuYW50SWQpIHtcbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBkYXNoYm9hcmQgcmVxdWVzdFxuICAgICAgY29uc3QgcmVxdWVzdFVybCA9IHJlcS51cmwgfHwgJyc7XG4gICAgICBjb25zdCByZWZlcmVyID0gcmVxLmhlYWRlcnMuZ2V0KCdyZWZlcmVyJykgfHwgJyc7XG4gICAgICBjb25zdCBpc0Rhc2hib2FyZFJlcXVlc3QgPSBcbiAgICAgICAgcmVmZXJlci5pbmNsdWRlcygnL2Rhc2hib2FyZCcpIHx8IFxuICAgICAgICByZXF1ZXN0VXJsLmluY2x1ZGVzKCdkYXNoYm9hcmQ9dHJ1ZScpIHx8XG4gICAgICAgIHJlcS5oZWFkZXJzLmdldCgnWC1EYXNoYm9hcmQtUm91dGUnKSA9PT0gJ3RydWUnO1xuICAgICAgXG4gICAgICBpZiAoaXNEYXNoYm9hcmRSZXF1ZXN0KSB7XG4gICAgICAgIC8vIEZvciBkYXNoYm9hcmQsIHVzZSBhdmFpbGFibGUgZGF0YSBhbmQgY3JlYXRlIGZhbGxiYWNrIHByb2ZpbGVcbiAgICAgICAgY29uc3QgZmFsbGJhY2tUZW5hbnRJZCA9IGVmZmVjdGl2ZVRlbmFudElkIHx8IGNvZ25pdG9Vc2VySWQgfHwgZ2V0RGVmYXVsdFRlbmFudElkKCk7XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrRW1haWwgPSB1c2VyRW1haWwgfHwgXCJ1c2VyQGV4YW1wbGUuY29tXCI7XG4gICAgICAgIFxuICAgICAgICBsb2dnZXIuaW5mbyhgW0FQSV0gQ3JlYXRpbmcgZmFsbGJhY2sgcHJvZmlsZSBmb3IgZGFzaGJvYXJkOiAke2ZhbGxiYWNrVGVuYW50SWR9YCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIHByb2ZpbGU6IHtcbiAgICAgICAgICAgIGlkOiBmYWxsYmFja1RlbmFudElkLFxuICAgICAgICAgICAgZW1haWw6IGZhbGxiYWNrRW1haWwsXG4gICAgICAgICAgICB0ZW5hbnRJZDogZmFsbGJhY2tUZW5hbnRJZCxcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogZmlyc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGxhc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgbmFtZTogZmlyc3ROYW1lICYmIGxhc3ROYW1lID8gYCR7Zmlyc3ROYW1lfSAke2xhc3ROYW1lfWAgOiAoZmlyc3ROYW1lIHx8IGZhbGxiYWNrRW1haWwpLFxuICAgICAgICAgICAgZnVsbE5hbWU6IGZpcnN0TmFtZSAmJiBsYXN0TmFtZSA/IGAke2ZpcnN0TmFtZX0gJHtsYXN0TmFtZX1gIDogKGZpcnN0TmFtZSB8fCAnJyksXG4gICAgICAgICAgICBidXNpbmVzc05hbWU6IGJ1c2luZXNzTmFtZSB8fCBnZXRDb29raWVWYWx1ZShjb29raWVIZWFkZXIsICdidXNpbmVzc2lkJykgfHwgJycsXG4gICAgICAgICAgICBidXNpbmVzc1R5cGU6IGJ1c2luZXNzVHlwZSB8fCAnJyxcbiAgICAgICAgICAgIG9uYm9hcmRpbmdTdGF0dXM6IGdldENvb2tpZVZhbHVlKGNvb2tpZUhlYWRlciwgJ29uYm9hcmRpbmdTdGF0dXMnKSB8fCAnY29tcGxldGUnLFxuICAgICAgICAgICAgc2V0dXBDb21wbGV0ZTogZ2V0Q29va2llVmFsdWUoY29va2llSGVhZGVyLCAnc2V0dXBDb21wbGV0ZWQnKSA9PT0gJ3RydWUnLFxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uX3R5cGU6IGdldENvb2tpZVZhbHVlKGNvb2tpZUhlYWRlciwgJ3NlbGVjdGVkUGxhbicpIHx8ICdmcmVlJyxcbiAgICAgICAgICAgIHByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgIHRoZW1lOiAnbGlnaHQnLFxuICAgICAgICAgICAgICBub3RpZmljYXRpb25zRW5hYmxlZDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZhbGxiYWNrOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSB1c2VyIGVtYWlsIG9yIHRlbmFudCBJRCBhbmQgbm90IGEgZGFzaGJvYXJkIHJlcXVlc3QsIHJldHVybiBlcnJvclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIGVycm9yOiAnTm8gYXV0aGVudGljYXRlZCB1c2VyIGZvdW5kJyxcbiAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBzaWduIGluIHRvIGFjY2VzcyB5b3VyIHByb2ZpbGUnIFxuICAgICAgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG4gICAgXG4gICAgbG9nZ2VyLmluZm8oYFtBUEldIENyZWF0aW5nIHByb2ZpbGUgd2l0aCBlbWFpbDogJHt1c2VyRW1haWx9IGFuZCB0ZW5hbnQgSUQ6ICR7ZWZmZWN0aXZlVGVuYW50SWR9YCk7XG4gICAgXG4gICAgLy8gUmV0dXJuIHByb2ZpbGUgZGF0YSB3aXRoIHRoZSB0ZW5hbnQgSURcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgcHJvZmlsZToge1xuICAgICAgICBpZDogZWZmZWN0aXZlVGVuYW50SWQsXG4gICAgICAgIGVtYWlsOiB1c2VyRW1haWwsXG4gICAgICAgIHRlbmFudElkOiBlZmZlY3RpdmVUZW5hbnRJZCxcbiAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICBmaXJzdE5hbWU6IGZpcnN0TmFtZSB8fCAnJyxcbiAgICAgICAgbGFzdE5hbWU6IGxhc3ROYW1lIHx8ICcnLFxuICAgICAgICBuYW1lOiBmaXJzdE5hbWUgJiYgbGFzdE5hbWUgPyBgJHtmaXJzdE5hbWV9ICR7bGFzdE5hbWV9YCA6IChmaXJzdE5hbWUgfHwgdXNlckVtYWlsKSxcbiAgICAgICAgZnVsbE5hbWU6IGZpcnN0TmFtZSAmJiBsYXN0TmFtZSA/IGAke2ZpcnN0TmFtZX0gJHtsYXN0TmFtZX1gIDogKGZpcnN0TmFtZSB8fCAnJyksXG4gICAgICAgIGJ1c2luZXNzTmFtZTogYnVzaW5lc3NOYW1lIHx8ICcnLFxuICAgICAgICBidXNpbmVzc1R5cGU6IGJ1c2luZXNzVHlwZSB8fCAnJyxcbiAgICAgICAgb25ib2FyZGluZ1N0YXR1czogJ2luY29tcGxldGUnLCAvLyBEZWZhdWx0IHN0YXR1c1xuICAgICAgICBzZXR1cENvbXBsZXRlOiBmYWxzZSxcbiAgICAgICAgc3Vic2NyaXB0aW9uX3R5cGU6ICdmcmVlJyxcbiAgICAgICAgcHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICB0aGVtZTogJ2xpZ2h0JyxcbiAgICAgICAgICBub3RpZmljYXRpb25zRW5hYmxlZDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0FQSV0gVXNlciBwcm9maWxlIEdFVCBlcnJvcjonLCBlcnJvci5tZXNzYWdlKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHVzZXIgcHJvZmlsZScsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIFxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBQT1NUIGhhbmRsZXIgZm9yIHVwZGF0aW5nIHVzZXIgcHJvZmlsZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0KSB7XG4gIGNvbnNvbGUubG9nKCdbQVBJXSBVc2VyIHByb2ZpbGUgUE9TVCByZXF1ZXN0IHJlY2VpdmVkJyk7XG4gIHRyeSB7XG4gICAgLy8gRmlyc3QgYXV0aGVudGljYXRlIHRoZSB1c2VyXG4gICAgY29uc3Qgc2VydmVyVXNlciA9IGF3YWl0IGdldFNlcnZlclVzZXIocmVxdWVzdCk7XG4gICAgaWYgKCFzZXJ2ZXJVc2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcsXG4gICAgICAgIG1lc3NhZ2U6ICdZb3UgbXVzdCBiZSBzaWduZWQgaW4gdG8gdXBkYXRlIHlvdXIgcHJvZmlsZSdcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldCByZXF1ZXN0IGJvZHlcbiAgICBjb25zdCBwcm9maWxlRGF0YSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnNvbGUuZGVidWcoJ1tBUEldIFVzZXIgcHJvZmlsZSBQT1NUIGRhdGE6JywgcHJvZmlsZURhdGEpO1xuICAgIFxuICAgIC8vIEV4dHJhY3QgdGhlIHRlbmFudElkIGZyb20gdGhlIHJlcXVlc3RcbiAgICBjb25zdCB0ZW5hbnRJZCA9IHByb2ZpbGVEYXRhLnRlbmFudElkIHx8IHNlcnZlclVzZXIuc3ViO1xuICAgIFxuICAgIC8vIFJldHVybiB0aGUgdXBkYXRlZCBwcm9maWxlIChpbiBwcm9kdWN0aW9uIHRoaXMgd291bGQgc2F2ZSB0byBkYXRhYmFzZSlcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgaWQ6IHNlcnZlclVzZXIuc3ViLFxuICAgICAgZW1haWw6IHNlcnZlclVzZXIuZW1haWwsXG4gICAgICAuLi5wcm9maWxlRGF0YSxcbiAgICAgIHRlbmFudElkOiB0ZW5hbnRJZCxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tBUEldIFVzZXIgcHJvZmlsZSBQT1NUIGVycm9yOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gdXBkYXRlIHVzZXIgcHJvZmlsZScsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIFxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImxvZ2dlciIsImdldFNlcnZlclVzZXIiLCJjb29raWVzIiwiZ2V0RGVmYXVsdFRlbmFudElkIiwidjQiLCJ1dWlkdjQiLCJHRVQiLCJyZXEiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJlbWFpbCIsImdldCIsInRlbmFudElkIiwiaGVhZGVyVGVuYW50SWQiLCJoZWFkZXJzIiwiY29va2llSGVhZGVyIiwiZ2V0Q29va2llVmFsdWUiLCJuYW1lIiwibWF0Y2giLCJSZWdFeHAiLCJkZWNvZGVVUklDb21wb25lbnQiLCJjb29raWVUZW5hbnRJZCIsImNvZ25pdG9Vc2VyTWF0Y2giLCJjb2duaXRvVXNlcklkIiwiZWZmZWN0aXZlVGVuYW50SWQiLCJjb25zb2xlIiwibG9nIiwic2VydmVyVXNlciIsImluZm8iLCJ1c2VySWQiLCJzdWIiLCJqc29uIiwicHJvZmlsZSIsImlkIiwidXNlcm5hbWUiLCJnaXZlbl9uYW1lIiwiZmFtaWx5X25hbWUiLCJ0cmltIiwiZmlyc3ROYW1lIiwiZmlyc3RfbmFtZSIsImxhc3ROYW1lIiwibGFzdF9uYW1lIiwiZnVsbE5hbWUiLCJyb2xlIiwib25ib2FyZGluZ1N0YXR1cyIsInNldHVwQ29tcGxldGUiLCJidXNpbmVzc05hbWUiLCJidXNpbmVzc1R5cGUiLCJzdWJzY3JpcHRpb25fdHlwZSIsInByZWZlcmVuY2VzIiwidGhlbWUiLCJub3RpZmljYXRpb25zRW5hYmxlZCIsImF1dGhVc2VyIiwidXNlckVtYWlsIiwicmVxdWVzdFVybCIsInJlZmVyZXIiLCJpc0Rhc2hib2FyZFJlcXVlc3QiLCJpbmNsdWRlcyIsImZhbGxiYWNrVGVuYW50SWQiLCJmYWxsYmFja0VtYWlsIiwiZmFsbGJhY2siLCJlcnJvciIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJQT1NUIiwicmVxdWVzdCIsInByb2ZpbGVEYXRhIiwiZGVidWciLCJ1cGRhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/user/profile/route.js\n");

/***/ }),

/***/ "(rsc)/./src/middleware/dev-tenant-middleware.js":
/*!*************************************************!*\
  !*** ./src/middleware/dev-tenant-middleware.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyDevTenantMiddleware: () => (/* binding */ applyDevTenantMiddleware),\n/* harmony export */   applyRLS: () => (/* binding */ applyRLS),\n/* harmony export */   extractCognitoUserId: () => (/* binding */ extractCognitoUserId),\n/* harmony export */   extractTenantId: () => (/* binding */ extractTenantId),\n/* harmony export */   getAllDevTenants: () => (/* binding */ getAllDevTenants),\n/* harmony export */   getDefaultTenantId: () => (/* binding */ getDefaultTenantId),\n/* harmony export */   verifyTenantId: () => (/* binding */ verifyTenantId)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/**\n * Tenant Middleware\n * This middleware extracts tenant ID from requests and applies Row Level Security (RLS).\n * It uses the Cognito user ID as the tenant ID when available.\n */ \n\n/**\n * Extract tenant ID from the request\n * @param {Request} request - Next.js request object\n * @returns {Object} Object containing the extracted tenant ID and its source\n */ function extractTenantId(request) {\n    // Try URL parameters first\n    const url = new URL(request.url);\n    const urlTenantId = url.searchParams.get('tenant_id');\n    // Try headers next\n    const headerTenantId = request.headers.get('x-tenant-id');\n    // Try cookies last\n    const cookieHeader = request.headers.get('cookie');\n    let cookieTenantId = null;\n    let cognitoUserId = null;\n    if (cookieHeader) {\n        // First priority: Extract the Cognito user ID which serves as the tenant ID\n        const cognitoUserMatch = cookieHeader.match(/CognitoIdentityServiceProvider\\.[^.]+\\.LastAuthUser=([^;]+)/);\n        if (cognitoUserMatch && cognitoUserMatch[1]) {\n            cognitoUserId = cognitoUserMatch[1];\n            console.log('[Tenant Middleware] Found Cognito user ID as tenant:', cognitoUserId);\n        }\n        // Extract tenant ID from cookies as fallback\n        cookieHeader.split(';').forEach((cookie)=>{\n            const [name, value] = cookie.trim().split('=');\n            if (name === 'tenantId') {\n                cookieTenantId = value;\n            }\n        });\n    }\n    // User-specific checks for Kuol's account\n    const isKuolAccount = cookieHeader && cookieHeader.includes('kuoldimdeng@outlook.com');\n    if (isKuolAccount && cognitoUserId) {\n        console.log('[Tenant Middleware] Identified Kuol by email, using Cognito ID as tenant ID');\n        return {\n            tenantId: cognitoUserId,\n            source: 'cognito_kuol',\n            isValid: true\n        };\n    }\n    // Determine tenant ID with priority: Cognito ID > URL > Header > Cookie\n    const tenantId = cognitoUserId || urlTenantId || headerTenantId || cookieTenantId || generateTenantId();\n    // Determine source for logging\n    let source = 'generated';\n    if (cognitoUserId) source = 'cognito';\n    else if (urlTenantId) source = 'url';\n    else if (headerTenantId) source = 'header';\n    else if (cookieTenantId) source = 'cookie';\n    return {\n        tenantId,\n        source,\n        isValid: true // All tenant IDs are valid since we generate one if not found\n    };\n}\n/**\n * Generate a new tenant ID\n * @returns {string} New UUID-based tenant ID\n */ function generateTenantId() {\n    const newId = (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    console.log('[Tenant Middleware] Generated new tenant ID:', newId);\n    return newId;\n}\n/**\n * Middleware function to handle tenant context for API requests\n * @param {Request} request - Next.js request object\n * @returns {NextResponse} Modified response with tenant headers\n */ function applyDevTenantMiddleware(request) {\n    // Extract tenant ID from request\n    const { tenantId, source, isValid } = extractTenantId(request);\n    console.log(`[Tenant Middleware] Using tenant ID: ${tenantId} (source: ${source})`);\n    // Add tenant ID to request headers for downstream processing\n    const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    response.headers.set('x-tenant-id', tenantId);\n    // Also set as a cookie for client-side access if not already present\n    const cookieOptions = {\n        path: '/',\n        maxAge: 60 * 60 * 24 * 7,\n        sameSite: 'lax'\n    };\n    // Create cookie objects for Next.js middleware\n    const cookies = response.cookies;\n    cookies.set('tenantId', tenantId, cookieOptions);\n    return response;\n}\n/**\n * Apply RLS filtering to a collection based on tenant ID\n * @param {Array} collection - Collection to filter\n * @param {string} tenantId - Tenant ID to filter by\n * @returns {Array} Filtered collection\n */ function applyRLS(collection, tenantId) {\n    if (!Array.isArray(collection)) return [];\n    if (!tenantId) return [];\n    return collection.filter((item)=>{\n        // Check for tenant_id field first\n        if (item.tenant_id !== undefined) {\n            return item.tenant_id === tenantId;\n        }\n        // Check for tenantId field as a fallback\n        if (item.tenantId !== undefined) {\n            return item.tenantId === tenantId;\n        }\n        // If no tenant field, exclude the item for security reasons\n        return false;\n    });\n}\n/**\n * Extract the Cognito user ID from request cookies\n * @param {Request} request - Next.js request object\n * @returns {string|null} Cognito user ID if found, null otherwise\n */ function extractCognitoUserId(request) {\n    const cookieHeader = request.headers.get('cookie');\n    if (!cookieHeader) return null;\n    const cognitoUserMatch = cookieHeader.match(/CognitoIdentityServiceProvider\\.[^.]+\\.LastAuthUser=([^;]+)/);\n    return cognitoUserMatch ? cognitoUserMatch[1] : null;\n}\n/**\n * Verify if a tenant ID exists\n * @param {string} tenantId - Tenant ID to verify\n * @returns {Object|null} Tenant object if valid\n */ function verifyTenantId(tenantId) {\n    if (!tenantId) return null;\n    // All tenant IDs are considered valid now\n    return {\n        id: tenantId,\n        name: 'Tenant ' + tenantId.substring(0, 8)\n    };\n}\n/**\n * Get the default tenant ID (uses environment variable or generates a new one)\n * @returns {string} Default tenant ID\n */ function getDefaultTenantId() {\n    // Generate a UUID tenant ID - this is just for complete fallback\n    // In production or normal operation, the tenant ID should come from Cognito\n    try {\n        return (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(); // Generate UUID dynamically\n    } catch (error) {\n        console.error('[Tenant Middleware] Error generating default tenant ID:', error);\n        // Very last resort fallback - but this should never be reached in normal operation\n        return null;\n    }\n}\n/**\n * Get all available development tenants\n * @returns {Array} Empty array as we don't use predefined tenants anymore\n */ function getAllDevTenants() {\n    return [];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbWlkZGxld2FyZS9kZXYtdGVuYW50LW1pZGRsZXdhcmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Q0FJQyxHQUUwQztBQUNQO0FBRXBDOzs7O0NBSUMsR0FDTSxTQUFTRyxnQkFBZ0JDLE9BQU87SUFDckMsMkJBQTJCO0lBQzNCLE1BQU1DLE1BQU0sSUFBSUMsSUFBSUYsUUFBUUMsR0FBRztJQUMvQixNQUFNRSxjQUFjRixJQUFJRyxZQUFZLENBQUNDLEdBQUcsQ0FBQztJQUV6QyxtQkFBbUI7SUFDbkIsTUFBTUMsaUJBQWlCTixRQUFRTyxPQUFPLENBQUNGLEdBQUcsQ0FBQztJQUUzQyxtQkFBbUI7SUFDbkIsTUFBTUcsZUFBZVIsUUFBUU8sT0FBTyxDQUFDRixHQUFHLENBQUM7SUFDekMsSUFBSUksaUJBQWlCO0lBQ3JCLElBQUlDLGdCQUFnQjtJQUVwQixJQUFJRixjQUFjO1FBQ2hCLDRFQUE0RTtRQUM1RSxNQUFNRyxtQkFBbUJILGFBQWFJLEtBQUssQ0FBQztRQUM1QyxJQUFJRCxvQkFBb0JBLGdCQUFnQixDQUFDLEVBQUUsRUFBRTtZQUMzQ0QsZ0JBQWdCQyxnQkFBZ0IsQ0FBQyxFQUFFO1lBQ25DRSxRQUFRQyxHQUFHLENBQUMsd0RBQXdESjtRQUN0RTtRQUVBLDZDQUE2QztRQUM3Q0YsYUFBYU8sS0FBSyxDQUFDLEtBQUtDLE9BQU8sQ0FBQ0MsQ0FBQUE7WUFDOUIsTUFBTSxDQUFDQyxNQUFNQyxNQUFNLEdBQUdGLE9BQU9HLElBQUksR0FBR0wsS0FBSyxDQUFDO1lBQzFDLElBQUlHLFNBQVMsWUFBWTtnQkFDdkJULGlCQUFpQlU7WUFDbkI7UUFDRjtJQUNGO0lBRUEsMENBQTBDO0lBQzFDLE1BQU1FLGdCQUFnQmIsZ0JBQWdCQSxhQUFhYyxRQUFRLENBQUM7SUFDNUQsSUFBSUQsaUJBQWlCWCxlQUFlO1FBQ2xDRyxRQUFRQyxHQUFHLENBQUM7UUFDWixPQUFPO1lBQ0xTLFVBQVViO1lBQ1ZjLFFBQVE7WUFDUkMsU0FBUztRQUNYO0lBQ0Y7SUFFQSx3RUFBd0U7SUFDeEUsTUFBTUYsV0FBV2IsaUJBQWlCUCxlQUFlRyxrQkFBa0JHLGtCQUFrQmlCO0lBRXJGLCtCQUErQjtJQUMvQixJQUFJRixTQUFTO0lBQ2IsSUFBSWQsZUFBZWMsU0FBUztTQUN2QixJQUFJckIsYUFBYXFCLFNBQVM7U0FDMUIsSUFBSWxCLGdCQUFnQmtCLFNBQVM7U0FDN0IsSUFBSWYsZ0JBQWdCZSxTQUFTO0lBRWxDLE9BQU87UUFDTEQ7UUFDQUM7UUFDQUMsU0FBUyxLQUFLLDhEQUE4RDtJQUM5RTtBQUNGO0FBRUE7OztDQUdDLEdBQ0QsU0FBU0M7SUFDUCxNQUFNQyxRQUFRN0IsZ0RBQU1BO0lBQ3BCZSxRQUFRQyxHQUFHLENBQUMsZ0RBQWdEYTtJQUM1RCxPQUFPQTtBQUNUO0FBRUE7Ozs7Q0FJQyxHQUNNLFNBQVNDLHlCQUF5QjVCLE9BQU87SUFDOUMsaUNBQWlDO0lBQ2pDLE1BQU0sRUFBRXVCLFFBQVEsRUFBRUMsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBRzFCLGdCQUFnQkM7SUFFdERhLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHFDQUFxQyxFQUFFUyxTQUFTLFVBQVUsRUFBRUMsT0FBTyxDQUFDLENBQUM7SUFFbEYsNkRBQTZEO0lBQzdELE1BQU1LLFdBQVdqQyxxREFBWUEsQ0FBQ2tDLElBQUk7SUFDbENELFNBQVN0QixPQUFPLENBQUN3QixHQUFHLENBQUMsZUFBZVI7SUFFcEMscUVBQXFFO0lBQ3JFLE1BQU1TLGdCQUFnQjtRQUNwQkMsTUFBTTtRQUNOQyxRQUFRLEtBQUssS0FBSyxLQUFLO1FBQ3ZCQyxVQUFVO0lBQ1o7SUFFQSwrQ0FBK0M7SUFDL0MsTUFBTUMsVUFBVVAsU0FBU08sT0FBTztJQUNoQ0EsUUFBUUwsR0FBRyxDQUFDLFlBQVlSLFVBQVVTO0lBRWxDLE9BQU9IO0FBQ1Q7QUFFQTs7Ozs7Q0FLQyxHQUNNLFNBQVNRLFNBQVNDLFVBQVUsRUFBRWYsUUFBUTtJQUMzQyxJQUFJLENBQUNnQixNQUFNQyxPQUFPLENBQUNGLGFBQWEsT0FBTyxFQUFFO0lBQ3pDLElBQUksQ0FBQ2YsVUFBVSxPQUFPLEVBQUU7SUFFeEIsT0FBT2UsV0FBV0csTUFBTSxDQUFDQyxDQUFBQTtRQUN2QixrQ0FBa0M7UUFDbEMsSUFBSUEsS0FBS0MsU0FBUyxLQUFLQyxXQUFXO1lBQ2hDLE9BQU9GLEtBQUtDLFNBQVMsS0FBS3BCO1FBQzVCO1FBRUEseUNBQXlDO1FBQ3pDLElBQUltQixLQUFLbkIsUUFBUSxLQUFLcUIsV0FBVztZQUMvQixPQUFPRixLQUFLbkIsUUFBUSxLQUFLQTtRQUMzQjtRQUVBLDREQUE0RDtRQUM1RCxPQUFPO0lBQ1Q7QUFDRjtBQUVBOzs7O0NBSUMsR0FDTSxTQUFTc0IscUJBQXFCN0MsT0FBTztJQUMxQyxNQUFNUSxlQUFlUixRQUFRTyxPQUFPLENBQUNGLEdBQUcsQ0FBQztJQUN6QyxJQUFJLENBQUNHLGNBQWMsT0FBTztJQUUxQixNQUFNRyxtQkFBbUJILGFBQWFJLEtBQUssQ0FBQztJQUM1QyxPQUFPRCxtQkFBbUJBLGdCQUFnQixDQUFDLEVBQUUsR0FBRztBQUNsRDtBQUVBOzs7O0NBSUMsR0FDTSxTQUFTbUMsZUFBZXZCLFFBQVE7SUFDckMsSUFBSSxDQUFDQSxVQUFVLE9BQU87SUFFdEIsMENBQTBDO0lBQzFDLE9BQU87UUFBRXdCLElBQUl4QjtRQUFVTCxNQUFNLFlBQVlLLFNBQVN5QixTQUFTLENBQUMsR0FBRztJQUFHO0FBQ3BFO0FBRUE7OztDQUdDLEdBQ00sU0FBU0M7SUFDZCxpRUFBaUU7SUFDakUsNEVBQTRFO0lBQzVFLElBQUk7UUFDRixPQUFPbkQsZ0RBQU1BLElBQUksNEJBQTRCO0lBQy9DLEVBQUUsT0FBT29ELE9BQU87UUFDZHJDLFFBQVFxQyxLQUFLLENBQUMsMkRBQTJEQTtRQUN6RSxtRkFBbUY7UUFDbkYsT0FBTztJQUNUO0FBQ0Y7QUFFQTs7O0NBR0MsR0FDTSxTQUFTQztJQUNkLE9BQU8sRUFBRTtBQUNYIiwic291cmNlcyI6WyIvVXNlcnMva3VvbGRlbmcvcHJvamVjdHgvZnJvbnRlbmQvcHlmYWN0b3JfbmV4dC9zcmMvbWlkZGxld2FyZS9kZXYtdGVuYW50LW1pZGRsZXdhcmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZW5hbnQgTWlkZGxld2FyZVxuICogVGhpcyBtaWRkbGV3YXJlIGV4dHJhY3RzIHRlbmFudCBJRCBmcm9tIHJlcXVlc3RzIGFuZCBhcHBsaWVzIFJvdyBMZXZlbCBTZWN1cml0eSAoUkxTKS5cbiAqIEl0IHVzZXMgdGhlIENvZ25pdG8gdXNlciBJRCBhcyB0aGUgdGVuYW50IElEIHdoZW4gYXZhaWxhYmxlLlxuICovXG5cbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuXG4vKipcbiAqIEV4dHJhY3QgdGVuYW50IElEIGZyb20gdGhlIHJlcXVlc3RcbiAqIEBwYXJhbSB7UmVxdWVzdH0gcmVxdWVzdCAtIE5leHQuanMgcmVxdWVzdCBvYmplY3RcbiAqIEByZXR1cm5zIHtPYmplY3R9IE9iamVjdCBjb250YWluaW5nIHRoZSBleHRyYWN0ZWQgdGVuYW50IElEIGFuZCBpdHMgc291cmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0VGVuYW50SWQocmVxdWVzdCkge1xuICAvLyBUcnkgVVJMIHBhcmFtZXRlcnMgZmlyc3RcbiAgY29uc3QgdXJsID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gIGNvbnN0IHVybFRlbmFudElkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3RlbmFudF9pZCcpO1xuICBcbiAgLy8gVHJ5IGhlYWRlcnMgbmV4dFxuICBjb25zdCBoZWFkZXJUZW5hbnRJZCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtdGVuYW50LWlkJyk7XG4gIFxuICAvLyBUcnkgY29va2llcyBsYXN0XG4gIGNvbnN0IGNvb2tpZUhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2Nvb2tpZScpO1xuICBsZXQgY29va2llVGVuYW50SWQgPSBudWxsO1xuICBsZXQgY29nbml0b1VzZXJJZCA9IG51bGw7XG4gIFxuICBpZiAoY29va2llSGVhZGVyKSB7XG4gICAgLy8gRmlyc3QgcHJpb3JpdHk6IEV4dHJhY3QgdGhlIENvZ25pdG8gdXNlciBJRCB3aGljaCBzZXJ2ZXMgYXMgdGhlIHRlbmFudCBJRFxuICAgIGNvbnN0IGNvZ25pdG9Vc2VyTWF0Y2ggPSBjb29raWVIZWFkZXIubWF0Y2goL0NvZ25pdG9JZGVudGl0eVNlcnZpY2VQcm92aWRlclxcLlteLl0rXFwuTGFzdEF1dGhVc2VyPShbXjtdKykvKTtcbiAgICBpZiAoY29nbml0b1VzZXJNYXRjaCAmJiBjb2duaXRvVXNlck1hdGNoWzFdKSB7XG4gICAgICBjb2duaXRvVXNlcklkID0gY29nbml0b1VzZXJNYXRjaFsxXTtcbiAgICAgIGNvbnNvbGUubG9nKCdbVGVuYW50IE1pZGRsZXdhcmVdIEZvdW5kIENvZ25pdG8gdXNlciBJRCBhcyB0ZW5hbnQ6JywgY29nbml0b1VzZXJJZCk7XG4gICAgfVxuICAgIFxuICAgIC8vIEV4dHJhY3QgdGVuYW50IElEIGZyb20gY29va2llcyBhcyBmYWxsYmFja1xuICAgIGNvb2tpZUhlYWRlci5zcGxpdCgnOycpLmZvckVhY2goY29va2llID0+IHtcbiAgICAgIGNvbnN0IFtuYW1lLCB2YWx1ZV0gPSBjb29raWUudHJpbSgpLnNwbGl0KCc9Jyk7XG4gICAgICBpZiAobmFtZSA9PT0gJ3RlbmFudElkJykge1xuICAgICAgICBjb29raWVUZW5hbnRJZCA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIFxuICAvLyBVc2VyLXNwZWNpZmljIGNoZWNrcyBmb3IgS3VvbCdzIGFjY291bnRcbiAgY29uc3QgaXNLdW9sQWNjb3VudCA9IGNvb2tpZUhlYWRlciAmJiBjb29raWVIZWFkZXIuaW5jbHVkZXMoJ2t1b2xkaW1kZW5nQG91dGxvb2suY29tJyk7XG4gIGlmIChpc0t1b2xBY2NvdW50ICYmIGNvZ25pdG9Vc2VySWQpIHtcbiAgICBjb25zb2xlLmxvZygnW1RlbmFudCBNaWRkbGV3YXJlXSBJZGVudGlmaWVkIEt1b2wgYnkgZW1haWwsIHVzaW5nIENvZ25pdG8gSUQgYXMgdGVuYW50IElEJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRlbmFudElkOiBjb2duaXRvVXNlcklkLFxuICAgICAgc291cmNlOiAnY29nbml0b19rdW9sJyxcbiAgICAgIGlzVmFsaWQ6IHRydWVcbiAgICB9O1xuICB9XG4gIFxuICAvLyBEZXRlcm1pbmUgdGVuYW50IElEIHdpdGggcHJpb3JpdHk6IENvZ25pdG8gSUQgPiBVUkwgPiBIZWFkZXIgPiBDb29raWVcbiAgY29uc3QgdGVuYW50SWQgPSBjb2duaXRvVXNlcklkIHx8IHVybFRlbmFudElkIHx8IGhlYWRlclRlbmFudElkIHx8IGNvb2tpZVRlbmFudElkIHx8IGdlbmVyYXRlVGVuYW50SWQoKTtcbiAgXG4gIC8vIERldGVybWluZSBzb3VyY2UgZm9yIGxvZ2dpbmdcbiAgbGV0IHNvdXJjZSA9ICdnZW5lcmF0ZWQnO1xuICBpZiAoY29nbml0b1VzZXJJZCkgc291cmNlID0gJ2NvZ25pdG8nO1xuICBlbHNlIGlmICh1cmxUZW5hbnRJZCkgc291cmNlID0gJ3VybCc7XG4gIGVsc2UgaWYgKGhlYWRlclRlbmFudElkKSBzb3VyY2UgPSAnaGVhZGVyJztcbiAgZWxzZSBpZiAoY29va2llVGVuYW50SWQpIHNvdXJjZSA9ICdjb29raWUnO1xuICBcbiAgcmV0dXJuIHtcbiAgICB0ZW5hbnRJZCxcbiAgICBzb3VyY2UsXG4gICAgaXNWYWxpZDogdHJ1ZSAvLyBBbGwgdGVuYW50IElEcyBhcmUgdmFsaWQgc2luY2Ugd2UgZ2VuZXJhdGUgb25lIGlmIG5vdCBmb3VuZFxuICB9O1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEgbmV3IHRlbmFudCBJRFxuICogQHJldHVybnMge3N0cmluZ30gTmV3IFVVSUQtYmFzZWQgdGVuYW50IElEXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlVGVuYW50SWQoKSB7XG4gIGNvbnN0IG5ld0lkID0gdXVpZHY0KCk7XG4gIGNvbnNvbGUubG9nKCdbVGVuYW50IE1pZGRsZXdhcmVdIEdlbmVyYXRlZCBuZXcgdGVuYW50IElEOicsIG5ld0lkKTtcbiAgcmV0dXJuIG5ld0lkO1xufVxuXG4vKipcbiAqIE1pZGRsZXdhcmUgZnVuY3Rpb24gdG8gaGFuZGxlIHRlbmFudCBjb250ZXh0IGZvciBBUEkgcmVxdWVzdHNcbiAqIEBwYXJhbSB7UmVxdWVzdH0gcmVxdWVzdCAtIE5leHQuanMgcmVxdWVzdCBvYmplY3RcbiAqIEByZXR1cm5zIHtOZXh0UmVzcG9uc2V9IE1vZGlmaWVkIHJlc3BvbnNlIHdpdGggdGVuYW50IGhlYWRlcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5RGV2VGVuYW50TWlkZGxld2FyZShyZXF1ZXN0KSB7XG4gIC8vIEV4dHJhY3QgdGVuYW50IElEIGZyb20gcmVxdWVzdFxuICBjb25zdCB7IHRlbmFudElkLCBzb3VyY2UsIGlzVmFsaWQgfSA9IGV4dHJhY3RUZW5hbnRJZChyZXF1ZXN0KTtcbiAgXG4gIGNvbnNvbGUubG9nKGBbVGVuYW50IE1pZGRsZXdhcmVdIFVzaW5nIHRlbmFudCBJRDogJHt0ZW5hbnRJZH0gKHNvdXJjZTogJHtzb3VyY2V9KWApO1xuICBcbiAgLy8gQWRkIHRlbmFudCBJRCB0byByZXF1ZXN0IGhlYWRlcnMgZm9yIGRvd25zdHJlYW0gcHJvY2Vzc2luZ1xuICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5uZXh0KCk7XG4gIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCd4LXRlbmFudC1pZCcsIHRlbmFudElkKTtcbiAgXG4gIC8vIEFsc28gc2V0IGFzIGEgY29va2llIGZvciBjbGllbnQtc2lkZSBhY2Nlc3MgaWYgbm90IGFscmVhZHkgcHJlc2VudFxuICBjb25zdCBjb29raWVPcHRpb25zID0ge1xuICAgIHBhdGg6ICcvJyxcbiAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDcsIC8vIDcgZGF5c1xuICAgIHNhbWVTaXRlOiAnbGF4J1xuICB9O1xuICBcbiAgLy8gQ3JlYXRlIGNvb2tpZSBvYmplY3RzIGZvciBOZXh0LmpzIG1pZGRsZXdhcmVcbiAgY29uc3QgY29va2llcyA9IHJlc3BvbnNlLmNvb2tpZXM7XG4gIGNvb2tpZXMuc2V0KCd0ZW5hbnRJZCcsIHRlbmFudElkLCBjb29raWVPcHRpb25zKTtcbiAgXG4gIHJldHVybiByZXNwb25zZTtcbn1cblxuLyoqXG4gKiBBcHBseSBSTFMgZmlsdGVyaW5nIHRvIGEgY29sbGVjdGlvbiBiYXNlZCBvbiB0ZW5hbnQgSURcbiAqIEBwYXJhbSB7QXJyYXl9IGNvbGxlY3Rpb24gLSBDb2xsZWN0aW9uIHRvIGZpbHRlclxuICogQHBhcmFtIHtzdHJpbmd9IHRlbmFudElkIC0gVGVuYW50IElEIHRvIGZpbHRlciBieVxuICogQHJldHVybnMge0FycmF5fSBGaWx0ZXJlZCBjb2xsZWN0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVJMUyhjb2xsZWN0aW9uLCB0ZW5hbnRJZCkge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoY29sbGVjdGlvbikpIHJldHVybiBbXTtcbiAgaWYgKCF0ZW5hbnRJZCkgcmV0dXJuIFtdO1xuICBcbiAgcmV0dXJuIGNvbGxlY3Rpb24uZmlsdGVyKGl0ZW0gPT4ge1xuICAgIC8vIENoZWNrIGZvciB0ZW5hbnRfaWQgZmllbGQgZmlyc3RcbiAgICBpZiAoaXRlbS50ZW5hbnRfaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGl0ZW0udGVuYW50X2lkID09PSB0ZW5hbnRJZDtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIHRlbmFudElkIGZpZWxkIGFzIGEgZmFsbGJhY2tcbiAgICBpZiAoaXRlbS50ZW5hbnRJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gaXRlbS50ZW5hbnRJZCA9PT0gdGVuYW50SWQ7XG4gICAgfVxuICAgIFxuICAgIC8vIElmIG5vIHRlbmFudCBmaWVsZCwgZXhjbHVkZSB0aGUgaXRlbSBmb3Igc2VjdXJpdHkgcmVhc29uc1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSk7XG59XG5cbi8qKlxuICogRXh0cmFjdCB0aGUgQ29nbml0byB1c2VyIElEIGZyb20gcmVxdWVzdCBjb29raWVzXG4gKiBAcGFyYW0ge1JlcXVlc3R9IHJlcXVlc3QgLSBOZXh0LmpzIHJlcXVlc3Qgb2JqZWN0XG4gKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IENvZ25pdG8gdXNlciBJRCBpZiBmb3VuZCwgbnVsbCBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RDb2duaXRvVXNlcklkKHJlcXVlc3QpIHtcbiAgY29uc3QgY29va2llSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnY29va2llJyk7XG4gIGlmICghY29va2llSGVhZGVyKSByZXR1cm4gbnVsbDtcbiAgXG4gIGNvbnN0IGNvZ25pdG9Vc2VyTWF0Y2ggPSBjb29raWVIZWFkZXIubWF0Y2goL0NvZ25pdG9JZGVudGl0eVNlcnZpY2VQcm92aWRlclxcLlteLl0rXFwuTGFzdEF1dGhVc2VyPShbXjtdKykvKTtcbiAgcmV0dXJuIGNvZ25pdG9Vc2VyTWF0Y2ggPyBjb2duaXRvVXNlck1hdGNoWzFdIDogbnVsbDtcbn1cblxuLyoqXG4gKiBWZXJpZnkgaWYgYSB0ZW5hbnQgSUQgZXhpc3RzXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVuYW50SWQgLSBUZW5hbnQgSUQgdG8gdmVyaWZ5XG4gKiBAcmV0dXJucyB7T2JqZWN0fG51bGx9IFRlbmFudCBvYmplY3QgaWYgdmFsaWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeVRlbmFudElkKHRlbmFudElkKSB7XG4gIGlmICghdGVuYW50SWQpIHJldHVybiBudWxsO1xuICBcbiAgLy8gQWxsIHRlbmFudCBJRHMgYXJlIGNvbnNpZGVyZWQgdmFsaWQgbm93XG4gIHJldHVybiB7IGlkOiB0ZW5hbnRJZCwgbmFtZTogJ1RlbmFudCAnICsgdGVuYW50SWQuc3Vic3RyaW5nKDAsIDgpIH07XG59XG5cbi8qKlxuICogR2V0IHRoZSBkZWZhdWx0IHRlbmFudCBJRCAodXNlcyBlbnZpcm9ubWVudCB2YXJpYWJsZSBvciBnZW5lcmF0ZXMgYSBuZXcgb25lKVxuICogQHJldHVybnMge3N0cmluZ30gRGVmYXVsdCB0ZW5hbnQgSURcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRUZW5hbnRJZCgpIHtcbiAgLy8gR2VuZXJhdGUgYSBVVUlEIHRlbmFudCBJRCAtIHRoaXMgaXMganVzdCBmb3IgY29tcGxldGUgZmFsbGJhY2tcbiAgLy8gSW4gcHJvZHVjdGlvbiBvciBub3JtYWwgb3BlcmF0aW9uLCB0aGUgdGVuYW50IElEIHNob3VsZCBjb21lIGZyb20gQ29nbml0b1xuICB0cnkge1xuICAgIHJldHVybiB1dWlkdjQoKTsgLy8gR2VuZXJhdGUgVVVJRCBkeW5hbWljYWxseVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tUZW5hbnQgTWlkZGxld2FyZV0gRXJyb3IgZ2VuZXJhdGluZyBkZWZhdWx0IHRlbmFudCBJRDonLCBlcnJvcik7XG4gICAgLy8gVmVyeSBsYXN0IHJlc29ydCBmYWxsYmFjayAtIGJ1dCB0aGlzIHNob3VsZCBuZXZlciBiZSByZWFjaGVkIGluIG5vcm1hbCBvcGVyYXRpb25cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBhbGwgYXZhaWxhYmxlIGRldmVsb3BtZW50IHRlbmFudHNcbiAqIEByZXR1cm5zIHtBcnJheX0gRW1wdHkgYXJyYXkgYXMgd2UgZG9uJ3QgdXNlIHByZWRlZmluZWQgdGVuYW50cyBhbnltb3JlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxEZXZUZW5hbnRzKCkge1xuICByZXR1cm4gW107XG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJ2NCIsInV1aWR2NCIsImV4dHJhY3RUZW5hbnRJZCIsInJlcXVlc3QiLCJ1cmwiLCJVUkwiLCJ1cmxUZW5hbnRJZCIsInNlYXJjaFBhcmFtcyIsImdldCIsImhlYWRlclRlbmFudElkIiwiaGVhZGVycyIsImNvb2tpZUhlYWRlciIsImNvb2tpZVRlbmFudElkIiwiY29nbml0b1VzZXJJZCIsImNvZ25pdG9Vc2VyTWF0Y2giLCJtYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJzcGxpdCIsImZvckVhY2giLCJjb29raWUiLCJuYW1lIiwidmFsdWUiLCJ0cmltIiwiaXNLdW9sQWNjb3VudCIsImluY2x1ZGVzIiwidGVuYW50SWQiLCJzb3VyY2UiLCJpc1ZhbGlkIiwiZ2VuZXJhdGVUZW5hbnRJZCIsIm5ld0lkIiwiYXBwbHlEZXZUZW5hbnRNaWRkbGV3YXJlIiwicmVzcG9uc2UiLCJuZXh0Iiwic2V0IiwiY29va2llT3B0aW9ucyIsInBhdGgiLCJtYXhBZ2UiLCJzYW1lU2l0ZSIsImNvb2tpZXMiLCJhcHBseVJMUyIsImNvbGxlY3Rpb24iLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJpdGVtIiwidGVuYW50X2lkIiwidW5kZWZpbmVkIiwiZXh0cmFjdENvZ25pdG9Vc2VySWQiLCJ2ZXJpZnlUZW5hbnRJZCIsImlkIiwic3Vic3RyaW5nIiwiZ2V0RGVmYXVsdFRlbmFudElkIiwiZXJyb3IiLCJnZXRBbGxEZXZUZW5hbnRzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/middleware/dev-tenant-middleware.js\n");

/***/ }),

/***/ "(rsc)/./src/utils/getServerUser.js":
/*!************************************!*\
  !*** ./src/utils/getServerUser.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getServerUser: () => (/* binding */ getServerUser)\n/* harmony export */ });\n/* harmony import */ var aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! aws-amplify/auth */ \"(rsc)/../../node_modules/.pnpm/@aws-amplify+auth@6.12.1_@aws-amplify+core@6.11.1/node_modules/@aws-amplify/auth/dist/esm/providers/cognito/apis/getCurrentUser.mjs\");\n/* harmony import */ var aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! aws-amplify/auth */ \"(rsc)/../../node_modules/.pnpm/@aws-amplify+core@6.11.1/node_modules/@aws-amplify/core/dist/esm/singleton/apis/fetchAuthSession.mjs\");\n/* harmony import */ var aws_amplify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aws-amplify */ \"(rsc)/../../node_modules/.pnpm/aws-amplify@6.14.1/node_modules/aws-amplify/dist/esm/initSingleton.mjs\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/api/headers.js\");\n\n\n\n// Import Amplify config\nconst COGNITO_CLIENT_ID = \"1o5v84mrgn4gt87khtr179uc5b\" || 0;\nconst COGNITO_USER_POOL_ID = \"us-east-1_JPL8vGfb6\" || 0;\nconst AWS_REGION = \"us-east-1\" || 0;\n// Server-side Amplify config\nconst amplifyConfig = {\n    Auth: {\n        Cognito: {\n            userPoolId: COGNITO_USER_POOL_ID,\n            userPoolClientId: COGNITO_CLIENT_ID,\n            region: AWS_REGION\n        }\n    }\n};\n/**\n * Gets the authenticated user from server-side context\n * Returns null for unauthenticated users instead of throwing errors\n * \n * @param {Request} request - Optional request object\n * @returns {Promise<Object|null>} - User object or null if not authenticated\n */ async function getServerUser(request) {\n    try {\n        // Configure Amplify in server environment\n        aws_amplify__WEBPACK_IMPORTED_MODULE_1__.DefaultAmplify.configure(amplifyConfig);\n        // Get cookies from request headers instead of using cookies() directly\n        let idToken = null;\n        // Try to extract token from request headers if available\n        if (request?.headers) {\n            const authHeader = request.headers.get('authorization');\n            if (authHeader?.startsWith('Bearer ')) {\n                idToken = authHeader.substring(7);\n                console.debug('[getServerUser] Using token from authorization header');\n            }\n        }\n        // If no token in headers, check for cookie directly in headers\n        if (!idToken && request?.headers) {\n            const cookieHeader = request.headers.get('cookie');\n            if (cookieHeader) {\n                const cookies = parseCookies(cookieHeader);\n                idToken = cookies.idToken;\n                if (idToken) {\n                    console.debug('[getServerUser] Using token from cookie header');\n                }\n            }\n        }\n        // Last resort - try to get from cookies API\n        if (!idToken) {\n            try {\n                const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n                idToken = cookieStore.get('idToken')?.value;\n                if (idToken) {\n                    console.debug('[getServerUser] Using token from cookies API');\n                }\n            } catch (cookieError) {\n                console.warn('[getServerUser] Error accessing cookies API:', {\n                    error: cookieError.message\n                });\n            }\n        }\n        if (!idToken) {\n            console.debug('[getServerUser] No ID token found');\n            return null;\n        }\n        // Handle authentication with a try/catch to catch authentication errors\n        try {\n            // Get user from Cognito - if this fails due to authentication, we'll return null\n            const user = await (0,aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__.getCurrentUser)();\n            if (!user) {\n                console.debug('[getServerUser] No user found in session');\n                return null;\n            }\n            // Get user attributes\n            const session = await (0,aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__.fetchAuthSession)();\n            const attributes = session?.tokens?.idToken?.payload || {};\n            // Verify token is valid\n            if (!session?.tokens?.idToken) {\n                console.warn('[getServerUser] Session tokens missing or invalid');\n                return null;\n            }\n            // Return user with attributes\n            return {\n                ...user,\n                attributes,\n                token: session.tokens.idToken.toString()\n            };\n        } catch (authError) {\n            // Handle authentication errors gracefully without throwing\n            console.debug('[getServerUser] Authentication error, user not authenticated:', {\n                error: authError.message,\n                code: authError.code\n            });\n            return null;\n        }\n    } catch (error) {\n        // For general errors, log but don't throw\n        console.error('[getServerUser] Error getting user:', {\n            error: error.message,\n            code: error.code,\n            name: error.name\n        });\n        // Return null instead of throwing\n        return null;\n    }\n}\n/**\n * Parse cookies from a cookie header string\n * @param {string} cookieHeader - The cookie header string\n * @returns {Object} - Object with parsed cookies\n */ function parseCookies(cookieHeader) {\n    const cookies = {};\n    if (!cookieHeader) return cookies;\n    cookieHeader.split(';').forEach((cookie)=>{\n        const parts = cookie.split('=');\n        if (parts.length >= 2) {\n            const name = parts[0].trim();\n            const value = parts.slice(1).join('=').trim();\n            try {\n                cookies[name] = decodeURIComponent(value);\n            } catch (e) {\n                cookies[name] = value;\n            }\n        }\n    });\n    return cookies;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbHMvZ2V0U2VydmVyVXNlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFvRTtBQUM5QjtBQUNDO0FBRXZDLHdCQUF3QjtBQUN4QixNQUFNSSxvQkFBb0JDLDRCQUF5QyxJQUFJLENBQTRCO0FBQ25HLE1BQU1HLHVCQUF1QkgscUJBQTRDLElBQUksQ0FBcUI7QUFDbEcsTUFBTUssYUFBYUwsV0FBa0MsSUFBSSxDQUFXO0FBRXBFLDZCQUE2QjtBQUM3QixNQUFNTyxnQkFBZ0I7SUFDcEJDLE1BQU07UUFDSkMsU0FBUztZQUNQQyxZQUFZUDtZQUNaUSxrQkFBa0JaO1lBQ2xCYSxRQUFRUDtRQUNWO0lBQ0Y7QUFDRjtBQUVBOzs7Ozs7Q0FNQyxHQUNNLGVBQWVRLGNBQWNDLE9BQU87SUFDekMsSUFBSTtRQUNGLDBDQUEwQztRQUMxQ2pCLHVEQUFPQSxDQUFDa0IsU0FBUyxDQUFDUjtRQUVsQix1RUFBdUU7UUFDdkUsSUFBSVMsVUFBVTtRQUVkLHlEQUF5RDtRQUN6RCxJQUFJRixTQUFTRyxTQUFTO1lBQ3BCLE1BQU1DLGFBQWFKLFFBQVFHLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDO1lBQ3ZDLElBQUlELFlBQVlFLFdBQVcsWUFBWTtnQkFDckNKLFVBQVVFLFdBQVdHLFNBQVMsQ0FBQztnQkFDL0JDLFFBQVFDLEtBQUssQ0FBQztZQUNoQjtRQUNGO1FBRUEsK0RBQStEO1FBQy9ELElBQUksQ0FBQ1AsV0FBV0YsU0FBU0csU0FBUztZQUNoQyxNQUFNTyxlQUFlVixRQUFRRyxPQUFPLENBQUNFLEdBQUcsQ0FBQztZQUN6QyxJQUFJSyxjQUFjO2dCQUNoQixNQUFNMUIsVUFBVTJCLGFBQWFEO2dCQUM3QlIsVUFBVWxCLFFBQVFrQixPQUFPO2dCQUV6QixJQUFJQSxTQUFTO29CQUNYTSxRQUFRQyxLQUFLLENBQUM7Z0JBQ2hCO1lBQ0Y7UUFDRjtRQUVBLDRDQUE0QztRQUM1QyxJQUFJLENBQUNQLFNBQVM7WUFDWixJQUFJO2dCQUNGLE1BQU1VLGNBQWMsTUFBTTVCLHFEQUFPQTtnQkFDakNrQixVQUFVVSxZQUFZUCxHQUFHLENBQUMsWUFBWVE7Z0JBRXRDLElBQUlYLFNBQVM7b0JBQ1hNLFFBQVFDLEtBQUssQ0FBQztnQkFDaEI7WUFDRixFQUFFLE9BQU9LLGFBQWE7Z0JBQ3BCTixRQUFRTyxJQUFJLENBQUMsZ0RBQWdEO29CQUMzREMsT0FBT0YsWUFBWUcsT0FBTztnQkFDNUI7WUFDRjtRQUNGO1FBRUEsSUFBSSxDQUFDZixTQUFTO1lBQ1pNLFFBQVFDLEtBQUssQ0FBQztZQUNkLE9BQU87UUFDVDtRQUVBLHdFQUF3RTtRQUN4RSxJQUFJO1lBQ0YsaUZBQWlGO1lBQ2pGLE1BQU1TLE9BQU8sTUFBTXJDLGdFQUFjQTtZQUVqQyxJQUFJLENBQUNxQyxNQUFNO2dCQUNUVixRQUFRQyxLQUFLLENBQUM7Z0JBQ2QsT0FBTztZQUNUO1lBRUEsc0JBQXNCO1lBQ3RCLE1BQU1VLFVBQVUsTUFBTXJDLGtFQUFnQkE7WUFDdEMsTUFBTXNDLGFBQWFELFNBQVNFLFFBQVFuQixTQUFTb0IsV0FBVyxDQUFDO1lBRXpELHdCQUF3QjtZQUN4QixJQUFJLENBQUNILFNBQVNFLFFBQVFuQixTQUFTO2dCQUM3Qk0sUUFBUU8sSUFBSSxDQUFDO2dCQUNiLE9BQU87WUFDVDtZQUVBLDhCQUE4QjtZQUM5QixPQUFPO2dCQUNMLEdBQUdHLElBQUk7Z0JBQ1BFO2dCQUNBRyxPQUFPSixRQUFRRSxNQUFNLENBQUNuQixPQUFPLENBQUNzQixRQUFRO1lBQ3hDO1FBQ0YsRUFBRSxPQUFPQyxXQUFXO1lBQ2xCLDJEQUEyRDtZQUMzRGpCLFFBQVFDLEtBQUssQ0FBQyxpRUFBaUU7Z0JBQzdFTyxPQUFPUyxVQUFVUixPQUFPO2dCQUN4QlMsTUFBTUQsVUFBVUMsSUFBSTtZQUN0QjtZQUNBLE9BQU87UUFDVDtJQUNGLEVBQUUsT0FBT1YsT0FBTztRQUNkLDBDQUEwQztRQUMxQ1IsUUFBUVEsS0FBSyxDQUFDLHVDQUF1QztZQUNuREEsT0FBT0EsTUFBTUMsT0FBTztZQUNwQlMsTUFBTVYsTUFBTVUsSUFBSTtZQUNoQkMsTUFBTVgsTUFBTVcsSUFBSTtRQUNsQjtRQUVBLGtDQUFrQztRQUNsQyxPQUFPO0lBQ1Q7QUFDRjtBQUVBOzs7O0NBSUMsR0FDRCxTQUFTaEIsYUFBYUQsWUFBWTtJQUNoQyxNQUFNMUIsVUFBVSxDQUFDO0lBQ2pCLElBQUksQ0FBQzBCLGNBQWMsT0FBTzFCO0lBRTFCMEIsYUFBYWtCLEtBQUssQ0FBQyxLQUFLQyxPQUFPLENBQUNDLENBQUFBO1FBQzlCLE1BQU1DLFFBQVFELE9BQU9GLEtBQUssQ0FBQztRQUMzQixJQUFJRyxNQUFNQyxNQUFNLElBQUksR0FBRztZQUNyQixNQUFNTCxPQUFPSSxLQUFLLENBQUMsRUFBRSxDQUFDRSxJQUFJO1lBQzFCLE1BQU1wQixRQUFRa0IsTUFBTUcsS0FBSyxDQUFDLEdBQUdDLElBQUksQ0FBQyxLQUFLRixJQUFJO1lBQzNDLElBQUk7Z0JBQ0ZqRCxPQUFPLENBQUMyQyxLQUFLLEdBQUdTLG1CQUFtQnZCO1lBQ3JDLEVBQUUsT0FBT3dCLEdBQUc7Z0JBQ1ZyRCxPQUFPLENBQUMyQyxLQUFLLEdBQUdkO1lBQ2xCO1FBQ0Y7SUFDRjtJQUVBLE9BQU83QjtBQUNUIiwic291cmNlcyI6WyIvVXNlcnMva3VvbGRlbmcvcHJvamVjdHgvZnJvbnRlbmQvcHlmYWN0b3JfbmV4dC9zcmMvdXRpbHMvZ2V0U2VydmVyVXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDdXJyZW50VXNlciwgZmV0Y2hBdXRoU2Vzc2lvbiB9IGZyb20gJ2F3cy1hbXBsaWZ5L2F1dGgnO1xuaW1wb3J0IHsgQW1wbGlmeSB9IGZyb20gJ2F3cy1hbXBsaWZ5JztcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xuXG4vLyBJbXBvcnQgQW1wbGlmeSBjb25maWdcbmNvbnN0IENPR05JVE9fQ0xJRU5UX0lEID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQ09HTklUT19DTElFTlRfSUQgfHwgJzFvNXY4NG1yZ240Z3Q4N2todHIxNzl1YzViJztcbmNvbnN0IENPR05JVE9fVVNFUl9QT09MX0lEID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQ09HTklUT19VU0VSX1BPT0xfSUQgfHwgJ3VzLWVhc3QtMV9KUEw4dkdmYjYnO1xuY29uc3QgQVdTX1JFR0lPTiA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FXU19SRUdJT04gfHwgJ3VzLWVhc3QtMSc7XG5cbi8vIFNlcnZlci1zaWRlIEFtcGxpZnkgY29uZmlnXG5jb25zdCBhbXBsaWZ5Q29uZmlnID0ge1xuICBBdXRoOiB7XG4gICAgQ29nbml0bzoge1xuICAgICAgdXNlclBvb2xJZDogQ09HTklUT19VU0VSX1BPT0xfSUQsXG4gICAgICB1c2VyUG9vbENsaWVudElkOiBDT0dOSVRPX0NMSUVOVF9JRCxcbiAgICAgIHJlZ2lvbjogQVdTX1JFR0lPTlxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBHZXRzIHRoZSBhdXRoZW50aWNhdGVkIHVzZXIgZnJvbSBzZXJ2ZXItc2lkZSBjb250ZXh0XG4gKiBSZXR1cm5zIG51bGwgZm9yIHVuYXV0aGVudGljYXRlZCB1c2VycyBpbnN0ZWFkIG9mIHRocm93aW5nIGVycm9yc1xuICogXG4gKiBAcGFyYW0ge1JlcXVlc3R9IHJlcXVlc3QgLSBPcHRpb25hbCByZXF1ZXN0IG9iamVjdFxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0fG51bGw+fSAtIFVzZXIgb2JqZWN0IG9yIG51bGwgaWYgbm90IGF1dGhlbnRpY2F0ZWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclVzZXIocmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIENvbmZpZ3VyZSBBbXBsaWZ5IGluIHNlcnZlciBlbnZpcm9ubWVudFxuICAgIEFtcGxpZnkuY29uZmlndXJlKGFtcGxpZnlDb25maWcpO1xuICAgIFxuICAgIC8vIEdldCBjb29raWVzIGZyb20gcmVxdWVzdCBoZWFkZXJzIGluc3RlYWQgb2YgdXNpbmcgY29va2llcygpIGRpcmVjdGx5XG4gICAgbGV0IGlkVG9rZW4gPSBudWxsO1xuICAgIFxuICAgIC8vIFRyeSB0byBleHRyYWN0IHRva2VuIGZyb20gcmVxdWVzdCBoZWFkZXJzIGlmIGF2YWlsYWJsZVxuICAgIGlmIChyZXF1ZXN0Py5oZWFkZXJzKSB7XG4gICAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnYXV0aG9yaXphdGlvbicpO1xuICAgICAgaWYgKGF1dGhIZWFkZXI/LnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xuICAgICAgICBpZFRva2VuID0gYXV0aEhlYWRlci5zdWJzdHJpbmcoNyk7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ1tnZXRTZXJ2ZXJVc2VyXSBVc2luZyB0b2tlbiBmcm9tIGF1dGhvcml6YXRpb24gaGVhZGVyJyk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIElmIG5vIHRva2VuIGluIGhlYWRlcnMsIGNoZWNrIGZvciBjb29raWUgZGlyZWN0bHkgaW4gaGVhZGVyc1xuICAgIGlmICghaWRUb2tlbiAmJiByZXF1ZXN0Py5oZWFkZXJzKSB7XG4gICAgICBjb25zdCBjb29raWVIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdjb29raWUnKTtcbiAgICAgIGlmIChjb29raWVIZWFkZXIpIHtcbiAgICAgICAgY29uc3QgY29va2llcyA9IHBhcnNlQ29va2llcyhjb29raWVIZWFkZXIpO1xuICAgICAgICBpZFRva2VuID0gY29va2llcy5pZFRva2VuO1xuICAgICAgICBcbiAgICAgICAgaWYgKGlkVG9rZW4pIHtcbiAgICAgICAgICBjb25zb2xlLmRlYnVnKCdbZ2V0U2VydmVyVXNlcl0gVXNpbmcgdG9rZW4gZnJvbSBjb29raWUgaGVhZGVyJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gTGFzdCByZXNvcnQgLSB0cnkgdG8gZ2V0IGZyb20gY29va2llcyBBUElcbiAgICBpZiAoIWlkVG9rZW4pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuICAgICAgICBpZFRva2VuID0gY29va2llU3RvcmUuZ2V0KCdpZFRva2VuJyk/LnZhbHVlO1xuICAgICAgICBcbiAgICAgICAgaWYgKGlkVG9rZW4pIHtcbiAgICAgICAgICBjb25zb2xlLmRlYnVnKCdbZ2V0U2VydmVyVXNlcl0gVXNpbmcgdG9rZW4gZnJvbSBjb29raWVzIEFQSScpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChjb29raWVFcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1tnZXRTZXJ2ZXJVc2VyXSBFcnJvciBhY2Nlc3NpbmcgY29va2llcyBBUEk6Jywge1xuICAgICAgICAgIGVycm9yOiBjb29raWVFcnJvci5tZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoIWlkVG9rZW4pIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1tnZXRTZXJ2ZXJVc2VyXSBObyBJRCB0b2tlbiBmb3VuZCcpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIEhhbmRsZSBhdXRoZW50aWNhdGlvbiB3aXRoIGEgdHJ5L2NhdGNoIHRvIGNhdGNoIGF1dGhlbnRpY2F0aW9uIGVycm9yc1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgdXNlciBmcm9tIENvZ25pdG8gLSBpZiB0aGlzIGZhaWxzIGR1ZSB0byBhdXRoZW50aWNhdGlvbiwgd2UnbGwgcmV0dXJuIG51bGxcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xuICAgICAgXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZygnW2dldFNlcnZlclVzZXJdIE5vIHVzZXIgZm91bmQgaW4gc2Vzc2lvbicpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gR2V0IHVzZXIgYXR0cmlidXRlc1xuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGZldGNoQXV0aFNlc3Npb24oKTtcbiAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBzZXNzaW9uPy50b2tlbnM/LmlkVG9rZW4/LnBheWxvYWQgfHwge307XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSB0b2tlbiBpcyB2YWxpZFxuICAgICAgaWYgKCFzZXNzaW9uPy50b2tlbnM/LmlkVG9rZW4pIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdbZ2V0U2VydmVyVXNlcl0gU2Vzc2lvbiB0b2tlbnMgbWlzc2luZyBvciBpbnZhbGlkJyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBSZXR1cm4gdXNlciB3aXRoIGF0dHJpYnV0ZXNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnVzZXIsXG4gICAgICAgIGF0dHJpYnV0ZXMsXG4gICAgICAgIHRva2VuOiBzZXNzaW9uLnRva2Vucy5pZFRva2VuLnRvU3RyaW5nKClcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoYXV0aEVycm9yKSB7XG4gICAgICAvLyBIYW5kbGUgYXV0aGVudGljYXRpb24gZXJyb3JzIGdyYWNlZnVsbHkgd2l0aG91dCB0aHJvd2luZ1xuICAgICAgY29uc29sZS5kZWJ1ZygnW2dldFNlcnZlclVzZXJdIEF1dGhlbnRpY2F0aW9uIGVycm9yLCB1c2VyIG5vdCBhdXRoZW50aWNhdGVkOicsIHtcbiAgICAgICAgZXJyb3I6IGF1dGhFcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBhdXRoRXJyb3IuY29kZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gRm9yIGdlbmVyYWwgZXJyb3JzLCBsb2cgYnV0IGRvbid0IHRocm93XG4gICAgY29uc29sZS5lcnJvcignW2dldFNlcnZlclVzZXJdIEVycm9yIGdldHRpbmcgdXNlcjonLCB7XG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICBuYW1lOiBlcnJvci5uYW1lXG4gICAgfSk7XG4gICAgXG4gICAgLy8gUmV0dXJuIG51bGwgaW5zdGVhZCBvZiB0aHJvd2luZ1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogUGFyc2UgY29va2llcyBmcm9tIGEgY29va2llIGhlYWRlciBzdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb29raWVIZWFkZXIgLSBUaGUgY29va2llIGhlYWRlciBzdHJpbmdcbiAqIEByZXR1cm5zIHtPYmplY3R9IC0gT2JqZWN0IHdpdGggcGFyc2VkIGNvb2tpZXNcbiAqL1xuZnVuY3Rpb24gcGFyc2VDb29raWVzKGNvb2tpZUhlYWRlcikge1xuICBjb25zdCBjb29raWVzID0ge307XG4gIGlmICghY29va2llSGVhZGVyKSByZXR1cm4gY29va2llcztcbiAgXG4gIGNvb2tpZUhlYWRlci5zcGxpdCgnOycpLmZvckVhY2goY29va2llID0+IHtcbiAgICBjb25zdCBwYXJ0cyA9IGNvb2tpZS5zcGxpdCgnPScpO1xuICAgIGlmIChwYXJ0cy5sZW5ndGggPj0gMikge1xuICAgICAgY29uc3QgbmFtZSA9IHBhcnRzWzBdLnRyaW0oKTtcbiAgICAgIGNvbnN0IHZhbHVlID0gcGFydHMuc2xpY2UoMSkuam9pbignPScpLnRyaW0oKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvb2tpZXNbbmFtZV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb29raWVzW25hbWVdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgXG4gIHJldHVybiBjb29raWVzO1xufSAiXSwibmFtZXMiOlsiZ2V0Q3VycmVudFVzZXIiLCJmZXRjaEF1dGhTZXNzaW9uIiwiQW1wbGlmeSIsImNvb2tpZXMiLCJDT0dOSVRPX0NMSUVOVF9JRCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19DT0dOSVRPX0NMSUVOVF9JRCIsIkNPR05JVE9fVVNFUl9QT09MX0lEIiwiTkVYVF9QVUJMSUNfQ09HTklUT19VU0VSX1BPT0xfSUQiLCJBV1NfUkVHSU9OIiwiTkVYVF9QVUJMSUNfQVdTX1JFR0lPTiIsImFtcGxpZnlDb25maWciLCJBdXRoIiwiQ29nbml0byIsInVzZXJQb29sSWQiLCJ1c2VyUG9vbENsaWVudElkIiwicmVnaW9uIiwiZ2V0U2VydmVyVXNlciIsInJlcXVlc3QiLCJjb25maWd1cmUiLCJpZFRva2VuIiwiaGVhZGVycyIsImF1dGhIZWFkZXIiLCJnZXQiLCJzdGFydHNXaXRoIiwic3Vic3RyaW5nIiwiY29uc29sZSIsImRlYnVnIiwiY29va2llSGVhZGVyIiwicGFyc2VDb29raWVzIiwiY29va2llU3RvcmUiLCJ2YWx1ZSIsImNvb2tpZUVycm9yIiwid2FybiIsImVycm9yIiwibWVzc2FnZSIsInVzZXIiLCJzZXNzaW9uIiwiYXR0cmlidXRlcyIsInRva2VucyIsInBheWxvYWQiLCJ0b2tlbiIsInRvU3RyaW5nIiwiYXV0aEVycm9yIiwiY29kZSIsIm5hbWUiLCJzcGxpdCIsImZvckVhY2giLCJjb29raWUiLCJwYXJ0cyIsImxlbmd0aCIsInRyaW0iLCJzbGljZSIsImpvaW4iLCJkZWNvZGVVUklDb21wb25lbnQiLCJlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/getServerUser.js\n");

/***/ }),

/***/ "(rsc)/./src/utils/serverLogger.js":
/*!***********************************!*\
  !*** ./src/utils/serverLogger.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createContextualServerLogger: () => (/* binding */ createContextualServerLogger),\n/* harmony export */   createServerLogger: () => (/* binding */ createServerLogger),\n/* harmony export */   debug: () => (/* binding */ debug),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   error: () => (/* binding */ error),\n/* harmony export */   info: () => (/* binding */ info),\n/* harmony export */   logger: () => (/* binding */ logger),\n/* harmony export */   serverLogger: () => (/* binding */ serverLogger),\n/* harmony export */   warn: () => (/* binding */ warn)\n/* harmony export */ });\n// Server-side logger implementation\n// This file should be imported in API routes instead of the client-side logger\n/**\n * Server-side logger utility\n * \n * This logger is specifically designed for server components and API routes\n * where the client-side logger with browser-specific APIs can't be used.\n */ /**\n * Format log prefix to include timestamp and context\n */ function formatPrefix(level, context = {}) {\n    const timestamp = new Date().toISOString();\n    const tenantId = context.tenantId || 'no-tenant';\n    return `[${timestamp}] [SERVER:${level}] [${tenantId}]`;\n}\n/**\n * Server logger instance with standard logging methods\n */ const serverLogger = {\n    /**\n   * Log at DEBUG level\n   */ debug: (message, data, context = {})=>{\n        const prefix = formatPrefix('DEBUG', context);\n        if (data !== undefined) {\n            console.debug(`${prefix} ${message}`, data);\n        } else {\n            console.debug(`${prefix} ${message}`);\n        }\n    },\n    /**\n   * Log at INFO level\n   */ info: (message, data, context = {})=>{\n        const prefix = formatPrefix('INFO', context);\n        if (data !== undefined) {\n            console.info(`${prefix} ${message}`, data);\n        } else {\n            console.info(`${prefix} ${message}`);\n        }\n    },\n    /**\n   * Log at WARN level\n   */ warn: (message, data, context = {})=>{\n        const prefix = formatPrefix('WARN', context);\n        if (data !== undefined) {\n            console.warn(`${prefix} ${message}`, data);\n        } else {\n            console.warn(`${prefix} ${message}`);\n        }\n    },\n    /**\n   * Log at ERROR level\n   */ error: (message, data, context = {})=>{\n        const prefix = formatPrefix('ERROR', context);\n        if (data !== undefined) {\n            console.error(`${prefix} ${message}`, data);\n        } else {\n            console.error(`${prefix} ${message}`);\n        }\n    }\n};\n/**\n * Create a contextualized server logger with pre-bound context\n */ function createContextualServerLogger(context = {}) {\n    return {\n        debug: (message, data)=>serverLogger.debug(message, data, context),\n        info: (message, data)=>serverLogger.info(message, data, context),\n        warn: (message, data)=>serverLogger.warn(message, data, context),\n        error: (message, data)=>serverLogger.error(message, data, context)\n    };\n}\n/**\n * Legacy function for backward compatibility with existing imports\n * Creates a logger with a namespace\n */ function createServerLogger(namespace = 'API') {\n    return {\n        debug: (message, ...args)=>serverLogger.debug(`[${namespace}] ${message}`, args.length ? args[0] : undefined),\n        info: (message, ...args)=>serverLogger.info(`[${namespace}] ${message}`, args.length ? args[0] : undefined),\n        warn: (message, ...args)=>serverLogger.warn(`[${namespace}] ${message}`, args.length ? args[0] : undefined),\n        error: (message, ...args)=>serverLogger.error(`[${namespace}] ${message}`, args.length ? args[0] : undefined),\n        log: (message, ...args)=>serverLogger.info(`[${namespace}] ${message}`, args.length ? args[0] : undefined)\n    };\n}\n// Create a default server logger instance for compatibility with existing imports\nconst logger = createServerLogger('API');\n// Export individual functions directly from serverLogger for convenience\nconst debug = serverLogger.debug;\nconst info = serverLogger.info;\nconst warn = serverLogger.warn;\nconst error = serverLogger.error;\n// For CommonJS compatibility\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    serverLogger,\n    logger,\n    debug,\n    info,\n    warn,\n    error,\n    createContextualServerLogger,\n    createServerLogger\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBUyxHQUFHVyxPQUFTYixhQUFhTyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUVLLFVBQVUsRUFBRSxFQUFFVixTQUFTLEVBQUVXLEtBQUtDLE1BQU0sR0FBR0QsSUFBSSxDQUFDLEVBQUUsR0FBR1I7UUFDbkdHLE1BQU0sQ0FBQ04sU0FBUyxHQUFHVyxPQUFTYixhQUFhUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUVJLFVBQVUsRUFBRSxFQUFFVixTQUFTLEVBQUVXLEtBQUtDLE1BQU0sR0FBR0QsSUFBSSxDQUFDLEVBQUUsR0FBR1I7UUFDbkdJLE9BQU8sQ0FBQ1AsU0FBUyxHQUFHVyxPQUFTYixhQUFhUyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUVHLFVBQVUsRUFBRSxFQUFFVixTQUFTLEVBQUVXLEtBQUtDLE1BQU0sR0FBR0QsSUFBSSxDQUFDLEVBQUUsR0FBR1I7UUFDckdVLEtBQUssQ0FBQ2IsU0FBUyxHQUFHVyxPQUFTYixhQUFhTyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUVLLFVBQVUsRUFBRSxFQUFFVixTQUFTLEVBQUVXLEtBQUtDLE1BQU0sR0FBR0QsSUFBSSxDQUFDLEVBQUUsR0FBR1I7SUFDcEc7QUFDRjtBQUVBLGtGQUFrRjtBQUMzRSxNQUFNVyxTQUFTTCxtQkFBbUIsT0FBTztBQUVoRCx5RUFBeUU7QUFDbEUsTUFBTVYsUUFBUUQsYUFBYUMsS0FBSyxDQUFDO0FBQ2pDLE1BQU1NLE9BQU9QLGFBQWFPLElBQUksQ0FBQztBQUMvQixNQUFNQyxPQUFPUixhQUFhUSxJQUFJLENBQUM7QUFDL0IsTUFBTUMsUUFBUVQsYUFBYVMsS0FBSyxDQUFDO0FBRXhDLDZCQUE2QjtBQUM3QixpRUFBZTtJQUNiVDtJQUNBZ0I7SUFDQWY7SUFDQU07SUFDQUM7SUFDQUM7SUFDQUM7SUFDQUM7QUFDRixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9rdW9sZGVuZy9wcm9qZWN0eC9mcm9udGVuZC9weWZhY3Rvcl9uZXh0L3NyYy91dGlscy9zZXJ2ZXJMb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2VydmVyLXNpZGUgbG9nZ2VyIGltcGxlbWVudGF0aW9uXG4vLyBUaGlzIGZpbGUgc2hvdWxkIGJlIGltcG9ydGVkIGluIEFQSSByb3V0ZXMgaW5zdGVhZCBvZiB0aGUgY2xpZW50LXNpZGUgbG9nZ2VyXG5cbi8qKlxuICogU2VydmVyLXNpZGUgbG9nZ2VyIHV0aWxpdHlcbiAqIFxuICogVGhpcyBsb2dnZXIgaXMgc3BlY2lmaWNhbGx5IGRlc2lnbmVkIGZvciBzZXJ2ZXIgY29tcG9uZW50cyBhbmQgQVBJIHJvdXRlc1xuICogd2hlcmUgdGhlIGNsaWVudC1zaWRlIGxvZ2dlciB3aXRoIGJyb3dzZXItc3BlY2lmaWMgQVBJcyBjYW4ndCBiZSB1c2VkLlxuICovXG5cbi8qKlxuICogRm9ybWF0IGxvZyBwcmVmaXggdG8gaW5jbHVkZSB0aW1lc3RhbXAgYW5kIGNvbnRleHRcbiAqL1xuZnVuY3Rpb24gZm9ybWF0UHJlZml4KGxldmVsLCBjb250ZXh0ID0ge30pIHtcbiAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICBjb25zdCB0ZW5hbnRJZCA9IGNvbnRleHQudGVuYW50SWQgfHwgJ25vLXRlbmFudCc7XG4gIHJldHVybiBgWyR7dGltZXN0YW1wfV0gW1NFUlZFUjoke2xldmVsfV0gWyR7dGVuYW50SWR9XWA7XG59XG5cbi8qKlxuICogU2VydmVyIGxvZ2dlciBpbnN0YW5jZSB3aXRoIHN0YW5kYXJkIGxvZ2dpbmcgbWV0aG9kc1xuICovXG5leHBvcnQgY29uc3Qgc2VydmVyTG9nZ2VyID0ge1xuICAvKipcbiAgICogTG9nIGF0IERFQlVHIGxldmVsXG4gICAqL1xuICBkZWJ1ZzogKG1lc3NhZ2UsIGRhdGEsIGNvbnRleHQgPSB7fSkgPT4ge1xuICAgIGNvbnN0IHByZWZpeCA9IGZvcm1hdFByZWZpeCgnREVCVUcnLCBjb250ZXh0KTtcbiAgICBpZiAoZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKGAke3ByZWZpeH0gJHttZXNzYWdlfWAsIGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmRlYnVnKGAke3ByZWZpeH0gJHttZXNzYWdlfWApO1xuICAgIH1cbiAgfSxcbiAgXG4gIC8qKlxuICAgKiBMb2cgYXQgSU5GTyBsZXZlbFxuICAgKi9cbiAgaW5mbzogKG1lc3NhZ2UsIGRhdGEsIGNvbnRleHQgPSB7fSkgPT4ge1xuICAgIGNvbnN0IHByZWZpeCA9IGZvcm1hdFByZWZpeCgnSU5GTycsIGNvbnRleHQpO1xuICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnNvbGUuaW5mbyhgJHtwcmVmaXh9ICR7bWVzc2FnZX1gLCBkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5pbmZvKGAke3ByZWZpeH0gJHttZXNzYWdlfWApO1xuICAgIH1cbiAgfSxcbiAgXG4gIC8qKlxuICAgKiBMb2cgYXQgV0FSTiBsZXZlbFxuICAgKi9cbiAgd2FybjogKG1lc3NhZ2UsIGRhdGEsIGNvbnRleHQgPSB7fSkgPT4ge1xuICAgIGNvbnN0IHByZWZpeCA9IGZvcm1hdFByZWZpeCgnV0FSTicsIGNvbnRleHQpO1xuICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnNvbGUud2FybihgJHtwcmVmaXh9ICR7bWVzc2FnZX1gLCBkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKGAke3ByZWZpeH0gJHttZXNzYWdlfWApO1xuICAgIH1cbiAgfSxcbiAgXG4gIC8qKlxuICAgKiBMb2cgYXQgRVJST1IgbGV2ZWxcbiAgICovXG4gIGVycm9yOiAobWVzc2FnZSwgZGF0YSwgY29udGV4dCA9IHt9KSA9PiB7XG4gICAgY29uc3QgcHJlZml4ID0gZm9ybWF0UHJlZml4KCdFUlJPUicsIGNvbnRleHQpO1xuICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYCR7cHJlZml4fSAke21lc3NhZ2V9YCwgZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYCR7cHJlZml4fSAke21lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIGNvbnRleHR1YWxpemVkIHNlcnZlciBsb2dnZXIgd2l0aCBwcmUtYm91bmQgY29udGV4dFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29udGV4dHVhbFNlcnZlckxvZ2dlcihjb250ZXh0ID0ge30pIHtcbiAgcmV0dXJuIHtcbiAgICBkZWJ1ZzogKG1lc3NhZ2UsIGRhdGEpID0+IHNlcnZlckxvZ2dlci5kZWJ1ZyhtZXNzYWdlLCBkYXRhLCBjb250ZXh0KSxcbiAgICBpbmZvOiAobWVzc2FnZSwgZGF0YSkgPT4gc2VydmVyTG9nZ2VyLmluZm8obWVzc2FnZSwgZGF0YSwgY29udGV4dCksXG4gICAgd2FybjogKG1lc3NhZ2UsIGRhdGEpID0+IHNlcnZlckxvZ2dlci53YXJuKG1lc3NhZ2UsIGRhdGEsIGNvbnRleHQpLFxuICAgIGVycm9yOiAobWVzc2FnZSwgZGF0YSkgPT4gc2VydmVyTG9nZ2VyLmVycm9yKG1lc3NhZ2UsIGRhdGEsIGNvbnRleHQpXG4gIH07XG59XG5cbi8qKlxuICogTGVnYWN5IGZ1bmN0aW9uIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHdpdGggZXhpc3RpbmcgaW1wb3J0c1xuICogQ3JlYXRlcyBhIGxvZ2dlciB3aXRoIGEgbmFtZXNwYWNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXJ2ZXJMb2dnZXIobmFtZXNwYWNlID0gJ0FQSScpIHtcbiAgcmV0dXJuIHtcbiAgICBkZWJ1ZzogKG1lc3NhZ2UsIC4uLmFyZ3MpID0+IHNlcnZlckxvZ2dlci5kZWJ1ZyhgWyR7bmFtZXNwYWNlfV0gJHttZXNzYWdlfWAsIGFyZ3MubGVuZ3RoID8gYXJnc1swXSA6IHVuZGVmaW5lZCksXG4gICAgaW5mbzogKG1lc3NhZ2UsIC4uLmFyZ3MpID0+IHNlcnZlckxvZ2dlci5pbmZvKGBbJHtuYW1lc3BhY2V9XSAke21lc3NhZ2V9YCwgYXJncy5sZW5ndGggPyBhcmdzWzBdIDogdW5kZWZpbmVkKSxcbiAgICB3YXJuOiAobWVzc2FnZSwgLi4uYXJncykgPT4gc2VydmVyTG9nZ2VyLndhcm4oYFske25hbWVzcGFjZX1dICR7bWVzc2FnZX1gLCBhcmdzLmxlbmd0aCA/IGFyZ3NbMF0gOiB1bmRlZmluZWQpLFxuICAgIGVycm9yOiAobWVzc2FnZSwgLi4uYXJncykgPT4gc2VydmVyTG9nZ2VyLmVycm9yKGBbJHtuYW1lc3BhY2V9XSAke21lc3NhZ2V9YCwgYXJncy5sZW5ndGggPyBhcmdzWzBdIDogdW5kZWZpbmVkKSxcbiAgICBsb2c6IChtZXNzYWdlLCAuLi5hcmdzKSA9PiBzZXJ2ZXJMb2dnZXIuaW5mbyhgWyR7bmFtZXNwYWNlfV0gJHttZXNzYWdlfWAsIGFyZ3MubGVuZ3RoID8gYXJnc1swXSA6IHVuZGVmaW5lZClcbiAgfTtcbn1cblxuLy8gQ3JlYXRlIGEgZGVmYXVsdCBzZXJ2ZXIgbG9nZ2VyIGluc3RhbmNlIGZvciBjb21wYXRpYmlsaXR5IHdpdGggZXhpc3RpbmcgaW1wb3J0c1xuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IGNyZWF0ZVNlcnZlckxvZ2dlcignQVBJJyk7XG5cbi8vIEV4cG9ydCBpbmRpdmlkdWFsIGZ1bmN0aW9ucyBkaXJlY3RseSBmcm9tIHNlcnZlckxvZ2dlciBmb3IgY29udmVuaWVuY2VcbmV4cG9ydCBjb25zdCBkZWJ1ZyA9IHNlcnZlckxvZ2dlci5kZWJ1ZztcbmV4cG9ydCBjb25zdCBpbmZvID0gc2VydmVyTG9nZ2VyLmluZm87XG5leHBvcnQgY29uc3Qgd2FybiA9IHNlcnZlckxvZ2dlci53YXJuO1xuZXhwb3J0IGNvbnN0IGVycm9yID0gc2VydmVyTG9nZ2VyLmVycm9yO1xuXG4vLyBGb3IgQ29tbW9uSlMgY29tcGF0aWJpbGl0eVxuZXhwb3J0IGRlZmF1bHQge1xuICBzZXJ2ZXJMb2dnZXIsXG4gIGxvZ2dlcixcbiAgZGVidWcsIFxuICBpbmZvLFxuICB3YXJuLFxuICBlcnJvcixcbiAgY3JlYXRlQ29udGV4dHVhbFNlcnZlckxvZ2dlcixcbiAgY3JlYXRlU2VydmVyTG9nZ2VyXG59OyAiXSwibmFtZXMiOlsiZm9ybWF0UHJlZml4IiwibGV2ZWwiLCJjb250ZXh0IiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidGVuYW50SWQiLCJzZXJ2ZXJMb2dnZXIiLCJkZWJ1ZyIsIm1lc3NhZ2UiLCJkYXRhIiwicHJlZml4IiwidW5kZWZpbmVkIiwiY29uc29sZSIsImluZm8iLCJ3YXJuIiwiZXJyb3IiLCJjcmVhdGVDb250ZXh0dWFsU2VydmVyTG9nZ2VyIiwiY3JlYXRlU2VydmVyTG9nZ2VyIiwibmFtZXNwYWNlIiwiYXJncyIsImxlbmd0aCIsImxvZyIsImxvZ2dlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/serverLogger.js\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*******************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*******************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1","vendor-chunks/@aws-amplify+auth@6.12.1_@aws-amplify+core@6.11.1","vendor-chunks/@aws-amplify+core@6.11.1","vendor-chunks/tslib@2.8.1","vendor-chunks/@aws-crypto+sha256-js@5.2.0","vendor-chunks/@aws-crypto+util@5.2.0","vendor-chunks/@smithy+util-utf8@2.3.0","vendor-chunks/@smithy+util-buffer-from@2.2.0","vendor-chunks/@smithy+is-array-buffer@2.2.0","vendor-chunks/aws-amplify@6.14.1","vendor-chunks/js-cookie@3.0.5","vendor-chunks/uuid@9.0.1","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fuser%2Fprofile%2Froute&page=%2Fapi%2Fuser%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fprofile%2Froute.js&appDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();