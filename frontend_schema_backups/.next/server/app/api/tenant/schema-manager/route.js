/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/tenant/schema-manager/route";
exports.ids = ["app/api/tenant/schema-manager/route"];
exports.modules = {

/***/ "(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftenant%2Fschema-manager%2Froute&page=%2Fapi%2Ftenant%2Fschema-manager%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftenant%2Fschema-manager%2Froute.js&appDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftenant%2Fschema-manager%2Froute&page=%2Fapi%2Ftenant%2Fschema-manager%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftenant%2Fschema-manager%2Froute.js&appDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_kuoldeng_projectx_frontend_pyfactor_next_src_app_api_tenant_schema_manager_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/tenant/schema-manager/route.js */ \"(rsc)/./src/app/api/tenant/schema-manager/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/tenant/schema-manager/route\",\n        pathname: \"/api/tenant/schema-manager\",\n        filename: \"route\",\n        bundlePath: \"app/api/tenant/schema-manager/route\"\n    },\n    resolvedPagePath: \"/Users/kuoldeng/projectx/frontend/pyfactor_next/src/app/api/tenant/schema-manager/route.js\",\n    nextConfigOutput,\n    userland: _Users_kuoldeng_projectx_frontend_pyfactor_next_src_app_api_tenant_schema_manager_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTUuMi4yX0BiYWJlbCtjb3JlQDcuMjYuMTBfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjEvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyL2luZGV4LmpzP25hbWU9YXBwJTJGYXBpJTJGdGVuYW50JTJGc2NoZW1hLW1hbmFnZXIlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnRlbmFudCUyRnNjaGVtYS1tYW5hZ2VyJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdGVuYW50JTJGc2NoZW1hLW1hbmFnZXIlMkZyb3V0ZS5qcyZhcHBEaXI9JTJGVXNlcnMlMkZrdW9sZGVuZyUyRnByb2plY3R4JTJGZnJvbnRlbmQlMkZweWZhY3Rvcl9uZXh0JTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmt1b2xkZW5nJTJGcHJvamVjdHglMkZmcm9udGVuZCUyRnB5ZmFjdG9yX25leHQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQzBDO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMva3VvbGRlbmcvcHJvamVjdHgvZnJvbnRlbmQvcHlmYWN0b3JfbmV4dC9zcmMvYXBwL2FwaS90ZW5hbnQvc2NoZW1hLW1hbmFnZXIvcm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RlbmFudC9zY2hlbWEtbWFuYWdlci9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3RlbmFudC9zY2hlbWEtbWFuYWdlclwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdGVuYW50L3NjaGVtYS1tYW5hZ2VyL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2t1b2xkZW5nL3Byb2plY3R4L2Zyb250ZW5kL3B5ZmFjdG9yX25leHQvc3JjL2FwcC9hcGkvdGVuYW50L3NjaGVtYS1tYW5hZ2VyL3JvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftenant%2Fschema-manager%2Froute&page=%2Fapi%2Ftenant%2Fschema-manager%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftenant%2Fschema-manager%2Froute.js&appDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*******************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*******************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/tenant/schema-manager/route.js":
/*!****************************************************!*\
  !*** ./src/app/api/tenant/schema-manager/route.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pg__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v5.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _utils_serverLogger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/serverLogger */ \"(rsc)/./src/utils/serverLogger.js\");\n/* harmony import */ var _utils_db_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/utils/db-config */ \"(rsc)/./src/utils/db-config.js\");\n/* harmony import */ var _utils_uuid_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/utils/uuid-helpers */ \"(rsc)/./src/utils/uuid-helpers.js\");\n/* harmony import */ var _utils_auth_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/utils/auth-helpers */ \"(rsc)/./src/utils/auth-helpers.js\");\n\n\n\n\n\n\n\n// Dedicated logger for schema operations\nconst logger = (0,_utils_serverLogger__WEBPACK_IMPORTED_MODULE_2__.createServerLogger)('schema-manager');\n// Constants\nconst TENANT_NAMESPACE = '9a551c44-4ade-4f89-b078-0af8be794c23';\nconst LOCK_TIMEOUT = 30000; // 30 seconds timeout for locks\nconst SCHEMA_NAME_PREFIX = 'tenant_';\n// In-memory cache for active schema operations\n// This acts as a semaphore to prevent concurrent operations on the same schema\nconst activeSchemaOperations = new Map();\n/**\n * Generate a deterministic schema name from a tenant ID\n */ function generateSchemaName(tenantId) {\n    // Ensure the tenantId is a valid UUID\n    const validTenantId = (0,_utils_uuid_helpers__WEBPACK_IMPORTED_MODULE_4__.validateAndRepairUuid)(tenantId);\n    return `${SCHEMA_NAME_PREFIX}${validTenantId.replace(/-/g, '_')}`;\n}\n/**\n * Generate a deterministic tenant ID from a user ID\n */ function generateTenantIdFromUserId(userId) {\n    return (0,uuid__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(userId, TENANT_NAMESPACE);\n}\n/**\n * Create a database pool\n */ async function createPool() {\n    try {\n        const dbConfig = (0,_utils_db_config__WEBPACK_IMPORTED_MODULE_3__.getDbConfigFromEnv)();\n        return new pg__WEBPACK_IMPORTED_MODULE_1__.Pool(dbConfig);\n    } catch (error) {\n        logger.error('Failed to create database pool:', error);\n        throw error;\n    }\n}\n/**\n * Check if a schema exists in the database\n */ async function schemaExists(pool, schemaName) {\n    const result = await pool.query(`\n    SELECT EXISTS (\n      SELECT 1 FROM information_schema.schemata \n      WHERE schema_name = $1\n    );\n  `, [\n        schemaName\n    ]);\n    return result.rows[0].exists;\n}\n/**\n * Check if a tenant record exists in the database\n */ async function tenantExists(pool, tenantId) {\n    const result = await pool.query(`\n    SELECT EXISTS (\n      SELECT 1 FROM custom_auth_tenant \n      WHERE id = $1\n    );\n  `, [\n        tenantId\n    ]);\n    return result.rows[0].exists;\n}\n/**\n * Acquire a lock for schema operations\n * Returns true if lock acquired, false if already locked\n */ function acquireSchemaLock(schemaName, operation) {\n    if (activeSchemaOperations.has(schemaName)) {\n        return false;\n    }\n    // Set the lock with operation details and timestamp\n    activeSchemaOperations.set(schemaName, {\n        operation,\n        timestamp: Date.now(),\n        lockId: (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])()\n    });\n    return true;\n}\n/**\n * Release a schema lock\n */ function releaseSchemaLock(schemaName, lockId) {\n    const lock = activeSchemaOperations.get(schemaName);\n    // Only release if lockId matches or if lock has timed out\n    if (lock && (lock.lockId === lockId || Date.now() - lock.timestamp > LOCK_TIMEOUT)) {\n        activeSchemaOperations.delete(schemaName);\n        return true;\n    }\n    return false;\n}\n/**\n * Clean up expired locks\n */ function cleanupExpiredLocks() {\n    const now = Date.now();\n    for (const [schemaName, lock] of activeSchemaOperations.entries()){\n        if (now - lock.timestamp > LOCK_TIMEOUT) {\n            logger.warn(`Cleaning up expired lock for schema ${schemaName}, operation: ${lock.operation}`);\n            activeSchemaOperations.delete(schemaName);\n        }\n    }\n}\n/**\n * Create a schema if it doesn't exist\n */ async function createSchemaIfNotExists(pool, schemaName, tenantId, businessName, userId) {\n    logger.info(`Creating schema if not exists: ${schemaName} for tenant ${tenantId}`);\n    // Acquire lock for creating the schema\n    const lockId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n    if (!acquireSchemaLock(schemaName, 'create_schema')) {\n        logger.warn(`Schema creation already in progress for ${schemaName}`);\n        return {\n            success: false,\n            message: 'Schema creation already in progress',\n            locked: true\n        };\n    }\n    try {\n        // First check if schema already exists\n        const exists = await schemaExists(pool, schemaName);\n        if (exists) {\n            logger.info(`Schema ${schemaName} already exists, skipping creation`);\n            // If schema exists but tenant doesn't have a proper name, try to update it\n            if (businessName) {\n                try {\n                    // Check if tenant record exists with default/generic name\n                    const tenantCheck = await pool.query(`\n            SELECT id, name FROM custom_auth_tenant \n            WHERE id = $1 AND (name = 'Default Business' OR name = '')\n          `, [\n                        tenantId\n                    ]);\n                    if (tenantCheck.rows && tenantCheck.rows.length > 0) {\n                        // Update tenant name with real business name\n                        await pool.query(`\n              UPDATE custom_auth_tenant \n              SET name = $1, updated_at = NOW()\n              WHERE id = $2\n            `, [\n                            businessName,\n                            tenantId\n                        ]);\n                        logger.info(`Updated generic tenant name to real business name: ${businessName}`);\n                    }\n                } catch (updateError) {\n                    logger.warn(`Failed to update tenant name: ${updateError.message}`);\n                }\n            }\n            return {\n                success: true,\n                message: 'Schema already exists',\n                schemaName,\n                tenantId,\n                exists: true,\n                created: false\n            };\n        }\n        // Schema doesn't exist, create it\n        logger.info(`Creating new schema: ${schemaName}`);\n        // Begin a transaction for atomicity\n        await pool.query('BEGIN');\n        // Create the schema\n        await pool.query(`CREATE SCHEMA IF NOT EXISTS \"${schemaName}\";`);\n        // Create tenant record only if we have a real business name\n        let tenantResult = null;\n        if (businessName) {\n            tenantResult = await pool.query(`\n        INSERT INTO custom_auth_tenant (\n          id, name, owner_id, schema_name, created_at, updated_at,\n          rls_enabled, rls_setup_date\n        )\n        VALUES ($1, $2, $3, $4, NOW(), NOW(), true, NOW())\n        ON CONFLICT (id) DO UPDATE \n        SET name = EXCLUDED.name, \n            updated_at = NOW()\n        RETURNING id, name, schema_name, owner_id, rls_enabled;\n      `, [\n                tenantId,\n                businessName,\n                userId,\n                schemaName\n            ]);\n        } else {\n            // Without a business name, only create the schema - don't add to tenant table\n            logger.warn(`Skipping tenant record creation for ${tenantId} - no business name provided`);\n        }\n        // Set up permissions\n        await pool.query(`GRANT USAGE ON SCHEMA \"${schemaName}\" TO dott_admin;`);\n        await pool.query(`GRANT ALL PRIVILEGES ON SCHEMA \"${schemaName}\" TO dott_admin;`);\n        // Commit the transaction\n        await pool.query('COMMIT');\n        logger.info(`Successfully created schema ${schemaName} and tenant record`);\n        return {\n            success: true,\n            message: 'Schema created successfully',\n            schemaName,\n            tenantId,\n            tenantInfo: tenantResult?.rows[0] || null,\n            exists: false,\n            created: true\n        };\n    } catch (error) {\n        // Roll back the transaction if anything fails\n        try {\n            await pool.query('ROLLBACK');\n        } catch (rollbackError) {\n            logger.error(`Error during rollback: ${rollbackError.message}`);\n        }\n        logger.error(`Error creating schema: ${error.message}`, error);\n        return {\n            success: false,\n            message: `Failed to create schema: ${error.message}`,\n            error: error.message\n        };\n    } finally{\n        // Always release the lock\n        releaseSchemaLock(schemaName, lockId);\n    }\n}\n/**\n * Check if a schema exists without attempting to create it\n */ async function GET(request) {\n    cleanupExpiredLocks(); // Clean up any expired locks\n    // Parse query parameters\n    const url = new URL(request.url);\n    const tenantId = url.searchParams.get('tenantId');\n    if (!tenantId || !(0,_utils_uuid_helpers__WEBPACK_IMPORTED_MODULE_4__.isUUID)(tenantId)) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Invalid or missing tenant ID'\n        }, {\n            status: 400\n        });\n    }\n    const schemaName = generateSchemaName(tenantId);\n    try {\n        const pool = await createPool();\n        try {\n            // Check if schema exists\n            const exists = await schemaExists(pool, schemaName);\n            // Also check if tenant record exists\n            const tenantExists = await pool.query(`\n        SELECT id, name, schema_name, owner_id, created_at, updated_at, rls_enabled\n        FROM custom_auth_tenant\n        WHERE id = $1\n      `, [\n                tenantId\n            ]);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                schemaExists: exists,\n                tenantExists: tenantExists.rows.length > 0,\n                tenantInfo: tenantExists.rows.length > 0 ? tenantExists.rows[0] : null,\n                schemaName,\n                tenantId\n            });\n        } finally{\n            await pool.end();\n        }\n    } catch (error) {\n        logger.error(`Error checking schema existence: ${error.message}`, error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Failed to check schema existence',\n            message: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * Create a schema for a tenant\n */ async function POST(request) {\n    cleanupExpiredLocks(); // Clean up any expired locks\n    try {\n        // Get authentication information\n        const auth = await (0,_utils_auth_helpers__WEBPACK_IMPORTED_MODULE_5__.getAuth)();\n        // Parse request body\n        const body = await request.json();\n        // Check whether to force create or not\n        const forceCreate = body.forceCreate === true;\n        // Get tenant ID from request or generate a new one\n        let tenantId = body.tenantId;\n        // If no tenant ID provided but user ID is available, generate deterministic tenant ID\n        if (!tenantId && body.userId && forceCreate) {\n            tenantId = generateTenantIdFromUserId(body.userId);\n        } else if (!tenantId && auth.user?.sub && forceCreate) {\n            tenantId = generateTenantIdFromUserId(auth.user.sub);\n        } else if (!tenantId && forceCreate) {\n            tenantId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n        } else if (!tenantId && !forceCreate) {\n            logger.warn('No tenant ID provided and forceCreate is false, refusing to create a new tenant');\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: 'No tenant ID provided and tenant creation not explicitly requested'\n            }, {\n                status: 400\n            });\n        }\n        // Ensure tenant ID is valid\n        tenantId = (0,_utils_uuid_helpers__WEBPACK_IMPORTED_MODULE_4__.validateAndRepairUuid)(tenantId);\n        // Get user ID from request or auth\n        const userId = body.userId || auth.user?.sub || null;\n        // Get business name from request or auth - ONLY use real data, no defaults\n        const businessName = body.businessName || auth.user?.businessName || null;\n        // If no real business name is provided, log warning but continue with schema creation\n        if (!businessName) {\n            logger.warn(`No real business name provided for tenant ${tenantId}, schema will be created but tenant record may be incomplete`);\n        }\n        // Generate schema name\n        const schemaName = generateSchemaName(tenantId);\n        logger.info(`Processing schema creation request for tenant ${tenantId}, schema ${schemaName}`);\n        // Create database pool\n        const pool = await createPool();\n        try {\n            // Check if schema exists first\n            const exists = await schemaExists(pool, schemaName);\n            // If schema doesn't exist and forceCreate is false, return error\n            if (!exists && !forceCreate) {\n                logger.warn(`Schema ${schemaName} doesn't exist and forceCreate is false, refusing to create`);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    message: 'Schema does not exist and creation not explicitly requested',\n                    tenantId,\n                    schemaName,\n                    exists: false\n                }, {\n                    status: 400\n                });\n            }\n            // Create schema if it doesn't exist (and we have permission to create it)\n            const result = await createSchemaIfNotExists(pool, schemaName, tenantId, businessName, userId);\n            // Check if operation is locked by another process\n            if (!result.success && result.locked) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    message: 'Schema creation already in progress',\n                    tenantId,\n                    schemaName\n                }, {\n                    status: 409\n                } // Conflict\n                );\n            }\n            // Return the result\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(result, {\n                status: result.success ? 200 : 500\n            });\n        } finally{\n            await pool.end();\n        }\n    } catch (error) {\n        logger.error(`Error in schema creation endpoint: ${error.message}`, error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Schema creation failed',\n            message: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS90ZW5hbnQvc2NoZW1hLW1hbmFnZXIvcm91dGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBMkM7QUFDakI7QUFDd0I7QUFDUTtBQUNIO0FBQ2M7QUFDdEI7QUFFL0MseUNBQXlDO0FBQ3pDLE1BQU1XLFNBQVNMLHVFQUFrQkEsQ0FBQztBQUVsQyxZQUFZO0FBQ1osTUFBTU0sbUJBQW1CO0FBQ3pCLE1BQU1DLGVBQWUsT0FBTywrQkFBK0I7QUFDM0QsTUFBTUMscUJBQXFCO0FBRTNCLCtDQUErQztBQUMvQywrRUFBK0U7QUFDL0UsTUFBTUMseUJBQXlCLElBQUlDO0FBRW5DOztDQUVDLEdBQ0QsU0FBU0MsbUJBQW1CQyxRQUFRO0lBQ2xDLHNDQUFzQztJQUN0QyxNQUFNQyxnQkFBZ0JWLDBFQUFxQkEsQ0FBQ1M7SUFDNUMsT0FBTyxHQUFHSixxQkFBcUJLLGNBQWNDLE9BQU8sQ0FBQyxNQUFNLE1BQU07QUFDbkU7QUFFQTs7Q0FFQyxHQUNELFNBQVNDLDJCQUEyQkMsTUFBTTtJQUN4QyxPQUFPakIsZ0RBQU1BLENBQUNpQixRQUFRVjtBQUN4QjtBQUVBOztDQUVDLEdBQ0QsZUFBZVc7SUFDYixJQUFJO1FBQ0YsTUFBTUMsV0FBV2pCLG9FQUFrQkE7UUFDbkMsT0FBTyxJQUFJTixvQ0FBSUEsQ0FBQ3VCO0lBQ2xCLEVBQUUsT0FBT0MsT0FBTztRQUNkZCxPQUFPYyxLQUFLLENBQUMsbUNBQW1DQTtRQUNoRCxNQUFNQTtJQUNSO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNELGVBQWVDLGFBQWFDLElBQUksRUFBRUMsVUFBVTtJQUMxQyxNQUFNQyxTQUFTLE1BQU1GLEtBQUtHLEtBQUssQ0FBQyxDQUFDOzs7OztFQUtqQyxDQUFDLEVBQUU7UUFBQ0Y7S0FBVztJQUVmLE9BQU9DLE9BQU9FLElBQUksQ0FBQyxFQUFFLENBQUNDLE1BQU07QUFDOUI7QUFFQTs7Q0FFQyxHQUNELGVBQWVDLGFBQWFOLElBQUksRUFBRVQsUUFBUTtJ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QUNsRCxJQUFJLENBQUNPLE9BQU91QixPQUFPLElBQUl2QixPQUFPeUIsTUFBTSxFQUFFO2dCQUNwQyxPQUFPdEQscURBQVlBLENBQUNtRSxJQUFJLENBQ3RCO29CQUNFZixTQUFTO29CQUNUQyxTQUFTO29CQUNUbkM7b0JBQ0FVO2dCQUNGLEdBQ0E7b0JBQUV3QyxRQUFRO2dCQUFJLEVBQUUsV0FBVzs7WUFFL0I7WUFFQSxvQkFBb0I7WUFDcEIsT0FBT3BFLHFEQUFZQSxDQUFDbUUsSUFBSSxDQUFDdEMsUUFBUTtnQkFDL0J1QyxRQUFRdkMsT0FBT3VCLE9BQU8sR0FBRyxNQUFNO1lBQ2pDO1FBQ0YsU0FBVTtZQUNSLE1BQU16QixLQUFLMEMsR0FBRztRQUNoQjtJQUNGLEVBQUUsT0FBTzVDLE9BQU87UUFDZGQsT0FBT2MsS0FBSyxDQUFDLENBQUMsbUNBQW1DLEVBQUVBLE1BQU00QixPQUFPLEVBQUUsRUFBRTVCO1FBRXBFLE9BQU96QixxREFBWUEsQ0FBQ21FLElBQUksQ0FDdEI7WUFBRTFDLE9BQU87WUFBMEI0QixTQUFTNUIsTUFBTTRCLE9BQU87UUFBQyxHQUMxRDtZQUFFZSxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2t1b2xkZW5nL3Byb2plY3R4L2Zyb250ZW5kL3B5ZmFjdG9yX25leHQvc3JjL2FwcC9hcGkvdGVuYW50L3NjaGVtYS1tYW5hZ2VyL3JvdXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IFBvb2wgfSBmcm9tICdwZyc7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQsIHY1IGFzIHV1aWR2NSB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgY3JlYXRlU2VydmVyTG9nZ2VyIH0gZnJvbSAnQC91dGlscy9zZXJ2ZXJMb2dnZXInO1xuaW1wb3J0IHsgZ2V0RGJDb25maWdGcm9tRW52IH0gZnJvbSAnQC91dGlscy9kYi1jb25maWcnO1xuaW1wb3J0IHsgaXNVVUlELCB2YWxpZGF0ZUFuZFJlcGFpclV1aWQgfSBmcm9tICdAL3V0aWxzL3V1aWQtaGVscGVycyc7XG5pbXBvcnQgeyBnZXRBdXRoIH0gZnJvbSAnQC91dGlscy9hdXRoLWhlbHBlcnMnO1xuXG4vLyBEZWRpY2F0ZWQgbG9nZ2VyIGZvciBzY2hlbWEgb3BlcmF0aW9uc1xuY29uc3QgbG9nZ2VyID0gY3JlYXRlU2VydmVyTG9nZ2VyKCdzY2hlbWEtbWFuYWdlcicpO1xuXG4vLyBDb25zdGFudHNcbmNvbnN0IFRFTkFOVF9OQU1FU1BBQ0UgPSAnOWE1NTFjNDQtNGFkZS00Zjg5LWIwNzgtMGFmOGJlNzk0YzIzJztcbmNvbnN0IExPQ0tfVElNRU9VVCA9IDMwMDAwOyAvLyAzMCBzZWNvbmRzIHRpbWVvdXQgZm9yIGxvY2tzXG5jb25zdCBTQ0hFTUFfTkFNRV9QUkVGSVggPSAndGVuYW50Xyc7XG5cbi8vIEluLW1lbW9yeSBjYWNoZSBmb3IgYWN0aXZlIHNjaGVtYSBvcGVyYXRpb25zXG4vLyBUaGlzIGFjdHMgYXMgYSBzZW1hcGhvcmUgdG8gcHJldmVudCBjb25jdXJyZW50IG9wZXJhdGlvbnMgb24gdGhlIHNhbWUgc2NoZW1hXG5jb25zdCBhY3RpdmVTY2hlbWFPcGVyYXRpb25zID0gbmV3IE1hcCgpO1xuXG4vKipcbiAqIEdlbmVyYXRlIGEgZGV0ZXJtaW5pc3RpYyBzY2hlbWEgbmFtZSBmcm9tIGEgdGVuYW50IElEXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlU2NoZW1hTmFtZSh0ZW5hbnRJZCkge1xuICAvLyBFbnN1cmUgdGhlIHRlbmFudElkIGlzIGEgdmFsaWQgVVVJRFxuICBjb25zdCB2YWxpZFRlbmFudElkID0gdmFsaWRhdGVBbmRSZXBhaXJVdWlkKHRlbmFudElkKTtcbiAgcmV0dXJuIGAke1NDSEVNQV9OQU1FX1BSRUZJWH0ke3ZhbGlkVGVuYW50SWQucmVwbGFjZSgvLS9nLCAnXycpfWA7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSBkZXRlcm1pbmlzdGljIHRlbmFudCBJRCBmcm9tIGEgdXNlciBJRFxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVRlbmFudElkRnJvbVVzZXJJZCh1c2VySWQpIHtcbiAgcmV0dXJuIHV1aWR2NSh1c2VySWQsIFRFTkFOVF9OQU1FU1BBQ0UpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGRhdGFiYXNlIHBvb2xcbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlUG9vbCgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYkNvbmZpZyA9IGdldERiQ29uZmlnRnJvbUVudigpO1xuICAgIHJldHVybiBuZXcgUG9vbChkYkNvbmZpZyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGRhdGFiYXNlIHBvb2w6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBzY2hlbWEgZXhpc3RzIGluIHRoZSBkYXRhYmFzZVxuICovXG5hc3luYyBmdW5jdGlvbiBzY2hlbWFFeGlzdHMocG9vbCwgc2NoZW1hTmFtZSkge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICBTRUxFQ1QgRVhJU1RTIChcbiAgICAgIFNFTEVDVCAxIEZST00gaW5mb3JtYXRpb25fc2NoZW1hLnNjaGVtYXRhIFxuICAgICAgV0hFUkUgc2NoZW1hX25hbWUgPSAkMVxuICAgICk7XG4gIGAsIFtzY2hlbWFOYW1lXSk7XG4gIFxuICByZXR1cm4gcmVzdWx0LnJvd3NbMF0uZXhpc3RzO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgdGVuYW50IHJlY29yZCBleGlzdHMgaW4gdGhlIGRhdGFiYXNlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHRlbmFudEV4aXN0cyhwb29sLCB0ZW5hbnRJZCkge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICBTRUxFQ1QgRVhJU1RTIChcbiAgICAgIFNFTEVDVCAxIEZST00gY3VzdG9tX2F1dGhfdGVuYW50IFxuICAgICAgV0hFUkUgaWQgPSAkMVxuICAgICk7XG4gIGAsIFt0ZW5hbnRJZF0pO1xuICBcbiAgcmV0dXJuIHJlc3VsdC5yb3dzWzBdLmV4aXN0cztcbn1cblxuLyoqXG4gKiBBY3F1aXJlIGEgbG9jayBmb3Igc2NoZW1hIG9wZXJhdGlvbnNcbiAqIFJldHVybnMgdHJ1ZSBpZiBsb2NrIGFjcXVpcmVkLCBmYWxzZSBpZiBhbHJlYWR5IGxvY2tlZFxuICovXG5mdW5jdGlvbiBhY3F1aXJlU2NoZW1hTG9jayhzY2hlbWFOYW1lLCBvcGVyYXRpb24pIHtcbiAgaWYgKGFjdGl2ZVNjaGVtYU9wZXJhdGlvbnMuaGFzKHNjaGVtYU5hbWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICAvLyBTZXQgdGhlIGxvY2sgd2l0aCBvcGVyYXRpb24gZGV0YWlscyBhbmQgdGltZXN0YW1wXG4gIGFjdGl2ZVNjaGVtYU9wZXJhdGlvbnMuc2V0KHNjaGVtYU5hbWUsIHtcbiAgICBvcGVyYXRpb24sXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIGxvY2tJZDogdXVpZHY0KClcbiAgfSk7XG4gIFxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBSZWxlYXNlIGEgc2NoZW1hIGxvY2tcbiAqL1xuZnVuY3Rpb24gcmVsZWFzZVNjaGVtYUxvY2soc2NoZW1hTmFtZSwgbG9ja0lkKSB7XG4gIGNvbnN0IGxvY2sgPSBhY3RpdmVTY2hlbWFPcGVyYXRpb25zLmdldChzY2hlbWFOYW1lKTtcbiAgXG4gIC8vIE9ubHkgcmVsZWFzZSBpZiBsb2NrSWQgbWF0Y2hlcyBvciBpZiBsb2NrIGhhcyB0aW1lZCBvdXRcbiAgaWYgKGxvY2sgJiYgKGxvY2subG9ja0lkID09PSBsb2NrSWQgfHwgRGF0ZS5ub3coKSAtIGxvY2sudGltZXN0YW1wID4gTE9DS19USU1FT1VUKSkge1xuICAgIGFjdGl2ZVNjaGVtYU9wZXJhdGlvbnMuZGVsZXRlKHNjaGVtYU5hbWUpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIFxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQ2xlYW4gdXAgZXhwaXJlZCBsb2Nrc1xuICovXG5mdW5jdGlvbiBjbGVhbnVwRXhwaXJlZExvY2tzKCkge1xuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICBmb3IgKGNvbnN0IFtzY2hlbWFOYW1lLCBsb2NrXSBvZiBhY3RpdmVTY2hlbWFPcGVyYXRpb25zLmVudHJpZXMoKSkge1xuICAgIGlmIChub3cgLSBsb2NrLnRpbWVzdGFtcCA+IExPQ0tfVElNRU9VVCkge1xuICAgICAgbG9nZ2VyLndhcm4oYENsZWFuaW5nIHVwIGV4cGlyZWQgbG9jayBmb3Igc2NoZW1hICR7c2NoZW1hTmFtZX0sIG9wZXJhdGlvbjogJHtsb2NrLm9wZXJhdGlvbn1gKTtcbiAgICAgIGFjdGl2ZVNjaGVtYU9wZXJhdGlvbnMuZGVsZXRlKHNjaGVtYU5hbWUpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhIHNjaGVtYSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNjaGVtYUlmTm90RXhpc3RzKHBvb2wsIHNjaGVtYU5hbWUsIHRlbmFudElkLCBidXNpbmVzc05hbWUsIHVzZXJJZCkge1xuICBsb2dnZXIuaW5mbyhgQ3JlYXRpbmcgc2NoZW1hIGlmIG5vdCBleGlzdHM6ICR7c2NoZW1hTmFtZX0gZm9yIHRlbmFudCAke3RlbmFudElkfWApO1xuICBcbiAgLy8gQWNxdWlyZSBsb2NrIGZvciBjcmVhdGluZyB0aGUgc2NoZW1hXG4gIGNvbnN0IGxvY2tJZCA9IHV1aWR2NCgpO1xuICBpZiAoIWFjcXVpcmVTY2hlbWFMb2NrKHNjaGVtYU5hbWUsICdjcmVhdGVfc2NoZW1hJykpIHtcbiAgICBsb2dnZXIud2FybihgU2NoZW1hIGNyZWF0aW9uIGFscmVhZHkgaW4gcHJvZ3Jlc3MgZm9yICR7c2NoZW1hTmFtZX1gKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnU2NoZW1hIGNyZWF0aW9uIGFscmVhZHkgaW4gcHJvZ3Jlc3MnLFxuICAgICAgbG9ja2VkOiB0cnVlXG4gICAgfTtcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICAvLyBGaXJzdCBjaGVjayBpZiBzY2hlbWEgYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBleGlzdHMgPSBhd2FpdCBzY2hlbWFFeGlzdHMocG9vbCwgc2NoZW1hTmFtZSk7XG4gICAgXG4gICAgaWYgKGV4aXN0cykge1xuICAgICAgbG9nZ2VyLmluZm8oYFNjaGVtYSAke3NjaGVtYU5hbWV9IGFscmVhZHkgZXhpc3RzLCBza2lwcGluZyBjcmVhdGlvbmApO1xuICAgICAgXG4gICAgICAvLyBJZiBzY2hlbWEgZXhpc3RzIGJ1dCB0ZW5hbnQgZG9lc24ndCBoYXZlIGEgcHJvcGVyIG5hbWUsIHRyeSB0byB1cGRhdGUgaXRcbiAgICAgIGlmIChidXNpbmVzc05hbWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBDaGVjayBpZiB0ZW5hbnQgcmVjb3JkIGV4aXN0cyB3aXRoIGRlZmF1bHQvZ2VuZXJpYyBuYW1lXG4gICAgICAgICAgY29uc3QgdGVuYW50Q2hlY2sgPSBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICAgICAgICAgIFNFTEVDVCBpZCwgbmFtZSBGUk9NIGN1c3RvbV9hdXRoX3RlbmFudCBcbiAgICAgICAgICAgIFdIRVJFIGlkID0gJDEgQU5EIChuYW1lID0gJ0RlZmF1bHQgQnVzaW5lc3MnIE9SIG5hbWUgPSAnJylcbiAgICAgICAgICBgLCBbdGVuYW50SWRdKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAodGVuYW50Q2hlY2sucm93cyAmJiB0ZW5hbnRDaGVjay5yb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0ZW5hbnQgbmFtZSB3aXRoIHJlYWwgYnVzaW5lc3MgbmFtZVxuICAgICAgICAgICAgYXdhaXQgcG9vbC5xdWVyeShgXG4gICAgICAgICAgICAgIFVQREFURSBjdXN0b21fYXV0aF90ZW5hbnQgXG4gICAgICAgICAgICAgIFNFVCBuYW1lID0gJDEsIHVwZGF0ZWRfYXQgPSBOT1coKVxuICAgICAgICAgICAgICBXSEVSRSBpZCA9ICQyXG4gICAgICAgICAgICBgLCBbYnVzaW5lc3NOYW1lLCB0ZW5hbnRJZF0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhgVXBkYXRlZCBnZW5lcmljIHRlbmFudCBuYW1lIHRvIHJlYWwgYnVzaW5lc3MgbmFtZTogJHtidXNpbmVzc05hbWV9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoICh1cGRhdGVFcnJvcikge1xuICAgICAgICAgIGxvZ2dlci53YXJuKGBGYWlsZWQgdG8gdXBkYXRlIHRlbmFudCBuYW1lOiAke3VwZGF0ZUVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ1NjaGVtYSBhbHJlYWR5IGV4aXN0cycsXG4gICAgICAgIHNjaGVtYU5hbWUsXG4gICAgICAgIHRlbmFudElkLFxuICAgICAgICBleGlzdHM6IHRydWUsXG4gICAgICAgIGNyZWF0ZWQ6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBTY2hlbWEgZG9lc24ndCBleGlzdCwgY3JlYXRlIGl0XG4gICAgbG9nZ2VyLmluZm8oYENyZWF0aW5nIG5ldyBzY2hlbWE6ICR7c2NoZW1hTmFtZX1gKTtcbiAgICBcbiAgICAvLyBCZWdpbiBhIHRyYW5zYWN0aW9uIGZvciBhdG9taWNpdHlcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KCdCRUdJTicpO1xuICAgIFxuICAgIC8vIENyZWF0ZSB0aGUgc2NoZW1hXG4gICAgYXdhaXQgcG9vbC5xdWVyeShgQ1JFQVRFIFNDSEVNQSBJRiBOT1QgRVhJU1RTIFwiJHtzY2hlbWFOYW1lfVwiO2ApO1xuICAgIFxuICAgIC8vIENyZWF0ZSB0ZW5hbnQgcmVjb3JkIG9ubHkgaWYgd2UgaGF2ZSBhIHJlYWwgYnVzaW5lc3MgbmFtZVxuICAgIGxldCB0ZW5hbnRSZXN1bHQgPSBudWxsO1xuICAgIGlmIChidXNpbmVzc05hbWUpIHtcbiAgICAgIHRlbmFudFJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoYFxuICAgICAgICBJTlNFUlQgSU5UTyBjdXN0b21fYXV0aF90ZW5hbnQgKFxuICAgICAgICAgIGlkLCBuYW1lLCBvd25lcl9pZCwgc2NoZW1hX25hbWUsIGNyZWF0ZWRfYXQsIHVwZGF0ZWRfYXQsXG4gICAgICAgICAgcmxzX2VuYWJsZWQsIHJsc19zZXR1cF9kYXRlXG4gICAgICAgIClcbiAgICAgICAgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgTk9XKCksIE5PVygpLCB0cnVlLCBOT1coKSlcbiAgICAgICAgT04gQ09ORkxJQ1QgKGlkKSBETyBVUERBVEUgXG4gICAgICAgIFNFVCBuYW1lID0gRVhDTFVERUQubmFtZSwgXG4gICAgICAgICAgICB1cGRhdGVkX2F0ID0gTk9XKClcbiAgICAgICAgUkVUVVJOSU5HIGlkLCBuYW1lLCBzY2hlbWFfbmFtZSwgb3duZXJfaWQsIHJsc19lbmFibGVkO1xuICAgICAgYCwgW3RlbmFudElkLCBidXNpbmVzc05hbWUsIHVzZXJJZCwgc2NoZW1hTmFtZV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBXaXRob3V0IGEgYnVzaW5lc3MgbmFtZSwgb25seSBjcmVhdGUgdGhlIHNjaGVtYSAtIGRvbid0IGFkZCB0byB0ZW5hbnQgdGFibGVcbiAgICAgIGxvZ2dlci53YXJuKGBTa2lwcGluZyB0ZW5hbnQgcmVjb3JkIGNyZWF0aW9uIGZvciAke3RlbmFudElkfSAtIG5vIGJ1c2luZXNzIG5hbWUgcHJvdmlkZWRgKTtcbiAgICB9XG4gICAgXG4gICAgLy8gU2V0IHVwIHBlcm1pc3Npb25zXG4gICAgYXdhaXQgcG9vbC5xdWVyeShgR1JBTlQgVVNBR0UgT04gU0NIRU1BIFwiJHtzY2hlbWFOYW1lfVwiIFRPIGRvdHRfYWRtaW47YCk7XG4gICAgYXdhaXQgcG9vbC5xdWVyeShgR1JBTlQgQUxMIFBSSVZJTEVHRVMgT04gU0NIRU1BIFwiJHtzY2hlbWFOYW1lfVwiIFRPIGRvdHRfYWRtaW47YCk7XG4gICAgXG4gICAgLy8gQ29tbWl0IHRoZSB0cmFuc2FjdGlvblxuICAgIGF3YWl0IHBvb2wucXVlcnkoJ0NPTU1JVCcpO1xuICAgIFxuICAgIGxvZ2dlci5pbmZvKGBTdWNjZXNzZnVsbHkgY3JlYXRlZCBzY2hlbWEgJHtzY2hlbWFOYW1lfSBhbmQgdGVuYW50IHJlY29yZGApO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ1NjaGVtYSBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICBzY2hlbWFOYW1lLFxuICAgICAgdGVuYW50SWQsXG4gICAgICB0ZW5hbnRJbmZvOiB0ZW5hbnRSZXN1bHQ/LnJvd3NbMF0gfHwgbnVsbCxcbiAgICAgIGV4aXN0czogZmFsc2UsXG4gICAgICBjcmVhdGVkOiB0cnVlXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBSb2xsIGJhY2sgdGhlIHRyYW5zYWN0aW9uIGlmIGFueXRoaW5nIGZhaWxzXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHBvb2wucXVlcnkoJ1JPTExCQUNLJyk7XG4gICAgfSBjYXRjaCAocm9sbGJhY2tFcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBkdXJpbmcgcm9sbGJhY2s6ICR7cm9sbGJhY2tFcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICBcbiAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGNyZWF0aW5nIHNjaGVtYTogJHtlcnJvci5tZXNzYWdlfWAsIGVycm9yKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGNyZWF0ZSBzY2hlbWE6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICB9O1xuICB9IGZpbmFsbHkge1xuICAgIC8vIEFsd2F5cyByZWxlYXNlIHRoZSBsb2NrXG4gICAgcmVsZWFzZVNjaGVtYUxvY2soc2NoZW1hTmFtZSwgbG9ja0lkKTtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgc2NoZW1hIGV4aXN0cyB3aXRob3V0IGF0dGVtcHRpbmcgdG8gY3JlYXRlIGl0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdCkge1xuICBjbGVhbnVwRXhwaXJlZExvY2tzKCk7IC8vIENsZWFuIHVwIGFueSBleHBpcmVkIGxvY2tzXG4gIFxuICAvLyBQYXJzZSBxdWVyeSBwYXJhbWV0ZXJzXG4gIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICBjb25zdCB0ZW5hbnRJZCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCd0ZW5hbnRJZCcpO1xuICBcbiAgaWYgKCF0ZW5hbnRJZCB8fCAhaXNVVUlEKHRlbmFudElkKSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdJbnZhbGlkIG9yIG1pc3NpbmcgdGVuYW50IElEJyB9LFxuICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgKTtcbiAgfVxuICBcbiAgY29uc3Qgc2NoZW1hTmFtZSA9IGdlbmVyYXRlU2NoZW1hTmFtZSh0ZW5hbnRJZCk7XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHBvb2wgPSBhd2FpdCBjcmVhdGVQb29sKCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGlmIHNjaGVtYSBleGlzdHNcbiAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHNjaGVtYUV4aXN0cyhwb29sLCBzY2hlbWFOYW1lKTtcbiAgICAgIFxuICAgICAgLy8gQWxzbyBjaGVjayBpZiB0ZW5hbnQgcmVjb3JkIGV4aXN0c1xuICAgICAgY29uc3QgdGVuYW50RXhpc3RzID0gYXdhaXQgcG9vbC5xdWVyeShgXG4gICAgICAgIFNFTEVDVCBpZCwgbmFtZSwgc2NoZW1hX25hbWUsIG93bmVyX2lkLCBjcmVhdGVkX2F0LCB1cGRhdGVkX2F0LCBybHNfZW5hYmxlZFxuICAgICAgICBGUk9NIGN1c3RvbV9hdXRoX3RlbmFudFxuICAgICAgICBXSEVSRSBpZCA9ICQxXG4gICAgICBgLCBbdGVuYW50SWRdKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgc2NoZW1hRXhpc3RzOiBleGlzdHMsXG4gICAgICAgIHRlbmFudEV4aXN0czogdGVuYW50RXhpc3RzLnJvd3MubGVuZ3RoID4gMCxcbiAgICAgICAgdGVuYW50SW5mbzogdGVuYW50RXhpc3RzLnJvd3MubGVuZ3RoID4gMCA/IHRlbmFudEV4aXN0cy5yb3dzWzBdIDogbnVsbCxcbiAgICAgICAgc2NoZW1hTmFtZSxcbiAgICAgICAgdGVuYW50SWRcbiAgICAgIH0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBhd2FpdCBwb29sLmVuZCgpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGNoZWNraW5nIHNjaGVtYSBleGlzdGVuY2U6ICR7ZXJyb3IubWVzc2FnZX1gLCBlcnJvcik7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBjaGVjayBzY2hlbWEgZXhpc3RlbmNlJywgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhIHNjaGVtYSBmb3IgYSB0ZW5hbnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdCkge1xuICBjbGVhbnVwRXhwaXJlZExvY2tzKCk7IC8vIENsZWFuIHVwIGFueSBleHBpcmVkIGxvY2tzXG4gIFxuICB0cnkge1xuICAgIC8vIEdldCBhdXRoZW50aWNhdGlvbiBpbmZvcm1hdGlvblxuICAgIGNvbnN0IGF1dGggPSBhd2FpdCBnZXRBdXRoKCk7XG4gICAgXG4gICAgLy8gUGFyc2UgcmVxdWVzdCBib2R5XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIFxuICAgIC8vIENoZWNrIHdoZXRoZXIgdG8gZm9yY2UgY3JlYXRlIG9yIG5vdFxuICAgIGNvbnN0IGZvcmNlQ3JlYXRlID0gYm9keS5mb3JjZUNyZWF0ZSA9PT0gdHJ1ZTtcbiAgICBcbiAgICAvLyBHZXQgdGVuYW50IElEIGZyb20gcmVxdWVzdCBvciBnZW5lcmF0ZSBhIG5ldyBvbmVcbiAgICBsZXQgdGVuYW50SWQgPSBib2R5LnRlbmFudElkO1xuICAgIFxuICAgIC8vIElmIG5vIHRlbmFudCBJRCBwcm92aWRlZCBidXQgdXNlciBJRCBpcyBhdmFpbGFibGUsIGdlbmVyYXRlIGRldGVybWluaXN0aWMgdGVuYW50IElEXG4gICAgaWYgKCF0ZW5hbnRJZCAmJiBib2R5LnVzZXJJZCAmJiBmb3JjZUNyZWF0ZSkge1xuICAgICAgdGVuYW50SWQgPSBnZW5lcmF0ZVRlbmFudElkRnJvbVVzZXJJZChib2R5LnVzZXJJZCk7XG4gICAgfSBcbiAgICAvLyBJZiBzdGlsbCBubyB0ZW5hbnQgSUQsIHVzZSBvbmUgZnJvbSBhdXRoIHVzZXJcbiAgICBlbHNlIGlmICghdGVuYW50SWQgJiYgYXV0aC51c2VyPy5zdWIgJiYgZm9yY2VDcmVhdGUpIHtcbiAgICAgIHRlbmFudElkID0gZ2VuZXJhdGVUZW5hbnRJZEZyb21Vc2VySWQoYXV0aC51c2VyLnN1Yik7XG4gICAgfVxuICAgIC8vIExhc3QgcmVzb3J0IC0gZ2VuZXJhdGUgYSByYW5kb20gVVVJRCwgYnV0IE9OTFkgaWYgZm9yY2VDcmVhdGUgaXMgdHJ1ZVxuICAgIGVsc2UgaWYgKCF0ZW5hbnRJZCAmJiBmb3JjZUNyZWF0ZSkge1xuICAgICAgdGVuYW50SWQgPSB1dWlkdjQoKTtcbiAgICB9XG4gICAgLy8gSWYgbm8gdGVuYW50IElEIGFuZCBmb3JjZUNyZWF0ZSBpcyBmYWxzZSwgcmV0dXJuIGFuIGVycm9yXG4gICAgZWxzZSBpZiAoIXRlbmFudElkICYmICFmb3JjZUNyZWF0ZSkge1xuICAgICAgbG9nZ2VyLndhcm4oJ05vIHRlbmFudCBJRCBwcm92aWRlZCBhbmQgZm9yY2VDcmVhdGUgaXMgZmFsc2UsIHJlZnVzaW5nIHRvIGNyZWF0ZSBhIG5ldyB0ZW5hbnQnKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIG1lc3NhZ2U6ICdObyB0ZW5hbnQgSUQgcHJvdmlkZWQgYW5kIHRlbmFudCBjcmVhdGlvbiBub3QgZXhwbGljaXRseSByZXF1ZXN0ZWQnIFxuICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gRW5zdXJlIHRlbmFudCBJRCBpcyB2YWxpZFxuICAgIHRlbmFudElkID0gdmFsaWRhdGVBbmRSZXBhaXJVdWlkKHRlbmFudElkKTtcbiAgICBcbiAgICAvLyBHZXQgdXNlciBJRCBmcm9tIHJlcXVlc3Qgb3IgYXV0aFxuICAgIGNvbnN0IHVzZXJJZCA9IGJvZHkudXNlcklkIHx8IGF1dGgudXNlcj8uc3ViIHx8IG51bGw7XG4gICAgXG4gICAgLy8gR2V0IGJ1c2luZXNzIG5hbWUgZnJvbSByZXF1ZXN0IG9yIGF1dGggLSBPTkxZIHVzZSByZWFsIGRhdGEsIG5vIGRlZmF1bHRzXG4gICAgY29uc3QgYnVzaW5lc3NOYW1lID0gYm9keS5idXNpbmVzc05hbWUgfHwgYXV0aC51c2VyPy5idXNpbmVzc05hbWUgfHwgbnVsbDtcbiAgICBcbiAgICAvLyBJZiBubyByZWFsIGJ1c2luZXNzIG5hbWUgaXMgcHJvdmlkZWQsIGxvZyB3YXJuaW5nIGJ1dCBjb250aW51ZSB3aXRoIHNjaGVtYSBjcmVhdGlvblxuICAgIGlmICghYnVzaW5lc3NOYW1lKSB7XG4gICAgICBsb2dnZXIud2FybihgTm8gcmVhbCBidXNpbmVzcyBuYW1lIHByb3ZpZGVkIGZvciB0ZW5hbnQgJHt0ZW5hbnRJZH0sIHNjaGVtYSB3aWxsIGJlIGNyZWF0ZWQgYnV0IHRlbmFudCByZWNvcmQgbWF5IGJlIGluY29tcGxldGVgKTtcbiAgICB9XG4gICAgXG4gICAgLy8gR2VuZXJhdGUgc2NoZW1hIG5hbWVcbiAgICBjb25zdCBzY2hlbWFOYW1lID0gZ2VuZXJhdGVTY2hlbWFOYW1lKHRlbmFudElkKTtcbiAgICBcbiAgICBsb2dnZXIuaW5mbyhgUHJvY2Vzc2luZyBzY2hlbWEgY3JlYXRpb24gcmVxdWVzdCBmb3IgdGVuYW50ICR7dGVuYW50SWR9LCBzY2hlbWEgJHtzY2hlbWFOYW1lfWApO1xuICAgIFxuICAgIC8vIENyZWF0ZSBkYXRhYmFzZSBwb29sXG4gICAgY29uc3QgcG9vbCA9IGF3YWl0IGNyZWF0ZVBvb2woKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgaWYgc2NoZW1hIGV4aXN0cyBmaXJzdFxuICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgc2NoZW1hRXhpc3RzKHBvb2wsIHNjaGVtYU5hbWUpO1xuICAgICAgXG4gICAgICAvLyBJZiBzY2hlbWEgZG9lc24ndCBleGlzdCBhbmQgZm9yY2VDcmVhdGUgaXMgZmFsc2UsIHJldHVybiBlcnJvclxuICAgICAgaWYgKCFleGlzdHMgJiYgIWZvcmNlQ3JlYXRlKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKGBTY2hlbWEgJHtzY2hlbWFOYW1lfSBkb2Vzbid0IGV4aXN0IGFuZCBmb3JjZUNyZWF0ZSBpcyBmYWxzZSwgcmVmdXNpbmcgdG8gY3JlYXRlYCk7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgICBtZXNzYWdlOiAnU2NoZW1hIGRvZXMgbm90IGV4aXN0IGFuZCBjcmVhdGlvbiBub3QgZXhwbGljaXRseSByZXF1ZXN0ZWQnLFxuICAgICAgICAgIHRlbmFudElkLFxuICAgICAgICAgIHNjaGVtYU5hbWUsXG4gICAgICAgICAgZXhpc3RzOiBmYWxzZVxuICAgICAgICB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgc2NoZW1hIGlmIGl0IGRvZXNuJ3QgZXhpc3QgKGFuZCB3ZSBoYXZlIHBlcm1pc3Npb24gdG8gY3JlYXRlIGl0KVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlU2NoZW1hSWZOb3RFeGlzdHMoXG4gICAgICAgIHBvb2wsIFxuICAgICAgICBzY2hlbWFOYW1lLCBcbiAgICAgICAgdGVuYW50SWQsIFxuICAgICAgICBidXNpbmVzc05hbWUsIFxuICAgICAgICB1c2VySWRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIG9wZXJhdGlvbiBpcyBsb2NrZWQgYnkgYW5vdGhlciBwcm9jZXNzXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5sb2NrZWQpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgICAgICBtZXNzYWdlOiAnU2NoZW1hIGNyZWF0aW9uIGFscmVhZHkgaW4gcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgdGVuYW50SWQsXG4gICAgICAgICAgICBzY2hlbWFOYW1lIFxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwOSB9IC8vIENvbmZsaWN0XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFJldHVybiB0aGUgcmVzdWx0XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzdWx0LCB7IFxuICAgICAgICBzdGF0dXM6IHJlc3VsdC5zdWNjZXNzID8gMjAwIDogNTAwIFxuICAgICAgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGF3YWl0IHBvb2wuZW5kKCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgaW4gc2NoZW1hIGNyZWF0aW9uIGVuZHBvaW50OiAke2Vycm9yLm1lc3NhZ2V9YCwgZXJyb3IpO1xuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdTY2hlbWEgY3JlYXRpb24gZmFpbGVkJywgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiUG9vbCIsInY0IiwidXVpZHY0IiwidjUiLCJ1dWlkdjUiLCJjcmVhdGVTZXJ2ZXJMb2dnZXIiLCJnZXREYkNvbmZpZ0Zyb21FbnYiLCJpc1VVSUQiLCJ2YWxpZGF0ZUFuZFJlcGFpclV1aWQiLCJnZXRBdXRoIiwibG9nZ2VyIiwiVEVOQU5UX05BTUVTUEFDRSIsIkxPQ0tfVElNRU9VVCIsIlNDSEVNQV9OQU1FX1BSRUZJWCIsImFjdGl2ZVNjaGVtYU9wZXJhdGlvbnMiLCJNYXAiLCJnZW5lcmF0ZVNjaGVtYU5hbWUiLCJ0ZW5hbnRJZCIsInZhbGlkVGVuYW50SWQiLCJyZXBsYWNlIiwiZ2VuZXJhdGVUZW5hbnRJZEZyb21Vc2VySWQiLCJ1c2VySWQiLCJjcmVhdGVQb29sIiwiZGJDb25maWciLCJlcnJvciIsInNjaGVtYUV4aXN0cyIsInBvb2wiLCJzY2hlbWFOYW1lIiwicmVzdWx0IiwicXVlcnkiLCJyb3dzIiwiZXhpc3RzIiwidGVuYW50RXhpc3RzIiwiYWNxdWlyZVNjaGVtYUxvY2siLCJvcGVyYXRpb24iLCJoYXMiLCJzZXQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwibG9ja0lkIiwicmVsZWFzZVNjaGVtYUxvY2siLCJsb2NrIiwiZ2V0IiwiZGVsZXRlIiwiY2xlYW51cEV4cGlyZWRMb2NrcyIsImVudHJpZXMiLCJ3YXJuIiwiY3JlYXRlU2NoZW1hSWZOb3RFeGlzdHMiLCJidXNpbmVzc05hbWUiLCJpbmZvIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJsb2NrZWQiLCJ0ZW5hbnRDaGVjayIsImxlbmd0aCIsInVwZGF0ZUVycm9yIiwiY3JlYXRlZCIsInRlbmFudFJlc3VsdCIsInRlbmFudEluZm8iLCJyb2xsYmFja0Vycm9yIiwiR0VUIiwicmVxdWVzdCIsInVybCIsIlVSTCIsInNlYXJjaFBhcmFtcyIsImpzb24iLCJzdGF0dXMiLCJlbmQiLCJQT1NUIiwiYXV0aCIsImJvZHkiLCJmb3JjZUNyZWF0ZSIsInVzZXIiLCJzdWIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/tenant/schema-manager/route.js\n");

/***/ }),

/***/ "(rsc)/./src/utils/auth-helpers.js":
/*!***********************************!*\
  !*** ./src/utils/auth-helpers.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getAuth: () => (/* binding */ getAuth),\n/* harmony export */   getAuthSession: () => (/* binding */ getAuthSession),\n/* harmony export */   getTenantId: () => (/* binding */ getTenantId),\n/* harmony export */   getUserId: () => (/* binding */ getUserId),\n/* harmony export */   isAuthenticated: () => (/* binding */ isAuthenticated)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _logger_stub__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./logger-stub */ \"(rsc)/./src/utils/logger-stub.js\");\n/* harmony import */ var aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! aws-amplify/auth */ \"(rsc)/../../node_modules/.pnpm/@aws-amplify+core@6.11.1/node_modules/@aws-amplify/core/dist/esm/singleton/apis/fetchAuthSession.mjs\");\n/**\n * Authentication helper functions for server and client components\n * Provides consistent auth handling across the application\n */ \n\n\n// Create logger for this module\nconst log = _logger_stub__WEBPACK_IMPORTED_MODULE_1__.logger;\n/**\n * Extract authentication tokens from request or cookies\n * @param {Request} request - The incoming request (optional)\n * @returns {Object} Authentication data including tokens and user info\n */ async function getAuth(request = null) {\n    try {\n        // Get cookie store - MUST await in Next.js 15\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n        // Check for auth token in cookies\n        const authToken = cookieStore.get('authToken')?.value;\n        const idToken = cookieStore.get('idToken')?.value;\n        // Check for Cognito cookies\n        const lastAuthUser = cookieStore.get('CognitoIdentityServiceProvider.1o5v84mrgn4gt87khtr179uc5b.LastAuthUser')?.value;\n        let cognitoIdToken = null;\n        if (lastAuthUser) {\n            cognitoIdToken = cookieStore.get(`CognitoIdentityServiceProvider.1o5v84mrgn4gt87khtr179uc5b.${lastAuthUser}.idToken`)?.value;\n        }\n        // Extract token from Authorization header if present in request\n        let headerToken = null;\n        if (request && request.headers) {\n            const authHeader = request.headers.get('Authorization');\n            if (authHeader && authHeader.startsWith('Bearer ')) {\n                headerToken = authHeader.substring(7);\n            }\n        }\n        // Get tenantId from cookies\n        const tenantId = cookieStore.get('tenantId')?.value || cookieStore.get('businessid')?.value;\n        // Check if we have any valid auth token\n        const hasAuth = Boolean(authToken || idToken || cognitoIdToken || headerToken);\n        // Get user ID if available\n        let userId = cookieStore.get('userId')?.value;\n        // For logging purposes (avoid sensitive data)\n        log.debug('Auth data collected', {\n            hasAuthToken: Boolean(authToken),\n            hasIdToken: Boolean(idToken),\n            hasCognitoIdToken: Boolean(cognitoIdToken),\n            hasHeaderToken: Boolean(headerToken),\n            hasTenantId: Boolean(tenantId),\n            hasUserId: Boolean(userId)\n        });\n        return {\n            // Auth status\n            isAuthenticated: hasAuth,\n            // Tokens\n            authToken: authToken || headerToken,\n            idToken: idToken || cognitoIdToken || headerToken,\n            // User info\n            userId,\n            tenantId,\n            // Raw tokens for specific needs\n            cognitoIdToken,\n            headerToken\n        };\n    } catch (error) {\n        log.error('Error getting auth data:', {\n            error: error.message\n        });\n        // Return safe defaults\n        return {\n            isAuthenticated: false,\n            authToken: null,\n            idToken: null,\n            userId: null,\n            tenantId: null,\n            cognitoIdToken: null,\n            headerToken: null\n        };\n    }\n}\n/**\n * Check if a user is authenticated with valid session\n * @param {Request} request - The incoming request (optional)\n * @returns {boolean} Whether the user is authenticated\n */ async function isAuthenticated(request = null) {\n    const auth = await getAuth(request);\n    return auth.isAuthenticated;\n}\n/**\n * Get the current tenant ID from cookies or request\n * @param {Request} request - The incoming request (optional)\n * @returns {string|null} Tenant ID if available\n */ async function getTenantId(request = null) {\n    const auth = await getAuth(request);\n    return auth.tenantId;\n}\n/**\n * Get the user ID from the current session\n * @param {Request} request - The incoming request (optional)\n * @returns {string|null} User ID if available\n */ async function getUserId(request = null) {\n    const auth = await getAuth(request);\n    return auth.userId;\n}\n/**\n * Get the current authenticated session\n * @returns {Promise<Object>} Session object or null\n */ const getAuthSession = async ()=>{\n    try {\n        const session = await (0,aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__.fetchAuthSession)();\n        if (!session) {\n            return {\n                user: null,\n                authenticated: false\n            };\n        }\n        const tokens = session.tokens;\n        if (!tokens || !tokens.idToken) {\n            return {\n                user: null,\n                authenticated: false\n            };\n        }\n        // Parse the user info from the ID token\n        const idToken = tokens.idToken.toString();\n        const payload = JSON.parse(Buffer.from(idToken.split('.')[1], 'base64').toString());\n        const user = {\n            id: payload.sub,\n            email: payload.email,\n            name: payload.name,\n            tenantId: payload['custom:businessid'] || payload['custom:tenantId']\n        };\n        return {\n            user,\n            authenticated: true,\n            accessToken: tokens.accessToken.toString(),\n            idToken\n        };\n    } catch (error) {\n        log.error('Failed to get auth session:', error);\n        return {\n            user: null,\n            authenticated: false\n        };\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    getAuthSession\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNaLE9BQU87Z0JBQUVDLE1BQU07Z0JBQU1DLGVBQWU7WUFBTTtRQUM1QztRQUVBLE1BQU1DLFNBQVNILFFBQVFHLE1BQU07UUFDN0IsSUFBSSxDQUFDQSxVQUFVLENBQUNBLE9BQU83QixPQUFPLEVBQUU7WUFDOUIsT0FBTztnQkFBRTJCLE1BQU07Z0JBQU1DLGVBQWU7WUFBTTtRQUM1QztRQUVBLHdDQUF3QztRQUN4QyxNQUFNNUIsVUFBVTZCLE9BQU83QixPQUFPLENBQUM4QixRQUFRO1FBQ3ZDLE1BQU1DLFVBQVVDLEtBQUtDLEtBQUssQ0FDeEJDLE9BQU9DLElBQUksQ0FBQ25DLFFBQVFvQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxVQUFVTixRQUFRO1FBR3ZELE1BQU1ILE9BQU87WUFDWFUsSUFBSU4sUUFBUU8sR0FBRztZQUNmQyxPQUFPUixRQUFRUSxLQUFLO1lBQ3BCQyxNQUFNVCxRQUFRUyxJQUFJO1lBQ2xCaEMsVUFBVXVCLE9BQU8sQ0FBQyxvQkFBb0IsSUFBSUEsT0FBTyxDQUFDLGtCQUFrQjtRQUN0RTtRQUVBLE9BQU87WUFDTEo7WUFDQUMsZUFBZTtZQUNmYSxhQUFhWixPQUFPWSxXQUFXLENBQUNYLFFBQVE7WUFDeEM5QjtRQUNGO0lBQ0YsRUFBRSxPQUFPb0IsT0FBTztRQUNkM0IsSUFBSTJCLEtBQUssQ0FBQywrQkFBK0JBO1FBQ3pDLE9BQU87WUFBRU8sTUFBTTtZQUFNQyxlQUFlO1FBQU07SUFDNUM7QUFDRixFQUFFO0FBRUYsaUVBQWU7SUFDYkg7QUFDRixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9rdW9sZGVuZy9wcm9qZWN0eC9mcm9udGVuZC9weWZhY3Rvcl9uZXh0L3NyYy91dGlscy9hdXRoLWhlbHBlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBdXRoZW50aWNhdGlvbiBoZWxwZXIgZnVuY3Rpb25zIGZvciBzZXJ2ZXIgYW5kIGNsaWVudCBjb21wb25lbnRzXG4gKiBQcm92aWRlcyBjb25zaXN0ZW50IGF1dGggaGFuZGxpbmcgYWNyb3NzIHRoZSBhcHBsaWNhdGlvblxuICovXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vbG9nZ2VyLXN0dWInO1xuaW1wb3J0IHsgZmV0Y2hBdXRoU2Vzc2lvbiB9IGZyb20gJ2F3cy1hbXBsaWZ5L2F1dGgnO1xuXG4vLyBDcmVhdGUgbG9nZ2VyIGZvciB0aGlzIG1vZHVsZVxuY29uc3QgbG9nID0gbG9nZ2VyO1xuXG4vKipcbiAqIEV4dHJhY3QgYXV0aGVudGljYXRpb24gdG9rZW5zIGZyb20gcmVxdWVzdCBvciBjb29raWVzXG4gKiBAcGFyYW0ge1JlcXVlc3R9IHJlcXVlc3QgLSBUaGUgaW5jb21pbmcgcmVxdWVzdCAob3B0aW9uYWwpXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBBdXRoZW50aWNhdGlvbiBkYXRhIGluY2x1ZGluZyB0b2tlbnMgYW5kIHVzZXIgaW5mb1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXV0aChyZXF1ZXN0ID0gbnVsbCkge1xuICB0cnkge1xuICAgIC8vIEdldCBjb29raWUgc3RvcmUgLSBNVVNUIGF3YWl0IGluIE5leHQuanMgMTVcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgYXV0aCB0b2tlbiBpbiBjb29raWVzXG4gICAgY29uc3QgYXV0aFRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoVG9rZW4nKT8udmFsdWU7XG4gICAgY29uc3QgaWRUb2tlbiA9IGNvb2tpZVN0b3JlLmdldCgnaWRUb2tlbicpPy52YWx1ZTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgQ29nbml0byBjb29raWVzXG4gICAgY29uc3QgbGFzdEF1dGhVc2VyID0gY29va2llU3RvcmUuZ2V0KCdDb2duaXRvSWRlbnRpdHlTZXJ2aWNlUHJvdmlkZXIuMW81djg0bXJnbjRndDg3a2h0cjE3OXVjNWIuTGFzdEF1dGhVc2VyJyk/LnZhbHVlO1xuICAgIGxldCBjb2duaXRvSWRUb2tlbiA9IG51bGw7XG4gICAgXG4gICAgaWYgKGxhc3RBdXRoVXNlcikge1xuICAgICAgY29nbml0b0lkVG9rZW4gPSBjb29raWVTdG9yZS5nZXQoYENvZ25pdG9JZGVudGl0eVNlcnZpY2VQcm92aWRlci4xbzV2ODRtcmduNGd0ODdraHRyMTc5dWM1Yi4ke2xhc3RBdXRoVXNlcn0uaWRUb2tlbmApPy52YWx1ZTtcbiAgICB9XG4gICAgXG4gICAgLy8gRXh0cmFjdCB0b2tlbiBmcm9tIEF1dGhvcml6YXRpb24gaGVhZGVyIGlmIHByZXNlbnQgaW4gcmVxdWVzdFxuICAgIGxldCBoZWFkZXJUb2tlbiA9IG51bGw7XG4gICAgaWYgKHJlcXVlc3QgJiYgcmVxdWVzdC5oZWFkZXJzKSB7XG4gICAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnQXV0aG9yaXphdGlvbicpO1xuICAgICAgaWYgKGF1dGhIZWFkZXIgJiYgYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcbiAgICAgICAgaGVhZGVyVG9rZW4gPSBhdXRoSGVhZGVyLnN1YnN0cmluZyg3KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IHRlbmFudElkIGZyb20gY29va2llc1xuICAgIGNvbnN0IHRlbmFudElkID0gY29va2llU3RvcmUuZ2V0KCd0ZW5hbnRJZCcpPy52YWx1ZSB8fCBjb29raWVTdG9yZS5nZXQoJ2J1c2luZXNzaWQnKT8udmFsdWU7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBhbnkgdmFsaWQgYXV0aCB0b2tlblxuICAgIGNvbnN0IGhhc0F1dGggPSBCb29sZWFuKGF1dGhUb2tlbiB8fCBpZFRva2VuIHx8IGNvZ25pdG9JZFRva2VuIHx8IGhlYWRlclRva2VuKTtcbiAgICBcbiAgICAvLyBHZXQgdXNlciBJRCBpZiBhdmFpbGFibGVcbiAgICBsZXQgdXNlcklkID0gY29va2llU3RvcmUuZ2V0KCd1c2VySWQnKT8udmFsdWU7XG4gICAgXG4gICAgLy8gRm9yIGxvZ2dpbmcgcHVycG9zZXMgKGF2b2lkIHNlbnNpdGl2ZSBkYXRhKVxuICAgIGxvZy5kZWJ1ZygnQXV0aCBkYXRhIGNvbGxlY3RlZCcsIHtcbiAgICAgIGhhc0F1dGhUb2tlbjogQm9vbGVhbihhdXRoVG9rZW4pLFxuICAgICAgaGFzSWRUb2tlbjogQm9vbGVhbihpZFRva2VuKSxcbiAgICAgIGhhc0NvZ25pdG9JZFRva2VuOiBCb29sZWFuKGNvZ25pdG9JZFRva2VuKSxcbiAgICAgIGhhc0hlYWRlclRva2VuOiBCb29sZWFuKGhlYWRlclRva2VuKSxcbiAgICAgIGhhc1RlbmFudElkOiBCb29sZWFuKHRlbmFudElkKSxcbiAgICAgIGhhc1VzZXJJZDogQm9vbGVhbih1c2VySWQpXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIEF1dGggc3RhdHVzXG4gICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGhhc0F1dGgsXG4gICAgICAvLyBUb2tlbnNcbiAgICAgIGF1dGhUb2tlbjogYXV0aFRva2VuIHx8IGhlYWRlclRva2VuLFxuICAgICAgaWRUb2tlbjogaWRUb2tlbiB8fCBjb2duaXRvSWRUb2tlbiB8fCBoZWFkZXJUb2tlbixcbiAgICAgIC8vIFVzZXIgaW5mb1xuICAgICAgdXNlcklkLFxuICAgICAgdGVuYW50SWQsXG4gICAgICAvLyBSYXcgdG9rZW5zIGZvciBzcGVjaWZpYyBuZWVkc1xuICAgICAgY29nbml0b0lkVG9rZW4sXG4gICAgICBoZWFkZXJUb2tlblxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nLmVycm9yKCdFcnJvciBnZXR0aW5nIGF1dGggZGF0YTonLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgIFxuICAgIC8vIFJldHVybiBzYWZlIGRlZmF1bHRzXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICBhdXRoVG9rZW46IG51bGwsXG4gICAgICBpZFRva2VuOiBudWxsLFxuICAgICAgdXNlcklkOiBudWxsLFxuICAgICAgdGVuYW50SWQ6IG51bGwsXG4gICAgICBjb2duaXRvSWRUb2tlbjogbnVsbCxcbiAgICAgIGhlYWRlclRva2VuOiBudWxsXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgdXNlciBpcyBhdXRoZW50aWNhdGVkIHdpdGggdmFsaWQgc2Vzc2lvblxuICogQHBhcmFtIHtSZXF1ZXN0fSByZXF1ZXN0IC0gVGhlIGluY29taW5nIHJlcXVlc3QgKG9wdGlvbmFsKVxuICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHVzZXIgaXMgYXV0aGVudGljYXRlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKHJlcXVlc3QgPSBudWxsKSB7XG4gIGNvbnN0IGF1dGggPSBhd2FpdCBnZXRBdXRoKHJlcXVlc3QpO1xuICByZXR1cm4gYXV0aC5pc0F1dGhlbnRpY2F0ZWQ7XG59XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IHRlbmFudCBJRCBmcm9tIGNvb2tpZXMgb3IgcmVxdWVzdFxuICogQHBhcmFtIHtSZXF1ZXN0fSByZXF1ZXN0IC0gVGhlIGluY29taW5nIHJlcXVlc3QgKG9wdGlvbmFsKVxuICogQHJldHVybnMge3N0cmluZ3xudWxsfSBUZW5hbnQgSUQgaWYgYXZhaWxhYmxlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUZW5hbnRJZChyZXF1ZXN0ID0gbnVsbCkge1xuICBjb25zdCBhdXRoID0gYXdhaXQgZ2V0QXV0aChyZXF1ZXN0KTtcbiAgcmV0dXJuIGF1dGgudGVuYW50SWQ7XG59XG5cbi8qKlxuICogR2V0IHRoZSB1c2VyIElEIGZyb20gdGhlIGN1cnJlbnQgc2Vzc2lvblxuICogQHBhcmFtIHtSZXF1ZXN0fSByZXF1ZXN0IC0gVGhlIGluY29taW5nIHJlcXVlc3QgKG9wdGlvbmFsKVxuICogQHJldHVybnMge3N0cmluZ3xudWxsfSBVc2VyIElEIGlmIGF2YWlsYWJsZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlcklkKHJlcXVlc3QgPSBudWxsKSB7XG4gIGNvbnN0IGF1dGggPSBhd2FpdCBnZXRBdXRoKHJlcXVlc3QpO1xuICByZXR1cm4gYXV0aC51c2VySWQ7XG59XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGF1dGhlbnRpY2F0ZWQgc2Vzc2lvblxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gU2Vzc2lvbiBvYmplY3Qgb3IgbnVsbFxuICovXG5leHBvcnQgY29uc3QgZ2V0QXV0aFNlc3Npb24gPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGZldGNoQXV0aFNlc3Npb24oKTtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIHJldHVybiB7IHVzZXI6IG51bGwsIGF1dGhlbnRpY2F0ZWQ6IGZhbHNlIH07XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRva2VucyA9IHNlc3Npb24udG9rZW5zO1xuICAgIGlmICghdG9rZW5zIHx8ICF0b2tlbnMuaWRUb2tlbikge1xuICAgICAgcmV0dXJuIHsgdXNlcjogbnVsbCwgYXV0aGVudGljYXRlZDogZmFsc2UgfTtcbiAgICB9XG4gICAgXG4gICAgLy8gUGFyc2UgdGhlIHVzZXIgaW5mbyBmcm9tIHRoZSBJRCB0b2tlblxuICAgIGNvbnN0IGlkVG9rZW4gPSB0b2tlbnMuaWRUb2tlbi50b1N0cmluZygpO1xuICAgIGNvbnN0IHBheWxvYWQgPSBKU09OLnBhcnNlKFxuICAgICAgQnVmZmVyLmZyb20oaWRUb2tlbi5zcGxpdCgnLicpWzFdLCAnYmFzZTY0JykudG9TdHJpbmcoKVxuICAgICk7XG4gICAgXG4gICAgY29uc3QgdXNlciA9IHtcbiAgICAgIGlkOiBwYXlsb2FkLnN1YixcbiAgICAgIGVtYWlsOiBwYXlsb2FkLmVtYWlsLFxuICAgICAgbmFtZTogcGF5bG9hZC5uYW1lLFxuICAgICAgdGVuYW50SWQ6IHBheWxvYWRbJ2N1c3RvbTpidXNpbmVzc2lkJ10gfHwgcGF5bG9hZFsnY3VzdG9tOnRlbmFudElkJ11cbiAgICB9O1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB1c2VyLFxuICAgICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICAgIGFjY2Vzc1Rva2VuOiB0b2tlbnMuYWNjZXNzVG9rZW4udG9TdHJpbmcoKSxcbiAgICAgIGlkVG9rZW5cbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZy5lcnJvcignRmFpbGVkIHRvIGdldCBhdXRoIHNlc3Npb246JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHVzZXI6IG51bGwsIGF1dGhlbnRpY2F0ZWQ6IGZhbHNlIH07XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZ2V0QXV0aFNlc3Npb25cbn07ICJdLCJuYW1lcyI6WyJjb29raWVzIiwibG9nZ2VyIiwiZmV0Y2hBdXRoU2Vzc2lvbiIsImxvZyIsImdldEF1dGgiLCJyZXF1ZXN0IiwiY29va2llU3RvcmUiLCJhdXRoVG9rZW4iLCJnZXQiLCJ2YWx1ZSIsImlkVG9rZW4iLCJsYXN0QXV0aFVzZXIiLCJjb2duaXRvSWRUb2tlbiIsImhlYWRlclRva2VuIiwiaGVhZGVycyIsImF1dGhIZWFkZXIiLCJzdGFydHNXaXRoIiwic3Vic3RyaW5nIiwidGVuYW50SWQiLCJoYXNBdXRoIiwiQm9vbGVhbiIsInVzZXJJZCIsImRlYnVnIiwiaGFzQXV0aFRva2VuIiwiaGFzSWRUb2tlbiIsImhhc0NvZ25pdG9JZFRva2VuIiwiaGFzSGVhZGVyVG9rZW4iLCJoYXNUZW5hbnRJZCIsImhhc1VzZXJJZCIsImlzQXV0aGVudGljYXRlZCIsImVycm9yIiwibWVzc2FnZSIsImF1dGgiLCJnZXRUZW5hbnRJZCIsImdldFVzZXJJZCIsImdldEF1dGhTZXNzaW9uIiwic2Vzc2lvbiIsInVzZXIiLCJhdXRoZW50aWNhdGVkIiwidG9rZW5zIiwidG9TdHJpbmciLCJwYXlsb2FkIiwiSlNPTiIsInBhcnNlIiwiQnVmZmVyIiwiZnJvbSIsInNwbGl0IiwiaWQiLCJzdWIiLCJlbWFpbCIsIm5hbWUiLCJhY2Nlc3NUb2tlbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/auth-helpers.js\n");

/***/ }),

/***/ "(rsc)/./src/utils/db-config.js":
/*!********************************!*\
  !*** ./src/utils/db-config.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDbPool: () => (/* binding */ createDbPool),\n/* harmony export */   getDbConfigFromEnv: () => (/* binding */ getDbConfigFromEnv),\n/* harmony export */   testDbConnection: () => (/* binding */ testDbConnection)\n/* harmony export */ });\n/* harmony import */ var _serverLogger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./serverLogger */ \"(rsc)/./src/utils/serverLogger.js\");\n/**\n * Database configuration utilities for all services\n * Provides consistent connection settings with AWS RDS\n */ \n// Create logger for this module\nconst logger = (0,_serverLogger__WEBPACK_IMPORTED_MODULE_0__.createServerLogger)('db-config');\n// Connection settings optimized for AWS RDS\nconst DB_DEFAULTS = {\n    port: 5432,\n    database: 'dott_main',\n    // Connection settings\n    connectionTimeoutMillis: 8000,\n    statement_timeout: 15000,\n    max: 1,\n    idleTimeoutMillis: 3000\n};\n/**\n * Get database configuration from environment variables\n * This ensures consistent settings across all endpoints\n * @returns {object} Database configuration\n */ function getDbConfigFromEnv() {\n    logger.info('Using AWS RDS database connection');\n    // Check if SSL should be disabled\n    const useSSL = process.env.DB_USE_SSL !== 'false';\n    logger.info(`SSL connections ${useSSL ? 'enabled' : 'disabled'}`);\n    // Base configuration using environment variables with fallbacks\n    const config = {\n        user: process.env.RDS_USERNAME || process.env.DB_USER || process.env.DJANGO_DB_USER || 'dott_admin',\n        password: process.env.RDS_PASSWORD || process.env.DB_PASSWORD || process.env.DJANGO_DB_PASSWORD || 'RRfXU6uPPUbBEg1JqGTJ',\n        host: process.env.RDS_HOSTNAME || process.env.DB_HOST || process.env.DJANGO_DB_HOST || 'dott-dev.c12qgo6m085e.us-east-1.rds.amazonaws.com',\n        port: parseInt(process.env.RDS_PORT || process.env.DB_PORT || process.env.DJANGO_DB_PORT || DB_DEFAULTS.port, 10),\n        database: process.env.RDS_DB_NAME || process.env.DB_NAME || process.env.DJANGO_DB_NAME || 'dott_main',\n        // Connection settings\n        connectionTimeoutMillis: DB_DEFAULTS.connectionTimeoutMillis,\n        statement_timeout: DB_DEFAULTS.statement_timeout,\n        max: DB_DEFAULTS.max,\n        idleTimeoutMillis: DB_DEFAULTS.idleTimeoutMillis\n    };\n    // Log connection details (without password)\n    logger.info('Database connection details:', {\n        host: config.host,\n        database: config.database,\n        user: config.user,\n        port: config.port\n    });\n    // Only add SSL if enabled\n    if (useSSL) {\n        config.ssl = {\n            rejectUnauthorized: false,\n            ca: process.env.SSL_CERT_PATH || undefined\n        };\n        // Log SSL configuration\n        logger.info('SSL configuration enabled with rejectUnauthorized: false');\n    }\n    return config;\n}\n/**\n * Create a database pool with proper error handlers\n * @returns {Pool} Database connection pool\n */ async function createDbPool() {\n    // Dynamically import pg to avoid server/client issues\n    const { Pool } = __webpack_require__(/*! pg */ \"pg\");\n    const config = getDbConfigFromEnv();\n    try {\n        logger.info('[DB] Creating database pool with config:', {\n            host: config.host,\n            port: config.port,\n            database: config.database,\n            user: config.user,\n            ssl: config.ssl ? 'enabled' : 'disabled'\n        });\n        const pool = new Pool(config);\n        // Add error handler to prevent uncaught exceptions\n        pool.on('error', (err)=>{\n            // Log full error details for debugging\n            logger.error('[DB] Pool error event:', {\n                message: err.message,\n                code: err.code,\n                severity: err.severity,\n                detail: err.detail,\n                hint: err.hint,\n                where: err.where,\n                stack: err.stack\n            });\n        // Don't crash on connection errors\n        });\n        return pool;\n    } catch (error) {\n        logger.error('[DB] Error creating database pool:', {\n            message: error.message,\n            code: error.code,\n            severity: error.severity,\n            detail: error.detail,\n            hint: error.hint,\n            where: error.where,\n            stack: error.stack\n        });\n        throw error; // Rethrow original error for proper handling\n    }\n}\n/**\n * Test database connection and return status\n * @returns {object} Connection test result\n */ async function testDbConnection() {\n    let pool = null;\n    try {\n        pool = await createDbPool();\n        const result = await pool.query('SELECT 1 as connection_test');\n        const config = getDbConfigFromEnv();\n        return {\n            success: true,\n            connected: result.rows[0].connection_test === 1,\n            // Only include non-sensitive configuration details\n            config: {\n                host: config.host,\n                database: config.database,\n                port: config.port,\n                ssl: config.ssl ? 'enabled' : 'disabled'\n            },\n            database: 'aws_rds'\n        };\n    } catch (error) {\n        const config = getDbConfigFromEnv();\n        return {\n            success: false,\n            error: error.message,\n            code: error.code,\n            // Only include non-sensitive configuration details\n            config: {\n                host: config.host,\n                database: config.database,\n                port: config.port,\n                ssl: config.ssl ? 'enabled' : 'disabled'\n            },\n            database: 'aws_rds'\n        };\n    } finally{\n        if (pool) await pool.end();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVM7WUFDVFgsT0FBT0EsTUFBTUMsT0FBTztZQUNwQkMsTUFBTUYsTUFBTUUsSUFBSTtZQUNoQixtREFBbUQ7WUFDbkRqQyxRQUFRO2dCQUNOUyxNQUFNVCxPQUFPUyxJQUFJO2dCQUNqQnBCLFVBQVVXLE9BQU9YLFFBQVE7Z0JBQ3pCRCxNQUFNWSxPQUFPWixJQUFJO2dCQUNqQmdDLEtBQUtwQixPQUFPb0IsR0FBRyxHQUFHLFlBQVk7WUFDaEM7WUFDQS9CLFVBQVU7UUFDWjtJQUNGLFNBQVU7UUFDUixJQUFJdUMsTUFBTSxNQUFNQSxLQUFLa0IsR0FBRztJQUMxQjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMva3VvbGRlbmcvcHJvamVjdHgvZnJvbnRlbmQvcHlmYWN0b3JfbmV4dC9zcmMvdXRpbHMvZGItY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGF0YWJhc2UgY29uZmlndXJhdGlvbiB1dGlsaXRpZXMgZm9yIGFsbCBzZXJ2aWNlc1xuICogUHJvdmlkZXMgY29uc2lzdGVudCBjb25uZWN0aW9uIHNldHRpbmdzIHdpdGggQVdTIFJEU1xuICovXG5cbmltcG9ydCB7IGNyZWF0ZVNlcnZlckxvZ2dlciB9IGZyb20gJy4vc2VydmVyTG9nZ2VyJztcblxuLy8gQ3JlYXRlIGxvZ2dlciBmb3IgdGhpcyBtb2R1bGVcbmNvbnN0IGxvZ2dlciA9IGNyZWF0ZVNlcnZlckxvZ2dlcignZGItY29uZmlnJyk7XG5cbi8vIENvbm5lY3Rpb24gc2V0dGluZ3Mgb3B0aW1pemVkIGZvciBBV1MgUkRTXG5jb25zdCBEQl9ERUZBVUxUUyA9IHtcbiAgcG9ydDogNTQzMixcbiAgZGF0YWJhc2U6ICdkb3R0X21haW4nLFxuICAvLyBDb25uZWN0aW9uIHNldHRpbmdzXG4gIGNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzOiA4MDAwLFxuICBzdGF0ZW1lbnRfdGltZW91dDogMTUwMDAsXG4gIG1heDogMSxcbiAgaWRsZVRpbWVvdXRNaWxsaXM6IDMwMDBcbn07XG5cbi8qKlxuICogR2V0IGRhdGFiYXNlIGNvbmZpZ3VyYXRpb24gZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAqIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IHNldHRpbmdzIGFjcm9zcyBhbGwgZW5kcG9pbnRzXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBEYXRhYmFzZSBjb25maWd1cmF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREYkNvbmZpZ0Zyb21FbnYoKSB7XG4gIGxvZ2dlci5pbmZvKCdVc2luZyBBV1MgUkRTIGRhdGFiYXNlIGNvbm5lY3Rpb24nKTtcbiAgXG4gIC8vIENoZWNrIGlmIFNTTCBzaG91bGQgYmUgZGlzYWJsZWRcbiAgY29uc3QgdXNlU1NMID0gcHJvY2Vzcy5lbnYuREJfVVNFX1NTTCAhPT0gJ2ZhbHNlJztcbiAgbG9nZ2VyLmluZm8oYFNTTCBjb25uZWN0aW9ucyAke3VzZVNTTCA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCd9YCk7XG4gIFxuICAvLyBCYXNlIGNvbmZpZ3VyYXRpb24gdXNpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzIHdpdGggZmFsbGJhY2tzXG4gIGNvbnN0IGNvbmZpZyA9IHtcbiAgICB1c2VyOiBwcm9jZXNzLmVudi5SRFNfVVNFUk5BTUUgfHwgcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCBwcm9jZXNzLmVudi5ESkFOR09fREJfVVNFUiB8fCAnZG90dF9hZG1pbicsXG4gICAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LlJEU19QQVNTV09SRCB8fCBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCB8fCBwcm9jZXNzLmVudi5ESkFOR09fREJfUEFTU1dPUkQgfHwgJ1JSZlhVNnVQUFViQkVnMUpxR1RKJyxcbiAgICBob3N0OiBwcm9jZXNzLmVudi5SRFNfSE9TVE5BTUUgfHwgcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCBwcm9jZXNzLmVudi5ESkFOR09fREJfSE9TVCB8fCAnZG90dC1kZXYuYzEycWdvNm0wODVlLnVzLWVhc3QtMS5yZHMuYW1hem9uYXdzLmNvbScsXG4gICAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuUkRTX1BPUlQgfHwgcHJvY2Vzcy5lbnYuREJfUE9SVCB8fCBwcm9jZXNzLmVudi5ESkFOR09fREJfUE9SVCB8fCBEQl9ERUZBVUxUUy5wb3J0LCAxMCksXG4gICAgZGF0YWJhc2U6IHByb2Nlc3MuZW52LlJEU19EQl9OQU1FIHx8IHByb2Nlc3MuZW52LkRCX05BTUUgfHwgcHJvY2Vzcy5lbnYuREpBTkdPX0RCX05BTUUgfHwgJ2RvdHRfbWFpbicsXG4gICAgLy8gQ29ubmVjdGlvbiBzZXR0aW5nc1xuICAgIGNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzOiBEQl9ERUZBVUxUUy5jb25uZWN0aW9uVGltZW91dE1pbGxpcyxcbiAgICBzdGF0ZW1lbnRfdGltZW91dDogREJfREVGQVVMVFMuc3RhdGVtZW50X3RpbWVvdXQsXG4gICAgbWF4OiBEQl9ERUZBVUxUUy5tYXgsXG4gICAgaWRsZVRpbWVvdXRNaWxsaXM6IERCX0RFRkFVTFRTLmlkbGVUaW1lb3V0TWlsbGlzXG4gIH07XG4gIFxuICAvLyBMb2cgY29ubmVjdGlvbiBkZXRhaWxzICh3aXRob3V0IHBhc3N3b3JkKVxuICBsb2dnZXIuaW5mbygnRGF0YWJhc2UgY29ubmVjdGlvbiBkZXRhaWxzOicsIHsgXG4gICAgaG9zdDogY29uZmlnLmhvc3QsIFxuICAgIGRhdGFiYXNlOiBjb25maWcuZGF0YWJhc2UsIFxuICAgIHVzZXI6IGNvbmZpZy51c2VyLFxuICAgIHBvcnQ6IGNvbmZpZy5wb3J0XG4gIH0pO1xuICBcbiAgLy8gT25seSBhZGQgU1NMIGlmIGVuYWJsZWRcbiAgaWYgKHVzZVNTTCkge1xuICAgIGNvbmZpZy5zc2wgPSB7XG4gICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlLCAvLyBBbGxvdyBzZWxmLXNpZ25lZCBjZXJ0c1xuICAgICAgY2E6IHByb2Nlc3MuZW52LlNTTF9DRVJUX1BBVEggfHwgdW5kZWZpbmVkLCAvLyBVc2UgY3VzdG9tIENBIGlmIHByb3ZpZGVkXG4gICAgfTtcbiAgICBcbiAgICAvLyBMb2cgU1NMIGNvbmZpZ3VyYXRpb25cbiAgICBsb2dnZXIuaW5mbygnU1NMIGNvbmZpZ3VyYXRpb24gZW5hYmxlZCB3aXRoIHJlamVjdFVuYXV0aG9yaXplZDogZmFsc2UnKTtcbiAgfVxuICBcbiAgcmV0dXJuIGNvbmZpZztcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBkYXRhYmFzZSBwb29sIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsZXJzXG4gKiBAcmV0dXJucyB7UG9vbH0gRGF0YWJhc2UgY29ubmVjdGlvbiBwb29sXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVEYlBvb2woKSB7XG4gIC8vIER5bmFtaWNhbGx5IGltcG9ydCBwZyB0byBhdm9pZCBzZXJ2ZXIvY2xpZW50IGlzc3Vlc1xuICBjb25zdCB7IFBvb2wgfSA9IHJlcXVpcmUoJ3BnJyk7XG4gIGNvbnN0IGNvbmZpZyA9IGdldERiQ29uZmlnRnJvbUVudigpO1xuICBcbiAgdHJ5IHtcbiAgICBsb2dnZXIuaW5mbygnW0RCXSBDcmVhdGluZyBkYXRhYmFzZSBwb29sIHdpdGggY29uZmlnOicsIHtcbiAgICAgIGhvc3Q6IGNvbmZpZy5ob3N0LFxuICAgICAgcG9ydDogY29uZmlnLnBvcnQsXG4gICAgICBkYXRhYmFzZTogY29uZmlnLmRhdGFiYXNlLFxuICAgICAgdXNlcjogY29uZmlnLnVzZXIsXG4gICAgICBzc2w6IGNvbmZpZy5zc2wgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgcG9vbCA9IG5ldyBQb29sKGNvbmZpZyk7XG4gICAgXG4gICAgLy8gQWRkIGVycm9yIGhhbmRsZXIgdG8gcHJldmVudCB1bmNhdWdodCBleGNlcHRpb25zXG4gICAgcG9vbC5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICAvLyBMb2cgZnVsbCBlcnJvciBkZXRhaWxzIGZvciBkZWJ1Z2dpbmdcbiAgICAgIGxvZ2dlci5lcnJvcignW0RCXSBQb29sIGVycm9yIGV2ZW50OicsIHtcbiAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVyci5jb2RlLFxuICAgICAgICBzZXZlcml0eTogZXJyLnNldmVyaXR5LFxuICAgICAgICBkZXRhaWw6IGVyci5kZXRhaWwsXG4gICAgICAgIGhpbnQ6IGVyci5oaW50LFxuICAgICAgICB3aGVyZTogZXJyLndoZXJlLFxuICAgICAgICBzdGFjazogZXJyLnN0YWNrXG4gICAgICB9KTtcbiAgICAgIC8vIERvbid0IGNyYXNoIG9uIGNvbm5lY3Rpb24gZXJyb3JzXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHBvb2w7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdbREJdIEVycm9yIGNyZWF0aW5nIGRhdGFiYXNlIHBvb2w6Jywge1xuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICBzZXZlcml0eTogZXJyb3Iuc2V2ZXJpdHksXG4gICAgICBkZXRhaWw6IGVycm9yLmRldGFpbCxcbiAgICAgIGhpbnQ6IGVycm9yLmhpbnQsXG4gICAgICB3aGVyZTogZXJyb3Iud2hlcmUsXG4gICAgICBzdGFjazogZXJyb3Iuc3RhY2tcbiAgICB9KTtcbiAgICB0aHJvdyBlcnJvcjsgLy8gUmV0aHJvdyBvcmlnaW5hbCBlcnJvciBmb3IgcHJvcGVyIGhhbmRsaW5nXG4gIH1cbn1cblxuLyoqXG4gKiBUZXN0IGRhdGFiYXNlIGNvbm5lY3Rpb24gYW5kIHJldHVybiBzdGF0dXNcbiAqIEByZXR1cm5zIHtvYmplY3R9IENvbm5lY3Rpb24gdGVzdCByZXN1bHRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRlc3REYkNvbm5lY3Rpb24oKSB7XG4gIGxldCBwb29sID0gbnVsbDtcbiAgXG4gIHRyeSB7XG4gICAgcG9vbCA9IGF3YWl0IGNyZWF0ZURiUG9vbCgpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoJ1NFTEVDVCAxIGFzIGNvbm5lY3Rpb25fdGVzdCcpO1xuICAgIGNvbnN0IGNvbmZpZyA9IGdldERiQ29uZmlnRnJvbUVudigpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgY29ubmVjdGVkOiByZXN1bHQucm93c1swXS5jb25uZWN0aW9uX3Rlc3QgPT09IDEsXG4gICAgICAvLyBPbmx5IGluY2x1ZGUgbm9uLXNlbnNpdGl2ZSBjb25maWd1cmF0aW9uIGRldGFpbHNcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBob3N0OiBjb25maWcuaG9zdCxcbiAgICAgICAgZGF0YWJhc2U6IGNvbmZpZy5kYXRhYmFzZSxcbiAgICAgICAgcG9ydDogY29uZmlnLnBvcnQsXG4gICAgICAgIHNzbDogY29uZmlnLnNzbCA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCdcbiAgICAgIH0sXG4gICAgICBkYXRhYmFzZTogJ2F3c19yZHMnXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBjb25maWcgPSBnZXREYkNvbmZpZ0Zyb21FbnYoKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAvLyBPbmx5IGluY2x1ZGUgbm9uLXNlbnNpdGl2ZSBjb25maWd1cmF0aW9uIGRldGFpbHNcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBob3N0OiBjb25maWcuaG9zdCxcbiAgICAgICAgZGF0YWJhc2U6IGNvbmZpZy5kYXRhYmFzZSxcbiAgICAgICAgcG9ydDogY29uZmlnLnBvcnQsXG4gICAgICAgIHNzbDogY29uZmlnLnNzbCA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCdcbiAgICAgIH0sXG4gICAgICBkYXRhYmFzZTogJ2F3c19yZHMnXG4gICAgfTtcbiAgfSBmaW5hbGx5IHtcbiAgICBpZiAocG9vbCkgYXdhaXQgcG9vbC5lbmQoKTtcbiAgfVxufSAiXSwibmFtZXMiOlsiY3JlYXRlU2VydmVyTG9nZ2VyIiwibG9nZ2VyIiwiREJfREVGQVVMVFMiLCJwb3J0IiwiZGF0YWJhc2UiLCJjb25uZWN0aW9uVGltZW91dE1pbGxpcyIsInN0YXRlbWVudF90aW1lb3V0IiwibWF4IiwiaWRsZVRpbWVvdXRNaWxsaXMiLCJnZXREYkNvbmZpZ0Zyb21FbnYiLCJpbmZvIiwidXNlU1NMIiwicHJvY2VzcyIsImVudiIsIkRCX1VTRV9TU0wiLCJjb25maWciLCJ1c2VyIiwiUkRTX1VTRVJOQU1FIiwiREJfVVNFUiIsIkRKQU5HT19EQl9VU0VSIiwicGFzc3dvcmQiLCJSRFNfUEFTU1dPUkQiLCJEQl9QQVNTV09SRCIsIkRKQU5HT19EQl9QQVNTV09SRCIsImhvc3QiLCJSRFNfSE9TVE5BTUUiLCJEQl9IT1NUIiwiREpBTkdPX0RCX0hPU1QiLCJwYXJzZUludCIsIlJEU19QT1JUIiwiREJfUE9SVCIsIkRKQU5HT19EQl9QT1JUIiwiUkRTX0RCX05BTUUiLCJEQl9OQU1FIiwiREpBTkdPX0RCX05BTUUiLCJzc2wiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJjYSIsIlNTTF9DRVJUX1BBVEgiLCJ1bmRlZmluZWQiLCJjcmVhdGVEYlBvb2wiLCJQb29sIiwicmVxdWlyZSIsInBvb2wiLCJvbiIsImVyciIsImVycm9yIiwibWVzc2FnZSIsImNvZGUiLCJzZXZlcml0eSIsImRldGFpbCIsImhpbnQiLCJ3aGVyZSIsInN0YWNrIiwidGVzdERiQ29ubmVjdGlvbiIsInJlc3VsdCIsInF1ZXJ5Iiwic3VjY2VzcyIsImNvbm5lY3RlZCIsInJvd3MiLCJjb25uZWN0aW9uX3Rlc3QiLCJlbmQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/db-config.js\n");

/***/ }),

/***/ "(rsc)/./src/utils/logger-stub.js":
/*!**********************************!*\
  !*** ./src/utils/logger-stub.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   debug: () => (/* binding */ debug),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   error: () => (/* binding */ error),\n/* harmony export */   info: () => (/* binding */ info),\n/* harmony export */   log: () => (/* binding */ log),\n/* harmony export */   logger: () => (/* binding */ logger),\n/* harmony export */   warn: () => (/* binding */ warn)\n/* harmony export */ });\n// This is a universal logger implementation that works in both client and server environments\n// without dependencies on external logging libraries\n// Simple logger implementation with console fallbacks\nconst createLogger = (namespace)=>{\n    // Safe log function that handles errors and circular references\n    const safeLog = (level, ...args)=>{\n        try {\n            // Convert complex objects to safe strings (avoiding circular references)\n            const safeArgs = args.map((arg)=>{\n                if (typeof arg === 'object' && arg !== null) {\n                    try {\n                        return JSON.stringify(arg);\n                    } catch (e) {\n                        return `[Complex object: ${Object.keys(arg).join(', ')}]`;\n                    }\n                }\n                return arg;\n            });\n            // Format: [namespace] message args...\n            console[level](`[${namespace}]`, ...safeArgs);\n        } catch (e) {\n            // Last-resort fallback\n            try {\n                console.log(`[ERROR] Logger failed:`, e.message);\n            } catch  {\n            // Nothing we can do at this point\n            }\n        }\n    };\n    // Create the logger object with all standard methods\n    return {\n        debug: (...args)=>safeLog('log', ...args),\n        info: (...args)=>safeLog('info', ...args),\n        warn: (...args)=>safeLog('warn', ...args),\n        error: (...args)=>safeLog('error', ...args),\n        log: (...args)=>safeLog('log', ...args)\n    };\n};\n// Create a default logger instance\nconst defaultLogger = createLogger('pyfactor');\n// Export the logger object\nconst logger = defaultLogger;\n// Also export individual functions\nconst { debug, info, warn, error, log } = defaultLogger;\n// For CommonJS compatibility\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    logger,\n    debug,\n    info,\n    warn,\n    error,\n    log,\n    createLogger\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbHMvbG9nZ2VyLXN0dWIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLDhGQUE4RjtBQUM5RixxREFBcUQ7QUFFckQsc0RBQXNEO0FBQ3RELE1BQU1BLGVBQWUsQ0FBQ0M7SUFDcEIsZ0VBQWdFO0lBQ2hFLE1BQU1DLFVBQVUsQ0FBQ0MsT0FBTyxHQUFHQztRQUN6QixJQUFJO1lBQ0YseUVBQXlFO1lBQ3pFLE1BQU1DLFdBQVdELEtBQUtFLEdBQUcsQ0FBQ0MsQ0FBQUE7Z0JBQ3hCLElBQUksT0FBT0EsUUFBUSxZQUFZQSxRQUFRLE1BQU07b0JBQzNDLElBQUk7d0JBQ0YsT0FBT0MsS0FBS0MsU0FBUyxDQUFDRjtvQkFDeEIsRUFBRSxPQUFPRyxHQUFHO3dCQUNWLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRUMsT0FBT0MsSUFBSSxDQUFDTCxLQUFLTSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQzNEO2dCQUNGO2dCQUNBLE9BQU9OO1lBQ1Q7WUFFQSxzQ0FBc0M7WUFDdENPLE9BQU8sQ0FBQ1gsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFRixVQUFVLENBQUMsQ0FBQyxLQUFLSTtRQUN0QyxFQUFFLE9BQU9LLEdBQUc7WUFDVix1QkFBdUI7WUFDdkIsSUFBSTtnQkFDRkksUUFBUUMsR0FBRyxDQUFDLENBQUMsc0JBQXNCLENBQUMsRUFBRUwsRUFBRU0sT0FBTztZQUNqRCxFQUFFLE9BQU07WUFDTixrQ0FBa0M7WUFDcEM7UUFDRjtJQUNGO0lBRUEscURBQXFEO0lBQ3JELE9BQU87UUFDTEMsT0FBTyxDQUFDLEdBQUdiLE9BQVNGLFFBQVEsVUFBVUU7UUFDdENjLE1BQU0sQ0FBQyxHQUFHZCxPQUFTRixRQUFRLFdBQVdFO1FBQ3RDZSxNQUFNLENBQUMsR0FBR2YsT0FBU0YsUUFBUSxXQUFXRTtRQUN0Q2dCLE9BQU8sQ0FBQyxHQUFHaEIsT0FBU0YsUUFBUSxZQUFZRTtRQUN4Q1csS0FBSyxDQUFDLEdBQUdYLE9BQVNGLFFBQVEsVUFBVUU7SUFDdEM7QUFDRjtBQUVBLG1DQUFtQztBQUNuQyxNQUFNaUIsZ0JBQWdCckIsYUFBYTtBQUVuQywyQkFBMkI7QUFDcEIsTUFBTXNCLFNBQVNELGNBQWM7QUFFcEMsbUNBQW1DO0FBQzVCLE1BQU0sRUFBRUosS0FBSyxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFTCxHQUFHLEVBQUUsR0FBR00sY0FBYztBQUUvRCw2QkFBNkI7QUFDN0IsaUVBQWU7SUFDYkM7SUFDQUw7SUFDQUM7SUFDQUM7SUFDQUM7SUFDQUw7SUFDQWY7QUFDRixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9rdW9sZGVuZy9wcm9qZWN0eC9mcm9udGVuZC9weWZhY3Rvcl9uZXh0L3NyYy91dGlscy9sb2dnZXItc3R1Yi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGlzIGEgdW5pdmVyc2FsIGxvZ2dlciBpbXBsZW1lbnRhdGlvbiB0aGF0IHdvcmtzIGluIGJvdGggY2xpZW50IGFuZCBzZXJ2ZXIgZW52aXJvbm1lbnRzXG4vLyB3aXRob3V0IGRlcGVuZGVuY2llcyBvbiBleHRlcm5hbCBsb2dnaW5nIGxpYnJhcmllc1xuXG4vLyBTaW1wbGUgbG9nZ2VyIGltcGxlbWVudGF0aW9uIHdpdGggY29uc29sZSBmYWxsYmFja3NcbmNvbnN0IGNyZWF0ZUxvZ2dlciA9IChuYW1lc3BhY2UpID0+IHtcbiAgLy8gU2FmZSBsb2cgZnVuY3Rpb24gdGhhdCBoYW5kbGVzIGVycm9ycyBhbmQgY2lyY3VsYXIgcmVmZXJlbmNlc1xuICBjb25zdCBzYWZlTG9nID0gKGxldmVsLCAuLi5hcmdzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENvbnZlcnQgY29tcGxleCBvYmplY3RzIHRvIHNhZmUgc3RyaW5ncyAoYXZvaWRpbmcgY2lyY3VsYXIgcmVmZXJlbmNlcylcbiAgICAgIGNvbnN0IHNhZmVBcmdzID0gYXJncy5tYXAoYXJnID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gYFtDb21wbGV4IG9iamVjdDogJHtPYmplY3Qua2V5cyhhcmcpLmpvaW4oJywgJyl9XWA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcmc7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gRm9ybWF0OiBbbmFtZXNwYWNlXSBtZXNzYWdlIGFyZ3MuLi5cbiAgICAgIGNvbnNvbGVbbGV2ZWxdKGBbJHtuYW1lc3BhY2V9XWAsIC4uLnNhZmVBcmdzKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBMYXN0LXJlc29ydCBmYWxsYmFja1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coYFtFUlJPUl0gTG9nZ2VyIGZhaWxlZDpgLCBlLm1lc3NhZ2UpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIC8vIE5vdGhpbmcgd2UgY2FuIGRvIGF0IHRoaXMgcG9pbnRcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gQ3JlYXRlIHRoZSBsb2dnZXIgb2JqZWN0IHdpdGggYWxsIHN0YW5kYXJkIG1ldGhvZHNcbiAgcmV0dXJuIHtcbiAgICBkZWJ1ZzogKC4uLmFyZ3MpID0+IHNhZmVMb2coJ2xvZycsIC4uLmFyZ3MpLFxuICAgIGluZm86ICguLi5hcmdzKSA9PiBzYWZlTG9nKCdpbmZvJywgLi4uYXJncyksXG4gICAgd2FybjogKC4uLmFyZ3MpID0+IHNhZmVMb2coJ3dhcm4nLCAuLi5hcmdzKSxcbiAgICBlcnJvcjogKC4uLmFyZ3MpID0+IHNhZmVMb2coJ2Vycm9yJywgLi4uYXJncyksXG4gICAgbG9nOiAoLi4uYXJncykgPT4gc2FmZUxvZygnbG9nJywgLi4uYXJncylcbiAgfTtcbn07XG5cbi8vIENyZWF0ZSBhIGRlZmF1bHQgbG9nZ2VyIGluc3RhbmNlXG5jb25zdCBkZWZhdWx0TG9nZ2VyID0gY3JlYXRlTG9nZ2VyKCdweWZhY3RvcicpO1xuXG4vLyBFeHBvcnQgdGhlIGxvZ2dlciBvYmplY3RcbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBkZWZhdWx0TG9nZ2VyO1xuXG4vLyBBbHNvIGV4cG9ydCBpbmRpdmlkdWFsIGZ1bmN0aW9uc1xuZXhwb3J0IGNvbnN0IHsgZGVidWcsIGluZm8sIHdhcm4sIGVycm9yLCBsb2cgfSA9IGRlZmF1bHRMb2dnZXI7XG5cbi8vIEZvciBDb21tb25KUyBjb21wYXRpYmlsaXR5XG5leHBvcnQgZGVmYXVsdCB7XG4gIGxvZ2dlcixcbiAgZGVidWcsXG4gIGluZm8sXG4gIHdhcm4sXG4gIGVycm9yLFxuICBsb2csXG4gIGNyZWF0ZUxvZ2dlclxufTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVMb2dnZXIiLCJuYW1lc3BhY2UiLCJzYWZlTG9nIiwibGV2ZWwiLCJhcmdzIiwic2FmZUFyZ3MiLCJtYXAiLCJhcmciLCJKU09OIiwic3RyaW5naWZ5IiwiZSIsIk9iamVjdCIsImtleXMiLCJqb2luIiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2UiLCJkZWJ1ZyIsImluZm8iLCJ3YXJuIiwiZXJyb3IiLCJkZWZhdWx0TG9nZ2VyIiwibG9nZ2VyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/logger-stub.js\n");

/***/ }),

/***/ "(rsc)/./src/utils/serverLogger.js":
/*!***********************************!*\
  !*** ./src/utils/serverLogger.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createContextualServerLogger: () => (/* binding */ createContextualServerLogger),\n/* harmony export */   createServerLogger: () => (/* binding */ createServerLogger),\n/* harmony export */   debug: () => (/* binding */ debug),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   error: () => (/* binding */ error),\n/* harmony export */   info: () => (/* binding */ info),\n/* harmony export */   logger: () => (/* binding */ logger),\n/* harmony export */   serverLogger: () => (/* binding */ serverLogger),\n/* harmony export */   warn: () => (/* binding */ warn)\n/* harmony export */ });\n// Server-side logger implementation\n// This file should be imported in API routes instead of the client-side logger\n/**\n * Server-side logger utility\n * \n * This logger is specifically designed for server components and API routes\n * where the client-side logger with browser-specific APIs can't be used.\n */ /**\n * Format log prefix to include timestamp and context\n */ function formatPrefix(level, context = {}) {\n    const timestamp = new Date().toISOString();\n    const tenantId = context.tenantId || 'no-tenant';\n    return `[${timestamp}] [SERVER:${level}] [${tenantId}]`;\n}\n/**\n * Server logger instance with standard logging methods\n */ const serverLogger = {\n    /**\n   * Log at DEBUG level\n   */ debug: (message, data, context = {})=>{\n        const prefix = formatPrefix('DEBUG', context);\n        if (data !== undefined) {\n            console.debug(`${prefix} ${message}`, data);\n        } else {\n            console.debug(`${prefix} ${message}`);\n        }\n    },\n    /**\n   * Log at INFO level\n   */ info: (message, data, context = {})=>{\n        const prefix = formatPrefix('INFO', context);\n        if (data !== undefined) {\n            console.info(`${prefix} ${message}`, data);\n        } else {\n            console.info(`${prefix} ${message}`);\n        }\n    },\n    /**\n   * Log at WARN level\n   */ warn: (message, data, context = {})=>{\n        const prefix = formatPrefix('WARN', context);\n        if (data !== undefined) {\n            console.warn(`${prefix} ${message}`, data);\n        } else {\n            console.warn(`${prefix} ${message}`);\n        }\n    },\n    /**\n   * Log at ERROR level\n   */ error: (message, data, context = {})=>{\n        const prefix = formatPrefix('ERROR', context);\n        if (data !== undefined) {\n            console.error(`${prefix} ${message}`, data);\n        } else {\n            console.error(`${prefix} ${message}`);\n        }\n    }\n};\n/**\n * Create a contextualized server logger with pre-bound context\n */ function createContextualServerLogger(context = {}) {\n    return {\n        debug: (message, data)=>serverLogger.debug(message, data, context),\n        info: (message, data)=>serverLogger.info(message, data, context),\n        warn: (message, data)=>serverLogger.warn(message, data, context),\n        error: (message, data)=>serverLogger.error(message, data, context)\n    };\n}\n/**\n * Legacy function for backward compatibility with existing imports\n * Creates a logger with a namespace\n */ function createServerLogger(namespace = 'API') {\n    return {\n        debug: (message, ...args)=>serverLogger.debug(`[${namespace}] ${message}`, args.length ? args[0] : undefined),\n        info: (message, ...args)=>serverLogger.info(`[${namespace}] ${message}`, args.length ? args[0] : undefined),\n        warn: (message, ...args)=>serverLogger.warn(`[${namespace}] ${message}`, args.length ? args[0] : undefined),\n        error: (message, ...args)=>serverLogger.error(`[${namespace}] ${message}`, args.length ? args[0] : undefined),\n        log: (message, ...args)=>serverLogger.info(`[${namespace}] ${message}`, args.length ? args[0] : undefined)\n    };\n}\n// Create a default server logger instance for compatibility with existing imports\nconst logger = createServerLogger('API');\n// Export individual functions directly from serverLogger for convenience\nconst debug = serverLogger.debug;\nconst info = serverLogger.info;\nconst warn = serverLogger.warn;\nconst error = serverLogger.error;\n// For CommonJS compatibility\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    serverLogger,\n    logger,\n    debug,\n    info,\n    warn,\n    error,\n    createContextualServerLogger,\n    createServerLogger\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBUyxHQUFHVyxPQUFTYixhQUFhTyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUVLLFVBQVUsRUFBRSxFQUFFVixTQUFTLEVBQUVXLEtBQUtDLE1BQU0sR0FBR0QsSUFBSSxDQUFDLEVBQUUsR0FBR1I7UUFDbkdHLE1BQU0sQ0FBQ04sU0FBUyxHQUFHVyxPQUFTYixhQUFhUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUVJLFVBQVUsRUFBRSxFQUFFVixTQUFTLEVBQUVXLEtBQUtDLE1BQU0sR0FBR0QsSUFBSSxDQUFDLEVBQUUsR0FBR1I7UUFDbkdJLE9BQU8sQ0FBQ1AsU0FBUyxHQUFHVyxPQUFTYixhQUFhUyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUVHLFVBQVUsRUFBRSxFQUFFVixTQUFTLEVBQUVXLEtBQUtDLE1BQU0sR0FBR0QsSUFBSSxDQUFDLEVBQUUsR0FBR1I7UUFDckdVLEtBQUssQ0FBQ2IsU0FBUyxHQUFHVyxPQUFTYixhQUFhTyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUVLLFVBQVUsRUFBRSxFQUFFVixTQUFTLEVBQUVXLEtBQUtDLE1BQU0sR0FBR0QsSUFBSSxDQUFDLEVBQUUsR0FBR1I7SUFDcEc7QUFDRjtBQUVBLGtGQUFrRjtBQUMzRSxNQUFNVyxTQUFTTCxtQkFBbUIsT0FBTztBQUVoRCx5RUFBeUU7QUFDbEUsTUFBTVYsUUFBUUQsYUFBYUMsS0FBSyxDQUFDO0FBQ2pDLE1BQU1NLE9BQU9QLGFBQWFPLElBQUksQ0FBQztBQUMvQixNQUFNQyxPQUFPUixhQUFhUSxJQUFJLENBQUM7QUFDL0IsTUFBTUMsUUFBUVQsYUFBYVMsS0FBSyxDQUFDO0FBRXhDLDZCQUE2QjtBQUM3QixpRUFBZTtJQUNiVDtJQUNBZ0I7SUFDQWY7SUFDQU07SUFDQUM7SUFDQUM7SUFDQUM7SUFDQUM7QUFDRixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9rdW9sZGVuZy9wcm9qZWN0eC9mcm9udGVuZC9weWZhY3Rvcl9uZXh0L3NyYy91dGlscy9zZXJ2ZXJMb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2VydmVyLXNpZGUgbG9nZ2VyIGltcGxlbWVudGF0aW9uXG4vLyBUaGlzIGZpbGUgc2hvdWxkIGJlIGltcG9ydGVkIGluIEFQSSByb3V0ZXMgaW5zdGVhZCBvZiB0aGUgY2xpZW50LXNpZGUgbG9nZ2VyXG5cbi8qKlxuICogU2VydmVyLXNpZGUgbG9nZ2VyIHV0aWxpdHlcbiAqIFxuICogVGhpcyBsb2dnZXIgaXMgc3BlY2lmaWNhbGx5IGRlc2lnbmVkIGZvciBzZXJ2ZXIgY29tcG9uZW50cyBhbmQgQVBJIHJvdXRlc1xuICogd2hlcmUgdGhlIGNsaWVudC1zaWRlIGxvZ2dlciB3aXRoIGJyb3dzZXItc3BlY2lmaWMgQVBJcyBjYW4ndCBiZSB1c2VkLlxuICovXG5cbi8qKlxuICogRm9ybWF0IGxvZyBwcmVmaXggdG8gaW5jbHVkZSB0aW1lc3RhbXAgYW5kIGNvbnRleHRcbiAqL1xuZnVuY3Rpb24gZm9ybWF0UHJlZml4KGxldmVsLCBjb250ZXh0ID0ge30pIHtcbiAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICBjb25zdCB0ZW5hbnRJZCA9IGNvbnRleHQudGVuYW50SWQgfHwgJ25vLXRlbmFudCc7XG4gIHJldHVybiBgWyR7dGltZXN0YW1wfV0gW1NFUlZFUjoke2xldmVsfV0gWyR7dGVuYW50SWR9XWA7XG59XG5cbi8qKlxuICogU2VydmVyIGxvZ2dlciBpbnN0YW5jZSB3aXRoIHN0YW5kYXJkIGxvZ2dpbmcgbWV0aG9kc1xuICovXG5leHBvcnQgY29uc3Qgc2VydmVyTG9nZ2VyID0ge1xuICAvKipcbiAgICogTG9nIGF0IERFQlVHIGxldmVsXG4gICAqL1xuICBkZWJ1ZzogKG1lc3NhZ2UsIGRhdGEsIGNvbnRleHQgPSB7fSkgPT4ge1xuICAgIGNvbnN0IHByZWZpeCA9IGZvcm1hdFByZWZpeCgnREVCVUcnLCBjb250ZXh0KTtcbiAgICBpZiAoZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKGAke3ByZWZpeH0gJHttZXNzYWdlfWAsIGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmRlYnVnKGAke3ByZWZpeH0gJHttZXNzYWdlfWApO1xuICAgIH1cbiAgfSxcbiAgXG4gIC8qKlxuICAgKiBMb2cgYXQgSU5GTyBsZXZlbFxuICAgKi9cbiAgaW5mbzogKG1lc3NhZ2UsIGRhdGEsIGNvbnRleHQgPSB7fSkgPT4ge1xuICAgIGNvbnN0IHByZWZpeCA9IGZvcm1hdFByZWZpeCgnSU5GTycsIGNvbnRleHQpO1xuICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnNvbGUuaW5mbyhgJHtwcmVmaXh9ICR7bWVzc2FnZX1gLCBkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5pbmZvKGAke3ByZWZpeH0gJHttZXNzYWdlfWApO1xuICAgIH1cbiAgfSxcbiAgXG4gIC8qKlxuICAgKiBMb2cgYXQgV0FSTiBsZXZlbFxuICAgKi9cbiAgd2FybjogKG1lc3NhZ2UsIGRhdGEsIGNvbnRleHQgPSB7fSkgPT4ge1xuICAgIGNvbnN0IHByZWZpeCA9IGZvcm1hdFByZWZpeCgnV0FSTicsIGNvbnRleHQpO1xuICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnNvbGUud2FybihgJHtwcmVmaXh9ICR7bWVzc2FnZX1gLCBkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKGAke3ByZWZpeH0gJHttZXNzYWdlfWApO1xuICAgIH1cbiAgfSxcbiAgXG4gIC8qKlxuICAgKiBMb2cgYXQgRVJST1IgbGV2ZWxcbiAgICovXG4gIGVycm9yOiAobWVzc2FnZSwgZGF0YSwgY29udGV4dCA9IHt9KSA9PiB7XG4gICAgY29uc3QgcHJlZml4ID0gZm9ybWF0UHJlZml4KCdFUlJPUicsIGNvbnRleHQpO1xuICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYCR7cHJlZml4fSAke21lc3NhZ2V9YCwgZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYCR7cHJlZml4fSAke21lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIGNvbnRleHR1YWxpemVkIHNlcnZlciBsb2dnZXIgd2l0aCBwcmUtYm91bmQgY29udGV4dFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29udGV4dHVhbFNlcnZlckxvZ2dlcihjb250ZXh0ID0ge30pIHtcbiAgcmV0dXJuIHtcbiAgICBkZWJ1ZzogKG1lc3NhZ2UsIGRhdGEpID0+IHNlcnZlckxvZ2dlci5kZWJ1ZyhtZXNzYWdlLCBkYXRhLCBjb250ZXh0KSxcbiAgICBpbmZvOiAobWVzc2FnZSwgZGF0YSkgPT4gc2VydmVyTG9nZ2VyLmluZm8obWVzc2FnZSwgZGF0YSwgY29udGV4dCksXG4gICAgd2FybjogKG1lc3NhZ2UsIGRhdGEpID0+IHNlcnZlckxvZ2dlci53YXJuKG1lc3NhZ2UsIGRhdGEsIGNvbnRleHQpLFxuICAgIGVycm9yOiAobWVzc2FnZSwgZGF0YSkgPT4gc2VydmVyTG9nZ2VyLmVycm9yKG1lc3NhZ2UsIGRhdGEsIGNvbnRleHQpXG4gIH07XG59XG5cbi8qKlxuICogTGVnYWN5IGZ1bmN0aW9uIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHdpdGggZXhpc3RpbmcgaW1wb3J0c1xuICogQ3JlYXRlcyBhIGxvZ2dlciB3aXRoIGEgbmFtZXNwYWNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXJ2ZXJMb2dnZXIobmFtZXNwYWNlID0gJ0FQSScpIHtcbiAgcmV0dXJuIHtcbiAgICBkZWJ1ZzogKG1lc3NhZ2UsIC4uLmFyZ3MpID0+IHNlcnZlckxvZ2dlci5kZWJ1ZyhgWyR7bmFtZXNwYWNlfV0gJHttZXNzYWdlfWAsIGFyZ3MubGVuZ3RoID8gYXJnc1swXSA6IHVuZGVmaW5lZCksXG4gICAgaW5mbzogKG1lc3NhZ2UsIC4uLmFyZ3MpID0+IHNlcnZlckxvZ2dlci5pbmZvKGBbJHtuYW1lc3BhY2V9XSAke21lc3NhZ2V9YCwgYXJncy5sZW5ndGggPyBhcmdzWzBdIDogdW5kZWZpbmVkKSxcbiAgICB3YXJuOiAobWVzc2FnZSwgLi4uYXJncykgPT4gc2VydmVyTG9nZ2VyLndhcm4oYFske25hbWVzcGFjZX1dICR7bWVzc2FnZX1gLCBhcmdzLmxlbmd0aCA/IGFyZ3NbMF0gOiB1bmRlZmluZWQpLFxuICAgIGVycm9yOiAobWVzc2FnZSwgLi4uYXJncykgPT4gc2VydmVyTG9nZ2VyLmVycm9yKGBbJHtuYW1lc3BhY2V9XSAke21lc3NhZ2V9YCwgYXJncy5sZW5ndGggPyBhcmdzWzBdIDogdW5kZWZpbmVkKSxcbiAgICBsb2c6IChtZXNzYWdlLCAuLi5hcmdzKSA9PiBzZXJ2ZXJMb2dnZXIuaW5mbyhgWyR7bmFtZXNwYWNlfV0gJHttZXNzYWdlfWAsIGFyZ3MubGVuZ3RoID8gYXJnc1swXSA6IHVuZGVmaW5lZClcbiAgfTtcbn1cblxuLy8gQ3JlYXRlIGEgZGVmYXVsdCBzZXJ2ZXIgbG9nZ2VyIGluc3RhbmNlIGZvciBjb21wYXRpYmlsaXR5IHdpdGggZXhpc3RpbmcgaW1wb3J0c1xuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IGNyZWF0ZVNlcnZlckxvZ2dlcignQVBJJyk7XG5cbi8vIEV4cG9ydCBpbmRpdmlkdWFsIGZ1bmN0aW9ucyBkaXJlY3RseSBmcm9tIHNlcnZlckxvZ2dlciBmb3IgY29udmVuaWVuY2VcbmV4cG9ydCBjb25zdCBkZWJ1ZyA9IHNlcnZlckxvZ2dlci5kZWJ1ZztcbmV4cG9ydCBjb25zdCBpbmZvID0gc2VydmVyTG9nZ2VyLmluZm87XG5leHBvcnQgY29uc3Qgd2FybiA9IHNlcnZlckxvZ2dlci53YXJuO1xuZXhwb3J0IGNvbnN0IGVycm9yID0gc2VydmVyTG9nZ2VyLmVycm9yO1xuXG4vLyBGb3IgQ29tbW9uSlMgY29tcGF0aWJpbGl0eVxuZXhwb3J0IGRlZmF1bHQge1xuICBzZXJ2ZXJMb2dnZXIsXG4gIGxvZ2dlcixcbiAgZGVidWcsIFxuICBpbmZvLFxuICB3YXJuLFxuICBlcnJvcixcbiAgY3JlYXRlQ29udGV4dHVhbFNlcnZlckxvZ2dlcixcbiAgY3JlYXRlU2VydmVyTG9nZ2VyXG59OyAiXSwibmFtZXMiOlsiZm9ybWF0UHJlZml4IiwibGV2ZWwiLCJjb250ZXh0IiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidGVuYW50SWQiLCJzZXJ2ZXJMb2dnZXIiLCJkZWJ1ZyIsIm1lc3NhZ2UiLCJkYXRhIiwicHJlZml4IiwidW5kZWZpbmVkIiwiY29uc29sZSIsImluZm8iLCJ3YXJuIiwiZXJyb3IiLCJjcmVhdGVDb250ZXh0dWFsU2VydmVyTG9nZ2VyIiwiY3JlYXRlU2VydmVyTG9nZ2VyIiwibmFtZXNwYWNlIiwiYXJncyIsImxlbmd0aCIsImxvZyIsImxvZ2dlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/serverLogger.js\n");

/***/ }),

/***/ "(rsc)/./src/utils/uuid-helpers.js":
/*!***********************************!*\
  !*** ./src/utils/uuid-helpers.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cleanUuid: () => (/* binding */ cleanUuid),\n/* harmony export */   extractUuid: () => (/* binding */ extractUuid),\n/* harmony export */   isUUID: () => (/* binding */ isUUID),\n/* harmony export */   validateAndRepairUuid: () => (/* binding */ validateAndRepairUuid)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/validate.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/version.js\");\n/* harmony import */ var _serverLogger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./serverLogger */ \"(rsc)/./src/utils/serverLogger.js\");\n/**\n * UUID validation and repair utilities\n * Used across all services for consistent UUID handling\n */ \n\n// Create logger for this module\nconst logger = (0,_serverLogger__WEBPACK_IMPORTED_MODULE_0__.createServerLogger)('uuid-helpers');\n/**\n * Check if a string is a valid UUID\n * @param {string} uuid - UUID to validate\n * @param {number} version - UUID version to validate against (defaults to 4)\n * @returns {boolean} Whether the UUID is valid\n */ function isUUID(uuid, version = 4) {\n    if (!uuid) return false;\n    try {\n        return (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(uuid) && (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(uuid) === version;\n    } catch (error) {\n        logger.warn(`Failed to validate UUID: ${uuid}`, {\n            error: error.message\n        });\n        return false;\n    }\n}\n/**\n * Validates a UUID and attempts to repair common issues\n * @param {string} uuid - UUID string that might need repair\n * @returns {string} Repaired UUID or original if already valid\n */ function validateAndRepairUuid(uuid) {\n    if (!uuid) return uuid;\n    // If already valid, return as is\n    if (isUUID(uuid)) {\n        return uuid;\n    }\n    let repairedUuid = uuid;\n    try {\n        // Replace underscores with hyphens (common issue)\n        if (uuid.includes('_')) {\n            repairedUuid = uuid.replace(/_/g, '-');\n            logger.info('Repaired UUID:', {\n                original: uuid,\n                repaired: repairedUuid\n            });\n            // Check if repair worked\n            if (isUUID(repairedUuid)) {\n                return repairedUuid;\n            }\n        }\n        // Check for missing hyphens in standard positions\n        if (uuid.length === 32) {\n            repairedUuid = [\n                uuid.slice(0, 8),\n                uuid.slice(8, 12),\n                uuid.slice(12, 16),\n                uuid.slice(16, 20),\n                uuid.slice(20)\n            ].join('-');\n            logger.info('Added hyphens to UUID:', {\n                original: uuid,\n                repaired: repairedUuid\n            });\n            // Check if repair worked\n            if (isUUID(repairedUuid)) {\n                return repairedUuid;\n            }\n        }\n        // If UUID is not valid even after repair attempts, log warning\n        if (!isUUID(repairedUuid)) {\n            logger.warn(`Could not repair invalid UUID: ${uuid}`);\n            // Return original to avoid data corruption\n            return uuid;\n        }\n        return repairedUuid;\n    } catch (error) {\n        logger.error(`Error repairing UUID: ${uuid}`, {\n            error: error.message\n        });\n        // Return original to avoid data corruption\n        return uuid;\n    }\n}\n/**\n * Clean a UUID by enforcing standard format\n * @param {string} uuid - UUID to clean\n * @returns {string} Cleaned UUID\n */ function cleanUuid(uuid) {\n    if (!uuid) return null;\n    try {\n        // Attempt to repair first\n        const repairedUuid = validateAndRepairUuid(uuid);\n        // Convert to lowercase\n        return repairedUuid.toLowerCase();\n    } catch (error) {\n        logger.error(`Error cleaning UUID: ${uuid}`, {\n            error: error.message\n        });\n        // Return null for invalid UUIDs\n        return null;\n    }\n}\n/**\n * Extract a valid UUID from a string that might contain other text\n * @param {string} text - Text that might contain a UUID\n * @returns {string|null} Extracted UUID or null if not found\n */ function extractUuid(text) {\n    if (!text) return null;\n    try {\n        // UUID v4 regex pattern\n        const uuidPattern = /([0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})/i;\n        const match = text.match(uuidPattern);\n        if (match && match[1]) {\n            return match[1].toLowerCase();\n        }\n        return null;\n    } catch (error) {\n        logger.error(`Error extracting UUID from text: ${text}`, {\n            error: error.message\n        });\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1lBQ3JCLE9BQU9BLEtBQUssQ0FBQyxFQUFFLENBQUNKLFdBQVc7UUFDN0I7UUFFQSxPQUFPO0lBQ1QsRUFBRSxPQUFPZCxPQUFPO1FBQ2RILE9BQU9HLEtBQUssQ0FBQyxDQUFDLGlDQUFpQyxFQUFFZ0IsTUFBTSxFQUFFO1lBQUVoQixPQUFPQSxNQUFNRSxPQUFPO1FBQUM7UUFDaEYsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9rdW9sZGVuZy9wcm9qZWN0eC9mcm9udGVuZC9weWZhY3Rvcl9uZXh0L3NyYy91dGlscy91dWlkLWhlbHBlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVVUlEIHZhbGlkYXRpb24gYW5kIHJlcGFpciB1dGlsaXRpZXNcbiAqIFVzZWQgYWNyb3NzIGFsbCBzZXJ2aWNlcyBmb3IgY29uc2lzdGVudCBVVUlEIGhhbmRsaW5nXG4gKi9cbmltcG9ydCB7IHZhbGlkYXRlIGFzIHV1aWRWYWxpZGF0ZSwgdmVyc2lvbiBhcyB1dWlkVmVyc2lvbiB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgY3JlYXRlU2VydmVyTG9nZ2VyIH0gZnJvbSAnLi9zZXJ2ZXJMb2dnZXInO1xuXG4vLyBDcmVhdGUgbG9nZ2VyIGZvciB0aGlzIG1vZHVsZVxuY29uc3QgbG9nZ2VyID0gY3JlYXRlU2VydmVyTG9nZ2VyKCd1dWlkLWhlbHBlcnMnKTtcblxuLyoqXG4gKiBDaGVjayBpZiBhIHN0cmluZyBpcyBhIHZhbGlkIFVVSURcbiAqIEBwYXJhbSB7c3RyaW5nfSB1dWlkIC0gVVVJRCB0byB2YWxpZGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHZlcnNpb24gLSBVVUlEIHZlcnNpb24gdG8gdmFsaWRhdGUgYWdhaW5zdCAoZGVmYXVsdHMgdG8gNClcbiAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRoZSBVVUlEIGlzIHZhbGlkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1VVSUQodXVpZCwgdmVyc2lvbiA9IDQpIHtcbiAgaWYgKCF1dWlkKSByZXR1cm4gZmFsc2U7XG4gIFxuICB0cnkge1xuICAgIHJldHVybiB1dWlkVmFsaWRhdGUodXVpZCkgJiYgdXVpZFZlcnNpb24odXVpZCkgPT09IHZlcnNpb247XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byB2YWxpZGF0ZSBVVUlEOiAke3V1aWR9YCwgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgYSBVVUlEIGFuZCBhdHRlbXB0cyB0byByZXBhaXIgY29tbW9uIGlzc3Vlc1xuICogQHBhcmFtIHtzdHJpbmd9IHV1aWQgLSBVVUlEIHN0cmluZyB0aGF0IG1pZ2h0IG5lZWQgcmVwYWlyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXBhaXJlZCBVVUlEIG9yIG9yaWdpbmFsIGlmIGFscmVhZHkgdmFsaWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQW5kUmVwYWlyVXVpZCh1dWlkKSB7XG4gIGlmICghdXVpZCkgcmV0dXJuIHV1aWQ7XG4gIFxuICAvLyBJZiBhbHJlYWR5IHZhbGlkLCByZXR1cm4gYXMgaXNcbiAgaWYgKGlzVVVJRCh1dWlkKSkge1xuICAgIHJldHVybiB1dWlkO1xuICB9XG4gIFxuICBsZXQgcmVwYWlyZWRVdWlkID0gdXVpZDtcbiAgXG4gIHRyeSB7XG4gICAgLy8gUmVwbGFjZSB1bmRlcnNjb3JlcyB3aXRoIGh5cGhlbnMgKGNvbW1vbiBpc3N1ZSlcbiAgICBpZiAodXVpZC5pbmNsdWRlcygnXycpKSB7XG4gICAgICByZXBhaXJlZFV1aWQgPSB1dWlkLnJlcGxhY2UoL18vZywgJy0nKTtcbiAgICAgIGxvZ2dlci5pbmZvKCdSZXBhaXJlZCBVVUlEOicsIHtcbiAgICAgICAgb3JpZ2luYWw6IHV1aWQsXG4gICAgICAgIHJlcGFpcmVkOiByZXBhaXJlZFV1aWRcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiByZXBhaXIgd29ya2VkXG4gICAgICBpZiAoaXNVVUlEKHJlcGFpcmVkVXVpZCkpIHtcbiAgICAgICAgcmV0dXJuIHJlcGFpcmVkVXVpZDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIG1pc3NpbmcgaHlwaGVucyBpbiBzdGFuZGFyZCBwb3NpdGlvbnNcbiAgICBpZiAodXVpZC5sZW5ndGggPT09IDMyKSB7XG4gICAgICByZXBhaXJlZFV1aWQgPSBbXG4gICAgICAgIHV1aWQuc2xpY2UoMCwgOCksXG4gICAgICAgIHV1aWQuc2xpY2UoOCwgMTIpLFxuICAgICAgICB1dWlkLnNsaWNlKDEyLCAxNiksXG4gICAgICAgIHV1aWQuc2xpY2UoMTYsIDIwKSxcbiAgICAgICAgdXVpZC5zbGljZSgyMClcbiAgICAgIF0uam9pbignLScpO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbygnQWRkZWQgaHlwaGVucyB0byBVVUlEOicsIHtcbiAgICAgICAgb3JpZ2luYWw6IHV1aWQsXG4gICAgICAgIHJlcGFpcmVkOiByZXBhaXJlZFV1aWRcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiByZXBhaXIgd29ya2VkXG4gICAgICBpZiAoaXNVVUlEKHJlcGFpcmVkVXVpZCkpIHtcbiAgICAgICAgcmV0dXJuIHJlcGFpcmVkVXVpZDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gSWYgVVVJRCBpcyBub3QgdmFsaWQgZXZlbiBhZnRlciByZXBhaXIgYXR0ZW1wdHMsIGxvZyB3YXJuaW5nXG4gICAgaWYgKCFpc1VVSUQocmVwYWlyZWRVdWlkKSkge1xuICAgICAgbG9nZ2VyLndhcm4oYENvdWxkIG5vdCByZXBhaXIgaW52YWxpZCBVVUlEOiAke3V1aWR9YCk7XG4gICAgICAvLyBSZXR1cm4gb3JpZ2luYWwgdG8gYXZvaWQgZGF0YSBjb3JydXB0aW9uXG4gICAgICByZXR1cm4gdXVpZDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlcGFpcmVkVXVpZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoYEVycm9yIHJlcGFpcmluZyBVVUlEOiAke3V1aWR9YCwgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICAvLyBSZXR1cm4gb3JpZ2luYWwgdG8gYXZvaWQgZGF0YSBjb3JydXB0aW9uXG4gICAgcmV0dXJuIHV1aWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhbiBhIFVVSUQgYnkgZW5mb3JjaW5nIHN0YW5kYXJkIGZvcm1hdFxuICogQHBhcmFtIHtzdHJpbmd9IHV1aWQgLSBVVUlEIHRvIGNsZWFuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBDbGVhbmVkIFVVSURcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuVXVpZCh1dWlkKSB7XG4gIGlmICghdXVpZCkgcmV0dXJuIG51bGw7XG4gIFxuICB0cnkge1xuICAgIC8vIEF0dGVtcHQgdG8gcmVwYWlyIGZpcnN0XG4gICAgY29uc3QgcmVwYWlyZWRVdWlkID0gdmFsaWRhdGVBbmRSZXBhaXJVdWlkKHV1aWQpO1xuICAgIFxuICAgIC8vIENvbnZlcnQgdG8gbG93ZXJjYXNlXG4gICAgcmV0dXJuIHJlcGFpcmVkVXVpZC50b0xvd2VyQ2FzZSgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgY2xlYW5pbmcgVVVJRDogJHt1dWlkfWAsIHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgLy8gUmV0dXJuIG51bGwgZm9yIGludmFsaWQgVVVJRHNcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEV4dHJhY3QgYSB2YWxpZCBVVUlEIGZyb20gYSBzdHJpbmcgdGhhdCBtaWdodCBjb250YWluIG90aGVyIHRleHRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gVGV4dCB0aGF0IG1pZ2h0IGNvbnRhaW4gYSBVVUlEXG4gKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IEV4dHJhY3RlZCBVVUlEIG9yIG51bGwgaWYgbm90IGZvdW5kXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0VXVpZCh0ZXh0KSB7XG4gIGlmICghdGV4dCkgcmV0dXJuIG51bGw7XG4gIFxuICB0cnkge1xuICAgIC8vIFVVSUQgdjQgcmVnZXggcGF0dGVyblxuICAgIGNvbnN0IHV1aWRQYXR0ZXJuID0gLyhbMC05YS1mXXs4fS1bMC05YS1mXXs0fS00WzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9KS9pO1xuICAgIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaCh1dWlkUGF0dGVybik7XG4gICAgXG4gICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgICByZXR1cm4gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG51bGw7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKGBFcnJvciBleHRyYWN0aW5nIFVVSUQgZnJvbSB0ZXh0OiAke3RleHR9YCwgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufSAiXSwibmFtZXMiOlsidmFsaWRhdGUiLCJ1dWlkVmFsaWRhdGUiLCJ2ZXJzaW9uIiwidXVpZFZlcnNpb24iLCJjcmVhdGVTZXJ2ZXJMb2dnZXIiLCJsb2dnZXIiLCJpc1VVSUQiLCJ1dWlkIiwiZXJyb3IiLCJ3YXJuIiwibWVzc2FnZSIsInZhbGlkYXRlQW5kUmVwYWlyVXVpZCIsInJlcGFpcmVkVXVpZCIsImluY2x1ZGVzIiwicmVwbGFjZSIsImluZm8iLCJvcmlnaW5hbCIsInJlcGFpcmVkIiwibGVuZ3RoIiwic2xpY2UiLCJqb2luIiwiY2xlYW5VdWlkIiwidG9Mb3dlckNhc2UiLCJleHRyYWN0VXVpZCIsInRleHQiLCJ1dWlkUGF0dGVybiIsIm1hdGNoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/uuid-helpers.js\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*******************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*******************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("pg");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1","vendor-chunks/@aws-amplify+core@6.11.1","vendor-chunks/tslib@2.8.1","vendor-chunks/@aws-crypto+sha256-js@5.2.0","vendor-chunks/@aws-crypto+util@5.2.0","vendor-chunks/@smithy+util-utf8@2.3.0","vendor-chunks/@smithy+util-buffer-from@2.2.0","vendor-chunks/@smithy+is-array-buffer@2.2.0","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/../../node_modules/.pnpm/next@15.2.2_@babel+core@7.26.10_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftenant%2Fschema-manager%2Froute&page=%2Fapi%2Ftenant%2Fschema-manager%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftenant%2Fschema-manager%2Froute.js&appDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkuoldeng%2Fprojectx%2Ffrontend%2Fpyfactor_next&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();